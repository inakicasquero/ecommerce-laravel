var lG={exports:{}};(function(iT){(function(){var hv=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},lT=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},wg=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Sg=function(e,n){return ud(function(o,r){return e.eq(n(o),n(r))})},ud=function(e){return{eq:e}},xg=ud(function(e,n){return e===n}),xn=xg,Bc=function(e){return ud(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},aC=function(e,n){return Sg(Bc(e),function(o){return wg(o,n)})},ml=function(e){return ud(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!aC(xn).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},fu=ud(function(e,n){if(e===n)return!0;var o=hv(e),r=hv(n);return o!==r?!1:lT(o)?e===n:o==="array"?Bc(fu).eq(e,n):o==="object"?ml(fu).eq(e,n):!1});const fl=Object.getPrototypeOf,ca=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Ni=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&ca(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},ir=e=>n=>Ni(n)===e,mt=e=>n=>typeof n===e,gl=e=>n=>e===n,gu=(e,n)=>Sn(e)&&ca(e,n,(o,r)=>fl(o)===r),K=ir("string"),Sn=ir("object"),vp=e=>gu(e,Object),On=ir("array"),Q=gl(null),en=mt("boolean"),Ns=gl(void 0),dn=e=>e==null,Ce=e=>!dn(e),G=mt("function"),Ma=mt("number"),An=(e,n)=>{if(On(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},pt=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),Fo=(e,n)=>o=>e(n(o)),Le=e=>()=>e,Eo=e=>e,Dt=(e,n)=>e===n;function Ee(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Io=e=>n=>!e(n),Ba=e=>()=>{throw new Error(e)},Lo=e=>e(),Zr=e=>{e()},we=Le(!1),qe=Le(!0);class N{constructor(n,o){this.tag=n,this.value=o}static some(n){return new N(!0,n)}static none(){return N.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?N.some(n(this.value)):N.none()}bind(n){return this.tag?n(this.value):N.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:N.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ce(n)?N.some(n):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const Dm=Array.prototype.slice,Yn=Array.prototype.indexOf,rs=Array.prototype.push,eo=(e,n)=>Yn.call(e,n),uT=(e,n)=>{const o=eo(e,n);return o===-1?N.none():N.some(o)},Bt=(e,n)=>eo(e,n)>-1,mo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Ft=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},be=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},hu=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Er=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},ft=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},dd=(e,n,o)=>(hu(e,(r,c)=>{o=n(o,r,c)}),o),Ro=(e,n,o)=>(be(e,(r,c)=>{o=n(o,r,c)}),o),yp=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return N.some(u);if(o(u,r))break}return N.none()},Ho=(e,n)=>yp(e,n,we),ia=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return N.some(o)}return N.none()},Cp=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!On(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);rs.apply(n,e[o])}return n},Pi=(e,n)=>Cp(Ft(e,n)),Ws=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},bo=e=>{const n=Dm.call(e,0);return n.reverse(),n},wp=(e,n)=>ft(e,o=>!Bt(n,o)),ys=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},vo=(e,n)=>{const o=Dm.call(e,0);return o.sort(n),o},Eg=(e,n)=>n>=0&&n<e.length?N.some(e[n]):N.none(),Tr=e=>Eg(e,0),pu=e=>Eg(e,e.length-1),kr=G(Array.from)?Array.from:e=>Dm.call(e),md=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return N.none()},Sp=(e,n)=>{const o=[],r=G(n)?c=>mo(o,u=>n(u,c)):c=>Bt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},jr=Object.keys,pv=Object.hasOwnProperty,Ze=(e,n)=>{const o=jr(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},wn=(e,n)=>oc(e,(o,r)=>({k:r,v:n(o,r)})),oc=(e,n)=>{const o={};return Ze(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Na=e=>(n,o)=>{e[o]=n},xp=(e,n,o,r)=>{Ze(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},fd=(e,n)=>{const o={},r={};return xp(e,n,Na(o),Na(r)),{t:o,f:r}},ro=(e,n)=>{const o={};return xp(e,n,Na(o),pt),o},gd=(e,n)=>{const o=[];return Ze(e,(r,c)=>{o.push(n(r,c))}),o},Rm=e=>gd(e,Eo),to=(e,n)=>kt(e,n)?N.from(e[n]):N.none(),kt=(e,n)=>pv.call(e,n),la=(e,n)=>kt(e,n)&&e[n]!==void 0&&e[n]!==null,hd=(e,n,o=fu)=>ml(o).eq(e,n),Ep=e=>{const n={};return be(e,o=>{n[o]={}}),jr(n)},bv=e=>e.length!==void 0,ua=Array.isArray,lr=e=>{if(ua(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},as=(e,n,o)=>{if(!e)return!1;if(o=o||e,bv(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(kt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},$i=(e,n)=>{const o=[];return as(e,(r,c)=>{o.push(n(r,c,e))}),o},Tp=(e,n)=>{const o=[];return as(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},bu=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},sc=(e,n,o,r)=>{let c=Ns(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Vo=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Nc=e=>e[e.length-1],pd=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},dT=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,A=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,O=!x&&!y&&!A;return{isiPad:Le(c),isiPhone:Le(u),isTablet:Le(y),isPhone:Le(x),isTouch:Le(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Le(A),isDesktop:Le(O)}},mT=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},hl=(e,n)=>{const o=mT(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return da(r(1),r(2))},oF=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?te():hl(e,o)},te=()=>da(0,0),da=(e,n)=>({major:e,minor:n}),Mm={nu:da,detect:oF,unknown:te},cC=(e,n)=>md(n.brands,o=>{const r=o.brand.toLowerCase();return Ho(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Mm.nu(parseInt(o.version,10),0)}))}),vv=(e,n)=>{const o=String(n).toLowerCase();return Ho(e,r=>r.search(o))},no=(e,n)=>vv(e,n).map(o=>{const r=Mm.detect(o.versionRegexes,n);return{current:o.name,version:r}}),yv=(e,n)=>vv(e,n).map(o=>{const r=Mm.detect(o.versionRegexes,n);return{current:o.name,version:r}}),fT=(e,n)=>e.substring(n),Tg=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Bm=(e,n)=>_s(e,n)?fT(e,n.length):e,Zs=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Ns(r)?!0:c+n.length<=r:!1},_s=(e,n)=>Tg(e,n,0),pl=(e,n)=>Tg(e,n,e.length-n.length),Pc=e=>n=>n.replace(e,""),bd=Pc(/^\s+|\s+$/g),kg=Pc(/^\s+/g),Nm=Pc(/\s+$/g),Pn=e=>e.length>0,Pa=e=>!Pn(e),gT=(e,n)=>n<=0?"":new Array(n+1).join(e),vd=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?N.none():N.some(o)},vu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rc=e=>n=>Zs(n,e),Mo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Zs(e,"edge/")&&Zs(e,"chrome")&&Zs(e,"safari")&&Zs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,vu],search:e=>Zs(e,"chrome")&&!Zs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Zs(e,"msie")||Zs(e,"trident")},{name:"Opera",versionRegexes:[vu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rc("firefox")},{name:"Safari",versionRegexes:[vu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Zs(e,"safari")||Zs(e,"mobile/"))&&Zs(e,"applewebkit")}],hT=[{name:"Windows",search:rc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Zs(e,"iphone")||Zs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rc("linux"),versionRegexes:[]},{name:"Solaris",search:rc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],iC={browsers:Le(Mo),oses:Le(hT)},$n="Edge",ac="Chromium",$a="IE",js="Opera",kp="Firefox",yd="Safari",ci=()=>ma({current:void 0,version:Mm.unknown()}),ma=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r($n),isChromium:r(ac),isIE:r($a),isOpera:r(js),isFirefox:r(kp),isSafari:r(yd)}},Cv={unknown:ci,nu:ma,edge:Le($n),chromium:Le(ac),ie:Le($a),opera:Le(js),firefox:Le(kp),safari:Le(yd)},wv="Windows",lC="iOS",ii="Android",yu="Linux",Sv="macOS",xv="Solaris",_p="FreeBSD",Op="ChromeOS",uC=()=>Ap({current:void 0,version:Mm.unknown()}),Ap=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(wv),isiOS:r(lC),isAndroid:r(ii),isMacOS:r(Sv),isLinux:r(yu),isSolaris:r(xv),isFreeBSD:r(_p),isChromeOS:r(Op)}},ur={unknown:uC,nu:Ap,windows:Le(wv),ios:Le(lC),android:Le(ii),linux:Le(yu),macos:Le(Sv),solaris:Le(xv),freebsd:Le(_p),chromeos:Le(Op)},Cd={detect:(e,n,o)=>{const r=iC.browsers(),c=iC.oses(),u=n.bind(y=>cC(r,y)).orThunk(()=>no(r,e)).fold(Cv.unknown,Cv.nu),f=yv(c,e).fold(ur.unknown,ur.nu),b=dT(f,u,e,o);return{browser:u,os:f,deviceType:b}}},Ev=e=>window.matchMedia(e).matches;let dC=pd(()=>Cd.detect(navigator.userAgent,N.from(navigator.userAgentData),Ev));const Fi=()=>dC(),pT=navigator.userAgent,fa=Fi(),qs=fa.browser,Ii=fa.os,Cu=fa.deviceType,Vt=pT.indexOf("Windows Phone")!==-1,gn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:qs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!qs.isIE(),windowsPhone:Vt,browser:{current:qs.current,version:qs.version,isChromium:qs.isChromium,isEdge:qs.isEdge,isFirefox:qs.isFirefox,isIE:qs.isIE,isOpera:qs.isOpera,isSafari:qs.isSafari},os:{current:Ii.current,version:Ii.version,isAndroid:Ii.isAndroid,isChromeOS:Ii.isChromeOS,isFreeBSD:Ii.isFreeBSD,isiOS:Ii.isiOS,isLinux:Ii.isLinux,isMacOS:Ii.isMacOS,isSolaris:Ii.isSolaris,isWindows:Ii.isWindows},deviceType:{isDesktop:Cu.isDesktop,isiPad:Cu.isiPad,isiPhone:Cu.isiPhone,isPhone:Cu.isPhone,isTablet:Cu.isTablet,isTouch:Cu.isTouch,isWebView:Cu.isWebView}},dr=/^\s*|\s*$/g,jo=e=>dn(e)?"":(""+e).replace(dr,""),mC=(e,n)=>n?n==="array"&&ua(e)?!0:typeof e===n:e!==void 0,zo=(e,n,o={})=>{const r=K(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},bT=kt,Tv=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(kt(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Dp=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),as(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Dp(c,n,o,r),!0)))},Te={trim:jo,isArray:ua,is:mC,toArray:lr,makeMap:zo,each:as,map:$i,grep:Tp,inArray:bu,hasOwn:bT,extend:Tv,walk:Dp,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>On(e)?e:e===""?[]:$i(e.split(n||","),jo),_addCacheSuffix:e=>{const n=gn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},li=(e,n,o=Dt)=>e.exists(r=>o(r,n)),Cs=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},_r=(e,n,o)=>e.isSome()&&n.isSome()?N.some(o(e.getOrDie(),n.getOrDie())):N.none(),fC=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?N.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):N.none(),sn=(e,n)=>e?N.some(n):N.none(),wd=typeof window<"u"?window:Function("return this;")(),Pm=(e,n)=>{let o=n??wd;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ws=(e,n)=>{const o=e.split(".");return Pm(o,n)},Go=(e,n)=>ws(e,n),bl=(e,n)=>{const o=Go(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},vT=Object.getPrototypeOf,Rp=e=>bl("HTMLElement",e),ao=e=>{const n=ws("ownerDocument.defaultView",e);return Sn(e)&&(Rp(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(vT(e).constructor.name))},ga=8,$m=9,Gr=11,Fm=1,_g=3,oo=e=>e.dom.nodeName.toLowerCase(),Or=e=>e.dom.nodeType,ha=e=>n=>Or(n)===e,gC=e=>Or(e)===ga||oo(e)==="#comment",Li=e=>jn(e)&&ao(e.dom),jn=ha(Fm),Ar=ha(_g),Sd=ha($m),hC=ha(Gr),Im=e=>n=>jn(n)&&oo(n)===e,ui=(e,n,o)=>{if(K(o)||en(o)||Ma(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},qo=(e,n,o)=>{ui(e.dom,n,o)},qr=(e,n)=>{const o=e.dom;Ze(n,(r,c)=>{ui(o,c,r)})},Kr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},di=(e,n)=>N.from(Kr(e,n)),Og=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Ko=(e,n)=>{e.dom.removeAttribute(n)},cc=e=>{const n=e.dom.attributes;return n==null||n.length===0},Mp=e=>Ro(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Lm=(e,n)=>{const o=Kr(e,n);return o===void 0||o===""?[]:o.split(" ")},Bp=(e,n,o)=>{const c=Lm(e,n).concat([o]);return qo(e,n,c.join(" ")),!0},pC=(e,n,o)=>{const r=ft(Lm(e,n),c=>c!==o);return r.length>0?qo(e,n,r.join(" ")):Ko(e,n),!1},xd=e=>e.dom.classList!==void 0,Su=e=>Lm(e,"class"),Ag=(e,n)=>Bp(e,"class",n),Yr=(e,n)=>pC(e,"class",n),kv=(e,n)=>Bt(Su(e),n)?Yr(e,n):Ag(e,n),Ed=(e,n)=>{xd(e)?e.dom.classList.add(n):Ag(e,n)},Np=e=>{(xd(e)?e.dom.classList:Su(e)).length===0&&Ko(e,"class")},Td=(e,n)=>{xd(e)?e.dom.classList.remove(n):Yr(e,n),Np(e)},_v=(e,n)=>{const o=xd(e)?e.dom.classList.toggle(n):kv(e,n);return Np(e),o},Pp=(e,n)=>xd(e)&&e.dom.classList.contains(n),Hm=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Vm(r.childNodes[0])},bC=(e,n)=>{const r=(n||document).createElement(e);return Vm(r)},vC=(e,n)=>{const r=(n||document).createTextNode(e);return Vm(r)},Vm=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},W={fromHtml:Hm,fromTag:bC,fromText:vC,fromDom:Vm,fromPoint:(e,n,o)=>N.from(e.dom.elementFromPoint(n,o)).map(Vm)},$p=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Xr=(e,n)=>{const o=e.dom;if(o.nodeType!==Fm)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Ov=e=>e.nodeType!==Fm&&e.nodeType!==$m&&e.nodeType!==Gr||e.childElementCount===0,CT=(e,n)=>{const o=n===void 0?document:n.dom;return Ov(o)?[]:Ft(o.querySelectorAll(e),W.fromDom)},wT=(e,n)=>{const o=n===void 0?document:n.dom;return Ov(o)?N.none():N.from(o.querySelector(e)).map(W.fromDom)},En=(e,n)=>e.dom===n.dom,mi=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},mr=e=>W.fromDom(e.dom.ownerDocument),vl=e=>Sd(e)?e:mr(e),yC=e=>W.fromDom(vl(e).dom.documentElement),zm=e=>W.fromDom(vl(e).dom.defaultView),Fa=e=>N.from(e.dom.parentNode).map(W.fromDom),Fp=e=>N.from(e.dom.parentElement).map(W.fromDom),Av=(e,n)=>{const o=G(n)?n:we;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=W.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},CC=e=>{const n=o=>ft(o,r=>!En(e,r));return Fa(e).map(Ps).map(n).getOr([])},Fc=e=>N.from(e.dom.previousSibling).map(W.fromDom),Um=e=>N.from(e.dom.nextSibling).map(W.fromDom),wC=e=>bo($p(e,Fc)),Ia=e=>$p(e,Um),Ps=e=>Ft(e.dom.childNodes,W.fromDom),xu=(e,n)=>{const o=e.dom.childNodes;return N.from(o[n]).map(W.fromDom)},Wm=e=>xu(e,0),Ic=e=>xu(e,e.dom.childNodes.length-1),pa=e=>e.dom.childNodes.length,Dv=e=>e.dom.hasChildNodes(),SC=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return W.fromDom(n)},Dg=e=>hC(e)&&Ce(e.dom.host),Ip=G(Element.prototype.attachShadow)&&G(Node.prototype.getRootNode),Rv=Le(Ip),Hi=Ip?e=>W.fromDom(e.dom.getRootNode()):vl,Lp=e=>Dg(e)?e:SC(vl(e)),sF=e=>Dg(e)?e:W.fromDom(vl(e).dom.body),QA=e=>{const n=Hi(e);return Dg(n)?N.some(n):N.none()},ST=e=>W.fromDom(e.dom.host),Hp=e=>{if(Rv()&&Ce(e.target)){const n=W.fromDom(e.target);if(jn(n)&&xC(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Tr(o)}}return N.from(e.target)},xC=e=>Ce(e.dom.shadowRoot),kd=e=>{const n=Ar(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return QA(W.fromDom(n)).fold(()=>o.body.contains(n),Fo(kd,ST))};var cs=(e,n,o,r,c)=>e(o,r)?N.some(o):G(c)&&c(o)?N.none():n(o,r,c);const Xn=(e,n,o)=>{let r=e.dom;const c=G(o)?o:we;for(;r.parentNode;){r=r.parentNode;const u=W.fromDom(r);if(n(u))return N.some(u);if(c(u))break}return N.none()},ic=(e,n,o)=>cs((c,u)=>u(c),Xn,e,n,o),Mv=(e,n)=>{const o=e.dom;return o.parentNode?xT(W.fromDom(o.parentNode),r=>!En(e,r)&&n(r)):N.none()},xT=(e,n)=>{const o=c=>n(W.fromDom(c));return Ho(e.dom.childNodes,o).map(W.fromDom)},Dr=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=W.fromDom(r.childNodes[c]);if(n(u))return N.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return N.none()};return o(e.dom)},Rg=(e,n,o)=>Xn(e,r=>Xr(r,n),o),_d=(e,n)=>wT(n,e),Jr=(e,n,o)=>cs((c,u)=>Xr(c,u),Rg,e,n,o),EC=e=>Jr(e,"[contenteditable]"),Nt=(e,n=!1)=>kd(e)?e.dom.isContentEditable:EC(e).fold(Le(n),o=>lc(o)==="true"),lc=e=>e.dom.contentEditable,yl=e=>e.style!==void 0&&G(e.style.getPropertyValue),Bv=(e,n,o)=>{if(!K(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);yl(e)&&e.style.setProperty(n,o)},Mg=(e,n)=>{yl(e)&&e.style.removeProperty(n)},Nv=(e,n,o)=>{const r=e.dom;Bv(r,n,o)},Vp=(e,n)=>{const o=e.dom;Ze(n,(r,c)=>{Bv(o,c,r)})},Os=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!kd(e)?Qr(o,n):c},Qr=(e,n)=>yl(e)?e.style.getPropertyValue(n):"",ea=(e,n)=>{const o=e.dom,r=Qr(o,n);return N.from(r).filter(c=>c.length>0)},Ks=e=>{const n={},o=e.dom;if(yl(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},TC=(e,n)=>{const o=e.dom;Mg(o,n),li(di(e,"style").map(bd),"")&&Ko(e,"style")},yo=e=>e.dom.offsetWidth,ba=(e,n)=>{Fa(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},La=(e,n)=>{Um(e).fold(()=>{Fa(e).each(c=>{Yo(c,n)})},r=>{ba(r,n)})},Zm=(e,n)=>{Wm(e).fold(()=>{Yo(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Yo=(e,n)=>{e.dom.appendChild(n.dom)},kC=(e,n)=>{ba(e,n),Yo(n,e)},Pv=(e,n)=>{be(n,(o,r)=>{const c=r===0?e:n[r-1];La(c,o)})},Vn=(e,n)=>{be(n,o=>{Yo(e,o)})},Eu=e=>{e.dom.textContent="",be(Ps(e),n=>{Tn(n)})},Tn=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},fi=e=>{const n=Ps(e);n.length>0&&Pv(e,n),Tn(e)},$v=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Ps(W.fromDom(r))},zp=e=>Ft(e,W.fromDom),Fv=e=>e.dom.innerHTML,Gt=(e,n)=>{const r=mr(e).dom,c=W.fromDom(r.createDocumentFragment()),u=$v(n,r);Vn(c,u),Eu(e),Yo(e,c)},Iv=e=>{const n=W.fromTag("div"),o=W.fromDom(e.dom.cloneNode(!0));return Yo(n,o),Fv(n)},Lv=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),ET=e=>{const n=W.fromDom(Hp(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=k(r,o);return Lv(n,e.clientX,e.clientY,o,r,c,e)},eD=(e,n)=>o=>{e(o)&&n(ET(o))},Hv=(e,n,o,r,c)=>{const u=eD(o,r);return e.dom.addEventListener(n,u,c),{unbind:Ee(_C,e,n,u,c)}},Vv=(e,n,o,r)=>Hv(e,n,o,r,!1),_C=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Tu=(e,n)=>({left:e,top:n,translate:(r,c)=>Tu(e+r,n+c)}),Od=Tu,TT=e=>{const n=e.getBoundingClientRect();return Od(n.left,n.top)},Bg=(e,n)=>e!==void 0?e:n!==void 0?n:0,Cl=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Od(o.offsetLeft,o.offsetTop);const u=Bg(r==null?void 0:r.pageYOffset,c.scrollTop),f=Bg(r==null?void 0:r.pageXOffset,c.scrollLeft),b=Bg(c.clientTop,o.clientTop),y=Bg(c.clientLeft,o.clientLeft);return zv(e).translate(f-y,u-b)},zv=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Od(r.offsetLeft,r.offsetTop):kd(e)?TT(n):Od(0,0)},gi=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Od(o,r)},Ad=(e,n)=>{Fi().browser.isSafari()&&G(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},kT=e=>{const n=e===void 0?window:e;return Fi().browser.isFirefox()?N.none():N.from(n.visualViewport)},Up=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Uv=e=>{const n=e===void 0?window:e,o=n.document,r=gi(W.fromDom(o));return kT(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Up(r.left,r.top,u,f)},c=>Up(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},OC=(e,n)=>ft(Ps(e),n),Wv=(e,n)=>{let o=[];return be(Ps(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Wv(r,n))}),o},Ys=(e,n)=>CT(n,e),Wp=(e,n,o)=>Rg(e,n,o).isSome();class Xo{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const $s=e=>n=>!!n&&n.nodeType===e,lt=e=>!!e&&!Object.getPrototypeOf(e),We=$s(1),Dd=e=>{const n=e.toLowerCase();return o=>Ce(o)&&o.nodeName.toLowerCase()===n},uc=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Bt(n,r)}return!1}},Zv=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(We(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},jv=e=>n=>We(n)&&n.hasAttribute(e),dc=(e,n)=>o=>We(o)&&o.getAttribute(e)===n,mc=e=>We(e)&&e.hasAttribute("data-mce-bogus"),Zp=e=>We(e)&&e.getAttribute("data-mce-bogus")==="all",fo=e=>We(e)&&e.tagName==="TABLE",jm=e=>n=>!!(We(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Ng=uc(["textarea","input"]),_e=$s(3),_T=$s(4),OT=$s(7),Ha=$s(8),Gm=$s(9),ku=$s(11),co=Dd("br"),AC=Dd("img"),kn=jm("true"),vn=jm("false"),Xs=uc(["td","th"]),qm=uc(["td","th","caption"]),Uo=uc(["video","audio","object","embed"]),Rd=Dd("li"),As=Dd("details"),Rr=Dd("summary"),wl="\uFEFF",me=" ",ta=e=>e===wl,DC=e=>e.replace(/\uFEFF/g,""),Lc=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?N.from(u.dom.nodeValue):N.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Ar,"text"),jp=e=>Lc.get(e),fc=e=>Lc.getOption(e),AT=(e,n)=>Lc.set(e,n),_u=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],RC=["td","th"],Va=["thead","tbody","tfoot"],bn=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Vi=["h1","h2","h3","h4","h5","h6"],Pg=["li","dd","dt"],Js=["ul","ol","dl"],Gp=["pre","script","textarea","style"],Ou=["pre"].concat(Vi),Sl=e=>{let n;return o=>(n=n||ys(e,qe),kt(n,oo(o)))},Bo=Sl(_u),Gv=e=>oo(e)==="table",oe=e=>jn(e)&&!Bo(e),Qs=e=>jn(e)&&oo(e)==="br",qp=Sl(bn),za=Sl(Js),va=Sl(Pg),Fs=Sl(Va),To=Sl(RC),Kp=Sl(Gp),Km=Sl(Ou),Au=e=>Km(e)||oe(e),gt=e=>{const n=[];let o=e.dom;for(;o;)n.push(W.fromDom(o)),o=o.lastChild;return n},tD=e=>{const n=Ys(e,"br"),o=ft(gt(e).slice(-1),Qs);n.length===o.length&&be(o,Tn)},ya=()=>{const e=W.fromTag("br");return qo(e,"data-mce-bogus","1"),e},Du=e=>{Eu(e),Yo(e,ya())},DT=e=>{Ic(e).each(n=>{Fc(n).each(o=>{Bo(e)&&Qs(n)&&Bo(o)&&Tn(n)})})},er=wl,Yp=ta,xl=DC,Ym=We,gc=_e,Ru=e=>(gc(e)&&(e=e.parentNode),Ym(e)&&e.hasAttribute("data-mce-caret")),El=e=>gc(e)&&Yp(e.data),hc=e=>Ru(e)||El(e),zi=e=>e.firstChild!==e.lastChild||!co(e.firstChild),MC=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(er),u=e.parentNode;if(n){const f=e.previousSibling;if(gc(f)){if(hc(f))return f;if($g(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(gc(f)){if(hc(f))return f;if(Ui(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Xm=e=>{const n=e.container();return _e(n)?n.data.charAt(e.offset())===er||e.isAtStart()&&El(n.previousSibling):!1},Xp=e=>{const n=e.container();return _e(n)?n.data.charAt(e.offset()-1)===er||e.isAtEnd()&&El(n.nextSibling):!1},BC=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(ya().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Ui=e=>gc(e)&&e.data[0]===er,$g=e=>gc(e)&&e.data[e.data.length-1]===er,RT=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];mc(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},qv=e=>e&&e.hasAttribute("data-mce-caret")?(RT(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Jp=e=>Ru(e.startContainer),ls=kn,Wi=vn,Jm=co,Md=_e,NC=uc(["script","style","textarea"]),Ua=uc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Qp=uc(["table"]),Fg=hc,Ca=e=>Fg(e)?!1:Md(e)?!NC(e.parentNode):Ua(e)||Jm(e)||Qp(e)||hi(e),Tl=e=>We(e)&&e.getAttribute("unselectable")==="true",hi=e=>!Tl(e)&&Wi(e),Mu=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(hi(o))return!1;if(ls(o))return!0}return!0},Hc=e=>hi(e)?!Ro(kr(e.getElementsByTagName("*")),(n,o)=>n||ls(o),!1):!1,PC=e=>Ua(e)||Hc(e),Bu=(e,n)=>Ca(e)&&Mu(e,n),Qm=/^[ \t\r\n]*$/,pc=e=>Qm.test(e),$C=e=>{for(const n of e)if(!ta(n))return!1;return!0},Ig=e=>" \f	\v".indexOf(e)!==-1,Kv=e=>e===`
`||e==="\r",Yv=(e,n)=>n<e.length&&n>=0?Kv(e[n]):!1,Co=(e,n=4,o=!0,r=!0)=>{const c=gT(" ",n),u=e.replace(/\t/g,c);return Ro(u,(b,y)=>Ig(y)||y===me?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Yv(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+me}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Kv(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},FC=(e,n)=>{const o=W.fromDom(n),r=W.fromDom(e);return Wp(r,"pre,code",Ee(En,o))},Zi=(e,n)=>_e(e)&&pc(e.data)&&!FC(e,n),ef=e=>We(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),pi=(e,n)=>Ca(e)&&!Zi(e,n)||ef(e)||bi(e),bi=jv("data-mce-bookmark"),Wa=jv("data-mce-bogus"),tf=dc("data-mce-bogus","all"),Lg=(e,n)=>{let o=0;if(pi(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new Xo(r,e);do{if(n){if(tf(r)){r=c.next(!0);continue}if(Wa(r)){r=c.next();continue}}if(co(r)){o++,r=c.next();continue}if(pi(r,e))return!1;r=c.next()}while(r);return o<=1}},Jo=(e,n=!0)=>Lg(e.dom,n),Bd="data-mce-block",Xv=e=>ft(jr(e),n=>!/[A-Z]/.test(n)),Nd=e=>Xv(e).join(","),nf=(e,n)=>Ce(n.querySelector(e))?(n.setAttribute(Bd,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Bd),!1),Jv=(e,n)=>{const o=Nd(e.getTransparentElements()),r=Nd(e.getBlockElements());return ft(n.querySelectorAll(o),c=>nf(r,c))},Pd=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(Jo(W.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},kl=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Pd(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Pd(u,!1),Jo(W.fromDom(c))||r.insertBefore(c,e),Jo(W.fromDom(n))||r.insertBefore(n,e),Jo(W.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},na=(e,n,o)=>{const r=e.getBlockElements(),c=W.fromDom(n),u=b=>oo(b)in r,f=b=>En(b,c);be(zp(o),b=>{Xn(b,u,f).each(y=>{const x=OC(b,A=>u(A)&&!e.isValidChild(oo(y),oo(A)));if(x.length>0){const A=Fp(y);be(x,O=>{Xn(O,u,f).each(B=>{kl(B.dom,O.dom)})}),A.each(O=>Jv(e,O.dom))}})})},_l=(e,n,o)=>{be([...o,...Nu(e,n)?[n]:[]],r=>be(Ys(W.fromDom(r),r.nodeName.toLowerCase()),c=>{IC(e,c.dom)&&fi(c)}))},ji=(e,n)=>{const o=Jv(e,n);na(e,n,o),_l(e,n,o)},Qv=(e,n)=>{if(of(e,n)){const o=Nd(e.getBlockElements());nf(o,n)}},e1=(e,n,o)=>{const r=u=>En(u,W.fromDom(n)),c=Av(W.fromDom(o),r);Eg(c,c.length-2).filter(jn).fold(()=>ji(e,n),u=>ji(e,u.dom))},Hg=e=>e.hasAttribute(Bd),t1=(e,n)=>kt(e.getTransparentElements(),n),of=(e,n)=>We(n)&&t1(e,n.nodeName),Nu=(e,n)=>of(e,n)&&Hg(n),IC=(e,n)=>of(e,n)&&!Hg(n),Vg=(e,n)=>n.type===1&&t1(e,n.name)&&K(n.attr(Bd)),hn=Fi().browser,at=e=>Ho(e,jn),$d=e=>hn.isFirefox()&&oo(e)==="table"?at(Ps(e)).filter(n=>oo(n)==="caption").bind(n=>at(Ia(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,n1=(e,n)=>e.children&&Bt(e.children,n),o1=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Os(W.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!n1(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!n1(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=$d(W.fromDom(n))}return{x:r,y:c}},e0=(e,n={})=>{let o=0;const r={},c=W.fromDom(e),u=vl(c),f=F=>{n.referrerPolicy=F},b=F=>{n.contentCssCors=F},y=F=>{Yo(Lp(c),F)},x=F=>{const V=Lp(c);_d(V,"#"+F).each(Tn)},A=F=>to(r,F).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),O=F=>new Promise((V,q)=>{let X;const J=Te._addCacheSuffix(F),se=A(J);r[J]=se,se.count++;const ye=(fe,Pe)=>{be(fe,Zr),se.status=Pe,se.passed=[],se.failed=[],X&&(X.onload=null,X.onerror=null,X=null)},tt=()=>ye(se.passed,2),xe=()=>ye(se.failed,3);if(V&&se.passed.push(V),q&&se.failed.push(q),se.status===1)return;if(se.status===2){tt();return}if(se.status===3){xe();return}se.status=1;const le=W.fromTag("link",u.dom);qr(le,{rel:"stylesheet",type:"text/css",id:se.id}),n.contentCssCors&&qo(le,"crossOrigin","anonymous"),n.referrerPolicy&&qo(le,"referrerpolicy",n.referrerPolicy),X=le.dom,X.onload=tt,X.onerror=xe,y(le),qo(le,"href",J)}),B=F=>Promise.allSettled(Ft(F,q=>O(q).then(Le(q)))).then(q=>{const X=Er(q,J=>J.status==="fulfilled");return X.fail.length>0?Promise.reject(Ft(X.fail,J=>J.reason)):Ft(X.pass,J=>J.value)}),L=F=>{const V=Te._addCacheSuffix(F);to(r,V).each(q=>{--q.count===0&&(delete r[V],x(q.id))})};return{load:O,loadAll:B,unload:L,unloadAll:F=>{be(F,V=>{L(V)})},_setReferrerPolicy:f,_setContentCssCors:b}},Fn=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Hi(o).dom;return N.from(e.get(u)).getOrThunk(()=>{const f=e0(u,r);return e.set(u,f),f})}}})(),s1=e=>e.nodeName.toLowerCase()==="span",LC=(e,n)=>Ce(e)&&(pi(e,n)||oe(W.fromDom(e))),zg=(e,n)=>{const o=new Xo(e,n).prev(!1),r=new Xo(e,n).next(!1),c=Ns(o)||LC(o,n),u=Ns(r)||LC(r,n);return c&&u},ve=e=>s1(e)&&e.getAttribute("data-mce-type")==="bookmark",sf=(e,n)=>_e(e)&&e.data.length>0&&zg(e,n),BT=e=>We(e)?e.childNodes.length>0:!1,r1=e=>ku(e)||Gm(e),t0=(e,n,o)=>{var r;const c=o||n;if(We(n)&&ve(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)t0(e,u[f],c);if(We(n)){const f=n.childNodes;f.length===1&&ve(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!r1(n)&&!pi(n,c)&&!BT(n)&&!sf(n,c)&&e.remove(n),n},rf=Te.makeMap,af=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NT=/[<>&\"\']/g,cf=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Gn={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},fr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},PT={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},vi=e=>{const n=W.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Ug=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!fr[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Fd=Ug("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Id=(e,n)=>e.replace(n?af:Gi,o=>fr[o]||o),HC=e=>(""+e).replace(NT,n=>fr[n]||n),VC=(e,n)=>e.replace(n?af:Gi,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":fr[o]||"&#"+o.charCodeAt(0)+";"),n0=(e,n,o)=>{const r=o||Fd;return e.replace(n?af:Gi,c=>fr[c]||r[c]||c)},Ol={encodeRaw:Id,encodeAllRaw:HC,encodeNumeric:VC,encodeNamed:n0,getEncodeFunc:(e,n)=>{const o=Ug(n)||Fd,r=(f,b)=>f.replace(b?af:Gi,y=>fr[y]!==void 0?fr[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>n0(f,b,o),u=rf(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:n0:u.numeric?VC:Id},decode:e=>e.replace(cf,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Gn[o]||String.fromCharCode(o)):PT[n]||Fd[n]||vi(n))},a1={},c1={},Wg={},je=Te.makeMap,gr=Te.each,Zg=Te.extend,zC=Te.explode,i1=Te.inArray,tr=(e,n)=>(e=Te.trim(e),e?e.split(n||" "):[]),l1=(e,n={})=>{const o=je(e," ",je(e.toUpperCase()," "));return Zg(o,n)},Vc=e=>l1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Al=e=>{const n={};let o,r,c,u;const f=(y,x="",A="")=>{const O=tr(A),B=tr(y);let L=B.length;for(;L--;){const z=tr([o,x].join(" "));n[B[L]]={attributes:ys(z,()=>({})),attributesOrder:z,children:ys(O,Le(Wg))}}},b=(y,x)=>{const A=tr(y),O=tr(x);let B=A.length;for(;B--;){const L=n[A[B]];for(let z=0,F=O.length;z<F;z++)L.attributes[O[z]]={},L.attributesOrder.push(O[z])}};if(a1[e])return a1[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),gr(tr(y),A=>{f(A,"",c)});const x="center dir isindex noframes";r=[r,x].join(" "),u=[r,c].join(" "),gr(tr(x),A=>{f(A,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("dd div","",u),f("address dt caption","",e==="html4"?c:u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?c:u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&be([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),gr(tr("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,a1[e]=n,n},o0=(e,n)=>{if(e){const o={};return K(e)&&(e={"*":e}),gr(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?je(r,/[, ]/):zC(r,/[, ]/)}),o}else return},yi=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(_t,nn,Ao)=>{const Hn=e[_t];if(Hn)return je(Hn,/[, ]/,je(Hn.toUpperCase(),/[, ]/));{let xo=c1[_t];return xo||(xo=l1(nn,Ao),c1[_t]=xo),xo}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=Al(y);e.verify_html===!1&&(e.valid_elements="*[*]");const A=o0(e.valid_styles),O=o0(e.invalid_styles,"map"),B=o0(e.valid_classes,"map"),L=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),z=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),F=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),V=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),q="td th iframe video audio object script code",X=b("non_empty_elements",q+" pre",F),J=b("move_caret_before_on_enter_elements",q+" table",F),se=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ye=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",se),tt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),xe=b("transparent_elements","a ins del canvas map");gr("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),_t=>{f[_t]=new RegExp("</"+_t+"[^>]*>","gi")});const le=_t=>new RegExp("^"+_t.replace(/([?+*])/g,".$1")+"$"),fe=_t=>{const nn=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Ao=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Hn=/[*?+]/;if(_t){const xo=tr(_t,",");let uo,Zn;o["@"]&&(uo=o["@"].attributes,Zn=o["@"].attributesOrder);for(let os=0,Sr=xo.length;os<Sr;os++){let xr=nn.exec(xo[os]);if(xr){const lu=xr[1],$o=xr[2],_m=xr[3],Ra=xr[5],uu={},cn=[],po={attributes:uu,attributesOrder:cn};if(lu==="#"&&(po.paddEmpty=!0),lu==="-"&&(po.removeEmpty=!0),xr[4]==="!"&&(po.removeEmptyAttrs=!0),uo&&(Ze(uo,(ec,ll)=>{uu[ll]=ec}),Zn&&cn.push(...Zn)),Ra){const ec=tr(Ra,"|");for(let ll=0,Ac=ec.length;ll<Ac;ll++)if(xr=Ao.exec(ec[ll]),xr){const Dc={},id=xr[1],cr=xr[2].replace(/[\\:]:/g,":"),Om=xr[3],du=xr[4];if(id==="!"&&(po.attributesRequired=po.attributesRequired||[],po.attributesRequired.push(cr),Dc.required=!0),id==="-"){delete uu[cr],cn.splice(i1(cn,cr),1);continue}if(Om&&(Om==="="&&(po.attributesDefault=po.attributesDefault||[],po.attributesDefault.push({name:cr,value:du}),Dc.defaultValue=du),Om==="~"&&(po.attributesForced=po.attributesForced||[],po.attributesForced.push({name:cr,value:du}),Dc.forcedValue=du),Om==="<"&&(Dc.validValues=je(du,"?"))),Hn.test(cr)){const Bi=Dc;po.attributePatterns=po.attributePatterns||[],Bi.pattern=le(cr),po.attributePatterns.push(Bi)}else uu[cr]||cn.push(cr),uu[cr]=Dc}}if(!uo&&$o==="@"&&(uo=uu,Zn=cn),_m&&(po.outputName=$o,o[_m]=po),Hn.test($o)){const ec=po;ec.pattern=le($o),c.push(ec)}else o[$o]=po}}}},Pe=_t=>{c=[],be(jr(o),nn=>{delete o[nn]}),fe(_t),gr(x,(nn,Ao)=>{r[Ao]=nn.children})},Ie=_t=>{const nn=/^(~)?(.+)$/;_t&&(delete c1.text_block_elements,delete c1.block_elements,gr(tr(_t,","),Ao=>{const Hn=nn.exec(Ao);if(Hn){const xo=Hn[1]==="~",uo=xo?"span":"div",Zn=Hn[2];if(r[Zn]=r[uo],u[Zn]=uo,X[Zn.toUpperCase()]={},X[Zn]={},xo||(ye[Zn.toUpperCase()]={},ye[Zn]={}),!o[Zn]){let os=o[uo];os=Zg({},os),delete os.removeEmptyAttrs,delete os.removeEmpty,o[Zn]=os}gr(r,(os,Sr)=>{os[uo]&&(r[Sr]=os=Zg({},r[Sr]),os[Zn]=os[uo])})}}))},Ye=_t=>{const nn=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete a1[y],_t&&gr(tr(_t,","),Ao=>{const Hn=nn.exec(Ao);if(Hn){const xo=Hn[1];let uo;xo?uo=r[Hn[2]]:uo=r[Hn[2]]={"#comment":{}},uo=r[Hn[2]],gr(tr(Hn[3],"|"),Zn=>{xo==="-"?delete uo[Zn]:uo[Zn]={}})}})},vt=_t=>{const nn=o[_t];if(nn)return nn;let Ao=c.length;for(;Ao--;){const Hn=c[Ao];if(Hn.pattern.test(_t))return Hn}};e.valid_elements?Pe(e.valid_elements):(gr(x,(_t,nn)=>{o[nn]={attributes:_t.attributes,attributesOrder:_t.attributesOrder},r[nn]=_t.children}),gr(tr("strong/b em/i"),_t=>{const nn=tr(_t,"/");o[nn[1]].outputName=nn[0]}),gr(tt,(_t,nn)=>{o[nn]&&(e.padd_empty_block_inline_children&&(o[nn].paddInEmptyBlock=!0),o[nn].removeEmpty=!0)}),gr(tr("ol ul blockquote a table tbody"),_t=>{o[_t]&&(o[_t].removeEmpty=!0)}),gr(tr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),_t=>{o[_t]&&(o[_t].paddEmpty=!0)}),gr(tr("span"),_t=>{o[_t].removeEmptyAttrs=!0})),Ie(e.custom_elements),Ye(e.valid_children),fe(e.extended_valid_elements),Ye("+ol[ul|ol],+ul[ul|ol]"),gr({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(_t,nn)=>{o[nn]&&(o[nn].parentsRequired=tr(_t))}),e.invalid_elements&&gr(zC(e.invalid_elements),_t=>{o[_t]&&delete o[_t]}),vt("span")||fe("span[!data-mce-type|*]");const yt=Le(A),rn=Le(O),fn=Le(B),Mn=Le(V),wr=Le(ye),ks=Le(se),Me=Le(tt),Je=Le(Object.seal(F)),un=Le(z),tn=Le(X),nt=Le(J),rt=Le(L),Ae=Le(xe),wt=Le(Object.seal(f)),Mt=(_t,nn)=>{const Ao=r[_t.toLowerCase()];return!!(Ao&&Ao[nn.toLowerCase()])},an=(_t,nn)=>{const Ao=vt(_t);if(Ao)if(nn){if(Ao.attributes[nn])return!0;const Hn=Ao.attributePatterns;if(Hn){let xo=Hn.length;for(;xo--;)if(Hn[xo].pattern.test(nn))return!0}}else return!0;return!1},Jn=Le(u);return{type:y,children:r,elements:o,getValidStyles:yt,getValidClasses:fn,getBlockElements:wr,getInvalidStyles:rn,getVoidElements:Je,getTextBlockElements:ks,getTextInlineElements:Me,getBoolAttrs:Mn,getElementRule:vt,getSelfClosingElements:un,getNonEmptyElements:tn,getMoveCaretBeforeOnEnterElements:nt,getWhitespaceElements:rt,getTransparentElements:Ae,getSpecialElements:wt,isValidChild:Mt,isValid:an,getCustomElements:Jn,addValidElements:fe,setValidElements:Pe,addCustomElements:Ie,addValidChildren:Ye}},s0=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=wl;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let O=0;O<x.length;O++)u[x[O]]=y+O,u[y+O]=x[O];const A={parse:O=>{const B={};let L=!1;const z=e.url_converter,F=e.url_converter_scope||A,V=(le,fe,Pe)=>{const Ie=B[le+"-top"+fe];if(!Ie)return;const Ye=B[le+"-right"+fe];if(!Ye)return;const vt=B[le+"-bottom"+fe];if(!vt)return;const yt=B[le+"-left"+fe];if(!yt)return;const rn=[Ie,Ye,vt,yt];let fn=rn.length-1;for(;fn--&&rn[fn]===rn[fn+1];);fn>-1&&Pe||(B[le+fe]=fn===-1?rn[0]:rn.join(" "),delete B[le+"-top"+fe],delete B[le+"-right"+fe],delete B[le+"-bottom"+fe],delete B[le+"-left"+fe])},q=le=>{const fe=B[le];if(!fe)return;const Pe=fe.split(" ");let Ie=Pe.length;for(;Ie--;)if(Pe[Ie]!==Pe[0])return!1;return B[le]=Pe[0],!0},X=(le,fe,Pe,Ie)=>{q(fe)&&q(Pe)&&q(Ie)&&(B[le]=B[fe]+" "+B[Pe]+" "+B[Ie],delete B[fe],delete B[Pe],delete B[Ie])},J=le=>(L=!0,u[le]),se=(le,fe)=>(L&&(le=le.replace(/\uFEFF[0-9]/g,Pe=>u[Pe])),fe||(le=le.replace(/\\([\'\";:])/g,"$1")),le),ye=le=>String.fromCharCode(parseInt(le.slice(1),16)),tt=le=>le.replace(/\\[0-9a-f]+/gi,ye),xe=(le,fe,Pe,Ie,Ye,vt)=>{if(Ye=Ye||vt,Ye)return Ye=se(Ye),"'"+Ye.replace(/\'/g,"\\'")+"'";if(fe=se(fe||Pe||Ie||""),!e.allow_script_urls){const yt=fe.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(yt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(yt))return""}return z&&(fe=z.call(F,fe,"style")),"url('"+fe.replace(/\'/g,"\\'")+"')"};if(O){O=O.replace(/[\u0000-\u001F]/g,""),O=O.replace(/\\[\"\';:\uFEFF]/g,J).replace(/\"[^\"]+\"|\'[^\']+\'/g,fe=>fe.replace(/[;:]/g,J));let le;for(;le=r.exec(O);){r.lastIndex=le.index+le[0].length;let fe=le[1].replace(c,"").toLowerCase(),Pe=le[2].replace(c,"");if(fe&&Pe){if(fe=tt(fe),Pe=tt(Pe),fe.indexOf(y)!==-1||fe.indexOf('"')!==-1||!e.allow_script_urls&&(fe==="behavior"||/expression\s*\(|\/\*|\*\//.test(Pe)))continue;fe==="font-weight"&&Pe==="700"?Pe="bold":(fe==="color"||fe==="background-color")&&(Pe=Pe.toLowerCase()),Pe=Pe.replace(o,xe),B[fe]=L?se(Pe,!0):Pe}}V("border","",!0),V("border","-width"),V("border","-color"),V("border","-style"),V("padding",""),V("margin",""),X("border","border-width","border-style","border-color"),B.border==="medium none"&&delete B.border,B["border-image"]==="none"&&delete B["border-image"]}return B},serialize:(O,B)=>{let L="";const z=(V,q)=>{const X=q[V];if(X)for(let J=0,se=X.length;J<se;J++){const ye=X[J],tt=O[ye];tt&&(L+=(L.length>0?" ":"")+ye+": "+tt+";")}},F=(V,q)=>{if(!b||!q)return!0;let X=b["*"];return X&&X[V]?!1:(X=b[q],!(X&&X[V]))};return B&&f?(z("*",f),z(B,f)):Ze(O,(V,q)=>{V&&F(q,B)&&(L+=(L.length>0?" ":"")+q+": "+V+";")}),L}};return A},UC={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},r0=e=>e instanceof Event||G(e.initEvent),jg=e=>e.isDefaultPrevented===qe||e.isDefaultPrevented===we,qi=e=>dn(e.preventDefault)||r0(e),Gg=(e,n)=>{const o=n??{};for(const r in e)kt(UC,r)||(o[r]=e[r]);return Ce(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},u1=(e,n,o,r)=>{var c;const u=Gg(n,r);return u.type=e,dn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),qi(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=qe,G(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=qe,G(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=qe,u.stopPropagation()},jg(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?qe:we,u.isPropagationStopped=u.cancelBubble===!0?qe:we,u.isImmediatePropagationStopped=we)),u},FT="mce-data-",WC=/^(?:mouse|contextmenu)|click/,lf=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},hr=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},wa=e=>Ce(e)&&WC.test(e.type),uf=(e,n)=>{const o=u1(e.type,e,document,n);if(wa(e)&&Ns(e.pageX)&&!Ns(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},ZC=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{hr(e,"DOMContentLoaded",f),hr(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():lf(e,"DOMContentLoaded",f),o.domLoaded||lf(e,"load",f)};class Hd{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=FT+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=B=>{u.executeHandlers(uf(B||b.event),x)};if(!n||_e(n)||Ha(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const A=o.split(" ");let O=A.length;for(;O--;){let B=A[O],L=y,z=!1,F=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(c,uf({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(z=!0,F=B==="focusin"?"focus":"blur",L=V=>{const q=uf(V||b.event);q.type=q.type==="focus"?"focusin":"focusout",u.executeHandlers(q,x)}),f=u.events[x][B],f?B==="ready"&&u.domLoaded?r(uf({type:B})):f.push({func:r,scope:c}):(u.events[x][B]=f=[{func:r,scope:c}],f.fakeName=F,f.capture=z,f.nativeHandler=L,B==="ready"?ZC(n,L,u):lf(n,F||B,L,z))}return n=f=null,r}unbind(n,o,r){if(!n||_e(n)||Ha(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],x=u[y];if(x){if(r){let A=x.length;for(;A--;)if(x[A].func===r){const O=x.nativeHandler,B=x.fakeName,L=x.capture,z=x.slice(0,A).concat(x.slice(A+1));z.nativeHandler=O,z.fakeName=B,z.capture=L,u[y]=z}}(!r||x.length===0)&&(delete u[y],hr(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else Ze(u,(f,b)=>{hr(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(kt(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||_e(n)||Ha(n))return this;const c=uf({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||_e(n)||Ha(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Hd.Event=new Hd;const d1=Te.each,zc=Te.grep,a0="data-mce-style",m1=Te.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),df=(e,n,o)=>{dn(o)||o===""?Ko(e,n):qo(e,n,o)},c0=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Dl=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&_e(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},jC=(e,n)=>{const o=Kr(n,"style"),r=e.serialize(e.parse(o),oo(n));df(n,a0,r)},f1=(e,n)=>Ma(e)?kt(m1,n)?e+"":e+"px":e,g1=(e,n,o)=>{const r=c0(n);dn(o)||o===""?TC(e,r):Nv(e,r,f1(o,r))},i0=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const x=W.fromDom(f);G(n.url_converter)&&Ce(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const A="data-mce-"+y;df(x,A,b),df(x,y,b)},get:(f,b)=>{const y=W.fromDom(f);return Kr(y,"data-mce-"+b)||Kr(y,b)}},u={style:{set:(f,b)=>{const y=W.fromDom(f);r&&df(y,a0,b),Ko(y,"style"),K(b)&&Vp(y,e.parse(b))},get:f=>{const b=W.fromDom(f),y=Kr(b,a0)||Kr(b,"style");return e.serialize(e.parse(y),oo(b))}}};return r&&(u.href=u.src=c),u},Dn=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=Fn.forElement(W.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],A=n.schema?n.schema:yi({}),O=s0({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),B=n.ownEvents?new Hd:Hd.Event,L=A.getBlockElements(),z=re=>K(re)?kt(L,re):We(re)&&(kt(L,re.nodeName)||Nu(A,re)),F=re=>re&&e&&K(re)?e.getElementById(re):re,V=re=>{const ae=F(re);return Ce(ae)?W.fromDom(ae):null},q=(re,ae,Be="")=>{let Oe;const it=V(re);if(Ce(it)&&jn(it)){const on=uv[ae];on&&on.get?Oe=on.get(it.dom,ae):Oe=Kr(it,ae)}return Ce(Oe)?Oe:Be},X=re=>{const ae=F(re);return dn(ae)?[]:ae.attributes},J=(re,ae,Be)=>{Je(re,Oe=>{if(We(Oe)){const it=W.fromDom(Oe),on=Be===""?null:Be,Qn=Kr(it,ae),zs=uv[ae];zs&&zs.set?zs.set(it.dom,on,ae):df(it,ae,on),Qn!==on&&n.onSetAttrib&&n.onSetAttrib({attrElm:it.dom,attrName:ae,attrValue:on})}})},se=(re,ae)=>re.cloneNode(ae),ye=()=>n.root_element||e.body,tt=re=>{const ae=Uv(re);return{x:ae.x,y:ae.y,w:ae.width,h:ae.height}},xe=(re,ae)=>o1(e.body,F(re),ae),le=(re,ae,Be)=>{Je(re,Oe=>{const it=W.fromDom(Oe);g1(it,ae,Be),n.update_styles&&jC(O,it)})},fe=(re,ae)=>{Je(re,Be=>{const Oe=W.fromDom(Be);Ze(ae,(it,on)=>{g1(Oe,on,it)}),n.update_styles&&jC(O,Oe)})},Pe=(re,ae,Be)=>{const Oe=F(re);if(!(dn(Oe)||!We(Oe)))return Be?Os(W.fromDom(Oe),c0(ae)):(ae=ae.replace(/-(\D)/g,(it,on)=>on.toUpperCase()),ae==="float"&&(ae="cssFloat"),Oe.style?Oe.style[ae]:void 0)},Ie=re=>{const ae=F(re);if(!ae)return{w:0,h:0};let Be=Pe(ae,"width"),Oe=Pe(ae,"height");return(!Be||Be.indexOf("px")===-1)&&(Be="0"),(!Oe||Oe.indexOf("px")===-1)&&(Oe="0"),{w:parseInt(Be,10)||ae.offsetWidth||ae.clientWidth,h:parseInt(Oe,10)||ae.offsetHeight||ae.clientHeight}},Ye=re=>{const ae=F(re),Be=xe(ae),Oe=Ie(ae);return{x:Be.x,y:Be.y,w:Oe.w,h:Oe.h}},vt=(re,ae)=>{if(!re)return!1;const Be=On(re)?re:[re];return mo(Be,Oe=>Xr(W.fromDom(Oe),ae))},yt=(re,ae,Be,Oe)=>{const it=[];let on=F(re);Oe=Oe===void 0;const Qn=Be||(ye().nodeName!=="BODY"?ye().parentNode:null);if(K(ae))if(ae==="*")ae=We;else{const zs=ae;ae=Us=>vt(Us,zs)}for(;on&&!(on===Qn||dn(on.nodeType)||Gm(on)||ku(on));){if(!ae||ae(on))if(Oe)it.push(on);else return[on];on=on.parentNode}return Oe?it:null},rn=(re,ae,Be)=>{const Oe=yt(re,ae,Be,!1);return Oe&&Oe.length>0?Oe[0]:null},fn=(re,ae,Be)=>{let Oe=ae;if(re){K(ae)&&(Oe=it=>vt(it,ae));for(let it=re[Be];it;it=it[Be])if(G(Oe)&&Oe(it))return it}return null},Mn=(re,ae)=>fn(re,ae,"nextSibling"),wr=(re,ae)=>fn(re,ae,"previousSibling"),ks=re=>G(re.querySelectorAll),Me=(re,ae)=>{var Be,Oe;const it=(Oe=(Be=F(ae))!==null&&Be!==void 0?Be:n.root_element)!==null&&Oe!==void 0?Oe:e;return ks(it)?kr(it.querySelectorAll(re)):[]},Je=function(re,ae,Be){const Oe=Be??this;if(On(re)){const it=[];return d1(re,(on,Qn)=>{const zs=F(on);zs&&it.push(ae.call(Oe,zs,Qn))}),it}else{const it=F(re);return it?ae.call(Oe,it):!1}},un=(re,ae)=>{Je(re,Be=>{Ze(ae,(Oe,it)=>{J(Be,it,Oe)})})},tn=(re,ae)=>{Je(re,Be=>{const Oe=W.fromDom(Be);Gt(Oe,ae)})},nt=(re,ae,Be,Oe,it)=>Je(re,on=>{const Qn=K(ae)?e.createElement(ae):ae;return Ce(Be)&&un(Qn,Be),Oe&&(!K(Oe)&&Oe.nodeType?Qn.appendChild(Oe):K(Oe)&&tn(Qn,Oe)),it?Qn:on.appendChild(Qn)}),rt=(re,ae,Be)=>nt(e.createElement(re),re,ae,Be,!0),Ae=Ol.decode,wt=Ol.encodeAllRaw,Mt=(re,ae,Be="")=>{let Oe="<"+re;for(const it in ae)la(ae,it)&&(Oe+=" "+it+'="'+wt(ae[it])+'"');return Pa(Be)&&kt(A.getVoidElements(),re)?Oe+" />":Oe+">"+Be+"</"+re+">"},an=re=>{const ae=e.createElement("div"),Be=e.createDocumentFragment();Be.appendChild(ae),re&&(ae.innerHTML=re);let Oe;for(;Oe=ae.firstChild;)Be.appendChild(Oe);return Be.removeChild(ae),Be},Jn=(re,ae)=>Je(re,Be=>{const Oe=W.fromDom(Be);return ae&&be(Ps(Oe),it=>{Ar(it)&&it.dom.length===0?Tn(it):ba(Oe,it)}),Tn(Oe),Oe.dom}),_t=re=>Je(re,ae=>{const Be=ae.attributes;for(let Oe=Be.length-1;Oe>=0;Oe--)ae.removeAttributeNode(Be.item(Oe))}),nn=re=>O.parse(re),Ao=(re,ae)=>O.serialize(re,ae),Hn=re=>{if(mu!==Dn.DOM&&e===document){if(o[re])return;o[re]=!0}let ae=e.getElementById("mceDefaultStyles");if(!ae){ae=e.createElement("style"),ae.id="mceDefaultStyles",ae.type="text/css";const Be=e.head;Be.firstChild?Be.insertBefore(ae,Be.firstChild):Be.appendChild(ae)}ae.styleSheet?ae.styleSheet.cssText+=re:ae.appendChild(e.createTextNode(re))},xo=re=>{re||(re=""),be(re.split(","),ae=>{c[ae]=!0,y.load(ae).catch(pt)})},uo=(re,ae,Be)=>{Je(re,Oe=>{if(We(Oe)){const it=W.fromDom(Oe),on=ae.split(" ");be(on,Qn=>{Ce(Be)?(Be?Ed:Td)(it,Qn):_v(it,Qn)})}})},Zn=(re,ae)=>{uo(re,ae,!0)},os=(re,ae)=>{uo(re,ae,!1)},Sr=(re,ae)=>{const Be=V(re),Oe=ae.split(" ");return Ce(Be)&&Ws(Oe,it=>Pp(Be,it))},xr=re=>{Je(re,ae=>TC(W.fromDom(ae),"display"))},lu=re=>{Je(re,ae=>Nv(W.fromDom(ae),"display","none"))},$o=re=>{const ae=V(re);return Ce(ae)&&li(ea(ae,"display"),"none")},_m=re=>(re||"mce_")+u++,Ra=re=>{const ae=V(re);return Ce(ae)?We(ae.dom)?ae.dom.outerHTML:Iv(ae):""},uu=(re,ae)=>{Je(re,Be=>{We(Be)&&(Be.outerHTML=ae)})},cn=(re,ae)=>{const Be=F(ae);return Je(re,Oe=>{const it=Be==null?void 0:Be.parentNode,on=Be==null?void 0:Be.nextSibling;return it&&(on?it.insertBefore(Oe,on):it.appendChild(Oe)),Oe})},po=(re,ae,Be)=>Je(ae,Oe=>{var it;const on=On(ae)?re.cloneNode(!0):re;return Be&&d1(zc(Oe.childNodes),Qn=>{on.appendChild(Qn)}),(it=Oe.parentNode)===null||it===void 0||it.replaceChild(on,Oe),Oe}),ec=(re,ae)=>{if(re.nodeName!==ae.toUpperCase()){const Be=rt(ae);return d1(X(re),Oe=>{J(Be,Oe.nodeName,q(re,Oe.nodeName))}),po(Be,re,!0),Be}else return re},ll=(re,ae)=>{let Be=re;for(;Be;){let Oe=ae;for(;Oe&&Be!==Oe;)Oe=Oe.parentNode;if(Be===Oe)break;Be=Be.parentNode}return!Be&&re.ownerDocument?re.ownerDocument.documentElement:Be},Ac=re=>{if(We(re)){const ae=re.nodeName.toLowerCase()==="a"&&!q(re,"href")&&q(re,"id");if(q(re,"name")||q(re,"data-mce-bookmark")||ae)return!0}return!1},Dc=(re,ae,Be)=>{let Oe=0;if(Ac(re))return!1;const it=re.firstChild;if(it){const on=new Xo(it,re),Qn=A?A.getWhitespaceElements():{},zs=ae||(A?A.getNonEmptyElements():null);let Us=it;do{if(We(Us)){const dv=Us.getAttribute("data-mce-bogus");if(dv){Us=on.next(dv==="all");continue}const mv=Us.nodeName.toLowerCase();if(zs&&zs[mv]){if(mv==="br"){Oe++,Us=on.next();continue}return!1}if(Ac(Us))return!1}if(Ha(Us)||_e(Us)&&!pc(Us.data)&&(!(Be!=null&&Be.includeZwsp)||!$C(Us.data))||_e(Us)&&Us.parentNode&&Qn[Us.parentNode.nodeName]&&pc(Us.data))return!1;Us=on.next()}while(Us)}return Oe<=1},id=()=>e.createRange(),cr=(re,ae,Be)=>{let Oe=id(),it,on;if(re&&ae&&re.parentNode&&ae.parentNode){const Qn=re.parentNode;return Oe.setStart(Qn,Dl(re)),Oe.setEnd(ae.parentNode,Dl(ae)),it=Oe.extractContents(),Oe=id(),Oe.setStart(ae.parentNode,Dl(ae)+1),Oe.setEnd(Qn,Dl(re)+1),on=Oe.extractContents(),Qn.insertBefore(t0(mu,it),re),Be?Qn.insertBefore(Be,re):Qn.insertBefore(ae,re),Qn.insertBefore(t0(mu,on),re),Jn(re),Be||ae}else return},Om=(re,ae,Be,Oe)=>{if(On(re)){let it=re.length;const on=[];for(;it--;)on[it]=Om(re[it],ae,Be,Oe);return on}else return n.collect&&(re===e||re===r)&&x.push([re,ae,Be,Oe]),B.bind(re,ae,Be,Oe||mu)},du=(re,ae,Be)=>{if(On(re)){let Oe=re.length;const it=[];for(;Oe--;)it[Oe]=du(re[Oe],ae,Be);return it}else{if(x.length>0&&(re===e||re===r)){let Oe=x.length;for(;Oe--;){const[it,on,Qn]=x[Oe];re===it&&(!ae||ae===on)&&(!Be||Be===Qn)&&B.unbind(it,on,Qn)}}return B.unbind(re,ae,Be)}},Bi=(re,ae,Be)=>B.dispatch(re,ae,Be),ld=(re,ae,Be)=>B.dispatch(re,ae,Be),oC=re=>{if(re&&We(re)){const ae=re.getAttribute("data-mce-contenteditable");return ae&&ae!=="inherit"?ae:re.contentEditable!=="inherit"?re.contentEditable:null}else return null},mu={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:x,styles:O,schema:A,events:B,isBlock:z,root:null,clone:se,getRoot:ye,getViewPort:tt,getRect:Ye,getSize:Ie,getParent:rn,getParents:yt,get:F,getNext:Mn,getPrev:wr,select:Me,is:vt,add:nt,create:rt,createHTML:Mt,createFragment:an,remove:Jn,setStyle:le,getStyle:Pe,setStyles:fe,removeAllAttribs:_t,setAttrib:J,setAttribs:un,getAttrib:q,getPos:xe,parseStyle:nn,serializeStyle:Ao,addStyle:Hn,loadCSS:xo,addClass:Zn,removeClass:os,hasClass:Sr,toggleClass:uo,show:xr,hide:lu,isHidden:$o,uniqueId:_m,setHTML:tn,getOuterHTML:Ra,setOuterHTML:uu,decode:Ae,encode:wt,insertAfter:cn,replace:po,rename:ec,findCommonAncestor:ll,run:Je,getAttribs:X,isEmpty:Dc,createRng:id,nodeIndex:Dl,split:cr,bind:Om,unbind:du,fire:ld,dispatch:Bi,getContentEditable:oC,getContentEditableParent:re=>{const ae=ye();let Be=null;for(let Oe=re;Oe&&Oe!==ae&&(Be=oC(Oe),Be===null);Oe=Oe.parentNode);return Be},isEditable:re=>{if(Ce(re)){const ae=We(re)?re:re.parentElement;return Ce(ae)&&Nt(W.fromDom(ae))}else return!1},destroy:()=>{if(x.length>0){let re=x.length;for(;re--;){const[ae,Be,Oe]=x[re];B.unbind(ae,Be,Oe)}}Ze(c,(re,ae)=>{y.unload(ae),delete c[ae]})},isChildOf:(re,ae)=>re===ae||ae.contains(re),dumpRng:re=>"startContainer: "+re.startContainer.nodeName+", startOffset: "+re.startOffset+", endContainer: "+re.endContainer.nodeName+", endOffset: "+re.endOffset},uv=i0(O,n,Le(mu));return mu};Dn.DOM=Dn(document),Dn.nodeIndex=Dl;const h1=Dn.DOM,IT=0,GC=1,mf=2,qC=3;class Sa{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=h1;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=Te._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===mf}markDone(n){this.states[n]=mf}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=IT),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{to(o.scriptLoadedCallbacks,x).each(A=>{be(A,O=>O[y](x))}),delete o.scriptLoadedCallbacks[x]},c=y=>{const x=ft(y,A=>A.status==="rejected");return x.length>0?Promise.reject(Pi(x,({reason:A})=>On(A)?A:[A])):Promise.resolve()},u=y=>Promise.allSettled(Ft(y,x=>o.states[x]===mf?(r("resolve",x),Promise.resolve()):o.states[x]===qC?(r("reject",x),Promise.reject(x)):(o.states[x]=GC,o.loadScript(x).then(()=>{o.states[x]=mf,r("resolve",x);const A=o.queue;return A.length>0?(o.queue=[],u(A).then(c)):Promise.resolve()},()=>(o.states[x]=qC,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const A=o.queueLoadedCallbacks.shift();return N.from(A).each(Zr),c(x)})),b=Ep(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,x)})}):f(b)}}Sa.ScriptLoader=new Sa;const us=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},l0=e=>Sn(e)&&kt(e,"raw"),KC=e=>On(e)&&e.length>1,ff={},p1=us("en"),u0=()=>to(ff,p1.get()),Ci={getData:()=>wn(ff,e=>({...e})),setCode:e=>{e&&p1.set(e)},getCode:()=>p1.get(),add:(e,n)=>{let o=ff[e];o||(ff[e]=o={}),Ze(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=u0().getOr({}),o=f=>G(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return to(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(l0(e))return o(e.raw);if(KC(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>kt(f,x)?o(f[x]):y);return u(b)}return u(c(e))},isRtl:()=>u0().bind(e=>to(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>kt(ff,e)},mn=()=>{const e=[],n={},o={},r=[],c=(F,V)=>{const q=ft(r,X=>X.name===F&&X.state===V);be(q,X=>X.resolve())},u=F=>kt(n,F),f=F=>kt(o,F),b=F=>{if(o[F])return o[F].instance},y=(F,V)=>{const q=Ci.getCode(),X=","+(V||"")+",";!q||V&&X.indexOf(","+q+",")===-1||Sa.ScriptLoader.add(n[F]+"/langs/"+q+".js")},x=(F,V)=>{mn.languageLoad!==!1&&(u(F)?y(F,V):z(F,"loaded").then(()=>y(F,V)))},A=(F,V)=>(e.push(V),o[F]={instance:V},c(F,"added"),V),O=F=>{delete n[F],delete o[F]},B=(F,V)=>K(V)?K(F)?{prefix:"",resource:V,suffix:""}:{prefix:F.prefix,resource:V,suffix:F.suffix}:V,L=(F,V)=>{if(n[F])return Promise.resolve();let q=K(V)?V:V.prefix+V.resource+V.suffix;q.indexOf("/")!==0&&q.indexOf("://")===-1&&(q=mn.baseURL+"/"+q),n[F]=q.substring(0,q.lastIndexOf("/"));const X=()=>(c(F,"loaded"),Promise.resolve());return o[F]?X():Sa.ScriptLoader.add(q).then(X)},z=(F,V="added")=>V==="added"&&f(F)||V==="loaded"&&u(F)?Promise.resolve():new Promise(q=>{r.push({name:F,state:V,resolve:q})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:A,remove:O,createUrl:B,load:L,waitFor:z}};mn.languageLoad=!0,mn.baseURL="",mn.PluginManager=mn(),mn.ThemeManager=mn(),mn.ModelManager=mn();const Mr=e=>{const n=us(N.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(b))}}},Ki=e=>{const n=us(N.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(N.some(setInterval(b,e)))}}},Ds=()=>{const e=Mr(pt);return{...e,on:o=>e.get().each(o)}},Rl=(e,n)=>{let o=null;return{cancel:()=>{Q(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{Q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},d0=(e,n)=>{let o=null;const r=()=>{Q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},$u=Le("mce-annotation"),Br=Le("data-mce-annotation"),Za=Le("data-mce-annotation-uid"),Qo=Le("data-mce-annotation-active"),gf=Le("data-mce-annotation-classes"),Fu=Le("data-mce-annotation-attrs"),m0=e=>n=>En(n,e),XC=(e,n)=>{const o=e.selection.getRng(),r=W.fromDom(o.startContainer),c=W.fromDom(e.getBody()),u=n.fold(()=>"."+$u(),y=>`[${Br()}="${y}"]`),f=xu(r,o.startOffset).getOr(r);return Jr(f,u,m0(c)).bind(y=>di(y,`${Za()}`).bind(x=>di(y,`${Br()}`).map(A=>{const O=JC(e,x);return{uid:x,name:A,elements:O}})))},Ml=e=>jn(e)&&Pp(e,$u()),wi=(e,n)=>Og(e,"data-mce-bogus")||Wp(e,'[data-mce-bogus="all"]',m0(n)),JC=(e,n)=>{const o=W.fromDom(e.getBody()),r=Ys(o,`[${Za()}="${n}"]`);return ft(r,c=>!wi(c,o))},f0=(e,n)=>{const o=W.fromDom(e.getBody()),r=Ys(o,`[${Br()}="${n}"]`),c={};return be(r,u=>{if(!wi(u,o)){const f=Kr(u,Za()),b=to(c,f).getOr([]);c[f]=b.concat([u])}}),c},LT=(e,n)=>{const o=us({}),r=()=>({listeners:[],previous:Ds()}),c=(O,B)=>{u(O,L=>(B(L),L))},u=(O,B)=>{const L=o.get(),z=to(L,O).getOrThunk(r),F=B(z);L[O]=F,o.set(L)},f=(O,B,L)=>{c(O,z=>{be(z.listeners,F=>F(!0,O,{uid:B,nodes:Ft(L,V=>V.dom)}))})},b=O=>{c(O,B=>{be(B.listeners,L=>L(!1,O))})},y=(O,B)=>{be(JC(e,O),L=>{B?qo(L,Qo(),"true"):Ko(L,Qo())})},x=d0(()=>{const O=vo(n.getNames());be(O,B=>{u(B,L=>{const z=L.previous.get();return XC(e,N.some(B)).fold(()=>{z.each(F=>{b(B),L.previous.clear(),y(F,!1)})},({uid:F,name:V,elements:q})=>{li(z,F)||(z.each(X=>y(X,!1)),f(V,F,q),L.previous.set(F),y(F,!0))}),{previous:L.previous,listeners:L.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(O,B)=>{u(O,L=>({previous:L.previous,listeners:L.listeners.concat([B])}))}}},HT=(e,n)=>{const o=Br(),r=u=>N.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Za(),null),u.attr(Br(),null),u.attr(Qo(),null);const y=N.from(u.attr(Fu())).map(B=>B.split(",")).getOr([]),x=N.from(u.attr(gf())).map(B=>B.split(",")).getOr([]);be(y,B=>u.attr(B,null));const A=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],O=wp(A,[$u()].concat(x));u.attr("class",O.length>0?O.join(" "):null),u.attr(gf(),null),u.attr(Fu(),null)};e.serializer.addTempAttr(Qo()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},VT=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>to(e,c).map(u=>u.settings),getNames:()=>jr(e)}};let g0=0;const qg=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return g0++,e+"_"+r+g0+String(o)},zT=(e,n)=>{be(n,o=>{Ed(e,o)})},UT=(e,n)=>{be(n,o=>{Td(e,o)})},h0=(e,n)=>W.fromDom(e.dom.cloneNode(n)),Iu=e=>h0(e,!1),WT=e=>h0(e,!0),v1=(e,n)=>{const o=W.fromTag(n),r=Mp(e);return qr(o,r),o},ko=(e,n)=>{const o=v1(e,n);La(e,o);const r=Ps(e);return Vn(o,r),Tn(e),o},y1=(e,n,o=we)=>{const r=new Xo(e,n),c=u=>{let f;do f=r[u]();while(f&&!_e(f)&&!o(f));return N.from(f).filter(_e)};return{current:()=>N.from(r.current()).filter(_e),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Lu=(e,n)=>{const o=n||(f=>e.isBlock(f)||co(f)||vn(f)),r=(f,b,y,x)=>{if(_e(f)){const A=x(f,b,f.data);if(A!==-1)return N.some({container:f,offset:A})}return y().bind(A=>r(A.container,A.offset,y,x))};return{backwards:(f,b,y,x)=>{const A=y1(f,x??e.getRoot(),o);return r(f,b,()=>A.prev().map(O=>({container:O,offset:O.length})),y).getOrNull()},forwards:(f,b,y,x)=>{const A=y1(f,x??e.getRoot(),o);return r(f,b,()=>A.next().map(O=>({container:O,offset:0})),y).getOrNull()}}},Hu=Math.round,Bl=e=>e?{left:Hu(e.left),top:Hu(e.top),bottom:Hu(e.bottom),right:Hu(e.right),width:Hu(e.width),height:Hu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Is=(e,n)=>(e=Bl(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),bc=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Vd=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,hf=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Vd(n.top-e.bottom,e,n)},pf=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Vd(n.bottom-e.top,e,n),ZT=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,QC=e=>Ro(e,(n,o)=>n.fold(()=>N.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return N.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),N.none()),p0=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},Nl=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),C1=(e,n,o)=>Math.min(Math.max(e,n),o),go=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},nr=(e,n)=>{if(We(e)&&e.hasChildNodes()){const o=e.childNodes,r=C1(n,0,o.length-1);return o[r]}else return e},Kg=(e,n)=>{if(!(n<0&&We(e)&&e.hasChildNodes()))return nr(e,n)},ew=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),b0=e=>K(e)&&e.charCodeAt(0)>=768&&ew.test(e),jT=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},zd=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},v0=We,Ud=Ca,w1=Zv("display","block table"),GT=Zv("float","left right"),bf=zd(v0,Ud,Io(GT)),qT=Io(Zv("white-space","pre pre-line pre-wrap")),Yg=_e,S1=co,vf=Dn.nodeIndex,Xg=Kg,x1=e=>e?e.createRange():Dn.DOM.createRng(),yf=e=>K(e)&&/[\r\n\t ]/.test(e),tw=e=>!!e.setStart&&!!e.setEnd,E1=e=>{const n=e.startContainer,o=e.startOffset;if(yf(e.toString())&&qT(n.parentNode)&&_e(n)){const r=n.data;if(yf(r[o-1])||yf(r[o+1]))return!0}return!1},sD=e=>{const n=e.ownerDocument,o=x1(n),r=n.createTextNode(me),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Bl(o.getBoundingClientRect());return c.removeChild(r),u},Yi=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&_e(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),oa(u)}else return null},Wd=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,oa=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Bl(r[0]):o=Bl(e.getBoundingClientRect()),!tw(e)&&S1(e)&&Wd(o)?sD(e):Wd(o)&&tw(e)&&(n=Yi(e))!==null&&n!==void 0?n:o},zt=(e,n)=>{const o=Is(e,n);return o.width=1,o.right=o.left+1,o},xa=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&bc(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=x1(f.ownerDocument);if(b<f.data.length){if(b0(f.data[b]))return;if(b0(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!E1(y))){o(zt(oa(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),E1(y)||o(zt(oa(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),E1(y)||o(zt(oa(y),!0)))},c=e.container(),u=e.offset();if(Yg(c))return r(c,u),n;if(v0(c))if(e.isAtEnd()){const f=Xg(c,u);Yg(f)&&r(f,f.data.length),bf(f)&&!S1(f)&&o(zt(oa(f),!1))}else{const f=Xg(c,u);if(Yg(f)&&r(f,0),bf(f)&&e.isAtEnd())return o(zt(oa(f),!1)),n;const b=Xg(e.container(),e.offset()-1);bf(b)&&!S1(b)&&(w1(b)||w1(f)||!bf(f))&&o(zt(oa(b),!1)),bf(f)&&o(zt(oa(f),!0))}return n},ie=(e,n,o)=>{const r=()=>(Yg(e),n===0),c=()=>Yg(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const A=x1(e.ownerDocument);return A.setStart(e,n),A.setEnd(e,n),A},f=()=>(o||(o=xa(ie(e,n))),o),b=()=>f().length>0,y=A=>A&&e===A.container()&&n===A.offset(),x=A=>Xg(e,A?n-1:n);return{container:Le(e),offset:Le(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:x}};ie.fromRangeStart=e=>ie(e.startContainer,e.startOffset),ie.fromRangeEnd=e=>ie(e.endContainer,e.endOffset),ie.after=e=>ie(e.parentNode,vf(e)+1),ie.before=e=>ie(e.parentNode,vf(e)),ie.isAbove=(e,n)=>_r(Tr(n.getClientRects()),pu(e.getClientRects()),hf).getOr(!1),ie.isBelow=(e,n)=>_r(pu(n.getClientRects()),Tr(e.getClientRects()),pf).getOr(!1),ie.isAtStart=e=>e?e.isAtStart():!1,ie.isAtEnd=e=>e?e.isAtEnd():!1,ie.isTextPosition=e=>e?_e(e.container()):!1,ie.isElementPosition=e=>!ie.isTextPosition(e);const Cf=(e,n)=>{_e(n)&&n.data.length===0&&e.remove(n)},qn=(e,n,o)=>{n.insertNode(o),Cf(e,o.previousSibling),Cf(e,o.nextSibling)},nw=(e,n,o)=>{const r=N.from(o.firstChild),c=N.from(o.lastChild);n.insertNode(o),r.each(u=>Cf(e,u.previousSibling)),c.each(u=>Cf(e,u.nextSibling))},T1=(e,n,o)=>{ku(o)?nw(e,n,o):qn(e,n,o)},io=_e,Pl=mc,k1=Dn.nodeIndex,y0=e=>{const n=e.parentNode;return Pl(n)?y0(n):n},C0=e=>e?sc(e.childNodes,(n,o)=>(Pl(o)&&o.nodeName!=="BR"?n=n.concat(C0(o)):n.push(o),n),[]):[],_1=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&io(o);)n+=o.data.length;return n},O1=e=>n=>e===n,Vu=e=>{let n,o;n=C0(y0(e)),o=Vo(n,O1(e),e),n=n.slice(0,o+1);const r=sc(n,(c,u,f)=>(io(u)&&io(n[f-1])&&c++,c),0);return n=Tp(n,uc([e.nodeName])),o=Vo(n,O1(e),e),o-r},Jg=e=>(io(e)?"text()":e.nodeName.toLowerCase())+"["+Vu(e)+"]",w0=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},A1=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(io(r))u=_1(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(Jg(r));let f=w0(e,r);return f=Tp(f,Io(mc)),o=o.concat($i(f,b=>Jg(b))),o.reverse().join("/")+","+u},ow=(e,n,o)=>{let r=C0(e);return r=Tp(r,(c,u)=>!io(c)||!io(r[u-1])),r=Tp(r,uc([n])),r[o]},sw=(e,n)=>{let o=e,r=0;for(;io(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!io(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return io(e)&&n>e.data.length&&(n=e.data.length),ie(e,n)},Zd=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=sc(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),ow(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!io(u)&&u.parentNode){let f;return c==="after"?f=k1(u)+1:f=k1(u),ie(u.parentNode,f)}return sw(u,parseInt(c,10))},pr=vn,rD=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&_e(c);c=c.previousSibling)r+=e(c.data).length;return r},In=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(_e(u))b.push(o?rD(n,u,f):f);else{let x=0;const A=u.childNodes;f>=A.length&&A.length&&(x=1,f=Math.max(0,A.length-1)),b.push(e.nodeIndex(A[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},KT=(e,n,o,r)=>{const c=n.dom,u=In(c,e,o,r,!0),f=n.isForward(),b=Jp(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=In(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Xi=(e,n,o)=>{let r=0;return Te.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},S0=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(We(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},x0=e=>(S0(e,!0),S0(e,!1),e),Qg=(e,n)=>{if(We(e)&&(e=nr(e,n),pr(e)))return e;if(hc(e)){_e(e)&&Ru(e)&&(e=e.parentNode);let o=e.previousSibling;if(pr(o)||(o=e.nextSibling,pr(o)))return o}},eh=e=>Qg(e.startContainer,e.startOffset)||Qg(e.endContainer,e.endOffset),D1=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||pr(r)){const f=r.nodeName;return{name:f,index:Xi(o.dom,f,r)}}const u=eh(c);if(u){const f=u.tagName;return{name:f,index:Xi(o.dom,f,u)}}return KT(e,o,n,c)},rw=e=>{const n=e.getRng();return{start:A1(e.dom.getRoot(),ie.fromRangeStart(n)),end:A1(e.dom.getRoot(),ie.fromRangeEnd(n)),forward:e.isForward()}},YT=e=>({rng:e.getRng(),forward:e.isForward()}),E0=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Ss=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Xi(o,b,f)};const x=x0(r.cloneRange());if(!u){x.collapse(!1);const O=E0(o,c+"_end",n);T1(o,x,O)}r=x0(r),r.collapse(!0);const A=E0(o,c+"_start",n);return T1(o,r,A),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},ds=(e,n,o=!1)=>n===2?D1(xl,o,e):n===3?rw(e):n?YT(e):Ss(e,!1),br=Ee(D1,Eo,!0),Nr=e=>{const n=u=>u(e),o=Le(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:qe,isError:we,map:u=>vr.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>N.some(e)};return c},zn=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:we,isError:qe,map:n,mapError:r=>vr.error(r(e)),bind:n,exists:we,forall:qe,getOr:Eo,or:Eo,getOrThunk:Lo,orThunk:Lo,getOrDie:Ba(String(e)),each:pt,toOptional:N.none};return o},vr={value:Nr,error:zn,fromOption:(e,n)=>e.fold(()=>zn(n),Nr)},Si={generate:e=>{if(!On(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return be(e,(r,c)=>{const u=jr(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!On(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...O)=>{if(O.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+O.length);return O[c].apply(null,y)},match:O=>{const B=jr(O);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!Ws(n,z=>Bt(B,z)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return O[f].apply(null,y)},log:O=>{console.log(O,{constructors:n,constructor:f,params:y})}}}}),o}};Si.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const cw=e=>{const n=[],o=[];return be(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},iw=e=>e.type==="inline-command"||e.type==="inline-format",lw=e=>e.type==="block-command"||e.type==="block-format",T0=e=>{const n=r=>vr.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(On(e.format)){if(!Ws(e.format,K))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(K(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return vr.value(c(f))}else return e.cmd!==void 0?K(e.cmd)?vr.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Sn(e))return n("Raw pattern is not an object");if(!K(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!K(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?K(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):vr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},R1=e=>ft(e,lw),M1=e=>ft(e,iw),aD=(e,n)=>({inlinePatterns:M1(e),blockPatterns:R1(e),dynamicPatternsLookup:n}),uw=e=>{const n=cw(Ft(e,T0));return be(n.errors,o=>console.error(o.message,o.pattern)),n.values},XT=e=>n=>{const o=e(n);return uw(o)},k0=Fi().deviceType,_0=k0.isTouch(),JT=Dn.DOM,QT=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ro(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[bd(u)]=bd(f),o},{})},dw=e=>gu(e,RegExp),Ge=e=>n=>n.options.get(e),B1=e=>K(e)||Sn(e),De=(e,n="")=>o=>{const r=K(o);if(r)if(o.indexOf("=")!==-1){const c=QT(o);return{value:to(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},ek=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:De(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:De(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=K(o)&&Pn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Bt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>en(o)?{valid:!0,value:o}:K(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||K(o)||An(o,K);return r?K(o)?{value:Ft(o.split(","),bd),valid:r}:On(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:F1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=K(o)||An(o,K);return r?{value:On(o)?o:Ft(o.split(","),bd),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=en(o)||K(o);return r?o===!1||k0.isiPhone()||k0.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!_0}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||K(o)||G(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||K(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:B1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:B1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:B1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>K(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>An(o,Sn)||o===!1?{value:uw(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>G(o)?{value:XT(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>An(o,dw)?{value:o,valid:!0}:dw(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Bt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Bt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Ci.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:JT.getAttrib(e.getElement(),"placeholder")})})},Rs=Ge("iframe_attrs"),tk=Ge("doctype"),O0=Ge("document_base_url"),nk=Ge("body_id"),Pr=Ge("body_class"),A0=Ge("content_security_policy"),mw=Ge("br_in_pre"),wo=Ge("forced_root_block"),zu=Ge("forced_root_block_attrs"),wf=Ge("newline_behavior"),Ji=Ge("br_newline_selector"),Uc=Ge("no_newline_selector"),th=Ge("keep_styles"),Ea=Ge("end_container_on_empty_block"),fw=Ge("automatic_uploads"),D0=Ge("images_reuse_filename"),R0=Ge("images_replace_blob_uris"),M0=Ge("icons"),gw=Ge("icons_url"),B0=Ge("images_upload_url"),ok=Ge("images_upload_base_path"),hw=Ge("images_upload_credentials"),sk=Ge("images_upload_handler"),rk=Ge("content_css_cors"),N0=Ge("referrer_policy"),pw=Ge("language"),ak=Ge("language_url"),N1=Ge("indent_use_margin"),ck=Ge("indentation"),bw=Ge("content_css"),ik=Ge("content_style"),nh=Ge("font_css"),lk=Ge("directionality"),uk=Ge("inline_boundaries_selector"),vw=Ge("object_resizing"),dk=Ge("resize_img_proportional"),mk=Ge("placeholder"),oh=Ge("event_root"),yw=Ge("service_message"),$r=Ge("theme"),Kn=Ge("theme_url"),P1=Ge("model"),Fr=Ge("model_url"),jd=Ge("inline_boundaries"),sh=Ge("formats"),xs=Ge("preview_styles"),$1=Ge("format_empty_lines"),Cw=Ge("format_noneditable_selector"),fk=Ge("custom_ui_selector"),F1=Ge("inline"),ww=Ge("hidden_input"),gk=Ge("submit_patch"),hk=Ge("add_form_submit_trigger"),pk=Ge("add_unload_trigger"),bk=Ge("custom_undo_redo_levels"),rh=Ge("disable_nodechange"),P0=Ge("readonly"),cD=Ge("editable_root"),Uu=Ge("content_css_cors"),I1=Ge("plugins"),vk=Ge("external_plugins"),Sw=Ge("block_unsupported_drop"),yk=Ge("visual"),Gd=Ge("visual_table_class"),ah=Ge("visual_anchor_class"),Ck=Ge("iframe_aria_text"),wk=Ge("setup"),Sk=Ge("init_instance_callback"),$l=Ge("urlconverter_callback"),L1=Ge("auto_focus"),H1=Ge("browser_spellcheck"),$0=Ge("protect"),xw=Ge("paste_block_drop"),vc=Ge("paste_data_images"),V1=Ge("paste_preprocess"),Ew=Ge("paste_postprocess"),Fl=Ge("newdocument_content"),qd=Ge("paste_webkit_styles"),ch=Ge("paste_remove_styles_if_webkit"),F0=Ge("paste_merge_formats"),Tw=Ge("smart_paste"),xk=Ge("paste_as_text"),kw=Ge("paste_tab_spaces"),Ek=Ge("allow_html_data_urls"),Tk=Ge("text_patterns"),_w=Ge("text_patterns_lookup"),Ow=Ge("noneditable_class"),I0=Ge("editable_class"),kk=Ge("noneditable_regexp"),_k=Ge("preserve_cdata"),Ok=Ge("highlight_on_focus"),z1=Ge("xss_sanitization"),L0=Ge("init_content_sync"),Aw=e=>e.options.isSet("text_patterns_lookup"),Ak=e=>Te.explode(e.options.get("font_size_style_values")),Dk=e=>Te.explode(e.options.get("font_size_classes")),Rk=e=>e.options.get("encoding")==="xml",ih=e=>Te.explode(e.options.get("images_file_types")),Mk=Ge("table_tab_navigation"),lh=Ge("details_initial_state"),uh=Ge("details_serialized_state"),Dw=We,U1=_e,H0=e=>{const n=e.parentNode;n&&n.removeChild(e)},V0=e=>{const n=xl(e);return{count:e.length-n.length,text:n}},z0=e=>{let n;for(;(n=e.data.lastIndexOf(er))!==-1;)e.deleteData(n,1)},Rw=(e,n)=>(Kd(e),n),dh=(e,n)=>{const o=V0(e.data.substr(0,n.offset())),r=V0(e.data.substr(n.offset()));return(o.text+r.text).length>0?(z0(e),ie(e,n.offset()-o.count)):n},Mw=(e,n)=>{const o=n.container(),r=uT(kr(o.childNodes),e).map(c=>c<n.offset()?ie(o,n.offset()-1):n).getOr(n);return Kd(e),r},Bk=(e,n)=>U1(e)&&n.container()===e?dh(e,n):Rw(e,n),U0=(e,n)=>n.container()===e.parentNode?Mw(e,n):Rw(e,n),Nk=(e,n)=>ie.isTextPosition(n)?Bk(e,n):U0(e,n),Kd=e=>{Dw(e)&&hc(e)&&(zi(e)?e.removeAttribute("data-mce-caret"):H0(e)),U1(e)&&(z0(e),e.data.length===0&&H0(e))},Pk=vn,W0=Uo,mh=Xs,$k="*[contentEditable=false],video,audio,embed,object",Bw=(e,n,o)=>{const r=Is(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Nw=e=>{var n,o;const r=Ys(W.fromDom(e),$k);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if($g(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Ui(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},Pw=(e,n,o,r)=>{const c=Ds();let u,f;const b=wo(e),y=e.dom,x=(F,V)=>{let q;if(A(),mh(V))return null;if(o(V)){const X=BC(b,V,F),J=Bw(n,V,F);y.setStyle(X,"top",J.top),f=X;const se=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(se,{...J}),y.add(n,se),c.set({caret:se,element:V,before:F}),F&&y.addClass(se,"mce-visual-caret-before"),O(),q=V.ownerDocument.createRange(),q.setStart(X,0),q.setEnd(X,0)}else return f=MC(V,F),q=V.ownerDocument.createRange(),W1(f.nextSibling)?(q.setStart(f,0),q.setEnd(f,0)):(q.setStart(f,1),q.setEnd(f,1)),q;return q},A=()=>{Nw(n),f&&(Kd(f),f=null),c.on(F=>{y.remove(F.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},O=()=>{u=setInterval(()=>{c.on(F=>{r()?y.toggleClass(F.caret,"mce-visual-caret-hidden"):y.addClass(F.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:A,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(F=>{const V=Bw(n,F.element,F.before);y.setStyles(F.caret,{...V})})},destroy:()=>clearInterval(u)}},or=()=>gn.browser.isFirefox(),W1=e=>Pk(e)||W0(e),Qi=e=>(W1(e)||fo(e)&&or())&&Fp(W.fromDom(e)).exists(Nt),fh=kn,Z1=vn,Fk=Uo,$w=Zv("display","block table table-cell table-caption list-item"),Fw=hc,j1=Ru,G1=We,Ir=_e,Ik=Ca,el=e=>e>0,Wu=e=>e<0,gh=(e,n)=>{let o;for(;o=e(n);)if(!j1(o))return o;return null},hh=(e,n,o,r,c)=>{const u=new Xo(e,r),f=Z1(e)||j1(e);let b;if(Wu(n)){if(f&&(b=gh(u.prev.bind(u),!0),o(b)))return b;for(;b=gh(u.prev.bind(u),c);)if(o(b))return b}if(el(n)){if(f&&(b=gh(u.next.bind(u),!0),o(b)))return b;for(;b=gh(u.next.bind(u),c);)if(o(b))return b}return null},Iw=(e,n)=>{const o=c=>fh(c.dom),r=c=>c.dom===n;return Xn(W.fromDom(e),o,r).map(c=>c.dom).getOr(n)},xi=(e,n)=>{for(;e&&e!==n;){if($w(e))return e;e=e.parentNode}return null},Il=(e,n,o)=>xi(e.container(),o)===xi(n.container(),o),Sf=(e,n)=>{if(!n)return N.none();const o=n.container(),r=n.offset();return G1(o)?N.from(o.childNodes[r+e]):N.none()},Lk=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},Lw=(e,n,o)=>xi(n,e)===xi(o,e),xf=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&Fw(u)&&(u=u[r]),Z1(u)||Fk(u)){if(Lw(n,u,c))return u;break}if(Ik(u))break;c=c.parentNode}return null},Zu=Ee(Lk,!0),Ef=Ee(Lk,!1),Tf=(e,n,o)=>{let r;const c=Ee(xf,!0,n),u=Ee(xf,!1,n),f=o.startContainer,b=o.startOffset;if(Ru(f)){const y=Ir(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,Qi(r)))return Zu(r);if(x==="after"&&(r=y.previousSibling,Qi(r)))return Ef(r)}if(!o.collapsed)return o;if(_e(f)){if(Fw(f)){if(e===1){if(r=u(f),r)return Zu(r);if(r=c(f),r)return Ef(r)}if(e===-1){if(r=c(f),r)return Ef(r);if(r=u(f),r)return Zu(r)}return o}if($g(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Zu(r):o;if(Ui(f)&&b<=1)return e===-1&&(r=c(f),r)?Ef(r):o;if(b===f.data.length)return r=u(f),r?Zu(r):o;if(b===0)return r=c(f),r?Ef(r):o}return o},Z0=(e,n)=>Sf(e?0:-1,n).filter(Z1),Yd=(e,n,o)=>{const r=Tf(e,n,o);return e===-1?ie.fromRangeStart(r):ie.fromRangeEnd(r)},ph=e=>N.from(e.getNode()).map(W.fromDom),Ll=e=>N.from(e.getNode(!0)).map(W.fromDom),ju=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},bh=(e,n)=>{const o=Il(e,n);return!o&&co(e.getNode())?!0:o};var ms;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(ms||(ms={}));const Hk=vn,tl=_e,q1=We,kf=co,Xd=Ca,j0=PC,_f=Bu,Vk=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Hw=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,G0=(e,n)=>{if(el(e)){if(Xd(n.previousSibling)&&!tl(n.previousSibling))return ie.before(n);if(tl(n))return ie(n,0)}if(Wu(e)){if(Xd(n.nextSibling)&&!tl(n.nextSibling))return ie.after(n);if(tl(n))return ie(n,n.data.length)}return Wu(e)?kf(n)?ie.before(n):ie.after(n):ie.before(n)},Vw=(e,n)=>{const o=n.nextSibling;return o&&Xd(o)?tl(o)?ie(o,0):ie.before(o):Of(ms.Forwards,ie.after(n),e)},Of=(e,n,o)=>{let r,c,u,f;if(!q1(o)||!n)return null;if(n.isEqual(ie.after(o))&&o.lastChild){if(f=ie.after(o.lastChild),Wu(e)&&Xd(o.lastChild)&&q1(o.lastChild))return kf(o.lastChild)?ie.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(tl(b)){if(Wu(e)&&y>0)return ie(b,--y);if(el(e)&&y<b.length)return ie(b,++y);r=b}else{if(Wu(e)&&y>0&&(c=Hw(b,y-1),Xd(c)))return!j0(c)&&(u=hh(c,e,_f,c),u)?tl(u)?ie(u,u.data.length):ie.after(u):tl(c)?ie(c,c.data.length):ie.before(c);if(el(e)&&y<b.childNodes.length&&(c=Hw(b,y),Xd(c)))return kf(c)?Vw(o,c):!j0(c)&&(u=hh(c,e,_f,c),u)?tl(u)?ie(u,0):ie.before(u):tl(c)?ie(c,0):ie.after(c);r=c||f.getNode()}if(r&&(el(e)&&f.isAtEnd()||Wu(e)&&f.isAtStart())&&(r=hh(r,e,qe,o,!0),_f(r,o)))return G0(e,r);c=r&&hh(r,e,_f,o);const x=Nc(ft(Vk(b,o),Hk));return x&&(!c||!x.contains(c))?(el(e)?f=ie.after(x):f=ie.before(x),f):c?G0(e,c):null},Ei=e=>({next:n=>Of(ms.Forwards,n,e),prev:n=>Of(ms.Backwards,n,e)}),zw=(e,n,o)=>{const r=e?ie.before(o):ie.after(o);return Wc(e,n,r)},zk=e=>co(e)?ie.before(e):ie.after(e),Uw=e=>ie.isTextPosition(e)?e.offset()===0:Ca(e.getNode()),Ww=e=>{if(ie.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Ca(e.getNode(!0))},Af=(e,n)=>!ie.isTextPosition(e)&&!ie.isTextPosition(n)&&e.getNode()===n.getNode(!0),iD=e=>!ie.isTextPosition(e)&&co(e.getNode()),lD=(e,n,o)=>e?!Af(n,o)&&!iD(n)&&Ww(n)&&Uw(o):!Af(o,n)&&Uw(n)&&Ww(o),Wc=(e,n,o)=>{const r=Ei(n);return N.from(e?r.next(o):r.prev(o))},q0=(e,n,o)=>Wc(e,n,o).bind(r=>Il(o,r,n)&&lD(e,o,r)?Wc(e,n,r):N.some(r)),Jd=(e,n,o,r)=>q0(e,n,o).bind(c=>r(c)?Jd(e,n,c,r):N.some(c)),fs=(e,n)=>{const o=e?n.firstChild:n.lastChild;return _e(o)?N.some(ie(o,e?0:o.data.length)):o?Ca(o)?N.some(e?ie.before(o):zk(o)):zw(e,n,o):N.none()},sr=Ee(Wc,!0),Ls=Ee(Wc,!1),gs=Ee(fs,!0),Ta=Ee(fs,!1),vh="_mce_caret",yc=e=>We(e)&&e.id===vh,Qd=(e,n)=>{let o=n;for(;o&&o!==e;){if(yc(o))return o;o=o.parentNode}return null},Uk=e=>K(e.start),Wk=e=>kt(e,"rng"),nl=e=>kt(e,"id"),Df=e=>kt(e,"name"),K1=e=>Te.isArray(e.start),Zc=e=>!Df(e)&&en(e.forward)?e.forward:!0,K0=(e,n)=>(We(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Y0=(e,n)=>{const o=N.from(Zd(e.getRoot(),n.start)),r=N.from(Zd(e.getRoot(),n.end));return _r(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Zc(n)}})},em=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(er);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},X0=e=>!e.hasChildNodes(),Zw=(e,n)=>Ta(e).fold(we,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Y1=(e,n,o)=>X0(n)&&Qd(e,n)?(em(n,o),!0):!1,Hl=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const x=f.childNodes;if(Y1(u,f,r))return!0;if(c[y]>x.length-1)return Y1(u,f,r)?!0:Zw(f,r);f=x[c[y]]}_e(f)&&(b=Math.min(c[0],f.data.length)),We(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},J0=e=>_e(e)&&e.data.length>0,Ti=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):J0(r.nextSibling)?(f=r.nextSibling,b=0):J0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):J0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;Te.each(Te.grep(r.childNodes),O=>{_e(O)&&(O.data=O.data.replace(/\uFEFF/g,""))});let A;for(;A=e.get(o.id+"_"+n);)e.remove(A,!0);if(_e(x)&&_e(y)&&!gn.browser.isOpera()){const O=y.data.length;y.appendData(x.data),e.remove(x),f=y,b=O}}return N.some(ie(f,b))}else return N.none()},jw=(e,n)=>{const o=e.createRng();return Hl(e,!0,n,o)&&Hl(e,!1,n,o)?N.some({range:o,forward:Zc(n)}):N.none()},Q0=(e,n)=>{const o=Ti(e,"start",n),r=Ti(e,"end",n);return _r(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(K0(e,c.container()),c.offset()),f.setEnd(K0(e,u.container()),u.offset()),{range:f,forward:Zc(n)}})},Zk=(e,n)=>N.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),uD=(e,n)=>{const o=e.dom;if(n){if(K1(n))return jw(o,n);if(Uk(n))return Y0(o,n);if(nl(n))return Q0(o,n);if(Df(n))return Zk(o,n);if(Wk(n))return N.some({range:n.rng,forward:Zc(n)})}return N.none()},jk=(e,n,o)=>ds(e,n,o),Gk=(e,n)=>{uD(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ja=e=>We(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",tm=(e=>n=>e===n)(me),Rf=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,ey=e=>!Rf(e)&&!tm(e)&&!ta(e),ty=e=>({value:qk(e)}),qk=e=>Bm(e,"#").toUpperCase(),Gw=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},ny=e=>{const n=Gw(e.red)+Gw(e.green)+Gw(e.blue);return ty(n)},Xt=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Vl=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,nm=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),X1=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return nm(c,u,f,b)},Kk=e=>{if(e==="transparent")return N.some(nm(0,0,0,0));const n=Xt.exec(e);if(n!==null)return N.some(X1(n[1],n[2],n[3],"1"));const o=Vl.exec(e);return o!==null?N.some(X1(o[1],o[2],o[3],o[4])):N.none()},om=e=>Kk(e).map(ny).map(n=>"#"+n.value).getOr(e),J1=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},oy=e=>Pi(e,n=>{const o=go(n);return o?[W.fromDom(o)]:[]}),sy=e=>J1(e).length>1,ry=e=>ft(oy(e),To),qw=e=>Ys(e,"td[data-mce-selected],th[data-mce-selected]"),Yk=(e,n)=>{const o=qw(n);return o.length>0?o:ry(e)},Gu=e=>Yk(J1(e.selection.getSel()),W.fromDom(e.getBody())),Mf=(e,n)=>Rg(e,"table",n),mD=e=>{const n=e.startContainer,o=e.startOffset;return _e(n)?o===0?N.some(W.fromDom(n)):N.none():N.from(n.childNodes[o]).map(W.fromDom)},Xk=e=>{const n=e.endContainer,o=e.endOffset;return _e(n)?o===n.data.length?N.some(W.fromDom(n)):N.none():N.from(n.childNodes[o-1]).map(W.fromDom)},Q1=e=>Wm(e).fold(Le([e]),n=>[e].concat(Q1(n))),eb=e=>Ic(e).fold(Le([e]),n=>oo(n)==="br"?Fc(n).map(o=>[e].concat(eb(o))).getOr([]):[e].concat(eb(n))),zl=(e,n)=>_r(mD(n),Xk(n),(o,r)=>{const c=Ho(Q1(e),Ee(En,o)),u=Ho(eb(e),Ee(En,r));return c.isSome()&&u.isSome()}).getOr(!1),tb=(e,n,o,r)=>{const c=o,u=new Xo(o,c),f=ro(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!Bt(["td","th","table"],x.toLowerCase()));let b=o;do{if(_e(b)&&Te.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},sm=e=>{const n=e.selection.getSel();return Ce(n)&&n.rangeCount>0},Ul=(e,n)=>{const o=Gu(e);o.length>0?be(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},Kw=(e,n,o)=>{const r=Ss(e,n);o(r),e.moveToBookmark(r)},yh=e=>Ma(e==null?void 0:e.nodeType),ay=e=>We(e)&&!ja(e)&&!yc(e)&&!mc(e),Jk=(e,n)=>{if(ay(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},ol=e=>e.isContentEditable===!0,Yw=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=vn(u);Kw(r,!0,()=>{n()}),f&&vn(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Qk(c,r)},Qk=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!Jk(e,b)&&We(u)){const y=u.childNodes,x=e.getRoot();let A;if(f<y.length){const O=y[f];A=new Xo(O,(o=e.getParent(O,e.isBlock))!==null&&o!==void 0?o:x)}else{const O=y[y.length-1];A=new Xo(O,(r=e.getParent(O,e.isBlock))!==null&&r!==void 0?r:x),A.next(!0)}for(let O=A.current();O;O=A.next()){if(e.getContentEditable(O)==="false")return;if(_e(O)&&!iy(O)){c.setStart(O,0),n.setRng(c);return}}}},Xw=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(We(e)||!iy(e))return e}},cy=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Nu(e,n),Bf=(e,n,o)=>e.schema.isValidChild(n,o),iy=(e,n=!1)=>{if(Ce(e)&&_e(e)){const o=n?e.data.replace(/ /g," "):e.data;return pc(o)}else return!1},e_=e=>Ce(e)&&_e(e)&&e.length===0,Nf=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Cw(e),c=Pa(r)?o:`${o},${r}`;return Xr(W.fromDom(n),c)},Jw=(e,n)=>{const o=e.dom;return ay(n)&&o.getContentEditable(n)==="false"&&Nf(e,n)&&o.select('[contenteditable="true"]',n).length===0},Ve=(e,n)=>G(e)?e(n):(Ce(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),ts=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Pf=(e,n)=>{if(dn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=om(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},_o=(e,n,o)=>{const r=e.getStyle(n,o);return Pf(r,o)},Cc=(e,n)=>{let o;return e.getParent(n,r=>We(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Ch=(e,n,o)=>e.getParents(n,o,e.getRoot()),$f=(e,n,o)=>{const r=e.formatter.get(n);return Ce(r)&&mo(r,o)},ly=(e,n)=>$f(e,n,r=>{const c=u=>G(u)||u.length>1&&u.charAt(0)==="%";return mo(["styles","attributes"],u=>to(r,u).exists(f=>{const b=On(f)?f:Rm(f);return mo(b,c)}))}),nb=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>ro(u,(f,b)=>mo(r,y=>y===b));return $f(e,n,u=>{const f=c(u);return $f(e,o,b=>{const y=c(b);return hd(f,y)})})},ki=e=>la(e,"block"),ob=e=>ki(e)&&e.wrapper===!0,t_=e=>ki(e)&&e.wrapper!==!0,Ga=e=>la(e,"selector"),hs=e=>la(e,"inline"),uy=e=>Ga(e)&&hs(e)&&li(to(e,"mixed"),!0),sb=e=>Ga(e)&&e.expand!==!1&&!hs(e),rm=ja,Ff=Ch,wh=iy,rb=cy,ab=e=>co(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,cb=(e,n)=>{let o=n;for(;o;){if(We(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Qw=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},If=(e,n,o)=>Qw(e,n,o,r=>tm(r)||Rf(r)),Wl=(e,n,o)=>Qw(e,n,o,ey),eS=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(A,O,B)=>{const L=Lu(e),z=c?L.backwards:L.forwards;return N.from(z(A,O,(F,V)=>rm(F.parentNode)?-1:(f=F,B(c,F,V)),b))};return y(o,r,If).bind(A=>u?y(A.container,A.offset+(c?-1:0),Wl):N.some(A)).orThunk(()=>f?N.some({container:f,offset:c?0:f.length}):N.none())},dy=(e,n,o,r,c)=>{const u=r[c];_e(r)&&Pa(r.data)&&u&&(r=u);const f=Ff(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const x=n[y];if(!(Ce(x.collapsed)&&x.collapsed!==o.collapsed)&&Ga(x)&&e.is(f[b],x.selector))return f[b]}return r},ib=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(ki(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(_e(o)?o.parentNode:o,x=>x!==f&&rb(e.schema,x),y)}if(u&&ki(b)&&b.wrapper&&(u=Ff(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!ts(u,"br")););return u||o},tS=(e,n,o,r)=>{const c=o.parentNode;return Ce(o[r])?!1:c===n||dn(c)||e.isBlock(c)?!0:tS(e,n,c,r)},Sh=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(_e(o)&&!wh(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const x=_e(y)&&!tS(e,b,y,f);if(!rm(y)&&!ab(y)&&!wh(y,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},xh=e=>rm(e.parentNode)||rm(e),am=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return We(c)&&c.hasChildNodes()&&(c=nr(c,u),_e(c)&&(u=0)),We(f)&&f.hasChildNodes()&&(f=nr(f,n.collapsed?b:b-1),_e(f)&&(b=f.data.length)),c=cb(e,c),f=cb(e,f),xh(c)&&(c=rm(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,_e(c)&&(u=n.collapsed?c.length:0)),xh(f)&&(f=rm(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,_e(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(eS(e,e.getRoot(),c,u,!0,r).each(({container:O,offset:B})=>{c=O,u=B}),eS(e,e.getRoot(),f,b,!1,r).each(({container:O,offset:B})=>{f=O,b=B})),(hs(y)||y.block_expand)&&((!hs(y)||!_e(c)||u===0)&&(c=Sh(e,o,c,u,!0)),(!hs(y)||!_e(f)||b===f.data.length)&&(f=Sh(e,o,f,b,!1))),sb(y)&&(c=dy(e,o,n,c,"previousSibling"),f=dy(e,o,n,f,"nextSibling")),(ki(y)||Ga(y))&&(c=ib(e,o,c,"previousSibling"),f=ib(e,o,f,"nextSibling"),ki(y)&&(e.isBlock(c)||(c=Sh(e,o,c,u,!0)),e.isBlock(f)||(f=Sh(e,o,f,b,!1)))),We(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),We(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},qu=(e,n,o)=>{var r;const c=n.startOffset,u=nr(n.startContainer,c),f=n.endOffset,b=nr(n.endContainer,f-1),y=V=>{const q=V[0];_e(q)&&q===u&&c>=q.data.length&&V.splice(0,1);const X=V[V.length-1];return f===0&&V.length>0&&X===b&&_e(X)&&V.splice(V.length-1,1),V},x=(V,q,X)=>{const J=[];for(;V&&V!==X;V=V[q])J.push(V);return J},A=(V,q)=>e.getParent(V,X=>X.parentNode===q,q),O=(V,q,X)=>{const J=X?"nextSibling":"previousSibling";for(let se=V,ye=se.parentNode;se&&se!==q;se=ye){ye=se.parentNode;const tt=x(se===V?se:se[J],J);tt.length&&(X||tt.reverse(),o(y(tt)))}};if(u===b)return o(y([u]));const B=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return O(u,B,!0);if(e.isChildOf(b,u))return O(b,B);const L=A(u,B)||u,z=A(b,B)||b;O(u,L,!0);const F=x(L===u?L:L.nextSibling,"nextSibling",z===b?z.nextSibling:z);F.length&&o(y(F)),O(b,z)},Es=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],jc=e=>Ar(e)&&jp(e)===er,wc=(e,n,o,r)=>Fa(n).fold(()=>"skipping",c=>r==="br"||jc(n)?"valid":Ml(n)?"existing":yc(n.dom)?"caret":mo(Es,u=>Xr(n,u))?"valid-block":!Bf(e,o,r)||!Bf(e,oo(c),o)?"invalid-child":"valid"),lb=(e,n)=>{const o=am(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Gc=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;Ed(e,$u()),qo(e,`${Za()}`,f),qo(e,`${Br()}`,r);const{attributes:y={},classes:x=[]}=c(f,b);if(qr(e,y),zT(e,x),u){x.length>0&&qo(e,`${gf()}`,x.join(","));const A=jr(y);A.length>0&&qo(e,`${Fu()}`,A.join(","))}},n_=e=>{Td(e,$u()),Ko(e,`${Za()}`),Ko(e,`${Br()}`),Ko(e,`${Qo()}`);const n=di(e,`${Fu()}`).map(r=>r.split(",")).getOr([]),o=di(e,`${gf()}`).map(r=>r.split(",")).getOr([]);be(n,r=>Ko(e,r)),UT(e,o),Ko(e,`${gf()}`),Ko(e,`${Fu()}`)},ub=(e,n,o,r,c)=>{const u=W.fromTag("span",e);return Gc(u,n,o,r,c,!1),u},my=(e,n,o,r,c,u)=>{const f=[],b=ub(e.getDoc(),o,u,r,c),y=Ds(),x=()=>{y.clear()},A=()=>y.get().getOrThunk(()=>{const z=Iu(b);return f.push(z),y.set(z),z}),O=z=>{be(z,B)},B=z=>{switch(wc(e,z,"span",oo(z))){case"invalid-child":{x();const V=Ps(z);O(V),x();break}case"valid-block":{x(),Gc(z,o,u,r,c,!0);break}case"valid":{const V=A();kC(z,V);break}}},L=z=>{const F=Ft(z,W.fromDom);O(F)};return qu(e.dom,n,z=>{x(),L(z)}),f},fy=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Gu(e).length>0,b=qg("mce-annotation");if(u.collapsed&&!f&&lb(e,u),c.getRng().collapsed&&!f){const y=ub(e.getDoc(),b,r,n,o.decorate);Gt(y,me),c.getRng().insertNode(y.dom),c.select(y.dom)}else Kw(c,!1,()=>{Ul(e,y=>{my(e,y,b,n,o.decorate,r)})})})},nS=e=>{const n=VT();HT(e,n);const o=LT(e,n),r=Im("span"),c=u=>{be(u,f=>{r(f)?fi(f):n_(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{fy(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{XC(e,N.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();Ze(f0(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=f0(e,u);return wn(f,b=>Ft(b,y=>y.dom))}}},cm=e=>({getBookmark:Ee(jk,e),moveToBookmark:Ee(Gk,e)});cm.isBookmarkNode=ja;const oS=(e,n,o)=>o.collapsed?!1:mo(o.getClientRects(),r=>ZT(r,e,n)),o_=(e,n)=>e.dispatch("PreProcess",n),gy=(e,n)=>e.dispatch("PostProcess",n),hy=e=>{e.dispatch("remove")},Rn=e=>{e.dispatch("detach")},Ku=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},sS=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},rS=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},aS=e=>{e.dispatch("PreInit")},py=e=>{e.dispatch("PostRender")},cS=e=>{e.dispatch("Init")},by=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},vy=(e,n,o)=>{e.dispatch(n,o)},iS=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},yy=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},s_=(e,n)=>e.dispatch("BeforeSetContent",n),db=(e,n)=>e.dispatch("SetContent",n),r_=(e,n)=>e.dispatch("BeforeGetContent",n),Yu=(e,n)=>e.dispatch("GetContent",n),Eh=(e,n)=>{e.dispatch("AutocompleterStart",n)},Cy=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},a_=e=>{e.dispatch("AutocompleterEnd")},Zo=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),ns=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),im=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),mb=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Ke={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ke.metaKeyPressed(e),metaKeyPressed:e=>gn.os.isMacOS()||gn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},lm="data-mce-selected",Kt="table,img,figure.image,hr,video,span.mce-preview-object,details",lS=Math.abs,Th=Math.round,kh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},c_=e=>e.type==="longpress"||e.type.indexOf("touch")===0,uS=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,x,A,O,B,L,z,F,V,q,X,J,se,ye,tt;const xe=Ae=>Ce(Ae)&&(AC(Ae)||o.is(Ae,"figure.image")),le=Ae=>Uo(Ae)||o.hasClass(Ae,"mce-preview-object"),fe=(Ae,wt)=>{if(c_(Ae)){const Mt=Ae.touches[0];return xe(Ae.target)&&!oS(Mt.clientX,Mt.clientY,wt)}else return xe(Ae.target)&&!oS(Ae.clientX,Ae.clientY,wt)},Pe=Ae=>{const wt=Ae.target;fe(Ae,n.selection.getRng())&&!Ae.isDefaultPrevented()&&n.selection.select(wt)},Ie=Ae=>o.hasClass(Ae,"mce-preview-object")&&Ce(Ae.firstElementChild)?[Ae,Ae.firstElementChild]:o.is(Ae,"figure.image")?[Ae.querySelector("img")]:[Ae],Ye=Ae=>{const wt=vw(n);return!wt||Ae.getAttribute("data-mce-resize")==="false"||Ae===n.getBody()?!1:o.hasClass(Ae,"mce-preview-object")&&Ce(Ae.firstElementChild)?Xr(W.fromDom(Ae.firstElementChild),wt):Xr(W.fromDom(Ae),wt)},vt=Ae=>le(Ae)?o.create("img",{src:gn.transparentSrc}):Ae.cloneNode(!0),yt=(Ae,wt,Mt)=>{if(Ce(Mt)){const an=Ie(Ae);be(an,Jn=>{Jn.style[wt]||!n.schema.isValid(Jn.nodeName.toLowerCase(),wt)?o.setStyle(Jn,wt,Mt):o.setAttrib(Jn,wt,""+Mt)})}},rn=(Ae,wt,Mt)=>{yt(Ae,"width",wt),yt(Ae,"height",Mt)},fn=Ae=>{let wt,Mt,an,Jn,_t;wt=Ae.screenX-O,Mt=Ae.screenY-B,J=wt*x[2]+F,se=Mt*x[3]+V,J=J<5?5:J,se=se<5?5:se,(xe(f)||le(f))&&dk(n)!==!1?an=!Ke.modifierPressed(Ae):an=Ke.modifierPressed(Ae),an&&(lS(wt)>lS(Mt)?(se=Th(J*q),J=Th(se/q)):(J=Th(se/q),se=Th(J*q))),rn(b,J,se),Jn=x.startPos.x+wt,_t=x.startPos.y+Mt,Jn=Jn>0?Jn:0,_t=_t>0?_t:0,o.setStyles(y,{left:Jn,top:_t,display:"block"}),y.innerHTML=J+" &times; "+se,x[2]<0&&b.clientWidth<=J&&o.setStyle(b,"left",L+(F-J)),x[3]<0&&b.clientHeight<=se&&o.setStyle(b,"top",z+(V-se)),wt=u.scrollWidth-ye,Mt=u.scrollHeight-tt,wt+Mt!==0&&o.setStyles(y,{left:Jn-wt,top:_t-Mt}),X||(sS(n,f,F,V,"corner-"+x.name),X=!0)},Mn=()=>{const Ae=X;X=!1,Ae&&(yt(f,"width",J),yt(f,"height",se)),o.unbind(r,"mousemove",fn),o.unbind(r,"mouseup",Mn),c!==r&&(o.unbind(c,"mousemove",fn),o.unbind(c,"mouseup",Mn)),o.remove(b),o.remove(y),o.remove(A),wr(f),Ae&&(rS(n,f,J,se,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},wr=Ae=>{tn();const wt=o.getPos(Ae,u),Mt=wt.x,an=wt.y,Jn=Ae.getBoundingClientRect(),_t=Jn.width||Jn.right-Jn.left,nn=Jn.height||Jn.bottom-Jn.top;f!==Ae&&(Me(),f=Ae,J=se=0);const Ao=n.dispatch("ObjectSelected",{target:Ae});Ye(Ae)&&!Ao.isDefaultPrevented()?Ze(kh,(Hn,xo)=>{const uo=os=>{const Sr=Ie(f)[0];O=os.screenX,B=os.screenY,F=Sr.clientWidth,V=Sr.clientHeight,q=V/F,x=Hn,x.name=xo,x.startPos={x:_t*Hn[0]+Mt,y:nn*Hn[1]+an},ye=u.scrollWidth,tt=u.scrollHeight,A=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(A,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=vt(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Mt,top:an,margin:0}),rn(b,_t,nn),b.removeAttribute(lm),u.appendChild(b),o.bind(r,"mousemove",fn),o.bind(r,"mouseup",Mn),c!==r&&(o.bind(c,"mousemove",fn),o.bind(c,"mouseup",Mn)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},F+" &times; "+V)};let Zn=o.get("mceResizeHandle"+xo);Zn&&o.remove(Zn),Zn=o.add(u,"div",{id:"mceResizeHandle"+xo,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+xo+"-resize; margin:0; padding:0"}),o.bind(Zn,"mousedown",os=>{os.stopImmediatePropagation(),os.preventDefault(),uo(os)}),Hn.elm=Zn,o.setStyles(Zn,{left:_t*Hn[0]+Mt-Zn.offsetWidth/2,top:nn*Hn[1]+an-Zn.offsetHeight/2})}):Me(!1)},ks=Rl(wr,0),Me=(Ae=!0)=>{ks.cancel(),tn(),f&&Ae&&f.removeAttribute(lm),Ze(kh,(wt,Mt)=>{const an=o.get("mceResizeHandle"+Mt);an&&(o.unbind(an),o.remove(an))})},Je=(Ae,wt)=>o.isChildOf(Ae,wt),un=Ae=>{if(X||n.removed||n.composing)return;const wt=Ae.type==="mousedown"?Ae.target:e.getNode(),Mt=Jr(W.fromDom(wt),Kt).map(Jn=>Jn.dom).filter(Jn=>o.isEditable(Jn.parentElement)).getOrUndefined(),an=Ce(Mt)?o.getAttrib(Mt,lm,"1"):"1";if(be(o.select(`img[${lm}],hr[${lm}]`),Jn=>{Jn.removeAttribute(lm)}),Ce(Mt)&&Je(Mt,u)&&n.hasFocus()){nt();const Jn=e.getStart(!0);if(Je(Jn,Mt)&&Je(e.getEnd(!0),Mt)){o.setAttrib(Mt,lm,an),ks.throttle(Mt);return}}Me()},tn=()=>{Ze(kh,Ae=>{Ae.elm&&(o.unbind(Ae.elm),delete Ae.elm)})},nt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{nt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",un),n.on("keyup compositionend",Ae=>{f&&f.nodeName==="TABLE"&&un(Ae)}),n.on("hide blur",Me),n.on("contextmenu longpress",Pe,!0)}),n.on("remove",tn),{isResizable:Ye,showResizeRect:wr,hideResizeRect:Me,updateResizeRect:un,destroy:()=>{ks.cancel(),f=b=A=null}}},wy=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},i_=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},dS=(e,n,o)=>{const r=e.document.createRange();return wy(r,n),i_(r,o),r},Sy=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},um=Si.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fb=(e,n,o)=>n(W.fromDom(o.startContainer),o.startOffset,W.fromDom(o.endContainer),o.endOffset),mS=(e,n)=>n.match({domRange:o=>({ltr:Le(o),rtl:N.none}),relative:(o,r)=>({ltr:pd(()=>dS(e,o,r)),rtl:pd(()=>N.some(dS(e,r,o)))}),exact:(o,r,c,u)=>({ltr:pd(()=>Sy(e,o,r,c,u)),rtl:pd(()=>N.some(Sy(e,c,u,o,r)))})}),fD=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>um.rtl(W.fromDom(c.endContainer),c.endOffset,W.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>fb(e,um.ltr,o)):fb(e,um.ltr,o)},fS=(e,n)=>{const o=mS(e,n);return fD(e,o)};um.ltr,um.rtl;const gS={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},l_=(e,n,o)=>{var r,c;return N.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return N.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),N.some(f)})},gD=(e,n,o)=>{var r,c;return N.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},ht=(()=>document.caretPositionFromPoint?l_:document.caretRangeFromPoint?gD:N.none)(),u_=(e,n,o)=>{const r=W.fromDom(e.document);return ht(r,n,o).map(c=>gS.create(W.fromDom(c.startContainer),c.startOffset,W.fromDom(c.endContainer),c.endOffset))},hS=Si.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),d_=(e,n,o,r)=>e.fold(n,o,r),_h=e=>e.fold(Eo,Eo,Eo),hD=hS.before,gb=hS.on,m_=hS.after,Zl={before:hD,on:gb,after:m_,cata:d_,getStart:_h},Lf=Si.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),f_=e=>Lf.exact(e.start,e.soffset,e.finish,e.foffset),xy=e=>e.match({domRange:n=>W.fromDom(n.startContainer),relative:(n,o)=>Zl.getStart(n),exact:(n,o,r,c)=>n}),Ey=Lf.domRange,Ty=Lf.relative,ky=Lf.exact,g_=e=>{const n=xy(e);return zm(n)},h_=gS.create,jl={domRange:Ey,relative:Ty,exact:ky,exactFromRange:f_,getWin:g_,range:h_},Oh=(e,n)=>{const o=oo(e);return o==="input"?Zl.after(e):Bt(["br","img"],o)?n===0?Zl.before(e):Zl.after(e):Zl.on(e,n)},p_=(e,n)=>{const o=e.fold(Zl.before,Oh,Zl.after),r=n.fold(Zl.before,Oh,Zl.after);return jl.relative(o,r)},ln=(e,n,o,r)=>{const c=Oh(e,n),u=Oh(o,r);return jl.relative(c,u)},b_=e=>e.match({domRange:n=>{const o=W.fromDom(n.startContainer),r=W.fromDom(n.endContainer);return ln(o,n.startOffset,r,n.endOffset)},relative:p_,exact:ln}),qc=(e,n)=>{const r=(n||document).createDocumentFragment();return be(e,c=>{r.appendChild(c.dom)}),W.fromDom(r)},_i=e=>{const n=jl.getWin(e).dom,o=(c,u,f,b)=>Sy(n,c,u,f,b),r=b_(e);return fS(n,r).match({ltr:o,rtl:o})},hb=(e,n,o)=>u_(e,n,o),sa=(e,n,o)=>{const r=zm(W.fromDom(o));return hb(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Hf=(e,n)=>Ce(e)&&Ce(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,Ah=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Dh=(e,n,o)=>Ah(e,n,o)!==null,Vf=(e,n,o)=>Dh(e,n,r=>r.nodeName===o),pD=(e,n)=>hc(e)&&!Dh(e,n,yc),pS=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Xo(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(co(u))return!0}return!1},bD=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},vD=(e,n)=>{let o=n;for(;o&&o!==e;){if(vn(o))return!0;o=o.parentNode}return!1},Jt=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,x;if(!b)return N.none();const A=e.getParent(b,e.isBlock)||u;if(r&&co(c)&&n&&e.isEmpty(A))return N.some(ie(b,e.nodeIndex(c)));const O=new Xo(c,A);for(;x=O[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||pD(x,u))return N.none();if(_e(x)&&x.data.length>0)return Vf(x,u,"A")?N.none():N.some(ie(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return N.none();y=x}return Ha(y)?N.none():o&&y?N.some(ie(y,0)):N.none()},Sc=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=We(b)&&y===b.childNodes.length,A=e.schema.getNonEmptyElements();let O=o;if(hc(b))return N.none();if(We(b)&&y>b.childNodes.length-1&&(O=!1),Gm(b)&&(b=c,y=0),b===c){if(O&&(u=b.childNodes[y>0?y-1:0],u&&(hc(u)||A[u.nodeName]||fo(u))))return N.none();if(b.hasChildNodes()){if(y=Math.min(!O&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=_e(b)&&x?b.data.length:0,!n&&b===c.lastChild&&fo(b)||vD(c,b)||hc(b))return N.none();if(b.hasChildNodes()&&!fo(b)){u=b;const B=new Xo(b,c);do{if(vn(u)||hc(u)){f=!1;break}if(_e(u)&&u.data.length>0){y=O?0:u.data.length,b=u,f=!0;break}if(A[u.nodeName.toLowerCase()]&&!qm(u)){y=e.nodeIndex(u),b=u.parentNode,O||y++,f=!0;break}}while(u=O?B.next():B.prev())}}}return n&&(_e(b)&&y===0&&Jt(e,x,n,!0,b).each(B=>{b=B.container(),y=B.offset(),f=!0}),We(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&co(u)&&!bD(u,"A")&&!pS(e,u,!1)&&!pS(e,u,!0)&&Jt(e,x,n,!0,u).each(B=>{b=B.container(),y=B.offset(),f=!0}))),O&&!n&&_e(b)&&y===b.data.length&&Jt(e,x,n,!1,b).each(B=>{b=B.container(),y=B.offset(),f=!0}),f&&b?N.some(ie(b,y)):N.none()},Gl=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=ie.fromRangeStart(n);return Sc(e,o,!0,r).each(u=>{(!o||!ie.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Sc(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Hf(n,r)?N.none():N.some(r)},pb=(e,n)=>e.splitText(n),Xu=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&_e(n)){if(o>0&&o<n.data.length)if(r=pb(n,o),n=r.previousSibling,c>o){c=c-o;const u=pb(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(_e(n)&&o>0&&o<n.data.length&&(n=pb(n,o),o=0),_e(r)&&c>0&&c<r.data.length){const u=pb(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Wt=e=>({walk:(u,f)=>qu(e,u,f),split:Xu,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=am(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Gl(e,u).fold(we,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Wt.compareRanges=Hf,Wt.getCaretRangeFromPoint=sa,Wt.getSelectedNode=go,Wt.getNode=nr;const vS=((e,n)=>{const o=(b,y)=>{if(!Ma(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=b.dom;yl(x)&&(x.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const x=Os(b,e);return parseFloat(x)||0}return y},c=r,u=(b,y)=>Ro(y,(x,A)=>{const O=Os(b,A),B=O===void 0?0:parseInt(O,10);return isNaN(B)?x:x+B},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,x)=>{const A=u(b,x);return y>A?y-A:0}}})("height",e=>{const n=e.dom;return kd(e)?n.getBoundingClientRect().height:n.offsetHeight}),_y=e=>vS.get(e),yS=()=>W.fromDom(document),dm=(e,n)=>e.view(n).fold(Le([]),r=>{const c=e.owner(r),u=dm(e,c);return[r].concat(u)}),mm=(e,n)=>{const o=n.owner(e);return dm(n,o)};var m=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?N.none():N.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(W.fromDom)},owner:e=>vl(e)});const h=e=>{const n=yS(),o=gi(n),r=mm(e,m),c=zv(e),u=dd(r,(f,b)=>{const y=zv(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return Od(u.left+c.left+o.left,u.top+c.top+o.top)},v=e=>oo(e)==="textarea",S=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),T=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},R=(e,n)=>{const o=Ps(e);if(o.length===0||v(e))return{element:e,offset:n};if(n<o.length&&!v(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return v(r)?{element:e,offset:n}:oo(r)==="img"?{element:r,offset:1}:Ar(r)?{element:r,offset:jp(r).length}:{element:r,offset:Ps(r).length}}},$=(e,n)=>{const o=Cl(e),r=_y(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},H=(e,n)=>{const o=R(e,n),r=W.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+er+"</span>");return ba(o.element,r),$(r,()=>Tn(r))},Z=e=>$(W.fromDom(e),pt),ee=(e,n,o,r)=>{he(e,(c,u)=>ze(e,n,o,r),o)},Se=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(S(e,u))return;const f=gi(n).top;o(n,f,r,c),T(e,u)},ze=(e,n,o,r)=>{const c=W.fromDom(e.getBody()),u=W.fromDom(e.getDoc());yo(c);const f=H(W.fromDom(o.startContainer),o.startOffset);Se(e,u,n,f,r),f.cleanup()},Fe=(e,n,o,r)=>{const c=W.fromDom(e.getDoc());Se(e,c,o,Z(n),r)},he=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(W.fromDom(r),W.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},He=(e,n)=>e.element.dom.scrollIntoView({block:n?"start":"end"}),ge=(e,n,o,r)=>{const c=n+e,u=o.pos.top,f=o.bottom,b=f-u>=n;u<e?He(o,r!==!1):u>c?He(o,b?r!==!1:r===!0):f>c&&!b&&He(o,r===!0)},Xe=(e,n,o,r)=>{const c=zm(e).dom.innerHeight;ge(n,c,o,r)},Ct=(e,n,o,r)=>{const c=zm(e).dom.innerHeight;ge(n,c,o,r);const u=h(o.element),f=Uv(window);u.top<f.y?Ad(o.element,r!==!1):u.top>f.bottom&&Ad(o.element,r===!0)},It=(e,n,o)=>ee(e,Xe,n,o),Un=(e,n,o)=>Fe(e,n,Xe,o),Ms=(e,n,o)=>ee(e,Ct,n,o),Oo=(e,n,o)=>Fe(e,n,Ct,o),ka=(e,n,o)=>{(e.inline?Un:Oo)(e,n,o)},Oi=(e,n,o)=>{(e.inline?It:Ms)(e,n,o)},Rh=e=>e.dom.focus(),bb=e=>{const n=Hi(e).dom;return e.dom===n.activeElement},zf=(e=yS())=>N.from(e.dom.activeElement).map(W.fromDom),_n=e=>zf(Hi(e)).filter(n=>e.dom.contains(n.dom)),yr=(e,n)=>{const o=Ar(n)?jp(n).length:Ps(n).length+1;return e>o?o:e<0?0:e},Lr=e=>jl.range(e.start,yr(e.soffset,e.start),e.finish,yr(e.foffset,e.finish)),xc=(e,n)=>!lt(n.dom)&&(mi(e,n)||En(e,n)),qa=e=>n=>xc(e,n.start)&&xc(e,n.finish),Uf=e=>e.inline||gn.browser.isFirefox(),Hr=e=>jl.range(W.fromDom(e.startContainer),e.startOffset,W.fromDom(e.endContainer),e.endOffset),Oy=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?N.none():N.from(n.getRangeAt(0))).map(Hr)},Mh=e=>{const n=zm(e);return Oy(n.dom).filter(qa(e))},Ec=(e,n)=>N.from(n).filter(qa(e)).map(Lr),Hs=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),N.some(n)}catch{return N.none()}},Ay=e=>{const n=Uf(e)?Mh(W.fromDom(e.getBody())):N.none();e.bookmark=n.isSome()?n:e.bookmark},vb=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>Ec(W.fromDom(e.getBody()),o)).bind(Hs),CS=e=>{vb(e).each(n=>e.selection.setRng(n))},wS={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},Dy=(e,n)=>(Ma(n)||(n=0),setTimeout(e,n)),y_=(e,n)=>(Ma(n)||(n=0),setInterval(e,n)),Vr={setEditorTimeout:(e,n,o)=>Dy(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=y_(()=>{e.removed?clearInterval(r):n()},o);return r}},CD=e=>e.type==="nodechange"&&e.selectionChange,wD=(e,n)=>{const o=()=>{n.throttle()};Dn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Dn.DOM.unbind(document,"mouseup",o)})},SS=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},aF=(e,n)=>{SS(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{CD(o)||Ay(e)})},cF=e=>{const n=Rl(()=>{Ay(e)},0);e.on("init",()=>{e.inline&&wD(e,n),aF(e,n)}),e.on("remove",()=>{n.cancel()})};let Wf;const C_=Dn.DOM,SD=e=>We(e)&&wS.isEditorUIElement(e),xS=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Ry=(e,n)=>{const o=fk(e);return C_.getParent(n,c=>SD(c)||(o?e.dom.is(c,o):!1))!==null},w_=e=>{try{const n=Hi(W.fromDom(e.getElement()));return zf(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},iF=(e,n)=>{const o=n.editor;cF(o);const r=(c,u)=>{if(Ok(c)&&c.inline!==!0){const f=W.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;xS(w_(o))&&r(o,Ed),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Vr.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!xS(w_(o))||c!==o)&&r(o,Td),!Ry(o,w_(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Wf||(Wf=c=>{const u=e.activeEditor;u&&Hp(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!Ry(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},C_.bind(document,"focusin",Wf))},lF=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&Wf&&(C_.unbind(document,"focusin",Wf),Wf=null)},uF=e=>{e.on("AddEditor",Ee(iF,e)),e.on("RemoveEditor",Ee(lF,e))},ES=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),xD=e=>e.collapsed?N.from(nr(e.startContainer,e.startOffset)).map(W.fromDom):N.none(),ED=(e,n)=>xD(n).bind(o=>Fs(o)?N.some(o):mi(e,o)?N.none():N.some(e)),S_=(e,n)=>{ED(W.fromDom(e.getBody()),n).bind(o=>gs(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},TS=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},dF=e=>bb(e)||_n(e).isSome(),mF=e=>Ce(e.iframeElement)&&bb(W.fromDom(e.iframeElement)),fF=e=>{const n=e.getBody();return n&&dF(W.fromDom(n))},gF=e=>{const n=Hi(W.fromDom(e.getElement()));return zf(n).filter(o=>!xS(o.dom)&&Ry(e,o.dom)).isSome()},Bh=e=>e.inline?fF(e):mF(e),hF=e=>Bh(e)||gF(e),pF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Ce(e.bookmark)&&!Bh(e)&&vb(e).each(u=>{e.selection.setRng(u),r=u});const c=ES(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){TS(c),S_(e,r),x_(e);return}e.inline||(gn.browser.isOpera()||TS(o),e.getWin().focus()),(gn.browser.isFirefox()||e.inline)&&(TS(o),S_(e,r)),x_(e)},x_=e=>e.editorManager.setActive(e),bF=(e,n)=>{e.removed||(n?x_(e):pF(e))},TD=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return N.from(u).map(W.fromDom).map(b=>!r||!n.collapsed?xu(b,c(b,f)).getOr(b):b).bind(b=>jn(b)?N.some(b):Fa(b).filter(jn)).map(b=>b.dom).getOr(e)},kD=(e,n,o=!1)=>TD(e,n,!0,o,(r,c)=>Math.min(pa(r),c)),_D=(e,n,o=!1)=>TD(e,n,!1,o,(r,c)=>c>0?c-1:c),My=(e,n)=>{const o=e;for(;e&&_e(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},OD=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),_e(o)&&_e(r)&&(o.length===c?o=My(o.nextSibling,!0):o=o.parentNode,u===0?r=My(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=_e(f)?f.parentNode:f;return We(b)?b:e},AD=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||kD(u,n,n.collapsed),e.isBlock),b=e.getParent(r||_D(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y;const x=new Xo(f,u);for(;(y=x.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},vF=(e,n,o)=>N.from(n).bind(r=>N.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(tb(e,f,r,!0),tb(e,f,r,!1)),f})),E_=(e,n)=>Ft(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),yF=e=>oo(e)==="img"?1:fc(e).fold(()=>Ps(e).length,n=>n.length),CF=e=>fc(e).filter(n=>n.trim().length!==0||n.indexOf(me)>-1).isSome(),wF=e=>Li(e)&&Kr(e,"contenteditable")==="false",SF=["img","br"],T_=e=>CF(e)||Bt(SF,oo(e))||wF(e),xF=e=>Dr(e,T_),DD=e=>RD(e,T_),RD=(e,n)=>{const o=r=>{const c=Ps(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return N.some(f);const b=o(f);if(b.isSome())return b}return N.none()};return o(e)},MD="[data-mce-autocompleter]",EF=(e,n)=>{if(BD(W.fromDom(e.getBody())).isNone()){const o=W.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Yo(o,W.fromDom(n.extractContents())),n.insertNode(o.dom),Fa(o).each(r=>r.dom.normalize()),DD(o).map(r=>{e.selection.setCursorLocation(r.dom,yF(r))})}},TF=e=>Jr(e,MD),BD=e=>_d(e,MD),kF=(e,n)=>BD(n).each(o=>{const r=e.selection.getBookmark();fi(o),e.selection.moveToBookmark(r)}),_F={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},kS=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},OF=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!pc(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},ND=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ka{static create(n,o){const r=new Ka(n,_F[n]||1);return o&&Ze(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!K(n))return Ce(n)&&Ze(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Ka(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=kS(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=kS(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(ND(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||ND(f))return!1}if(f.type===8||f.type===3&&!OF(f)||f.type===3&&f.parent&&o[f.parent.name]&&pc((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=kS(f,u));return!0}walk(n){return kS(this,null,n)}}const AF=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),PD=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&AF(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},DF=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){_s(y[2],"--")?b=PD(n,!1,y.index+3):b=PD(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const x=c.exec(n);if(Q(x)||x.index!==r.lastIndex)continue;y[1]==="/"?f-=1:kt(u,y[2])||(f+=1),b=r.lastIndex+x[0].length;break}}return b},RF=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},$D=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=RF(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let x;u[f[1]]?x=b:x=DF(r,c,b),c=c.substring(0,b-y)+c.substring(x),o.lastIndex=b-y}return xl(c)},MF=$D,FD=e=>{const n=Ys(e,"[data-mce-bogus]");be(n,o=>{Kr(o,"data-mce-bogus")==="all"?Tn(o):Qs(o)?(ba(o,W.fromText(wl)),Tn(o)):fi(o)})},ID=e=>{const n=Ys(e,"input");be(n,o=>{Ko(o,"name")})},BF=(e,n)=>{const o=wo(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},ct=(e,n)=>{const o=e.getDoc(),r=Hi(W.fromDom(e.getBody())),c=W.fromTag("div",o);qo(c,"data-mce-bogus","all"),Vp(c,{position:"fixed",left:"-9999999px",top:"0"}),Gt(c,n.innerHTML),FD(c),ID(c);const u=sF(r);Yo(u,c);const f=xl(c.dom.innerText);return Tn(c),f},LD=(e,n,o)=>{let r;return n.format==="raw"?r=Te.trim(MF(e.serializer,o.innerHTML)):n.format==="text"?r=ct(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=BF(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Kp(W.fromDom(o))&&K(r)?Te.trim(r):r},HD=(e,n)=>N.from(e.getBody()).fold(Le(n.format==="tree"?new Ka("body",11):""),o=>LD(e,n,o)),VD=Te.makeMap,_S=e=>{const n=[];e=e||{};const o=e.indent,r=VD(e.indent_before||""),c=VD(e.indent_after||""),u=Ol.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,x)=>{if(o&&r[b]&&n.length>0){const A=n[n.length-1];A.length>0&&A!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let A=0,O=y.length;A<O;A++){const B=y[A];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const A=n[n.length-1];A.length>0&&A!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Zf=(e={},n=yi())=>{const o=_S(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=y=>{var x;const A=f[y.type];if(A)A(y);else{const O=y.name,B=O in n.getVoidElements();let L=y.attributes;if(u&&L&&L.length>1){const z=[];z.map={};const F=n.getElementRule(y.name);if(F){for(let V=0,q=F.attributesOrder.length;V<q;V++){const X=F.attributesOrder[V];if(X in L.map){const J=L.map[X];z.map[X]=J,z.push({name:X,value:J})}}for(let V=0,q=L.length;V<q;V++){const X=L[V].name;if(!(X in z.map)){const J=L.map[X];z.map[X]=J,z.push({name:X,value:J})}}L=z}}if(o.start(O,L,B),!B){let z=y.firstChild;if(z){(O==="pre"||O==="textarea")&&z.type===3&&((x=z.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(z);while(z=z.next)}o.end(O)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},zD=new Set;be(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{zD.add(n)});const UD=["font","text-decoration","text-emphasis"],k_=(e,n)=>jr(e.parseStyle(e.getAttrib(n,"style"))),NF=e=>zD.has(e),OS=(e,n)=>Ws(k_(e,n),o=>!NF(o)),WD=e=>ft(e,n=>mo(UD,o=>_s(n,o))),oZ=(e,n,o)=>{const r=k_(e,n),c=k_(e,o),u=f=>{var b,y;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",A=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Pn(x)&&Pn(A)&&x!==A};return mo(r,f=>{const b=y=>mo(y,x=>x===f);if(!b(c)&&b(UD)){const y=WD(c);return mo(y,u)}else return u(f)})},ZD=(e,n,o)=>N.from(o.container()).filter(_e).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),xt=Ee(ZD,!0,Rf),__=Ee(ZD,!1,Rf),Pt=e=>{const n=e.container();return _e(n)&&(n.data.length===0||Yp(n.data)&&cm.isBookmarkNode(n.parentNode))},fm=(e,n)=>o=>Sf(e?0:-1,o).filter(n).isSome(),PF=e=>AC(e)&&Os(W.fromDom(e),"display")==="block",$F=e=>vn(e)&&!Zp(e),FF=fm(!0,PF),sZ=fm(!1,PF),AS=fm(!0,Uo),By=fm(!1,Uo),jD=fm(!0,fo),bt=fm(!1,fo),jf=fm(!0,$F),Gf=fm(!1,$F),IF=e=>e.slice(0,-1),Ny=(e,n,o)=>mi(n,e)?IF(Av(e,r=>o(r)||En(r,n))):[],O_=(e,n)=>Ny(e,n,we),gm=(e,n)=>[e].concat(O_(e,n)),A_=(e,n,o)=>Jd(e,n,o,Pt),GD=(e,n)=>Ho(gm(W.fromDom(n.container()),e),Bo),D_=(e,n,o)=>A_(e,n.dom,o).forall(r=>GD(n,o).fold(()=>!Il(r,o,n.dom),c=>!Il(r,o,n.dom)&&mi(c,W.fromDom(r.container())))),qD=(e,n,o)=>GD(n,o).fold(()=>A_(e,n.dom,o).forall(r=>!Il(r,o,n.dom)),r=>A_(e,r.dom,o).isNone()),KD=Ee(qD,!1),LF=Ee(qD,!0),HF=Ee(D_,!1),VF=Ee(D_,!0),zF=e=>ph(e).exists(Qs),DS=(e,n,o)=>{const r=ft(gm(W.fromDom(o.container()),n),Bo),c=Tr(r).getOr(n);return Wc(e,c.dom,o).filter(zF)},RS=(e,n)=>ph(n).exists(Qs)||DS(!0,e,n).isSome(),R_=(e,n)=>Ll(n).exists(Qs)||DS(!1,e,n).isSome(),Lt=Ee(DS,!1),YD=Ee(DS,!0),Py=e=>ie.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),M_=(e,n)=>{const o=ft(gm(W.fromDom(n.container()),e),Bo);return Tr(o).getOr(e)},B_=(e,n)=>Py(n)?__(n):__(n)||Ls(M_(e,n).dom,n).exists(__),N_=(e,n)=>Py(n)?xt(n):xt(n)||sr(M_(e,n).dom,n).exists(xt),XD=e=>Bt(["pre","pre-wrap"],e),MS=e=>ph(e).bind(n=>ic(n,jn)).exists(n=>XD(Os(n,"white-space"))),UF=(e,n)=>Ls(e.dom,n).isNone(),JD=(e,n)=>sr(e.dom,n).isNone(),WF=(e,n)=>UF(e,n)||JD(e,n)||KD(e,n)||LF(e,n)||R_(e,n)||RS(e,n),ZF=e=>Ce(e)&&vn(e)&&$w(e),QD=(e,n)=>o=>ZF(new Xo(o,e)[n]()),jF=(e,n)=>{const o=sr(e.dom,n).getOr(n),r=QD(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},GF=(e,n)=>{const o=Ls(e.dom,n).getOr(n),r=QD(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},eR=(e,n)=>MS(n)?!1:WF(e,n)||B_(e,n)||N_(e,n),$y=(e,n)=>MS(n)?!1:KD(e,n)||HF(e,n)||R_(e,n)||B_(e,n)||GF(e,n),qF=e=>{const n=e.container(),o=e.offset();return _e(n)&&o<n.data.length?ie(n,o+1):e},Nh=(e,n)=>MS(n)?!1:LF(e,n)||VF(e,n)||RS(e,n)||N_(e,n)||jF(e,n),Fy=(e,n)=>$y(e,n)||Nh(e,qF(n)),tR=(e,n)=>tm(e.charAt(n)),nR=(e,n)=>Rf(e.charAt(n)),KF=e=>{const n=e.container();return _e(n)&&Zs(n.data,me)},YF=e=>{const n=e.split("");return Ft(n,(o,r)=>tm(o)&&r>0&&r<n.length-1&&ey(n[r-1])&&ey(n[r+1])?" ":o).join("")},oR=(e,n,o)=>{const r=n.data,c=ie(n,0);return!o&&tR(r,0)&&!Fy(e,c)?(n.data=" "+r.slice(1),!0):o&&nR(r,0)&&$y(e,c)?(n.data=me+r.slice(1),!0):!1},XF=e=>{const n=e.data,o=YF(n);return o!==n?(e.data=o,!0):!1},sR=(e,n,o)=>{const r=n.data,c=ie(n,r.length-1);return!o&&tR(r,r.length-1)&&!Fy(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&nR(r,r.length-1)&&Nh(e,c)?(n.data=r.slice(0,-1)+me,!0):!1},JF=(e,n)=>{const o=n.container();if(!_e(o))return N.none();if(KF(n)){const r=oR(e,o,!1)||XF(o)||sR(e,o,!1);return sn(r,n)}else if(Fy(e,n)){const r=oR(e,o,!0)||sR(e,o,!0);return sn(r,n)}else return N.none()},rR=e=>{const n=W.fromDom(e.getBody());e.selection.isCollapsed()&&JF(n,ie.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},aR=(e,n,o)=>{if(o===0)return;const r=W.fromDom(e),c=Xn(r,Bo).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Nh(c,ie(e,e.data.length)),b=n===0&&$y(c,ie(e,0));e.replaceData(n,o,Co(u,4,b,f))},BS=(e,n)=>{const o=e.data.slice(n),r=o.length-kg(o).length;aR(e,n,r)},hm=(e,n)=>{const o=e.data.slice(0,n),r=o.length-Nm(o).length;aR(e,n-r,r)},P_=(e,n,o,r=!0)=>{const c=Nm(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Tn(W.fromDom(f)),o&&BS(u,c),u},cR=(e,n)=>{const o=e.container(),r=e.offset();return!ie.isTextPosition(e)&&o===n.parentNode&&r>ie.before(n).offset()},QF=(e,n)=>cR(n,e)?ie(n.container(),n.offset()-1):n,eI=e=>_e(e)?ie(e,0):ie.before(e),iR=e=>_e(e)?ie(e,e.data.length):ie.after(e),$_=e=>Ca(e.previousSibling)?N.some(iR(e.previousSibling)):e.previousSibling?Ta(e.previousSibling):N.none(),F_=e=>Ca(e.nextSibling)?N.some(eI(e.nextSibling)):e.nextSibling?gs(e.nextSibling):N.none(),lR=(e,n)=>N.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Ls(e,ie.before(o))).orThunk(()=>sr(e,ie.after(n))),_a=(e,n)=>sr(e,ie.after(n)).orThunk(()=>Ls(e,ie.before(n))),tI=(e,n)=>$_(n).orThunk(()=>F_(n)).orThunk(()=>lR(e,n)),nI=(e,n)=>F_(n).orThunk(()=>$_(n)).orThunk(()=>_a(e,n)),oI=(e,n,o)=>e?nI(n,o):tI(n,o),sI=(e,n,o)=>oI(e,n,o).map(Ee(QF,o)),uR=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},Ph=e=>n=>n.dom===e,rI=(e,n)=>n&&kt(e.schema.getBlockElements(),oo(n)),aI=e=>{if(Jo(e)){const n=W.fromHtml('<br data-mce-bogus="1">');return Eu(e),Yo(e,n),N.some(ie.before(n.dom))}else return N.none()},ho=(e,n,o)=>{const r=Fc(e).filter(Ar),c=Um(e).filter(Ar);return Tn(e),fC(r,c,n,(u,f,b)=>{const y=u.dom,x=f.dom,A=y.data.length;return P_(y,x,o),b.container()===x?ie(y,A):b}).orThunk(()=>(o&&(r.each(u=>hm(u.dom,u.dom.length)),c.each(u=>BS(u.dom,0))),n))},NS=(e,n)=>kt(e.schema.getTextInlineElements(),oo(n)),yb=(e,n,o,r=!0)=>{const c=sI(n,e.getBody(),o.dom),u=Xn(o,Ee(rI,e),Ph(e.getBody())),f=ho(o,c,NS(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(aI).fold(()=>{r&&uR(e,n,f)},b=>{r&&uR(e,n,N.some(b))})},rr=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,yn=e=>rr.test(e),zr=(e,n)=>Xr(W.fromDom(n),uk(e))&&!Nu(e.schema,n)&&e.dom.isEditable(n),dR=e=>{var n;return Dn.DOM.getStyle(e,"direction",!0)==="rtl"||yn((n=e.textContent)!==null&&n!==void 0?n:"")},mR=(e,n,o)=>ft(Dn.DOM.getParents(o.container(),"*",n),e),Ju=(e,n,o)=>{const r=mR(e,n,o);return N.from(r[r.length-1])},I_=(e,n,o)=>{const r=xi(n,e),c=xi(o,e);return Ce(r)&&r===c},fR=e=>Xm(e)||Xp(e),Kc=(e,n)=>{const o=n.container(),r=n.offset();return e?El(o)?_e(o.nextSibling)?ie(o.nextSibling,0):ie.after(o):Xm(n)?ie(o,r+1):n:El(o)?_e(o.previousSibling)?ie(o.previousSibling,o.previousSibling.data.length):ie.before(o):Xp(n)?ie(o,r-1):n},gR=Ee(Kc,!0),hR=Ee(Kc,!1),PS=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},pR=e=>{e.execCommand("delete")},Yc=e=>PS(e,"Delete"),cI=e=>PS(e,"ForwardDelete"),iI=e=>n=>li(Fa(n),e,En),rZ=e=>qp(e)||va(e),Cb=(e,n)=>mi(e,n)?ic(n,rZ,iI(e)):N.none(),L_=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},wb=(e,n,o)=>_r(gs(o),Ta(o),(r,c)=>{const u=Kc(!0,r),f=Kc(!1,c),b=Kc(!1,n);return e?sr(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):Ls(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),bR=e=>(gC(e)?Fc(e):Ic(e)).bind(bR).orThunk(()=>N.some(e)),$h=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=bR(o).getOr(o),f=W.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?L_(e,r):Jo(f)&&(Du(f),r&&e.selection.setCursorLocation(f.dom,0)),!En(o,f)){const b=li(Fa(f),o)?[]:CC(f);be(b.concat(Ps(o)),y=>{!En(y,f)&&!mi(y,f)&&Jo(y)&&Tn(y)})}},Ai=e=>n=>En(e,n),Fh=e=>Ys(e,"td,th"),Wn=(e,n)=>{const o=x=>Mf(W.fromDom(x),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=_r(r,c,En).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},Ih=(e,n)=>({start:e,end:n}),vR=(e,n,o)=>({rng:e,table:n,cells:o}),Sb=Si.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),xb=(e,n)=>Jr(W.fromDom(e),"td,th",n),$S=e=>!En(e.start,e.end),FS=(e,n)=>Mf(e.start,n).bind(o=>Mf(e.end,n).bind(r=>sn(En(o,r),o))),H_=(e,n)=>!$S(e)&&FS(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),IS=(e,n)=>{const o=xb(e.startContainer,n),r=xb(e.endContainer,n);return _r(o,r,Ih)},V_=e=>n=>Mf(n,e).bind(o=>pu(Fh(o)).map(r=>Ih(n,r))),yR=e=>n=>Mf(n,e).bind(o=>Tr(Fh(o)).map(r=>Ih(r,n))),LS=e=>n=>FS(n,e).map(o=>vR(n,o,Fh(o))),z_=(e,n,o,r)=>{if(o.collapsed||!e.forall($S))return N.none();if(n.isSameTable){const c=e.bind(LS(r));return N.some({start:c,end:c})}else{const c=xb(o.startContainer,r),u=xb(o.endContainer,r),f=c.bind(V_(r)).bind(LS(r)),b=u.bind(yR(r)).bind(LS(r));return N.some({start:f,end:b})}},U_=(e,n)=>ia(e,o=>En(o,n)),HS=e=>_r(U_(e.cells,e.rng.start),U_(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),Eb=(e,n,o)=>e.exists(r=>H_(r,o)&&zl(r.start,n)),W_=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},Z_=(e,n,o,r)=>z_(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=HS(c).getOr([]);if(u&&c.cells.length===f.length)return N.some(Sb.fullTable(c.table));if(f.length>0){if(u)return N.some(Sb.partialTable(f,N.none()));{const b=W_(o,n);return N.some(Sb.partialTable(f,N.some({...n,rng:b})))}}else return N.none()}),lI=(e,n,o,r)=>z_(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(HS).getOr([]),b=u.bind(HS).getOr([]);if(f.length>0&&b.length>0){const y=W_(o,n);return N.some(Sb.multiTable(f,b,y))}else return N.none()}),uI=(e,n)=>{const o=Ai(e),r=IS(n,o),c=Wn(n,o);return Eb(r,n,o)?r.map(u=>Sb.singleCellTable(n,u.start)):c.isMultiTable?lI(r,c,n,o):Z_(r,c,n,o)},j_=e=>be(e,n=>{Ko(n,"contenteditable"),Du(n)}),CR=(e,n)=>N.from(e.dom.getParent(n,e.dom.isBlock)).map(W.fromDom),wR=(e,n,o)=>{o.each(r=>{n?Tn(r):(Du(r),e.selection.setCursorLocation(r.dom,0))})},Tb=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),VS(e,c,n,!1).each(u=>u())},G_=e=>{const n=Gu(e),o=W.fromDom(e.selection.getNode());Xs(o.dom)&&Jo(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&mo(n,r=>En(r,o))&&qo(o,"data-mce-selected","1")},q_=(e,n,o)=>N.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=CR(e,f?u.endContainer:u.startContainer);u.deleteContents(),wR(e,f,b.filter(Jo));const y=f?n[0]:n[n.length-1];return Tb(e,y,r,f),Jo(y)?N.none():N.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);j_(c),G_(e)}),SR=(e,n,o,r)=>N.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];Tb(e,u,c,!0),Tb(e,f,c,!1);const b=Jo(u)?n:n.slice(1),y=Jo(f)?o:o.slice(0,-1);j_(b.concat(y)),r.deleteContents(),G_(e)}),VS=(e,n,o,r=!0)=>N.some(()=>{$h(e,n,o,r)}),xR=(e,n)=>N.some(()=>yb(e,!1,n)),ER=(e,n,o)=>uI(n,o).bind(r=>r.fold(Ee(VS,e),Ee(xR,e),Ee(q_,e),Ee(SR,e))),TR=(e,n)=>Iy(e,n),kR=(e,n,o,r)=>zS(n,r).fold(()=>ER(e,n,o),c=>TR(e,c)),_R=(e,n,o)=>{const r=W.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?q_(e,o,N.none()):kR(e,r,c,n)},K_=(e,n)=>Ho(gm(n,e),To),zS=(e,n)=>Ho(gm(n,e),Im("caption")),OR=(e,n,o,r,c)=>q0(o,e.getBody(),c).bind(u=>K_(n,W.fromDom(u.getNode())).bind(f=>En(f,r)?N.none():N.some(pt))),Iy=(e,n)=>N.some(()=>{Du(n),e.selection.setCursorLocation(n.dom,0)}),AR=(e,n,o,r)=>gs(e.dom).bind(c=>Ta(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),DR=(e,n)=>Iy(e,n),Y_=(e,n,o)=>zS(e,W.fromDom(o.getNode())).fold(()=>N.some(pt),r=>sn(!En(r,n),pt)),US=(e,n,o,r,c)=>q0(o,e.getBody(),c).fold(()=>N.some(pt),u=>AR(r,o,c,u)?DR(e,r):Y_(n,r,u)),RR=(e,n,o,r)=>{const c=ie.fromRangeStart(e.selection.getRng());return K_(o,r).bind(u=>Jo(u)?Iy(e,u):OR(e,o,n,u,c))},MR=(e,n,o,r)=>{const c=ie.fromRangeStart(e.selection.getRng());return Jo(r)?Iy(e,r):US(e,o,n,r,c)},Ly=(e,n)=>e?jD(n):bt(n),X_=(e,n)=>{const o=ie.fromRangeStart(e.selection.getRng());return Ly(n,o)||Wc(n,e.getBody(),o).exists(r=>Ly(n,r))},Hy=(e,n,o)=>{const r=W.fromDom(e.getBody());return zS(r,o).fold(()=>RR(e,n,r,o).orThunk(()=>sn(X_(e,n),pt)),c=>MR(e,n,r,c))},Vy=(e,n)=>{const o=W.fromDom(e.selection.getStart(!0)),r=Gu(e);return e.selection.isCollapsed()&&r.length===0?Hy(e,n,o):_R(e,o,r)},qf=(e,n)=>{let o=n;for(;o&&o!==e;){if(kn(o)||vn(o))return o;o=o.parentNode}return null},kb=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],J_=Te.each,zy=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const A={};return J_(n.getAttribs(x),O=>{const B=O.nodeName.toLowerCase();B!=="style"&&!c(B)&&(A[B]=n.getAttrib(x,B))}),A},y=(x,A)=>{for(const O in x)if(kt(x,O)){const B=A[O];if(Ns(B)||x[O]!==B)return!1;delete A[O]}for(const O in A)if(kt(A,O))return!1;return!0};return We(u)&&We(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!ja(u)&&!ja(f)},c=u=>mo(kb,f=>_s(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Uy=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},pm=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},BR=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Uy(o,c=>{pm(e,n,c,r)}),r},NR=(e,n)=>{const o=(r,c)=>{Ze(r,u=>{const f=kr(u.nodes);be(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||dn(x.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},Q_=(e,n,o,r={})=>{const c=BR(e,n,o);NR(c,r)},WS=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Ka("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Ka("#text",3)).value=me},dI=e=>{var n;return mI(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===me},mI=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ce(o)&&o===e.lastChild&&o.name===n},fI=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Lh=(e,n,o,r)=>r.isEmpty(n,o,c=>fI(e,c)),ql=(e,n)=>Ce(e)&&(n(e)||e.name==="br"),e4=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return N.from(n)},_b=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&_b(c,n,o);e.unwrap()}},Wy=(e,n,o,r=pt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Te.makeMap("tr,td,th,tbody,thead,tfoot,table"),y=new Set,x=A=>A!==o&&!b[A.name];for(let A=0;A<e.length;A++){const O=e[A];let B,L,z;if(!O.parent||y.has(O))continue;if(c[O.name]&&O.parent.name==="li"){let V=O.next;for(;V&&c[V.name];){V.name="li",y.add(V),O.parent.insert(V,O.parent);V=V.next}O.unwrap();continue}const F=[O];for(B=O.parent;B&&!n.isValidChild(B.name,O.name)&&x(B);B=B.parent)F.push(B);if(B&&F.length>1)if(n.isValidChild(B.name,O.name)){F.reverse(),L=F[0].clone(),r(L);let V=L;for(let q=0;q<F.length-1;q++){n.isValidChild(V.name,F[q].name)&&q>0?(z=F[q].clone(),r(z),V.append(z)):z=V;for(let X=F[q].firstChild;X&&X!==F[q+1];){const J=X.next;z.append(X),X=J}V=z}Lh(n,u,f,L)?B.insert(O,F[0],!0):(B.insert(L,F[0],!0),B.insert(O,L)),B=F[0],(Lh(n,u,f,B)||mI(B,"br"))&&B.empty().remove()}else _b(O,n);else if(O.parent){if(O.name==="li"){let V=O.prev;if(V&&(V.name==="ul"||V.name==="ol")){V.append(O);continue}if(V=O.next,V&&(V.name==="ul"||V.name==="ol")&&V.firstChild){V.insert(O,V.firstChild,!0);continue}const q=new Ka("ul",1);r(q),O.wrap(q);continue}if(n.isValidChild(O.parent.name,"div")&&n.isValidChild("div",O.name)){const V=new Ka("div",1);r(V),O.wrap(V)}else _b(O,n)}}},gI=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},t4=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&gI(o,"a")),hI=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},PR=e=>{const n=ie.fromRangeStart(e),o=ie.fromRangeEnd(e),r=e.commonAncestorContainer;return Wc(!1,r,o).map(c=>!Il(n,o,r)&&Il(n,c,r)?hI(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},Zy=e=>e.collapsed?e:PR(e),pI=e=>Ce(e.firstChild)&&e.firstChild===e.lastChild,$R=e=>e.name==="br"||e.value===me,bI=(e,n)=>e.getBlockElements()[n.name]&&pI(n)&&$R(n.firstChild),jy=(e,n)=>{const o=e.getNonEmptyElements();return Ce(n)&&(n.isEmpty(o)||bI(e,n))},FR=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),jy(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},vI=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},IR=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return vI(c)},yI=e=>{var n;return ft((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},CI=e=>e.data===me||co(e),wI=e=>Ce(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&CI(e.firstChild),SI=e=>!e.firstChild||wI(e),xI=e=>e.length>0&&SI(e[e.length-1])?e.slice(0,-1):e,ZS=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},EI=(e,n)=>!!ZS(e,n),n4=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Hh=(e,n)=>{const o=ie.before(e),c=Ei(n).next(o);return c?c.toRange():null},LR=(e,n)=>{const o=ie.after(e),c=Ei(n).prev(o);return c?c.toRange():null},TI=(e,n,o,r)=>{const c=n4(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Te.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),LR(n[n.length-1],o)},jS=(e,n,o)=>{const r=e.parentNode;return r&&Te.each(n,c=>{r.insertBefore(c,e)}),Hh(e,o)},HR=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),LR(n[0],o)),VR=(e,n,o,r)=>{const c=IR(n,e,r),u=ZS(n,o.startContainer),f=xI(yI(c.firstChild)),b=1,y=2,x=n.getRoot(),A=O=>{const B=ie.fromRangeStart(o),L=Ei(n.getRoot()),z=O===b?L.prev(B):L.next(B),F=z==null?void 0:z.getNode();return F?ZS(n,F)!==u:!0};return u?A(b)?jS(u,f,x):A(y)?HR(u,f,x,n):TI(u,f,x,o):null},kI=["pre"],zR=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,x=Bt(kI,u.name);if(y&&x){const A=u.attr("contenteditable")!=="false",O=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,B=N.from(qf(r,o)).forall(kn);return A&&O&&B}else return!1},o4=Xs,Vh=(e,n,o)=>{if(Ce(o)){const r=e.getParent(n.endContainer,o4);return o===r&&zl(W.fromDom(o),n)}else return!1},UR=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},WR=(e,n)=>{N.from(e.getParent(n,"td,th")).map(W.fromDom).each(DT)},ZR=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=zy(e);Te.each(r.select("*[data-mce-fragment]"),f=>{if(Ce(o[f.nodeName.toLowerCase()])&&OS(r,f)){for(let y=f.parentElement;Ce(y)&&y!==c&&!oZ(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},GS=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},jR=e=>{Te.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},_I=e=>!!e.getAttribute("data-mce-fragment"),GR=(e,n)=>Ce(n)&&!e.schema.getVoidElements()[n.nodeName],OI=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=qf(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let x=f.createRng();const A=n.previousSibling;if(_e(A)){x.setStart(A,(r=(o=A.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const L=n.nextSibling;_e(L)&&(A.appendData(L.data),(c=L.parentNode)===null||c===void 0||c.removeChild(L))}else x.setStartBefore(n),x.setEndBefore(n);const O=L=>{let z=ie.fromRangeStart(L);return z=Ei(e.getBody()).next(z),z==null?void 0:z.toRange()},B=f.getParent(n,f.isBlock);f.remove(n),B&&f.isEmpty(B)&&(Eu(W.fromDom(B)),x.setStart(B,0),x.setEnd(B,0),!o4(B)&&!_I(B)&&(u=O(x))?(x=u,f.remove(B)):f.add(B,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(x)},AI=e=>{const n=e.dom,o=Zy(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,o4);Vh(n,o,r)?VS(e,o,W.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&_e(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},qS=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return N.some(n);return N.none()},qR=e=>{be(kr(e.getBody().querySelectorAll("details")),n=>{const o=ft(kr(n.children),r=>r.nodeName==="SUMMARY");o.length>1&&be(o.slice(1),r=>{const c=W.fromDom(r);Td(c,"mce-accordion-summary"),ko(c,"p")})})},s4=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,x=Zf({validate:!0},e.schema),A='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,A);let O=u.getRng();const B=O.startContainer,L=e.getBody();B===L&&u.isCollapsed()&&f.isBlock(L.firstChild)&&GR(e,L.firstChild)&&f.isEmpty(L.firstChild)&&(O=f.createRng(),O.setStart(L.firstChild,0),O.setEnd(L.firstChild,0),u.setRng(O)),u.isCollapsed()||AI(e);const z=u.getNode(),F={context:z.nodeName.toLowerCase(),data:o.data,insert:!0},V=b.parse(n,F);if(o.paste===!0&&FR(e.schema,V)&&EI(f,z))return O=VR(x,f,u.getRng(),V),O&&u.setRng(O),n;o.paste===!0&&zR(f,V,z,e.getBody())&&((r=V.firstChild)===null||r===void 0||r.unwrap()),GS(V);let q=V.lastChild;if(q&&q.attr("id")==="mce_marker"){const X=q;for(q=q.prev;q;q=q.walk(!0))if(q.type===3||!f.isBlock(q.name)){q.parent&&e.schema.isValidChild(q.parent.name,"span")&&q.parent.insert(X,q,q.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(z),!F.invalid)n=x.serialize(V),UR(e,n,z);else{e.selection.setContent(A);let X=u.getNode(),J;const se=e.getBody();for(Gm(X)?X=J=se:J=X;J&&J!==se;)X=J,J=J.parentNode;n=X===se?se.innerHTML:f.getOuterHTML(X);const ye=b.parse(n),tt=qS(ye),xe=tt.bind(e4).getOr(ye);tt.each(Ie=>Ie.replace(V));const le=V.children(),fe=(c=V.parent)!==null&&c!==void 0?c:ye;V.unwrap();const Pe=ft(le,Ie=>t4(e.schema,Ie,fe));Wy(Pe,e.schema,xe),Q_(b.getNodeFilters(),b.getAttributeFilters(),ye),n=x.serialize(ye),X===se?f.setHTML(se,n):f.setOuterHTML(X,n)}return ZR(e,y),OI(e,f.get("mce_marker")),jR(e.getBody()),WR(f,u.getStart()),qR(e),e1(e.schema,e.getBody(),u.getStart()),n},KS=e=>e instanceof Ka,DI=e=>{Bh(e)&&gs(e.getBody()).each(n=>{const o=n.getNode(),r=fo(o)?gs(o).getOr(n):n;e.selection.setRng(r.toRange())})},YS=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&DI(e)},r4=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=wo(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,zu(e),o)):o||(o=c),YS(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Zf({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Kp(W.fromDom(n))?o:Te.trim(o);return YS(e,c,r.no_selection),{content:c,html:c}}},KR=(e,n,o,r)=>{Q_(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Zf({validate:!1},e.schema).serialize(o),u=Kp(W.fromDom(n))?c:Te.trim(c);return YS(e,u,r.no_selection),{content:o,html:u}},RI=(e,n,o)=>N.from(e.getBody()).map(r=>KS(n)?KR(e,r,n,o):r4(e,r,n,o)).getOr({content:n,html:KS(o.content)?"":o.content}),MI=(e,n,o)=>Xn(e,n,o).isSome(),BI=(e,n)=>Mv(e,n).isSome(),Gy=e=>G(e)?e:we,bm=(e,n,o)=>{let r=e.dom;const c=Gy(o);for(;r.parentNode;){r=r.parentNode;const u=W.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return N.none()},a4=(e,n,o)=>{const r=n(e),c=Gy(o);return r.orThunk(()=>c(e)?N.none():bm(e,n,c))},qy=ts,No=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Ga(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Ky=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>No(e,b,o)?!0:b.parentNode===u||!!Kl(e,b,o,r,!0));return!!Kl(e,f,o,r,c)},Ob=(e,n,o)=>hs(o)&&qy(n,o.inline)||ki(o)&&qy(n,o.block)?!0:Ga(o)?We(n)&&e.is(n,o.selector):!1,Qu=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(G(o.onmatch))return o.onmatch(n,o,r);if(f){if(bv(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):_o(e,n,f[y]))return!0}else for(const y in f)if(kt(f,y)){const x=b?e.getAttrib(n,y):_o(e,n,y),A=Ve(f[y],u),O=dn(x)||Pa(x);if(O&&dn(A))continue;if(c&&O&&!o.exact||(!c||o.exact)&&!qy(x,Pf(A,y)))return!1}}return!0},Kl=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&We(n))for(let b=0;b<u.length;b++){const y=u[b];if(Ob(e.dom,n,y)&&Qu(f,n,y,"attributes",c,r)&&Qu(f,n,y,"styles",c,r)){const x=y.classes;if(x){for(let A=0;A<x.length;A++)if(!e.dom.hasClass(n,Ve(x[A],r)))return}return y}}},XS=(e,n,o,r,c)=>{if(r)return Ky(e,r,n,o,c);if(r=e.selection.getNode(),Ky(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Ky(e,u,n,o,c))},Yy=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&Kl(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},NI=(e,n)=>{const o=c=>En(c,W.fromDom(e.getBody())),r=(c,u)=>Kl(e,c.dom,u)?N.some(u):N.none();return N.from(e.selection.getStart(!0)).bind(c=>a4(W.fromDom(c),u=>md(n,f=>r(u,f)),o)).getOrNull()},PI=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=Ch(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Ga(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},Ab=(e,n,o)=>Ro(o,(r,c)=>{const u=ly(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),Db=er,zh=(e,n)=>e.importNode(n,!0),$I=e=>{const n=[];let o=e;for(;o;){if(_e(o)&&o.data!==Db||o.childNodes.length>1)return[];We(o)&&n.push(o),o=o.firstChild}return n},vm=e=>$I(e).length>0,Xc=e=>{if(e){const n=new Xo(e,e);for(let o=n.current();o;o=n.next())if(_e(o))return o}return null},Rb=e=>{const n=W.fromTag("span");return qr(n,{id:vh,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Yo(n,W.fromText(Db)),n},c4=e=>{const n=Xc(e);return n&&n.data.charAt(0)===Db&&n.deleteData(0,1),n},i4=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(vm(n))yb(e,!1,W.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,x=u.endContainer,A=u.endOffset,O=c4(n);r.remove(n,!0),b===O&&y>0&&u.setStart(O,y-1),x===O&&A>0&&u.setEnd(O,A-1),f&&r.isEmpty(f)&&Du(W.fromDom(f)),c.setRng(u)}},l4=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)i4(e,n,o);else if(n=Qd(e.getBody(),c.getStart()),!n)for(;n=r.get(vh);)i4(e,n,o)},JS=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Ee(cy,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(tD(W.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},YR=(e,n)=>(e.appendChild(n),n),Di=(e,n)=>{var o;const r=dd(e,(u,f)=>YR(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return YR(r,c.createTextNode(Db))},QS=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=ft(jr(f.get()),O=>O!==r&&!Zs(O,"removeformat")),x=Ab(e,o,y);if(ft(x,O=>!nb(e,O,r)).length>0){const O=o.cloneNode(!1);return b.add(n,O),f.remove(r,c,O,u),b.remove(O),N.some(O)}else return N.none()},XR=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=Qd(e.getBody(),c.getStart());const A=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&A.test(x.charAt(b))&&A.test(x.charAt(b-1))){const O=c.getBookmark();f.collapse(!0);let B=am(e.dom,f,u);B=Xu(B),e.formatter.apply(n,o,B),c.moveToBookmark(O)}else{let O=r?Xc(r):null;(!r||(O==null?void 0:O.data)!==Db)&&(r=zh(e.getDoc(),Rb(!0).dom),O=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(O,b)}},u4=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),x=y.startContainer,A=y.startOffset;let O=x;_e(x)&&(A!==x.data.length&&(f=!0),O=O.parentNode);const B=[];let L;for(;O;){if(Kl(e,O,n,o,r)){L=O;break}O.nextSibling&&(f=!0),B.push(O),O=O.parentNode}if(L)if(f){const z=u.getBookmark();y.collapse(!0);let F=am(c,y,b,!0);F=Xu(F),e.formatter.remove(n,o,F,r),u.moveToBookmark(z)}else{const z=Qd(e.getBody(),L),F=Rb(!1).dom;JS(e,F,z??L);const V=QS(e,F,L,n,o,r),q=Di(B.concat(V.toArray()),F);z&&i4(e,z,!1),u.setCursorLocation(q,1),c.isEmpty(L)&&c.remove(L)}},d4=(e,n,o)=>{const r=e.selection,c=e.getBody();l4(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Db&&l4(e,Qd(c,r.getStart())),(n===37||n===39)&&l4(e,Qd(c,r.getStart()))},Uh=e=>_e(e)&&pl(e.data,me),m4=e=>{e.on("mouseup keydown",n=>{d4(e,n.keyCode,Uh(e.selection.getRng().endContainer))})},JR=e=>{const n=Rb(!1),o=Di(e,n.dom);return{caretContainer:n,caretPosition:ie(o,0)}},f4=(e,n)=>{const{caretContainer:o,caretPosition:r}=JR(n);return ba(W.fromDom(e),o),Tn(W.fromDom(e)),r},FI=(e,n)=>{const{caretContainer:o,caretPosition:r}=JR(n);return e.insertNode(o.dom),r},QR=(e,n)=>{const o=e.schema.getTextInlineElements();return kt(o,oo(n))&&!yc(n.dom)&&!mc(n.dom)},eM=e=>yc(e.dom)&&vm(e.dom),Xy={},Mb=uc(["pre"]),II=(e,n)=>{Xy[e]||(Xy[e]=[]),Xy[e].push(n)},tM=(e,n)=>{kt(Xy,e)&&be(Xy[e],o=>{o(n)})};II("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return Mb(f)&&Bt(c,f)},r=(c,u)=>{const f=W.fromDom(u),b=vl(f).dom;Tn(f),Vn(W.fromDom(c),[W.fromTag("br",b),W.fromTag("br",b),...Ps(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=ft(ft(c,Mb),o(c));be(u,f=>{r(f.previousSibling,f)})}});const ex=["fontWeight","fontStyle","color","fontSize","fontFamily"],LI=e=>Sn(e.styles)&&mo(jr(e.styles),n=>Bt(ex,n)),nM=e=>Ho(e,n=>hs(n)&&n.inline==="span"&&LI(n)),g4=(e,n)=>{const o=e.get(n);return On(o)?nM(o):N.none()},oM=(e,n)=>Ls(n,ie.fromRangeStart(e)).isNone(),sM=(e,n)=>sr(n,ie.fromRangeEnd(e)).exists(o=>!co(o.getNode())||sr(n,o).isSome())===!1,rM=e=>n=>Rd(n)&&e.isEditable(n),HI=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return oM(o,n[0])&&sM(o,n[0])?n:[];{const r=Tr(n).filter(f=>oM(o,f)).toArray(),c=pu(n).filter(f=>sM(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},VI=e=>ft(HI(e),rM(e.dom)),aM=e=>ft(e.getSelectedBlocks(),rM(e.dom)),h4=Te.each,p4=e=>We(e)&&!ja(e)&&!yc(e)&&!mc(e),cM=(e,n)=>{for(let o=e;o;o=o[n]){if(_e(o)&&Pn(o.data))return e;if(We(o)&&!ja(o))return o}return e},iM=(e,n,o)=>{const r=zy(e),c=We(n)&&ol(n),u=We(o)&&ol(o);if(c&&u){const f=cM(n,"previousSibling"),b=cM(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(b),Te.each(Te.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},lM=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=iM(e,Xw(r),r))!==null&&c!==void 0?c:r;iM(e,u,Xw(u,!0))}},zI=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";h4(e.select(r,o),c=>{p4(c)&&ol(c)&&h4(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},b4=(e,n,o)=>{h4(e.childNodes,r=>{p4(r)&&(n(r)&&o(r),r.hasChildNodes()&&b4(r,n,o))})},uM=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},dM=(e,n)=>o=>!!(o&&_o(e,o,n)),Wh=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),uM(e,r)},Zh=Si.generate([{keep:[]},{rename:["name"]},{removed:[]}]),UI=/^(src|href|style)$/,v4=Te.each,tx=ts,mM=e=>/^(TR|TH|TD)$/.test(e.nodeName),fM=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),gM=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(We(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return _e(r)&&o&&c>=r.data.length&&(r=new Xo(r,e.getBody()).next()||r),_e(r)&&!o&&c===0&&(r=new Xo(r,e.getBody()).prev()||r),r},hM=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return mM(e)&&r?e.nodeName==="TR"&&r[o]||r:e},y4=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},pM=(e,n,o,r,c)=>{const u=W.fromDom(n),f=W.fromDom(e.create(r,c)),b=o?Ia(u):wC(u);return Vn(f,b),o?(ba(u,f),Zm(f,u)):(La(u,f),Yo(f,u)),f.dom},WI=(e,n)=>n.links&&e.nodeName==="A",bM=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=wo(e);ki(o)&&r===u.getRoot()&&(!o.list_block||!tx(n,o.list_block))&&be(kr(n.childNodes),b=>{Bf(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=y4(u,b,f),u.setAttribs(c,zu(e))):c=null}),!(uy(o)&&!tx(o.inline,n))&&u.remove(n,!0)},vM=(e,n,o)=>Ma(e)?{name:n,value:null}:{name:e,value:Ve(n,o)},yM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},CM=(e,n,o,r,c)=>{let u=!1;v4(o.styles,(f,b)=>{const{name:y,value:x}=vM(b,f,r),A=Pf(x,y);(o.remove_similar||Q(x)||!We(c)||tx(_o(e,c,y),A))&&e.setStyle(n,y,""),u=!0}),u&&yM(e,n)},C4=(e,n,o)=>{n==="removeformat"?be(aM(e.selection),r=>{be(ex,c=>e.dom.setStyle(r,c,"")),yM(e.dom,r)}):g4(e.formatter,n).each(r=>{be(aM(e.selection),c=>CM(e.dom,c,r,o,null))})},w4=(e,n,o,r,c)=>{const u=e.dom,f=zy(e),b=e.schema;if(hs(n)&&t1(b,n.inline)&&Nu(b,r)&&r.parentElement===e.getBody())return bM(e,r,n),Zh.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Ob(u,r,n)&&!WI(r,n))return Zh.keep();const y=r,x=n.preserve_attributes;if(hs(n)&&n.remove==="all"&&On(x)){const A=ft(u.getAttribs(y),O=>Bt(x,O.name.toLowerCase()));if(u.removeAllAttribs(y),be(A,O=>u.setAttrib(y,O.name,O.value)),A.length>0)return Zh.rename("span")}if(n.remove!=="all"){CM(u,y,n,o,c),v4(n.attributes,(O,B)=>{const{name:L,value:z}=vM(B,O,o);if(n.remove_similar||Q(z)||!We(c)||tx(u.getAttrib(c,L),z)){if(L==="class"){const F=u.getAttrib(y,L);if(F){let V="";if(be(F.split(/\s+/),q=>{/mce\-\w+/.test(q)&&(V+=(V?" ":"")+q)}),V){u.setAttrib(y,L,V);return}}}if(UI.test(L)&&y.removeAttribute("data-mce-"+L),L==="style"&&uc(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(L),u.setStyle(y,"list-style-type","none");return}L==="class"&&y.removeAttribute("className"),y.removeAttribute(L)}}),v4(n.classes,O=>{O=Ve(O,o),(!We(c)||u.hasClass(c,O))&&u.removeClass(y,O)});const A=u.getAttribs(y);for(let O=0;O<A.length;O++){const B=A[O].nodeName;if(!f.isAttributeInternal(B))return Zh.keep()}}return n.remove!=="none"?(bM(e,y,n),Zh.removed()):Zh.keep()},aZ=(e,n,o,r,c)=>{let u;return n.parentNode&&be(Ch(e.dom,n.parentNode).reverse(),f=>{if(!u&&We(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Kl(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},Jy=(e,n,o,r)=>w4(e,n,o,r,r).fold(Le(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Le(null)),wM=(e,n,o,r,c,u,f,b)=>{var y,x;let A,O;const B=e.dom;if(o){const L=o.parentNode;for(let z=r.parentNode;z&&z!==L;z=z.parentNode){let F=B.clone(z,!1);for(let V=0;V<n.length&&(F=Jy(e,n[V],b,F),F!==null);V++);F&&(A&&F.appendChild(A),O||(O=F),A=F)}u&&(!f.mixed||!B.isBlock(o))&&(r=(y=B.split(o,r))!==null&&y!==void 0?y:r),A&&O&&((x=c.parentNode)===null||x===void 0||x.insertBefore(A,c),O.appendChild(c),hs(f)&&lM(e,f,b,A))}return r},Qy=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,x=F=>{const V=aZ(e,F,n,o,c);return wM(e,u,V,F,F,!0,f,o)},A=F=>ja(F)&&We(F)&&(F.id==="_start"||F.id==="_end"),O=F=>mo(u,V=>Nb(e,V,o,F,F)),B=F=>{const V=kr(F.childNodes),X=O(F)||mo(u,ye=>Ob(b,F,ye)),J=F.parentNode;if(!X&&Ce(J)&&sb(f)&&O(J),f.deep&&V.length)for(let ye=0;ye<V.length;ye++)B(V[ye]);be(["underline","line-through","overline"],ye=>{We(F)&&e.dom.getStyle(F,"text-decoration")===ye&&F.parentNode&&Cc(b,F.parentNode)===ye&&Nb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ye}},void 0,F)})},L=F=>{const V=b.get(F?"_start":"_end");if(V){let q=V[F?"firstChild":"lastChild"];return A(q)&&(q=q[F?"firstChild":"lastChild"]),_e(q)&&q.data.length===0&&(q=F?V.previousSibling||V.nextSibling:V.nextSibling||V.previousSibling),b.remove(V,!0),q}else return null},z=F=>{let V,q,X=am(b,F,u,F.collapsed);if(f.split){if(X=Xu(X),V=gM(e,X,!0),q=gM(e,X),V!==q){if(V=hM(V,!0),q=hM(q,!1),fM(b,V,q)){const se=N.from(V.firstChild).getOr(V);x(pM(b,se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),L(!0);return}if(fM(b,q,V)){const se=N.from(q.lastChild).getOr(q);x(pM(b,se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),L(!1);return}V=y4(b,V,"span",{id:"_start","data-mce-type":"bookmark"}),q=y4(b,q,"span",{id:"_end","data-mce-type":"bookmark"});const J=b.createRng();J.setStartAfter(V),J.setEndBefore(q),qu(b,J,se=>{be(se,ye=>{!ja(ye)&&!ja(ye.parentNode)&&x(ye)})}),x(V),x(q),V=L(!0),q=L()}else V=q=x(V);X.startContainer=V.parentNode?V.parentNode:V,X.startOffset=b.nodeIndex(V),X.endContainer=q.parentNode?q.parentNode:q,X.endOffset=b.nodeIndex(q)+1}qu(b,X,J=>{be(J,B)})};if(r){if(yh(r)){const F=b.createRng();F.setStartBefore(r),F.setEndAfter(r),z(F)}else z(r);yy(e,n,r,o);return}!y.isCollapsed()||!hs(f)||Gu(e).length?(Yw(e,()=>Ul(e,z),F=>hs(f)&&XS(e,n,o,F)),e.nodeChanged()):u4(e,n,o,c),C4(e,n,o),yy(e,n,r,o)},Bb=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&Qy(e,n,o,r,c)},Nb=(e,n,o,r,c)=>w4(e,n,o,r,c).fold(we,u=>(e.dom.rename(r,u),!0),qe),ZI=Te.each,jI=(e,n,o,r)=>{const c=u=>{if(We(u)&&We(u.parentNode)&&ol(u)){const f=Cc(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Te.walk(r,c,"childNodes"),c(r))},cZ=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=dM(e,"fontSize");b4(r,u=>c(u)&&ol(u),Wh(e,"backgroundColor",Ve(n.styles.backgroundColor,o)))}},GI=(e,n,o,r)=>{if(hs(n)&&(n.inline==="sub"||n.inline==="sup")){const c=dM(e,"fontSize");b4(r,f=>c(f)&&ol(f),Wh(e,"fontSize",""));const u=ft(e.select(n.inline==="sup"?"sub":"sup",r),ol);e.remove(u,!0)}},qI=(e,n,o,r)=>{ZI(n,c=>{hs(c)&&ZI(e.dom.select(c.inline,r),u=>{p4(u)&&Nb(e,c,o,u,c.exact?u:null)}),zI(e.dom,c,r)})},iZ=(e,n,o,r,c)=>{const u=c.parentNode;Kl(e,u,o,r)&&Nb(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>Kl(e,f,o,r)?(Nb(e,n,r,c),!0):!1)},nx=Te.each,SM=(e,n,o,r)=>{if($1(e)&&hs(n)&&o.parentNode){const c=Vc(e.schema),u=BI(W.fromDom(o),f=>yc(f.dom));return la(c,r)&&Jo(W.fromDom(o.parentNode),!1)&&!u}else return!1},xM=(e,n,o,r)=>{if(nx(o.styles,(c,u)=>{e.setStyle(n,u,Ve(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},EM=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,x=(z,F=u)=>{G(F.onformat)&&F.onformat(z,F,o,r),xM(b,z,F,o),nx(F.attributes,(V,q)=>{b.setAttrib(z,q,Ve(V,o))}),nx(F.classes,V=>{const q=Ve(V,o);b.hasClass(z,q)||b.addClass(z,q)})},A=(z,F)=>{let V=!1;return nx(z,q=>Ga(q)?b.getContentEditable(F)==="false"&&!q.ceFalseOverride||Ce(q.collapsed)&&q.collapsed!==f?!0:b.is(F,q.selector)&&!yc(F)?(x(F,q),V=!0,!1):!0:!1),V},O=z=>{if(K(z)){const F=b.create(z);return x(F),F}else return null},B=(z,F,V)=>{const q=[];let X=!0;const J=u.inline||u.block,se=O(J),ye=le=>ob(u)&&Kl(e,le,n,o),tt=(le,fe,Pe)=>{const Ie=t_(u)&&cy(e.schema,le)&&Bf(e,fe,J);return Pe&&Ie},xe=(le,fe,Pe,Ie)=>{const Ye=le.nodeName.toLowerCase(),vt=Bf(e,J,Ye)&&Bf(e,fe,J),yt=!V&&_e(le)&&Yp(le.data),rn=yc(le),fn=!hs(u)||!z.isBlock(le);return(Pe||Ie)&&vt&&!yt&&!rn&&fn};qu(z,F,le=>{let fe;const Pe=Ie=>{let Ye=!1,vt=X,yt=!1;const rn=Ie.parentNode,fn=rn.nodeName.toLowerCase(),Mn=z.getContentEditable(Ie);Ce(Mn)&&(vt=X,X=Mn==="true",Ye=!0,yt=Jw(e,Ie));const wr=X&&!Ye;if(co(Ie)&&!SM(e,u,Ie,fn)){fe=null,ki(u)&&z.remove(Ie);return}if(ye(Ie)){fe=null;return}if(tt(Ie,fn,wr)){const ks=z.rename(Ie,J);x(ks),q.push(ks),fe=null;return}if(Ga(u)){let ks=A(c,Ie);if(!ks&&Ce(rn)&&sb(u)&&(ks=A(c,rn)),!hs(u)||ks){fe=null;return}}Ce(se)&&xe(Ie,fn,wr,yt)?(fe||(fe=z.clone(se,!1),rn.insertBefore(fe,Ie),q.push(fe)),yt&&Ye&&(X=vt),fe.appendChild(Ie)):(fe=null,be(kr(Ie.childNodes),Pe),Ye&&(X=vt),fe=null)};be(le,Pe)}),u.links===!0&&be(q,le=>{const fe=Pe=>{Pe.nodeName==="A"&&x(Pe,u),be(kr(Pe.childNodes),fe)};fe(le)}),be(q,le=>{const fe=Ye=>{let vt=0;return be(Ye.childNodes,yt=>{!e_(yt)&&!ja(yt)&&vt++}),vt},Pe=Ye=>Ho(Ye.childNodes,ay).filter(yt=>z.getContentEditable(yt)!=="false"&&Ob(z,yt,u)).map(yt=>{const rn=z.clone(yt,!1);return x(rn),z.replace(rn,Ye,!0),z.remove(yt,!0),rn}).getOr(Ye),Ie=fe(le);if((q.length>1||!z.isBlock(le))&&Ie===0){z.remove(le,!0);return}(hs(u)||ki(u)&&u.wrapper)&&(!u.exact&&Ie===1&&(le=Pe(le)),qI(e,c,o,le),iZ(e,u,n,o,le),cZ(z,u,o,le),jI(z,u,o,le),GI(z,u,o,le),lM(e,u,o,le))})},L=yh(r)?r:y.getNode();if(b.getContentEditable(L)==="false"&&!Jw(e,L)){r=L,A(c,r),iS(e,n,r,o);return}if(u){if(r)if(yh(r)){if(!A(c,r)){const z=b.createRng();z.setStartBefore(r),z.setEndAfter(r),B(b,am(b,z,c),!0)}}else B(b,r,!0);else!f||!hs(u)||Gu(e).length?(y.setRng(Zy(y.getRng())),Yw(e,()=>{Ul(e,(z,F)=>{const V=F?z:am(b,z,c);B(b,V,!1)})},qe),e.nodeChanged()):XR(e,n,o),g4(e.formatter,n).each(z=>{be(VI(e.selection),F=>xM(b,F,z,o))});tM(n,e)}iS(e,n,r,o)},TM=(e,n,o,r)=>{(r||e.selection.isEditable())&&EM(e,n,o,r)},e2=e=>kt(e,"vars"),kM=(e,n)=>{e.set({}),n.on("NodeChange",o=>{XI(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(c=>yh(c)?c:c.startContainer).bind(c=>We(c)?N.some(c):N.from(c.parentElement)).getOrThunk(()=>ps(n));XI(n,r,e.get())})},ps=e=>e.selection.getStart(),KI=(e,n,o,r,c)=>yp(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!Ns(y)},b=>No(e,b,o)?!0:r?!1:Ce(e.formatter.matchNode(b,o,c,!0))),YI=(e,n)=>{const o=n??ps(e);return ft(Ch(e.dom,o),r=>We(r)&&!mc(r))},XI=(e,n,o)=>{const r=YI(e,n);Ze(o,(c,u)=>{const f=b=>{const y=KI(e,r,u,b.similar,e2(b)?b.vars:void 0),x=y.isSome();if(b.state.get()!==x){b.state.set(x);const A=y.getOr(n);e2(b)?b.callback(x,{node:A,format:u,parents:r}):be(b.callbacks,O=>O(x,{node:A,format:u,parents:r}))}};be([c.withSimilar,c.withoutSimilar],f),be(c.withVars,f)})},lZ=(e,n,o,r,c,u)=>{const f=n.get();be(o.split(","),b=>{const y=to(f,b).getOrThunk(()=>{const A={withSimilar:{state:us(!1),similar:!0,callbacks:[]},withoutSimilar:{state:us(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=A,A}),x=()=>{const A=YI(e);return KI(e,A,b,c,u).isSome()};if(Ns(u)){const A=c?y.withSimilar:y.withoutSimilar;A.callbacks.push(r),A.callbacks.length===1&&A.state.set(x())}else y.withVars.push({state:us(x()),similar:c,vars:u,callback:r})}),n.set(f)},sl=(e,n,o)=>{const r=e.get();be(n.split(","),c=>to(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ft(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ft(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ft(u.withVars,f=>f.callback!==o)}})),e.set(r)},ox=(e,n,o,r,c,u)=>(lZ(e,n,o,r,c,u),{unbind:()=>sl(n,o,r)}),Kf=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(XS(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?Bb(e,n,o,r):TM(e,n,o,r))},ym=Te.explode,_M=()=>{const e={};return{addFilter:(c,u)=>{be(ym(c),f=>{kt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Rm(e),removeFilter:(c,u)=>{be(ym(c),f=>{if(kt(e,f))if(Ce(u)){const b=e[f],y=ft(b.callbacks,x=>x!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},JI=(e,n)=>{be(n,o=>{e.attr(o,null)})},Pb=(e,n,o)=>{e.addNodeFilter("font",r=>{be(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&vd(y).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),JI(c,["color","face","size"])})})},$b=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";be(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},Fb=(e,n,o)=>{var r;const c=s0();n.convert_fonts_to_spans&&Pb(e,c,Te.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),$b(e,o,c)},QI=(e,n,o)=>{n.inline_styles&&Fb(e,n,o)},sx=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=Te.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),y=o.getWhitespaceElements();f.body=1;const x=A=>A.name in f||Vg(o,A);for(let A=0,O=r.length;A<O;A++){let B=r[A],L=B.parent;if(L&&x(L)&&B===L.lastChild){let z=B.prev;for(;z;){const F=z.name;if(F!=="span"||z.attr("data-mce-type")!=="bookmark"){F==="br"&&(B=null);break}z=z.prev}if(B&&(B.remove(),Lh(o,b,y,L))){const F=o.getElementRule(L.name);F&&(F.removeEmpty?L.remove():F.paddEmpty&&WS(e,u,x,L))}}else{let z=B;for(;L&&L.firstChild===z&&L.lastChild===z&&(z=L,!f[L.name]);)L=L.parent;if(z===L){const F=new Ka("#text",3);F.value=me,B.replace(F)}}}})},OM=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),AM=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},S4=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?AM(r):decodeURIComponent(r);return N.some({type:c[1],data:f,base64Encoded:u})}else return N.none()},DM=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return N.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return N.some(new Blob([c],{type:e}))},RM=e=>new Promise((n,o)=>{S4(e).bind(({type:r,data:c,base64Encoded:u})=>DM(r,c,u)).fold(()=>o("Invalid data URI"),n)}),e8=e=>_s(e,"blob:")?OM(e):_s(e,"data:")?RM(e):Promise.reject("Unknown URI format"),MM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let t8=0;const n8=e=>(e||"blobid")+t8++,BM=(e,n,o)=>S4(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return N.none();{const f=u?r:btoa(r);return o(f,c)}}),x4=(e,n,o)=>{const r=e.create(n8(),n,o);return e.add(r),r},NM=(e,n,o=!1)=>BM(n,o,(r,c)=>N.from(e.getByData(r,c)).orThunk(()=>DM(c,r).map(u=>x4(e,u,r)))),t2=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(_s(n,"blob:")){const r=e.getByUri(n);return Ce(r)?Promise.resolve(r):e8(n).then(c=>MM(c).then(u=>BM(u,!1,f=>N.some(x4(e,c,f))).getOrThunk(o)))}else return _s(n,"data:")?NM(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},PM=e=>Ce(e.attr("data-mce-bogus")),o8=e=>e.attr("src")===gn.transparentSrc||Ce(e.attr("data-mce-placeholder")),$M=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");o8(c)||PM(c)||dn(u)||NM(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>be(c,r))}},s8=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&sx(n,e,o),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(A=>A.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const x=y?Te.trim(y):"";return/\b(noopener)\b/g.test(x)?x:f(x)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,x;for(;u--;)if(x=c[u],x.name==="a"&&x.firstChild&&!x.attr("href"))for(y=x.parent,f=x.lastChild;f&&y;)b=f.prev,y.insert(f,x),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new Ka("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",x=Te.explode(y," ");let A="";for(let O=0;O<x.length;O++){const B=x[O];let L=!1,z=r["*"];z&&z[B]&&(L=!0),z=r[b.name],!L&&z&&z[B]&&(L=!0),L&&(A&&(A+=" "),A+=B)}A.length||(A=null),b.attr("class",A)}}),$M(e,n)};function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Yf(e)}function E4(e,n){return E4=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},E4(e,n)}function r8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function n2(e,n,o){return r8()?n2=Reflect.construct:n2=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),x=new y;return f&&E4(x,f.prototype),x},n2.apply(null,arguments)}function rl(e){return FM(e)||IM(e)||LM(e)||a8()}function FM(e){if(Array.isArray(e))return rx(e)}function IM(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LM(e,n){if(e){if(typeof e=="string")return rx(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return rx(e,n)}}function rx(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function a8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c8=Object.hasOwnProperty,HM=Object.setPrototypeOf,T4=Object.isFrozen,o2=Object.getPrototypeOf,VM=Object.getOwnPropertyDescriptor,Ya=Object.freeze,Ri=Object.seal,i8=Object.create,zM=typeof Reflect<"u"&&Reflect,Yl=zM.apply,s2=zM.construct;Yl||(Yl=function(n,o,r){return n.apply(o,r)}),Ya||(Ya=function(n){return n}),Ri||(Ri=function(n){return n}),s2||(s2=function(n,o){return n2(n,rl(o))});var UM=Xl(Array.prototype.forEach),r2=Xl(Array.prototype.pop),Ib=Xl(Array.prototype.push),Lb=Xl(String.prototype.toLowerCase),WM=Xl(String.prototype.match),Cm=Xl(String.prototype.replace),l8=Xl(String.prototype.indexOf),u8=Xl(String.prototype.trim),Tc=Xl(RegExp.prototype.test),a2=ZM(TypeError);function Xl(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return Yl(e,n,r)}}function ZM(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s2(e,o)}}function Nn(e,n){HM&&HM(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=Lb(r);c!==r&&(T4(n)||(n[o]=c),r=c)}e[r]=!0}return e}function jh(e){var n=i8(null),o;for(o in e)Yl(c8,e,[o])&&(n[o]=e[o]);return n}function ax(e,n){for(;e!==null;){var o=VM(e,n);if(o){if(o.get)return Xl(o.get);if(typeof o.value=="function")return Xl(o.value)}e=o2(e)}function r(c){return console.warn("fallback value for",c),null}return r}var cx=Ya(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Cr=Ya(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),k4=Ya(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ix=Ya(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wm=Ya(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),jM=Ya(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Xa=Ya(["#text"]),Xf=Ya(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),lx=Ya(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GM=Ya(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),c2=Ya(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),d8=Ri(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qM=Ri(/<%[\w\W]*|[\w\W]*%>/gm),i2=Ri(/^data-[\-\w.\u00B7-\uFFFF]/),_4=Ri(/^aria-[\-\w]+$/),m8=Ri(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),KM=Ri(/^(?:\w+script|data):/i),f8=Ri(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),O4=Ri(/^html$/i),A4=function(){return typeof window>"u"?null:window},D4=function(n,o){if(Yf(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function R4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A4(),n=function(ue){return R4(ue)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,x=e.NamedNodeMap,A=x===void 0?e.NamedNodeMap||e.MozNamedAttrMap:x,O=e.HTMLFormElement,B=e.DOMParser,L=e.trustedTypes,z=b.prototype,F=ax(z,"cloneNode"),V=ax(z,"nextSibling"),q=ax(z,"childNodes"),X=ax(z,"parentNode");if(typeof u=="function"){var J=r.createElement("template");J.content&&J.content.ownerDocument&&(r=J.content.ownerDocument)}var se=D4(L,o),ye=se?se.createHTML(""):"",tt=r,xe=tt.implementation,le=tt.createNodeIterator,fe=tt.createDocumentFragment,Pe=tt.getElementsByTagName,Ie=o.importNode,Ye={};try{Ye=jh(r).documentMode?r.documentMode:{}}catch{}var vt={};n.isSupported=typeof X=="function"&&xe&&typeof xe.createHTMLDocument<"u"&&Ye!==9;var yt=d8,rn=qM,fn=i2,Mn=_4,wr=KM,ks=f8,Me=m8,Je=null,un=Nn({},[].concat(rl(cx),rl(Cr),rl(k4),rl(wm),rl(Xa))),tn=null,nt=Nn({},[].concat(rl(Xf),rl(lx),rl(GM),rl(c2))),rt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ae=null,wt=null,Mt=!0,an=!0,Jn=!1,_t=!1,nn=!1,Ao=!1,Hn=!1,xo=!1,uo=!1,Zn=!1,os=!0,Sr=!0,xr=!1,lu={},$o=null,_m=Nn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ra=null,uu=Nn({},["audio","video","img","source","image","track"]),cn=null,po=Nn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ec="http://www.w3.org/1998/Math/MathML",ll="http://www.w3.org/2000/svg",Ac="http://www.w3.org/1999/xhtml",Dc=Ac,id=!1,cr,Om=["application/xhtml+xml","text/html"],du="text/html",Bi,ld=null,oC=r.createElement("form"),lv=function(ue){return ue instanceof RegExp||ue instanceof Function},oT=function(ue){ld&&ld===ue||((!ue||Yf(ue)!=="object")&&(ue={}),ue=jh(ue),Je="ALLOWED_TAGS"in ue?Nn({},ue.ALLOWED_TAGS):un,tn="ALLOWED_ATTR"in ue?Nn({},ue.ALLOWED_ATTR):nt,cn="ADD_URI_SAFE_ATTR"in ue?Nn(jh(po),ue.ADD_URI_SAFE_ATTR):po,Ra="ADD_DATA_URI_TAGS"in ue?Nn(jh(uu),ue.ADD_DATA_URI_TAGS):uu,$o="FORBID_CONTENTS"in ue?Nn({},ue.FORBID_CONTENTS):_m,Ae="FORBID_TAGS"in ue?Nn({},ue.FORBID_TAGS):{},wt="FORBID_ATTR"in ue?Nn({},ue.FORBID_ATTR):{},lu="USE_PROFILES"in ue?ue.USE_PROFILES:!1,Mt=ue.ALLOW_ARIA_ATTR!==!1,an=ue.ALLOW_DATA_ATTR!==!1,Jn=ue.ALLOW_UNKNOWN_PROTOCOLS||!1,_t=ue.SAFE_FOR_TEMPLATES||!1,nn=ue.WHOLE_DOCUMENT||!1,xo=ue.RETURN_DOM||!1,uo=ue.RETURN_DOM_FRAGMENT||!1,Zn=ue.RETURN_TRUSTED_TYPE||!1,Hn=ue.FORCE_BODY||!1,os=ue.SANITIZE_DOM!==!1,Sr=ue.KEEP_CONTENT!==!1,xr=ue.IN_PLACE||!1,Me=ue.ALLOWED_URI_REGEXP||Me,Dc=ue.NAMESPACE||Ac,ue.CUSTOM_ELEMENT_HANDLING&&lv(ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rt.tagNameCheck=ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&lv(ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rt.attributeNameCheck=ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&typeof ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rt.allowCustomizedBuiltInElements=ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),cr=Om.indexOf(ue.PARSER_MEDIA_TYPE)===-1?cr=du:cr=ue.PARSER_MEDIA_TYPE,Bi=cr==="application/xhtml+xml"?function(Qe){return Qe}:Lb,_t&&(an=!1),uo&&(xo=!0),lu&&(Je=Nn({},rl(Xa)),tn=[],lu.html===!0&&(Nn(Je,cx),Nn(tn,Xf)),lu.svg===!0&&(Nn(Je,Cr),Nn(tn,lx),Nn(tn,c2)),lu.svgFilters===!0&&(Nn(Je,k4),Nn(tn,lx),Nn(tn,c2)),lu.mathMl===!0&&(Nn(Je,wm),Nn(tn,GM),Nn(tn,c2))),ue.ADD_TAGS&&(Je===un&&(Je=jh(Je)),Nn(Je,ue.ADD_TAGS)),ue.ADD_ATTR&&(tn===nt&&(tn=jh(tn)),Nn(tn,ue.ADD_ATTR)),ue.ADD_URI_SAFE_ATTR&&Nn(cn,ue.ADD_URI_SAFE_ATTR),ue.FORBID_CONTENTS&&($o===_m&&($o=jh($o)),Nn($o,ue.FORBID_CONTENTS)),Sr&&(Je["#text"]=!0),nn&&Nn(Je,["html","head","body"]),Je.table&&(Nn(Je,["tbody"]),delete Ae.tbody),Ya&&Ya(ue),ld=ue)},WA=Nn({},["mi","mo","mn","ms","mtext"]),ZA=Nn({},["foreignobject","desc","title","annotation-xml"]),q6=Nn({},["title","style","font","a","script"]),mu=Nn({},Cr);Nn(mu,k4),Nn(mu,ix);var uv=Nn({},wm);Nn(uv,jM);var re=function(ue){var Qe=X(ue);(!Qe||!Qe.tagName)&&(Qe={namespaceURI:Ac,tagName:"template"});var Ot=Lb(ue.tagName),Do=Lb(Qe.tagName);return ue.namespaceURI===ll?Qe.namespaceURI===Ac?Ot==="svg":Qe.namespaceURI===ec?Ot==="svg"&&(Do==="annotation-xml"||WA[Do]):!!mu[Ot]:ue.namespaceURI===ec?Qe.namespaceURI===Ac?Ot==="math":Qe.namespaceURI===ll?Ot==="math"&&ZA[Do]:!!uv[Ot]:ue.namespaceURI===Ac?Qe.namespaceURI===ll&&!ZA[Do]||Qe.namespaceURI===ec&&!WA[Do]?!1:!uv[Ot]&&(q6[Ot]||!mu[Ot]):!1},ae=function(ue){Ib(n.removed,{element:ue});try{ue.parentNode.removeChild(ue)}catch{try{ue.outerHTML=ye}catch{ue.remove()}}},Be=function(ue,Qe){try{Ib(n.removed,{attribute:Qe.getAttributeNode(ue),from:Qe})}catch{Ib(n.removed,{attribute:null,from:Qe})}if(Qe.removeAttribute(ue),ue==="is"&&!tn[ue])if(xo||uo)try{ae(Qe)}catch{}else try{Qe.setAttribute(ue,"")}catch{}},Oe=function(ue){var Qe,Ot;if(Hn)ue="<remove></remove>"+ue;else{var Do=WM(ue,/^[\r\n\t ]+/);Ot=Do&&Do[0]}cr==="application/xhtml+xml"&&(ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ue+"</body></html>");var ri=se?se.createHTML(ue):ue;if(Dc===Ac)try{Qe=new B().parseFromString(ri,cr)}catch{}if(!Qe||!Qe.documentElement){Qe=xe.createDocument(Dc,"template",null);try{Qe.documentElement.innerHTML=id?"":ri}catch{}}var tc=Qe.body||Qe.documentElement;return ue&&Ot&&tc.insertBefore(r.createTextNode(Ot),tc.childNodes[0]||null),Dc===Ac?Pe.call(Qe,nn?"html":"body")[0]:nn?Qe.documentElement:tc},it=function(ue){return le.call(ue.ownerDocument||ue,ue,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},on=function(ue){return ue instanceof O&&(typeof ue.nodeName!="string"||typeof ue.textContent!="string"||typeof ue.removeChild!="function"||!(ue.attributes instanceof A)||typeof ue.removeAttribute!="function"||typeof ue.setAttribute!="function"||typeof ue.namespaceURI!="string"||typeof ue.insertBefore!="function")},Qn=function(ue){return Yf(f)==="object"?ue instanceof f:ue&&Yf(ue)==="object"&&typeof ue.nodeType=="number"&&typeof ue.nodeName=="string"},zs=function(ue,Qe,Ot){vt[ue]&&UM(vt[ue],function(Do){Do.call(n,Qe,Ot,ld)})},Us=function(ue){var Qe;if(zs("beforeSanitizeElements",ue,null),on(ue)||Tc(/[\u0080-\uFFFF]/,ue.nodeName))return ae(ue),!0;var Ot=Bi(ue.nodeName);if(zs("uponSanitizeElement",ue,{tagName:Ot,allowedTags:Je}),ue.hasChildNodes()&&!Qn(ue.firstElementChild)&&(!Qn(ue.content)||!Qn(ue.content.firstElementChild))&&Tc(/<[/\w]/g,ue.innerHTML)&&Tc(/<[/\w]/g,ue.textContent)||Ot==="select"&&Tc(/<template/i,ue.innerHTML))return ae(ue),!0;if(!Je[Ot]||Ae[Ot]){if(!Ae[Ot]&&mv(Ot)&&(rt.tagNameCheck instanceof RegExp&&Tc(rt.tagNameCheck,Ot)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(Ot)))return!1;if(Sr&&!$o[Ot]){var Do=X(ue)||ue.parentNode,ri=q(ue)||ue.childNodes;if(ri&&Do)for(var tc=ri.length,ra=tc-1;ra>=0;--ra)Do.insertBefore(F(ri[ra],!0),V(ue))}return ae(ue),!0}return ue instanceof b&&!re(ue)||(Ot==="noscript"||Ot==="noembed")&&Tc(/<\/no(script|embed)/i,ue.innerHTML)?(ae(ue),!0):(_t&&ue.nodeType===3&&(Qe=ue.textContent,Qe=Cm(Qe,yt," "),Qe=Cm(Qe,rn," "),ue.textContent!==Qe&&(Ib(n.removed,{element:ue.cloneNode()}),ue.textContent=Qe)),zs("afterSanitizeElements",ue,null),!1)},dv=function(ue,Qe,Ot){if(os&&(Qe==="id"||Qe==="name")&&(Ot in r||Ot in oC))return!1;if(!(an&&!wt[Qe]&&Tc(fn,Qe))){if(!(Mt&&Tc(Mn,Qe))){if(!tn[Qe]||wt[Qe]){if(!(mv(ue)&&(rt.tagNameCheck instanceof RegExp&&Tc(rt.tagNameCheck,ue)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(ue))&&(rt.attributeNameCheck instanceof RegExp&&Tc(rt.attributeNameCheck,Qe)||rt.attributeNameCheck instanceof Function&&rt.attributeNameCheck(Qe))||Qe==="is"&&rt.allowCustomizedBuiltInElements&&(rt.tagNameCheck instanceof RegExp&&Tc(rt.tagNameCheck,Ot)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(Ot))))return!1}else if(!cn[Qe]){if(!Tc(Me,Cm(Ot,ks,""))){if(!((Qe==="src"||Qe==="xlink:href"||Qe==="href")&&ue!=="script"&&l8(Ot,"data:")===0&&Ra[ue])){if(!(Jn&&!Tc(wr,Cm(Ot,ks,"")))){if(Ot)return!1}}}}}}return!0},mv=function(ue){return ue.indexOf("-")>0},jA=function(ue){var Qe,Ot,Do,ri;zs("beforeSanitizeAttributes",ue,null);var tc=ue.attributes;if(tc){var ra={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:tn};for(ri=tc.length;ri--;){Qe=tc[ri];var sC=Qe,aa=sC.name,GA=sC.namespaceURI;Ot=aa==="value"?Qe.value:u8(Qe.value),Do=Bi(aa);var qA=Ot;if(ra.attrName=Do,ra.attrValue=Ot,ra.keepAttr=!0,ra.forceKeepAttr=void 0,zs("uponSanitizeAttribute",ue,ra),Ot=ra.attrValue,!ra.forceKeepAttr){if(!ra.keepAttr){Be(aa,ue);continue}if(Tc(/\/>/i,Ot)){Be(aa,ue);continue}_t&&(Ot=Cm(Ot,yt," "),Ot=Cm(Ot,rn," "));var Y6=Bi(ue.nodeName);if(!dv(Y6,Do,Ot)){Be(aa,ue);continue}if(Ot!==qA)try{GA?ue.setAttributeNS(GA,aa,Ot):ue.setAttribute(aa,Ot)}catch{Be(aa,ue)}}}zs("afterSanitizeAttributes",ue,null)}},K6=function Ut(ue){var Qe,Ot=it(ue);for(zs("beforeSanitizeShadowDOM",ue,null);Qe=Ot.nextNode();)zs("uponSanitizeShadowNode",Qe,null),!Us(Qe)&&(Qe.content instanceof c&&Ut(Qe.content),jA(Qe));zs("afterSanitizeShadowDOM",ue,null)};return n.sanitize=function(Ut,ue){var Qe,Ot,Do,ri,tc;if(id=!Ut,id&&(Ut="<!-->"),typeof Ut!="string"&&!Qn(Ut)){if(typeof Ut.toString!="function")throw a2("toString is not a function");if(Ut=Ut.toString(),typeof Ut!="string")throw a2("dirty is not a string, aborting")}if(!n.isSupported){if(Yf(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Ut=="string")return e.toStaticHTML(Ut);if(Qn(Ut))return e.toStaticHTML(Ut.outerHTML)}return Ut}if(Ao||oT(ue),n.removed=[],typeof Ut=="string"&&(xr=!1),xr){if(Ut.nodeName){var ra=Bi(Ut.nodeName);if(!Je[ra]||Ae[ra])throw a2("root node is forbidden and cannot be sanitized in-place")}}else if(Ut instanceof f)Qe=Oe("<!---->"),Ot=Qe.ownerDocument.importNode(Ut,!0),Ot.nodeType===1&&Ot.nodeName==="BODY"||Ot.nodeName==="HTML"?Qe=Ot:Qe.appendChild(Ot);else{if(!xo&&!_t&&!nn&&Ut.indexOf("<")===-1)return se&&Zn?se.createHTML(Ut):Ut;if(Qe=Oe(Ut),!Qe)return xo?null:Zn?ye:""}Qe&&Hn&&ae(Qe.firstChild);for(var sC=it(xr?Ut:Qe);Do=sC.nextNode();)Do.nodeType===3&&Do===ri||Us(Do)||(Do.content instanceof c&&K6(Do.content),jA(Do),ri=Do);if(ri=null,xr)return Ut;if(xo){if(uo)for(tc=fe.call(Qe.ownerDocument);Qe.firstChild;)tc.appendChild(Qe.firstChild);else tc=Qe;return tn.shadowroot&&(tc=Ie.call(o,tc,!0)),tc}var aa=nn?Qe.outerHTML:Qe.innerHTML;return nn&&Je["!doctype"]&&Qe.ownerDocument&&Qe.ownerDocument.doctype&&Qe.ownerDocument.doctype.name&&Tc(O4,Qe.ownerDocument.doctype.name)&&(aa="<!DOCTYPE "+Qe.ownerDocument.doctype.name+`>
`+aa),_t&&(aa=Cm(aa,yt," "),aa=Cm(aa,rn," ")),se&&Zn?se.createHTML(aa):aa},n.setConfig=function(Ut){oT(Ut),Ao=!0},n.clearConfig=function(){ld=null,Ao=!1},n.isValidAttribute=function(Ut,ue,Qe){ld||oT({});var Ot=Bi(Ut),Do=Bi(ue);return dv(Ot,Do,Qe)},n.addHook=function(Ut,ue){typeof ue=="function"&&(vt[Ut]=vt[Ut]||[],Ib(vt[Ut],ue))},n.removeHook=function(Ut){if(vt[Ut])return r2(vt[Ut])},n.removeHooks=function(Ut){vt[Ut]&&(vt[Ut]=[])},n.removeAllHooks=function(){vt={}},n}var YM=R4();const XM=Te.each,ed=Te.trim,M4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],g8={ftp:21,http:80,https:443,mailto:25},h8=["img","video"],JM=(e,n)=>Ce(e)?!e:Ce(n)?!Bt(h8,n):!0,QM=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Hb=(e,n,o)=>{const r=QM(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?JM(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Jl{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Ol.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!Hb(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=ed(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Jl(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&XM(M4,(b,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Jl(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Jl(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?g8[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];XM(u,O=>{O&&b.push(O)});const y=[];for(let O=f.length-1;O>=0;O--)if(!(f[O].length===0||f[O]===".")){if(f[O]===".."){r++;continue}if(r>0){r--;continue}y.push(f[O])}const x=b.length-r;let A;return x<=0?A=bo(y).join("/"):A=b.slice(0,x).join("/")+"/"+bo(y).join("/"),A.indexOf("/")!==0&&(A="/"+A),c&&A.lastIndexOf("/")!==A.length-1&&(A+=c),A}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const p8=Te.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),B4="data-mce-type";let eB=0;const tB=(e,n,o,r)=>{var c,u,f,b;const y=n.validate,x=o.getSpecialElements();e.nodeType===ga&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const A=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==Fm||A==="body")return;const O=W.fromDom(e),B=Og(O,B4),L=Kr(O,"data-mce-bogus");if(!B&&K(L)){L==="all"?Tn(O):fi(O);return}const z=o.getElementRule(A);if(y&&!z){kt(x,A)?Tn(O):fi(O);return}else Ce(r)&&(r.allowedTags[A]=!0);if(y&&z&&!B){if(be((f=z.attributesForced)!==null&&f!==void 0?f:[],F=>{qo(O,F.name,F.value==="{$uid}"?`mce_${eB++}`:F.value)}),be((b=z.attributesDefault)!==null&&b!==void 0?b:[],F=>{Og(O,F.name)||qo(O,F.name,F.value==="{$uid}"?`mce_${eB++}`:F.value)}),z.attributesRequired&&!mo(z.attributesRequired,F=>Og(O,F))){fi(O);return}if(z.removeEmptyAttrs&&cc(O)){fi(O);return}z.outputName&&z.outputName!==A&&ko(O,z.outputName)}},N4=(e,n,o,r,c)=>!(r in p8&&Hb(e,c,o))&&(!e.validate||n.isValid(o,r)||_s(r,"data-")||_s(r,"aria-")),nB=(e,n)=>e.hasAttribute(B4)&&(n==="id"||n==="class"||n==="style"),oB=(e,n)=>e in n.getBoolAttrs(),b8=(e,n,o)=>{const{attributes:r}=e;for(let c=r.length-1;c>=0;c--){const u=r[c],f=u.name,b=u.value;!N4(n,o,e.tagName.toLowerCase(),f,b)&&!nB(e,f)?e.removeAttribute(f):oB(f,o)&&e.setAttribute(f,f)}},sB=(e,n)=>{const o=YM();return o.addHook("uponSanitizeElement",(r,c)=>{tB(r,e,n,c)}),o.addHook("uponSanitizeAttribute",(r,c)=>{const u=r.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=N4(e,n,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,oB(f,n)&&(c.attrValue=f),e.allow_svg_data_urls&&_s(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):nB(r,f)&&(c.forceKeepAttr=!0)}),o},P4=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},rB=(e,n)=>{if(e.sanitize){const o=sB(e,n);return(r,c)=>{o.sanitize(r,P4(e,c)),o.removed=[]}}else return(o,r)=>{const c=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=c.nextNode();)tB(u,e,n),We(u)&&b8(u,e,n)}},$4=Te.makeMap,ux=Te.extend,F4=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],x=new Ka(y.nodeName.toLowerCase(),y.nodeType);if(We(y)){const A=y.attributes;for(let O=0,B=A.length;O<B;O++){const L=A[O];x.attr(L.name,L.value)}}else _e(y)?(x.value=y.data,c&&(x.raw=!0)):(Ha(y)||_T(y)||OT(y))&&(x.value=y.data);F4(x,y,o),e.append(x)}},aB=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;be(n,b=>b(f)),dn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];be(o,f=>f(u))}},cB=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=ux($4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=Vc(n),x=/[ \t\r\n]+/g,A=/^[ \t\r\n]+/,O=/[ \t\r\n]+$/,B=X=>{let J=X.parent;for(;Ce(J);){if(J.name in f)return!0;J=J.parent}return!1},L=X=>{let J=X;for(;Ce(J);){if(J.name in y)return Lh(n,u,f,J);J=J.parent}return!1},z=X=>X.name in b||Vg(n,X),F=(X,J)=>{const se=J?X.prev:X.next;return Ce(se)||dn(X.parent)?!1:z(X.parent)&&(X.parent!==e||r.isRootContent===!0)};return[X=>{var J;if(X.type===3&&!B(X)){let se=(J=X.value)!==null&&J!==void 0?J:"";se=se.replace(x," "),(ql(X.prev,z)||F(X,!0))&&(se=se.replace(A,"")),se.length===0?X.remove():X.value=se}},X=>{var J;if(X.type===1){const se=n.getElementRule(X.name);if(c&&se){const ye=Lh(n,u,f,X);se.paddInEmptyBlock&&ye&&L(X)?WS(o,r,z,X):se.removeEmpty&&ye?z(X)?X.remove():X.unwrap():se.paddEmpty&&(ye||dI(X))&&WS(o,r,z,X)}}else if(X.type===3&&!B(X)){let se=(J=X.value)!==null&&J!==void 0?J:"";(X.next&&z(X.next)||F(X,!1))&&(se=se.replace(O,"")),se.length===0?X.remove():X.value=se}}]},iB=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Vb=(e={},n=yi())=>{const o=_M(),r=_M(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=rB(c,n),b=(J,se,ye="html")=>{const tt=ye==="xhtml"?"application/xhtml+xml":"text/html",xe=kt(n.getSpecialElements(),se.toLowerCase()),le=xe?`<${se}>${J}</${se}>`:J,fe=ye==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${le}</body></html>`:`<body>${le}</body>`,Pe=u.parseFromString(fe,tt).body;return f(Pe,tt),xe?Pe.firstChild:Pe},y=o.addFilter,x=o.getFilters,A=o.removeFilter,O=r.addFilter,B=r.getFilters,L=r.removeFilter,z=(J,se)=>{t4(n,J)&&se.push(J)},F=(J,se)=>{const ye=K(se.attr(B4)),tt=se.type===1&&!kt(J,se.name)&&!Vg(n,se);return se.type===3||tt&&!ye},V=(J,se)=>{const ye=ux($4("script,style,head,html,body,title,meta,param"),n.getBlockElements()),tt=/^[ \t\r\n]+/,xe=/[ \t\r\n]+$/;let le=J.firstChild,fe=null;const Pe=Ie=>{var Ye,vt;Ie&&(le=Ie.firstChild,le&&le.type===3&&(le.value=(Ye=le.value)===null||Ye===void 0?void 0:Ye.replace(tt,"")),le=Ie.lastChild,le&&le.type===3&&(le.value=(vt=le.value)===null||vt===void 0?void 0:vt.replace(xe,"")))};if(n.isValidChild(J.name,se.toLowerCase())){for(;le;){const Ie=le.next;F(ye,le)?(fe||(fe=new Ka(se,1),fe.attr(c.forced_root_block_attrs),J.insert(fe,le)),fe.append(le)):(Pe(fe),fe=null),le=Ie}Pe(fe)}},X={schema:n,addAttributeFilter:O,getAttributeFilters:B,removeAttributeFilter:L,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:A,parse:(J,se={})=>{var ye;const tt=c.validate,xe=(ye=se.context)!==null&&ye!==void 0?ye:c.root_name,le=b(J,xe,se.format);ji(n,le);const fe=new Ka(xe,11);F4(fe,le,n.getSpecialElements()),le.innerHTML="";const[Pe,Ie]=cB(fe,n,c,se),Ye=[],vt=tt?Mn=>z(Mn,Ye):pt,yt={nodes:{},attributes:{}},rn=Mn=>pm(x(),B(),Mn,yt);if(aB(fe,[Pe,rn],[Ie,vt]),Ye.reverse(),tt&&Ye.length>0)if(se.context){const{pass:Mn,fail:wr}=Er(Ye,ks=>ks.parent===fe);Wy(wr,n,fe,rn),se.invalid=Mn.length>0}else Wy(Ye,n,fe,rn);const fn=iB(c,se);return fn&&(fe.name==="body"||se.isRootContent)&&V(fe,fn),se.invalid||NR(yt,se),fe}};return s8(X,c),QI(X,c,n),X},I4=e=>KS(e)?Zf({validate:!1}).serialize(e):e,lB=(e,n,o)=>{const r=I4(e),c=n(r);if(c.isDefaultPrevented())return c;if(KS(e))if(c.content!==r){const u=Vb({validate:!1,forced_root_block:!1,sanitize:o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},l2=(e,n)=>{if(n.no_events)return vr.value(n);{const o=r_(e,n);return o.isDefaultPrevented()?vr.error(Yu(e,{content:"",...o}).content):vr.value(o)}},uB=(e,n,o)=>o.no_events?n:lB(n,c=>Yu(e,{...o,content:c}),z1(e)).content,L4=(e,n)=>{if(n.no_events)return vr.value(n);{const o=lB(n.content,r=>s_(e,{...n,content:r}),z1(e));return o.isDefaultPrevented()?(db(e,o),vr.error(void 0)):vr.value(o)}},H4=(e,n,o)=>{o.no_events||db(e,{...o,content:n})},dx=(e,n,o)=>({element:e,width:n,rows:o}),V4=(e,n)=>({element:e,cells:n}),v8=(e,n)=>({x:e,y:n}),dB=(e,n)=>di(e,n).bind(vd).getOr(1),y8=(e,n,o,r,c)=>{const u=dB(c,"rowspan"),f=dB(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=V4(WT(r),[]));for(let x=n;x<n+f;x++){const A=b[y].cells;A[x]=y===o&&x===n?c:Iu(c)}}},C8=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},mB=(e,n,o)=>{for(;C8(e,n,o);)n++;return n},w8=e=>Ro(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),fB=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(En(c[u],n))return N.some(v8(u,r))}return N.none()},gB=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(V4(f[b].element,x))}return u},S8=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?gB(e,r,c,u,f):gB(e,r,f,u,c);return dx(e.element,w8(b),b)},x8=(e,n)=>{const o=Iu(e.element),r=W.fromTag("tbody");return Vn(r,n),Yo(o,r),o},E8=e=>Ft(e.rows,n=>{const o=Ft(n.cells,c=>{const u=WT(c);return Ko(u,"colspan"),Ko(u,"rowspan"),u}),r=Iu(n.element);return Vn(r,o),r}),T8=e=>{const n=dx(Iu(e),0,[]);return be(Ys(e,"tr"),(o,r)=>{be(Ys(o,"td,th"),(c,u)=>{y8(n,mB(n,u,r),r,o,c)})}),dx(n.element,w8(n.rows),n.rows)},k8=e=>x8(e,E8(e)),hB=(e,n,o)=>fB(e,n).bind(r=>fB(e,o).map(c=>S8(e,r,c))),_8=e=>Ho(e,n=>oo(n)==="ul"||oo(n)==="ol"),O8=(e,n)=>Ho(e,o=>oo(o)==="li"&&zl(o,n)).fold(Le([]),o=>_8(e).map(r=>{const c=W.fromTag(oo(r)),u=ro(Ks(r),(f,b)=>_s(b,"list-style"));return Vp(c,u),[W.fromTag("li"),c]}).getOr([])),A8=(e,n)=>{const o=Ro(n,(r,c)=>(Yo(c,r),c),e);return n.length>0?qc([o]):o},D8=e=>va(e)?Fa(e).filter(za).fold(Le([]),n=>[e,n]):za(e)?[e]:[],R8=(e,n)=>{const o=W.fromDom(n.commonAncestorContainer),r=gm(o,e),c=ft(r,Au),u=O8(r,n),f=c.concat(u.length?u:D8(o));return Ft(f,Iu)},M8=()=>qc([]),uZ=(e,n)=>A8(W.fromDom(n.cloneContents()),R8(e,n)),B8=(e,n)=>Rg(n,"table",Ee(En,e)),N8=(e,n)=>B8(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=T8(o);return hB(u,r,c).map(f=>qc([k8(f)]))}).getOrThunk(M8),dZ=(e,n)=>n.length>0&&n[0].collapsed?M8():uZ(e,n[0]),P8=(e,n)=>{const o=Yk(n,e);return o.length>0?N8(e,o):dZ(e,n)},lo=(e,n)=>n>=0&&n<e.length&&Rf(e.charAt(n)),mx=e=>xl(e.innerText),mZ=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),$8=e=>N.from(e.selection.getRng()).map(n=>{var o;const r=N.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=mZ(r),f=W.fromDom(n.cloneContents());FD(f),ID(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=mx(b),x=xl((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),lo(x,0)||lo(x,x.length-1)){const A=r.getOr(c),O=mx(A),B=O.indexOf(y);if(B===-1)return y;{const L=lo(O,B-1),z=lo(O,B+y.length);return(L?" ":"")+y+(z?" ":"")}}else return y}).getOr(""),F8=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=E_(e,J1(c)),f=n.contextual?P8(W.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},zb=(e,n)=>{if(n.format==="text")return $8(e);{const o=F8(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},fZ=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),gZ=(e,n,o={})=>{const r=fZ(o,n);return l2(e,r).fold(Eo,c=>{const u=zb(e,c);return uB(e,u,c)})},Vs=0,z4=1,U4=2,pB=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(A,O,B)=>({start:A,end:O,diag:B}),f=(A,O,B,L,z)=>{const F=y(A,O,B,L);if(F===null||F.start===O&&F.diag===O-L||F.end===A&&F.diag===A-B){let V=A,q=B;for(;V<O||q<L;)V<O&&q<L&&e[V]===n[q]?(z.push([Vs,e[V]]),++V,++q):O-A>L-B?(z.push([U4,e[V]]),++V):(z.push([z4,n[q]]),++q)}else{f(A,F.start,B,F.start-F.diag,z);for(let V=F.start;V<F.end;++V)z.push([Vs,e[V]]);f(F.end,O,F.end-F.diag,L,z)}},b=(A,O,B,L)=>{let z=A;for(;z-O<L&&z<B&&e[z]===n[z-O];)++z;return u(A,z,O)},y=(A,O,B,L)=>{const z=O-A,F=L-B;if(z===0||F===0)return null;const V=z-F,q=F+z,X=(q%2===0?q:q+1)/2;r[1+X]=A,c[1+X]=O+1;let J,se,ye,tt,xe;for(J=0;J<=X;++J){for(se=-J;se<=J;se+=2){for(ye=se+X,se===-J||se!==J&&r[ye-1]<r[ye+1]?r[ye]=r[ye+1]:r[ye]=r[ye-1]+1,tt=r[ye],xe=tt-A+B-se;tt<O&&xe<L&&e[tt]===n[xe];)r[ye]=++tt,++xe;if(V%2!==0&&V-J<=se&&se<=V+J&&c[ye-V]<=r[ye])return b(c[ye-V],se+A-B,O,L)}for(se=V-J;se<=V+J;se+=2){for(ye=se+X-V,se===V-J||se!==V+J&&c[ye+1]<=c[ye-1]?c[ye]=c[ye+1]-1:c[ye]=c[ye-1],tt=c[ye]-1,xe=tt-A+B-se;tt>=A&&xe>=B&&e[tt]===n[xe];)c[ye]=tt--,xe--;if(V%2===0&&-J<=se&&se<=J&&c[ye]<=r[ye+V])return b(c[ye],se+A-B,O,L)}}return null},x=[];return f(0,e.length,0,n.length,x),x},bB=e=>We(e)?e.outerHTML:_e(e)?Ol.encodeRaw(e.data,!1):Ha(e)?"<!--"+e.data+"-->":"",I8=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},fx=(e,n,o)=>{const r=I8(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},L8=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},W4=(e,n)=>{let o=0;be(e,r=>{r[0]===Vs?o++:r[0]===z4?(fx(n,r[1],o),o++):r[0]===U4&&L8(n,o)})},H8=e=>ft(Ft(kr(e.childNodes),bB),n=>n.length>0),vB=(e,n)=>{const o=Ft(kr(n.childNodes),bB);return W4(pB(o,e),n),n},yB=pd(()=>document.implementation.createHTMLDocument("undo")),Z4=e=>e.indexOf("</iframe>")!==-1,CB=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),j4=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),gx=e=>{const n=H8(e.getBody()),o=Pi(n,c=>{const u=$D(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return Z4(r)?CB(o):j4(r)},G4=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?vB(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ce(r)&&K1(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},q4=e=>e.type==="fragmented"?e.fragments.join(""):e.content,Jc=e=>{const n=W.fromTag("body",yB());return Gt(n,q4(e)),be(Ys(n,"*[data-mce-bogus]"),fi),Fv(n)},V8=(e,n)=>q4(e)===q4(n),z8=(e,n)=>Jc(e)===Jc(n),K4=(e,n)=>!e||!n?!1:V8(e,n)?!0:z8(e,n),Y4=e=>e.get()===0,hx=(e,n,o)=>{Y4(o)&&(e.typing=n)},X4=(e,n)=>{e.typing&&(hx(e,!1,n),e.add())},U8=e=>{e.typing&&(e.typing=!1,e.add())},W8=(e,n,o)=>{Y4(n)&&o.set(br(e.selection))},Z8=(e,n,o,r,c,u,f)=>{const b=gx(e),y=Te.extend(u||{},b);if(!Y4(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&K4(x,y))return null;n.data[o.get()]&&c.get().each(B=>{n.data[o.get()].beforeBookmark=B});const A=bk(e);if(A&&n.data.length>A){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}y.bookmark=br(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const O={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",O),e.dispatch("change",O)):e.dispatch("AddUndo",O),y},px=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},j8=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];G4(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},G8=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],G4(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},wB=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,hx(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],G4(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},J4=e=>{e.clear(),e.add()},q8=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!K4(gx(e),n.data[0]),K8=(e,n)=>n.get()<e.data.length-1&&!e.typing,hZ=(e,n,o)=>(X4(e,n),e.beforeChange(),e.ignore(o),e.add()),Y8=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},X8=(e,n)=>{const o=e.dom,r=Ce(n)?n:e.getBody();be(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=Gd(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=ah(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Q4=e=>({init:{bindEvents:pt},undoManager:{beforeChange:(n,o)=>W8(e,n,o),add:(n,o,r,c,u,f)=>Z8(e,n,o,r,c,u,f),undo:(n,o,r)=>wB(e,n,o,r),redo:(n,o)=>G8(e,n,o),clear:(n,o)=>px(e,n,o),reset:n=>J4(n),hasUndo:(n,o)=>q8(e,n,o),hasRedo:(n,o)=>K8(n,o),transact:(n,o,r)=>hZ(n,o,r),ignore:(n,o)=>Y8(n,o),extra:(n,o,r,c)=>j8(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>XS(e,n,o,r,c),matchAll:(n,o)=>Yy(e,n,o),matchNode:(n,o,r,c)=>Kl(e,n,o,r,c),canApply:n=>PI(e,n),closest:n=>NI(e,n),apply:(n,o,r)=>TM(e,n,o,r),remove:(n,o,r,c)=>Bb(e,n,o,r,c),toggle:(n,o,r)=>Kf(e,n,o,r),formatChanged:(n,o,r,c,u)=>ox(e,n,o,r,c,u)},editor:{getContent:n=>HD(e,n),setContent:(n,o)=>RI(e,n,o),insertContent:(n,o)=>s4(e,n,o),addVisual:n=>X8(e,n)},selection:{getContent:(n,o)=>gZ(e,n,o)},autocompleter:{addDecoration:n=>EF(e,n),removeDecoration:()=>kF(e,W.fromDom(e.getBody()))},raw:{getModel:()=>N.none()}}),J8=e=>{const n=x=>Sn(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,A,O)=>r.transact(O),ignore:(x,A)=>r.ignore(A),extra:(x,A,O,B)=>r.extra(O,B)},formatter:{match:(x,A,O,B)=>c.match(x,n(A),B),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,A,O)=>c.apply(x,n(A)),remove:(x,A,O,B)=>c.remove(x,n(A)),toggle:(x,A,O)=>c.toggle(x,n(A)),formatChanged:(x,A,O,B,L)=>c.formatChanged(A,O,B,L)},editor:{getContent:x=>u.getContent(x),setContent:(x,A)=>({content:u.setContent(x,A),html:""}),insertContent:(x,A)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,A)=>f.getContent(A)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>N.some(y.getRawModel())}}},Gh=()=>{const e=Le(null),n=Le("");return{init:{bindEvents:pt},undoManager:{beforeChange:pt,add:e,undo:e,redo:e,clear:pt,reset:pt,hasUndo:we,hasRedo:we,transact:e,ignore:pt,extra:pt},formatter:{match:we,matchAll:Le([]),matchNode:Le(void 0),canApply:we,closest:n,apply:pt,remove:pt,toggle:pt,formatChanged:Le({unbind:pt})},editor:{getContent:n,setContent:Le({content:"",html:""}),insertContent:Le(""),addVisual:pt},selection:{getContent:n},autocompleter:{addDecoration:pt,removeDecoration:pt},raw:{getModel:Le(N.none())}}},kc=e=>kt(e.plugins,"rtc"),u2=e=>to(e.plugins,"rtc").bind(n=>N.from(n.setup)),SB=e=>{const n=e;return u2(e).fold(()=>(n.rtcInstance=Q4(e),N.none()),o=>(n.rtcInstance=Gh(),N.some(()=>o().then(r=>(n.rtcInstance=J8(r),r.rtc.isRemote)))))},bx=e=>e.rtcInstance?e.rtcInstance:Q4(e),bs=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},xB=(e,n,o)=>{bs(e).undoManager.beforeChange(n,o)},Q8=(e,n,o,r,c,u,f)=>bs(e).undoManager.add(n,o,r,c,u,f),e7=(e,n,o,r)=>bs(e).undoManager.undo(n,o,r),t7=(e,n,o)=>bs(e).undoManager.redo(n,o),n7=(e,n,o)=>{bs(e).undoManager.clear(n,o)},EB=(e,n)=>{bs(e).undoManager.reset(n)},o7=(e,n,o)=>bs(e).undoManager.hasUndo(n,o),s7=(e,n,o)=>bs(e).undoManager.hasRedo(n,o),d2=(e,n,o,r)=>bs(e).undoManager.transact(n,o,r),TB=(e,n,o)=>{bs(e).undoManager.ignore(n,o)},kB=(e,n,o,r,c)=>{bs(e).undoManager.extra(n,o,r,c)},r7=(e,n,o,r,c)=>bs(e).formatter.match(n,o,r,c),a7=(e,n,o)=>bs(e).formatter.matchAll(n,o),c7=(e,n,o,r,c)=>bs(e).formatter.matchNode(n,o,r,c),_B=(e,n)=>bs(e).formatter.canApply(n),i7=(e,n)=>bs(e).formatter.closest(n),l7=(e,n,o,r)=>{bs(e).formatter.apply(n,o,r)},u7=(e,n,o,r,c)=>{bs(e).formatter.remove(n,o,r,c)},d7=(e,n,o,r)=>{bs(e).formatter.toggle(n,o,r)},pZ=(e,n,o,r,c,u)=>bs(e).formatter.formatChanged(n,o,r,c,u),Ql=(e,n)=>bx(e).editor.getContent(n),e3=(e,n,o)=>bx(e).editor.setContent(n,o),m7=(e,n,o)=>bx(e).editor.insertContent(n,o),f7=(e,n,o)=>bs(e).selection.getContent(n,o),g7=(e,n)=>bs(e).editor.addVisual(n),OB=e=>bs(e).init.bindEvents(),Cn=(e,n)=>bs(e).autocompleter.addDecoration(n),bZ=e=>bs(e).autocompleter.removeDecoration(),h7=(e,n={})=>{const o=n.format?n.format:"html";return f7(e,o,n)},AB=e=>e.dom.length===0?(Tn(e),N.none()):N.some(e),So=(e,n)=>e.filter(o=>cm.isBookmarkNode(o.dom)).bind(n?Um:Fc),p7=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(P_(c,u,!1,!r),o.setStart(u,f)):(P_(u,c,!1,!r),o.setEnd(u,f))},m2=(e,n)=>{Fa(e).each(o=>{const r=e.dom;n&&$y(o,ie(r,0))?BS(r,0):!n&&Nh(o,ie(r,r.length))&&hm(r,r.length)})},DB=(e,n,o,r)=>{e.bind(c=>((r?hm:BS)(c.dom,r?c.dom.length:0),n.filter(Ar).map(f=>p7(c,f,o,r)))).orThunk(()=>So(n,r).or(n).filter(Ar).map(u=>m2(u,r)))},b7=(e,n)=>{const o=N.from(n.firstChild).map(W.fromDom),r=N.from(n.lastChild).map(W.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Fc).filter(Ar).bind(AB),u=r.bind(Um).filter(Ar).bind(AB);DB(c,o,e,!0),DB(u,r,e,!1),e.collapse(!1)},v7=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),RB=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Zf({validate:!1},e.schema).serialize(u)}else return n.content},Jf=(e,n,o={})=>{const r=v7(o,n);L4(e,r).each(c=>{const u=RB(e,c),f=e.selection.getRng();b7(f,f.createContextualFragment(u)),e.selection.setRng(f),Oi(e,f),H4(e,u,c)})},Ja=(e,n,o)=>{if(kt(e,n)){const r=ft(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var f2=(e,n)=>{let o,r;const c=(b,y)=>Ho(y,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,x=u(y),A={};Ze(o,(O,B)=>{c(B,x).each(L=>{r[B]||(be(O,z=>{z(!0,{node:L,selector:B,parents:x})}),r[B]=O),A[B]=O})}),Ze(r,(O,B)=>{A[B]||(delete r[B],be(O,L=>{L(!1,{node:y,selector:B,parents:x})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{Ja(o,b,y),Ja(r,b,y)}})}};const Sm=e=>!!(e&&e.ownerDocument)&&mi(W.fromDom(e.ownerDocument),W.fromDom(e)),td=e=>e?Sm(e.startContainer)&&Sm(e.endContainer):!1,Ub=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=f2(e,r),b=(Me,Je)=>{const un=e.createRng();Ce(Me)&&Ce(Je)?(un.setStart(Me,Je),un.setEnd(Me,Je),se(un),q(!1)):(tb(e,un,r.getBody(),!0),se(un))},y=Me=>h7(r,Me),x=(Me,Je)=>Jf(r,Me,Je),A=Me=>kD(r.getBody(),J(),Me),O=Me=>_D(r.getBody(),J(),Me),B=(Me,Je)=>wr.getBookmark(Me,Je),L=Me=>wr.moveToBookmark(Me),z=(Me,Je)=>(vF(e,Me,Je).each(se),Me),F=()=>{const Me=J(),Je=X();return!Me||Me.item?!1:Me.compareEndPoints?Me.compareEndPoints("StartToEnd",Me)===0:!Je||Me.collapsed},V=()=>{const Me=J(),Je=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Je.length>0?Ws(Je,un=>e.isEditable(un.parentElement)):Me.startContainer===Me.endContainer?e.isEditable(Me.startContainer):e.isEditable(Me.startContainer)&&e.isEditable(Me.endContainer)},q=Me=>{const Je=J();Je.collapse(!!Me),se(Je)},X=()=>n.getSelection?n.getSelection():n.document.selection,J=()=>{let Me;const Je=(tn,nt,rt)=>{try{return nt.compareBoundaryPoints(tn,rt)}catch{return-1}},un=n.document;if(Ce(r.bookmark)&&!Bh(r)){const tn=vb(r);if(tn.isSome())return tn.map(nt=>E_(r,[nt])[0]).getOr(un.createRange())}try{const tn=X();tn&&!lt(tn.anchorNode)&&(tn.rangeCount>0?Me=tn.getRangeAt(0):Me=un.createRange(),Me=E_(r,[Me])[0])}catch{}if(Me||(Me=un.createRange()),Gm(Me.startContainer)&&Me.collapsed){const tn=e.getRoot();Me.setStart(tn,0),Me.setEnd(tn,0)}return c&&u&&(Je(Me.START_TO_START,Me,c)===0&&Je(Me.END_TO_END,Me,c)===0?Me=u:(c=null,u=null)),Me},se=(Me,Je)=>{if(!td(Me))return;const un=X();if(Me=r.dispatch("SetSelectionRange",{range:Me,forward:Je}).range,un){u=Me;try{un.removeAllRanges(),un.addRange(Me)}catch{}Je===!1&&un.extend&&(un.collapse(Me.endContainer,Me.endOffset),un.extend(Me.startContainer,Me.startOffset)),c=un.rangeCount>0?un.getRangeAt(0):null}if(!Me.collapsed&&Me.startContainer===Me.endContainer&&(un!=null&&un.setBaseAndExtent)&&Me.endOffset-Me.startOffset<2&&Me.startContainer.hasChildNodes()){const nt=Me.startContainer.childNodes[Me.startOffset];nt&&nt.nodeName==="IMG"&&(un.setBaseAndExtent(Me.startContainer,Me.startOffset,Me.endContainer,Me.endOffset),(un.anchorNode!==Me.startContainer||un.focusNode!==Me.endContainer)&&un.setBaseAndExtent(nt,0,nt,1))}r.dispatch("AfterSetSelectionRange",{range:Me,forward:Je})},ye=Me=>(x(e.getOuterHTML(Me)),Me),tt=()=>OD(r.getBody(),J()),xe=(Me,Je)=>AD(e,J(),Me,Je),le=()=>{const Me=X(),Je=Me==null?void 0:Me.anchorNode,un=Me==null?void 0:Me.focusNode;if(!Me||!Je||!un||lt(Je)||lt(un))return!0;const tn=e.createRng(),nt=e.createRng();try{tn.setStart(Je,Me.anchorOffset),tn.collapse(!0),nt.setStart(un,Me.focusOffset),nt.collapse(!0)}catch{return!0}return tn.compareBoundaryPoints(tn.START_TO_START,nt)<=0},Mn={dom:e,win:n,serializer:o,editor:r,expand:(Me={type:"word"})=>se(Wt(e).expand(J(),Me)),collapse:q,setCursorLocation:b,getContent:y,setContent:x,getBookmark:B,moveToBookmark:L,select:z,isCollapsed:F,isEditable:V,isForward:le,setNode:ye,getNode:tt,getSel:X,setRng:se,getRng:J,getStart:A,getEnd:O,getSelectedBlocks:xe,normalize:()=>{const Me=J(),Je=X();if(!sy(Je)&&sm(r)){const un=Gl(e,Me);return un.each(tn=>{se(tn,le())}),un.getOr(Me)}return Me},selectorChanged:(Me,Je)=>(f(Me,Je),Mn),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Me,Je=e.getRoot();for(;Je&&Je.nodeName!=="BODY";){if(Je.scrollHeight>Je.clientHeight){Me=Je;break}Je=Je.parentNode}return Me},scrollIntoView:(Me,Je)=>{Ce(Me)?ka(r,Me,Je):Oi(r,J(),Je)},placeCaretAt:(Me,Je)=>se(sa(Me,Je,r.getDoc())),getBoundingClientRect:()=>{const Me=J();return Me.collapsed?ie.fromRangeStart(Me).getClientRects()[0]:Me.getBoundingClientRect()},destroy:()=>{n=c=u=null,ks.destroy()}},wr=cm(Mn),ks=uS(Mn,r);return Mn.bookmarkManager=wr,Mn.controlSelection=ks,Mn},t3=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let A=x.attr(u);A!==void 0?(x.attr(c,A.length>0?A:null),x.attr(u,null)):(A=x.attr(c),c==="style"?A=o.serializeStyle(o.parseStyle(A),x.name):f&&(A=f.call(b,A,c,x.name)),x.attr(c,A.length>0?A:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(N.from(b.firstChild).exists(x=>{var A;return!Yp((A=x.value)!==null&&A!==void 0?A:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Ol.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],x=y.firstChild,A=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const O=y.attr("type");O&&y.attr("type",O==="mce-no/type"?null:O.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&A.length>0&&(x.value=`// <![CDATA[
`+f(A)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&A.length>0&&(x.value=`<!--
`+f(A)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{be(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&sx(n,e,e.schema)},n3=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},MB=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Te.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return o_(e,{...o,node:u}),r&&(c.doc=r),u},BB=(e,n)=>Ce(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,y7=(e,n,o)=>BB(e,o)?MB(e,n,o):n,C7=(e,n,o)=>{Te.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},NB=(e,n,o)=>!n.no_events&&e?gy(e,{...n,content:o}).content:o,PB=(e,n,o)=>{const r=xl(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Kp(W.fromDom(n))?r:Te.trim(r)},$B=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return n3(c),c},FB=(e,n,o)=>Zf(e,n).serialize(o),o3=(e,n,o,r,c)=>{const u=FB(n,o,r);return NB(e,c,u)},vZ=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:Dn.DOM,u=n&&n.schema?n.schema:yi(r),f=Vb(r,u);t3(f,r,c);const b=(y,x={})=>{const A={format:"html",...x},O=y7(n,y,A),B=PB(c,O,A),L=$B(f,B,A);return A.format==="tree"?L:o3(n,r,u,L,A)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ee(C7,f,o),getTempAttrs:Le(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},IB=(e,n)=>{const o=vZ(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},yZ="html",w7=(e,n)=>({...e,format:n,get:!0,getInner:!0}),S7=(e,n={})=>{const o=n.format?n.format:yZ,r=w7(n,o);return l2(e,r).fold(Eo,c=>{const u=Ql(e,c);return uB(e,u,c)})},nd="html",CZ=(e,n)=>({format:nd,...e,set:!0,content:n}),LB=(e,n,o={})=>{const r=CZ(o,n);return L4(e,r).map(c=>{const u=e3(e,c.content,c);return H4(e,u.html,c),u.content}).getOr(n)},x7="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),g2="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),E7="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),s3=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],r3=(e,n)=>{const o=ft(n,r=>kt(e,r));return vo(o)},HB=e=>{const n=r3(e,x7),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),vo(n)},T7=e=>r3(e,g2),VB=(e,n)=>{const o=Te.makeMap(e.plugins," "),c=ft(n,u=>kt(o,u));return vo(c)},Qf=e=>VB(e,E7),k7=e=>VB(e,s3.map(n=>n.name)),_7=(e,n)=>{const o=HB(e),r=Qf(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",x=c?`

Plugins:${b}${r.join(b)}`:"",A=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+x+A)}},O7=e=>Ho(s3,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),A7=(e,n)=>{const o=T7(e),r=k7(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(O7).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},D7=(e,n)=>{_7(e,n),A7(e,n)},vx=Dn.DOM,R7=e=>{vx.setStyle(e.id,"display",e.orgDisplay)},yx=e=>N.from(e).each(n=>n.destroy()),M7=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},B7=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),vx.unbind(n,"submit reset",e.formEventDelegate))},N7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ce(c==null?void 0:c.nextSibling)&&vx.remove(c.nextSibling),hy(e),e.editorManager.remove(e),!e.inline&&r&&R7(e),Rn(e),vx.remove(e.getContainer()),yx(n),yx(o),e.destroy()}},wZ=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),yx(o),yx(r)),B7(e),M7(e),e.destroyed=!0}},wx=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>kt(e,c)}})(),eg=mn.ModelManager,zB=(e,n)=>n.dom[e],UB=(e,n)=>parseInt(Os(n,e),10),P7=Ee(zB,"clientWidth"),$7=Ee(zB,"clientHeight"),qh=Ee(UB,"margin-top"),Kh=Ee(UB,"margin-left"),Sx=e=>e.dom.getBoundingClientRect(),xx=(e,n,o)=>{const r=P7(e),c=$7(e);return n>=0&&o>=0&&n<=r&&o<=c},Yh=(e,n,o,r)=>{const c=Sx(n),u=e?c.left+n.dom.clientLeft+Kh(n):0,f=e?c.top+n.dom.clientTop+qh(n):0,b=o-u,y=r-f;return{x:b,y}},Xh=(e,n,o)=>{const r=W.fromDom(e.getBody()),c=e.inline?r:yC(r),u=Yh(e.inline,c,n,o);return xx(c,u.x,u.y)},Ex=e=>N.from(e).map(W.fromDom),Tx=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return Ex(n).map(kd).getOr(!1)};var WB=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const kx=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():WB()},r=()=>N.from(n[0]),c=(B,L)=>B.type===L.type&&B.text===L.text&&!B.progressBar&&!B.timeout&&!L.progressBar&&!L.timeout,u=()=>{be(n,B=>{B.reposition()})},f=B=>{n.push(B)},b=B=>{ia(n,L=>L===B).each(L=>{n.splice(L,1)})},y=(B,L=!0)=>e.removed||!Tx(e)?{}:(L&&e.dispatch("BeforeOpenNotification",{notification:B}),Ho(n,z=>c(o().getArgs(z),B)).getOrThunk(()=>{e.editorManager.setActive(e);const z=o().open(B,()=>{b(z),u(),r().fold(()=>e.focus(),F=>Rh(W.fromDom(F.getEl())))});return f(z),u(),e.dispatch("OpenNotification",{notification:{...z}}),z})),x=()=>{r().each(B=>{o().close(B),b(B),u()})},A=Le(n);return(B=>{B.on("SkinLoaded",()=>{const L=yw(B);L&&y({text:L,type:"warning",timeout:0},!1),u()}),B.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),B.on("remove",()=>{be(n.slice(),L=>{o().close(L)})})})(e),{open:y,close:x,getNotifications:A}},tg=mn.PluginManager,ng=mn.ThemeManager;var ZB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const Jh=e=>{let n=[];const o=()=>{const F=e.theme;return F&&F.getWindowManagerImpl?F.getWindowManagerImpl():ZB()},r=(F,V)=>(...q)=>V?V.apply(F,q):void 0,c=F=>{e.dispatch("OpenWindow",{dialog:F})},u=F=>{e.dispatch("CloseWindow",{dialog:F})},f=F=>{n.push(F),c(F)},b=F=>{u(F),n=ft(n,V=>V!==F),n.length===0&&e.focus()},y=()=>N.from(n[n.length-1]),x=F=>{e.editorManager.setActive(e),Ay(e),e.ui.show();const V=F();return f(V),V},A=(F,V)=>x(()=>o().open(F,V,b)),O=F=>x(()=>o().openUrl(F,b)),B=(F,V,q)=>{const X=o();X.alert(F,r(q||X,V))},L=(F,V,q)=>{const X=o();X.confirm(F,r(q||X,V))},z=()=>{y().each(F=>{o().close(F),b(F)})};return e.on("remove",()=>{be(n,F=>{o().close(F)})}),{open:A,openUrl:O,alert:B,confirm:L,close:z}},a3=(e,n)=>{e.notificationManager.open({type:"error",text:n})},h2=(e,n)=>{e._skinLoaded?a3(e,n):e.on("SkinLoaded",()=>{a3(e,n)})},jB=(e,n)=>{h2(e,Ci.translate(["Failed to upload image: {0}",n]))},og=(e,n,o)=>{vy(e,n,{message:o}),console.error(o)},Wb=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,GB=(e,n,o)=>{og(e,"PluginLoadError",Wb("plugin",n,o))},qB=(e,n,o)=>{og(e,"IconsLoadError",Wb("icons",n,o))},KB=(e,n,o)=>{og(e,"LanguageLoadError",Wb("language",n,o))},xm=(e,n,o)=>{og(e,"ThemeLoadError",Wb("theme",n,o))},sg=(e,n,o)=>{og(e,"ModelLoadError",Wb("model",n,o))},al=(e,n,o)=>{const r=Ci.translate(["Failed to initialize plugin: {0}",n]);vy(e,"PluginLoadError",{message:r}),_x(r,o),h2(e,r)},_x=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},F7=e=>/^[a-z0-9\-]+$/i.test(e),I7=e=>YB(e,bw(e)),L7=e=>YB(e,nh(e)),YB=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Ft(n,u=>F7(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},H7=e=>{e.contentCSS=e.contentCSS.concat(I7(e),L7(e))},V7=e=>e?kr(e.getElementsByTagName("img")):[],z7=(e,n)=>{const o={};return{findAll:(c,u=qe)=>{const f=ft(V7(c),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===gn.transparentSrc?!1:_s(x,"blob:")?!e.isUploaded(x)&&u(y):_s(x,"data:")?u(y):!1}),b=Ft(f,y=>{const x=y.src;if(kt(o,x))return o[x].then(A=>K(A)?A:{image:y,blobInfo:A.blobInfo});{const A=t2(n,x).then(O=>(delete o[x],{image:y,blobInfo:O})).catch(O=>(delete o[x],O));return o[x]=A,A}});return Promise.all(b)}}},XB=()=>{let o={};const r=(B,L)=>({status:B,resultUri:L}),c=B=>B in o;return{hasBlobUri:c,getResultUri:B=>{const L=o[B];return L?L.resultUri:null},isPending:B=>c(B)?o[B].status===1:!1,isUploaded:B=>c(B)?o[B].status===2:!1,markPending:B=>{o[B]=r(1,null)},markUploaded:(B,L)=>{o[B]=r(2,L)},removeFailed:B=>{delete o[B]},destroy:()=>{o={}}}};let U7=0;const W7=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Z7=e=>e+U7+++W7(),c3=()=>{let e=[];const n=O=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[O.toLowerCase()]||"dat",o=(O,B,L,z,F)=>{if(K(O))return r({id:O,name:z,filename:F,blob:B,base64:L});if(Sn(O))return r(O);throw new Error("Unknown input type")},r=O=>{if(!O.blob||!O.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=O.id||Z7("blobid"),L=O.name||B,z=O.blob;return{id:Le(B),name:Le(L),filename:Le(O.filename||L+"."+n(z.type)),blob:Le(z),base64:Le(O.base64),blobUri:Le(O.blobUri||URL.createObjectURL(z)),uri:Le(O.uri)}},c=O=>{f(O.id())||e.push(O)},u=O=>Ho(e,O).getOrUndefined(),f=O=>u(B=>B.id()===O);return{create:o,add:c,get:f,getByUri:O=>u(B=>B.blobUri()===O),getByData:(O,B)=>u(L=>L.base64()===O&&L.blob().type===B),findFirst:u,removeByUri:O=>{e=ft(e,B=>B.blobUri()===O?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:()=>{be(e,O=>{URL.revokeObjectURL(O.blobUri())}),e=[]}}},i3=(e,n)=>{const o={},r=(F,V)=>F?F.replace(/\/$/,"")+"/"+V.replace(/^\//,""):V,c=(F,V)=>new Promise((q,X)=>{const J=new XMLHttpRequest;J.open("POST",n.url),J.withCredentials=n.credentials,J.upload.onprogress=ye=>{V(ye.loaded/ye.total*100)},J.onerror=()=>{X("Image upload failed due to a XHR Transport error. Code: "+J.status)},J.onload=()=>{if(J.status<200||J.status>=300){X("HTTP Error: "+J.status);return}const ye=JSON.parse(J.responseText);if(!ye||!K(ye.location)){X("Invalid JSON: "+J.responseText);return}q(r(n.basePath,ye.location))};const se=new FormData;se.append("file",F.blob(),F.filename()),J.send(se)}),u=G(n.handler)?n.handler:c,f=()=>new Promise(F=>{F([])}),b=(F,V)=>({url:V,blobInfo:F,status:!0}),y=(F,V)=>({url:"",blobInfo:F,status:!1,error:V}),x=(F,V)=>{Te.each(o[F],q=>{q(V)}),delete o[F]},A=(F,V,q)=>(e.markPending(F.blobUri()),new Promise(X=>{let J,se;try{const ye=()=>{J&&(J.close(),se=pt)},tt=le=>{ye(),e.markUploaded(F.blobUri(),le),x(F.blobUri(),b(F,le)),X(b(F,le))},xe=le=>{ye(),e.removeFailed(F.blobUri()),x(F.blobUri(),y(F,le)),X(y(F,le))};se=le=>{le<0||le>100||N.from(J).orThunk(()=>N.from(q).map(Lo)).each(fe=>{J=fe,fe.progressBar.value(le)})},V(F,se).then(tt,le=>{xe(K(le)?{message:le}:le)})}catch(ye){X(y(F,ye))}})),O=F=>F===c,B=F=>{const V=F.blobUri();return new Promise(q=>{o[V]=o[V]||[],o[V].push(q)})},L=(F,V)=>(F=Te.grep(F,q=>!e.isUploaded(q.blobUri())),Promise.all(Te.map(F,q=>e.isPending(q.blobUri())?B(q):A(q,u,V))));return{upload:(F,V)=>!n.url&&O(u)?f():L(F,V)}},l3=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),JB=(e,n)=>i3(n,{url:B0(e),basePath:ok(e),credentials:hw(e),handler:sk(e)}),j7=e=>{const n=XB(),o=JB(e,n);return{upload:(r,c=!0)=>o.upload(r,c?l3(e):void 0)}},QB=(e,n)=>e.dom.isEmpty(n.dom)&&Ce(e.schema.getTextBlockElements()[oo(n)]),e5=e=>n=>{QB(e,n)&&Yo(n,W.fromHtml('<br data-mce-bogus="1" />'))},u3=e=>{const n=c3();let o,r;const c=XB(),u=[],f=J=>se=>e.selection?J(se):[],b=J=>J+(J.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(J,se,ye)=>{let tt=0;do tt=J.indexOf(se,tt),tt!==-1&&(J=J.substring(0,tt)+ye+J.substr(tt+se.length),tt+=ye.length-se.length+1);while(tt!==-1);return J},x=(J,se,ye)=>{const tt=`src="${ye}"${ye===gn.transparentSrc?' data-mce-placeholder="1"':""}`;return J=y(J,`src="${se}"`,tt),J=y(J,'data-mce-src="'+se+'"','data-mce-src="'+ye+'"'),J},A=(J,se)=>{be(e.undoManager.data,ye=>{ye.type==="fragmented"?ye.fragments=Ft(ye.fragments,tt=>x(tt,J,se)):ye.content=x(ye.content,J,se)})},O=(J,se)=>{const ye=e.convertURL(se,"src");A(J.src,se),qr(W.fromDom(J),{src:D0(e)?b(se):se,"data-mce-src":ye})},B=()=>(o||(o=JB(e,c)),V().then(f(J=>{const se=Ft(J,ye=>ye.blobInfo);return o.upload(se,l3(e)).then(f(ye=>{const tt=[];let xe=!1;const le=Ft(ye,(fe,Pe)=>{const{blobInfo:Ie,image:Ye}=J[Pe];let vt=!1;return fe.status&&R0(e)?(fe.url&&!Zs(Ye.src,fe.url)&&(xe=!0),n.removeByUri(Ye.src),kc(e)||O(Ye,fe.url)):fe.error&&(fe.error.remove&&(A(Ye.src,gn.transparentSrc),tt.push(Ye),vt=!0),jB(e,fe.error.message)),{element:Ye,status:fe.status,uploadUri:fe.url,blobInfo:Ie,removed:vt}});return tt.length>0&&!kc(e)?e.undoManager.transact(()=>{be(zp(tt),fe=>{const Pe=Fa(fe);Tn(fe),Pe.each(e5(e)),n.removeByUri(fe.dom.src)})}):xe&&e.undoManager.dispatchChange(),le}))}))),L=()=>fw(e)?B():Promise.resolve([]),z=J=>Ws(u,se=>se(J)),F=J=>{u.push(J)},V=()=>(r||(r=z7(c,n)),r.findAll(e.getBody(),z).then(f(J=>{const se=ft(J,ye=>K(ye)?(h2(e,ye),!1):ye.uriType!=="blob");return kc(e)||be(se,ye=>{A(ye.image.src,ye.blobInfo.blobUri()),ye.image.src=ye.blobInfo.blobUri(),ye.image.removeAttribute("data-mce-src")}),se}))),q=()=>{n.destroy(),c.destroy(),r=o=null},X=J=>J.replace(/src="(blob:[^"]+)"/g,(se,ye)=>{const tt=c.getResultUri(ye);if(tt)return'src="'+tt+'"';let xe=n.getByUri(ye);return xe||(xe=Ro(e.editorManager.get(),(le,fe)=>le||fe.editorUpload&&fe.editorUpload.blobCache.getByUri(ye),void 0)),xe?'src="data:'+xe.blob().type+";base64,"+xe.base64()+'"':se});return e.on("SetContent",()=>{fw(e)?L():V()}),e.on("RawSaveContent",J=>{J.content=X(J.content)}),e.on("GetContent",J=>{J.source_view||J.format==="raw"||J.format==="tree"||(J.content=X(J.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",J=>{be(J,se=>{const ye=se.attr("src");if(!ye||n.getByUri(ye))return;const tt=c.getResultUri(ye);tt&&se.attr("src",tt)})})}),{blobCache:n,addFilter:F,uploadImages:B,uploadImagesAuto:L,scanForImages:V,destroy:q}},t5=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>We(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Te.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Te.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},d3={remove_similar:!0,inherit:!1},rg={selector:"td,th",...d3},G7={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...rg},tablecellverticalalign:{styles:{"vertical-align":"%value"},...rg},tablecellbordercolor:{styles:{borderColor:"%value"},...rg},tablecellclass:{classes:["%value"],...rg},tableclass:{selector:"table",classes:["%value"],...d3},tablecellborderstyle:{styles:{borderStyle:"%value"},...rg},tablecellborderwidth:{styles:{borderWidth:"%value"},...rg}},q7=Le(G7),od=e=>{const n={},o=f=>Ce(f)?n[f]:n,r=f=>kt(n,f),c=(f,b)=>{f&&(K(f)?(On(b)||(b=[b]),be(b,y=>{Ns(y.deep)&&(y.deep=!Ga(y)),Ns(y.split)&&(y.split=!Ga(y)||hs(y)),Ns(y.remove)&&Ga(y)&&!hs(y)&&(y.remove="none"),Ga(y)&&hs(y)&&(y.mixed=!0,y.block_expand=!0),K(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):Ze(f,(y,x)=>{c(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(t5(e)),c(q7()),c(sh(e)),{get:o,has:r,register:c,unregister:u}},_c=Te.each,Qa=Dn.DOM,Ox=e=>Ce(e)&&Sn(e),p2=(e,n)=>{const o=n&&n.schema||yi({}),r=(y,x)=>{x.classes.length>0&&Qa.addClass(y,x.classes.join(" ")),Qa.setAttribs(y,x.attrs)},c=y=>{const x=K(y)?{name:y,classes:[],attrs:{}}:y,A=Qa.create(x.name);return r(A,x),A},u=(y,x)=>{const A=o.getElementRule(y.nodeName.toLowerCase()),O=A==null?void 0:A.parentsRequired;return O&&O.length?x&&Bt(O,x)?x:O[0]:!1},f=(y,x,A)=>{let O;const B=x[0],L=Ox(B)?B.name:void 0,z=u(y,L);if(z)L===z?(O=B,x=x.slice(1)):O=z;else if(B)O=B,x=x.slice(1);else if(!A)return y;const F=O?c(O):Qa.create("div");F.appendChild(y),A&&Te.each(A,q=>{const X=c(q);F.insertBefore(X,y)});const V=Ox(O)?O.siblings:void 0;return f(F,x,V)},b=Qa.create("div");if(e.length>0){const y=e[0],x=c(y),A=Ox(y)?y.siblings:void 0;b.appendChild(f(x,e.slice(1),A))}return b},n5=e=>{e=Te.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Te.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},o5=e=>K(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Te.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Te.map(n.split(/(?:~\+|~|\+)/),n5),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],s5=(e,n)=>{let o="",r=xs(e);if(r==="")return"";const c=B=>K(B)?B.replace(/%(\w+)/g,""):"",u=(B,L)=>Qa.getStyle(L??e.getBody(),B,!0);if(K(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let f=n.block||n.inline||"span",b;const y=o5(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=p2(y,e)):b=p2([f],e);const x=Qa.select(f,b)[0]||b.firstChild;_c(n.styles,(B,L)=>{const z=c(B);z&&Qa.setStyle(x,L,z)}),_c(n.attributes,(B,L)=>{const z=c(B);z&&Qa.setAttrib(x,L,z)}),_c(n.classes,B=>{const L=c(B);Qa.hasClass(x,L)||Qa.addClass(x,L)}),e.dispatch("PreviewFormats"),Qa.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const A=u("fontSize"),O=/px$/.test(A)?parseInt(A,10):0;return _c(r.split(" "),B=>{let L=u(B,x);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(L)&&(L=u(B),om(L).toLowerCase()==="#ffffff"))&&!(B==="color"&&om(L).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(L)){if(O===0)return;L=parseFloat(L)/(/%$/.test(L)?100:1)*O+"px"}B==="border"&&L&&(o+="padding:0 2px;"),o+=B+":"+L+";"}}),e.dispatch("AfterPreviewFormats"),Qa.remove(b),o},r5=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},m3=e=>{const n=od(e),o=us({});return r5(e),m4(e),kc(e)||kM(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{l7(e,r,c,u)},remove:(r,c,u,f)=>{u7(e,r,c,u,f)},toggle:(r,c,u)=>{d7(e,r,c,u)},match:(r,c,u,f)=>r7(e,r,c,u,f),closest:r=>i7(e,r),matchAll:(r,c)=>a7(e,r,c),matchNode:(r,c,u,f)=>c7(e,r,c,u,f),canApply:r=>_B(e,r),formatChanged:(r,c,u,f)=>pZ(e,o,r,c,u,f),getCssText:Ee(s5,e)}},f3=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Ax=(e,n,o)=>{const r=us(!1),c=y=>{hx(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;f3(x)||(X4(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;f3(x)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;const A=gn.os.isMacOS()&&y.key==="Meta";(x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey||A)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!K4(gx(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(y);return}const A=y.ctrlKey&&!y.altKey||y.metaKey;if((x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!A){n.beforeChange(),hx(n,!0,o),n.add({},y),r.set(!0);return}(gn.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},g3=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},a5=e=>{const n=Ds(),o=us(0),r=us(0),c={data:[],typing:!1,beforeChange:()=>{xB(e,o,n)},add:(u,f)=>Q8(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=gx(e);u.bookmark=br(e.selection),e.dispatch("change",{level:u,lastLevel:Eg(c.data,r.get()).getOrUndefined()})},undo:()=>e7(e,c,o,r),redo:()=>t7(e,r,c.data),clear:()=>{n7(e,c,r)},reset:()=>{EB(e,c)},hasUndo:()=>o7(e,c,r),hasRedo:()=>s7(e,c,r),transact:u=>d2(e,c,o,u),ignore:u=>{TB(e,o,u)},extra:(u,f)=>{kB(e,c,r,u,f)}};return kc(e)||Ax(e,c,o),g3(e),c},K7=[9,27,Ke.HOME,Ke.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ke.DOWN,Ke.UP,Ke.LEFT,Ke.RIGHT].concat(gn.browser.isFirefox()?[224]:[]),c5="data-mce-placeholder",i5=e=>e.type==="keydown"||e.type==="keyup",h3=e=>{const n=e.keyCode;return n===Ke.BACKSPACE||n===Ke.DELETE},Y7=e=>{if(i5(e)){const n=e.keyCode;return!h3(e)&&(Ke.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Bt(K7,n))}else return!1},X7=e=>i5(e)&&!(h3(e)||e.type==="keyup"&&e.keyCode===229),p3=(e,n,o)=>{if(Jo(W.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},J7=e=>{var n;const o=e.dom,r=wo(e),c=(n=mk(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(Y7(f))return;const y=e.getBody(),x=X7(f)?!1:p3(o,y,r);(o.getAttrib(y,c5)!==""!==x||b)&&(o.setAttrib(y,c5,x?c:null),o.setAttrib(y,"aria-placeholder",x?c:null),by(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};Pn(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Vr.setEditorTimeout(e,()=>u(b)))})},Q7=(e,n)=>({block:e,position:n}),eL=(e,n)=>({from:e,to:n}),b3=(e,n)=>{const o=W.fromDom(e),r=W.fromDom(n.container());return Cb(o,r).map(c=>Q7(c,n))},tL=e=>!En(e.from.block,e.to.block),l5=(e,n)=>ic(n,c=>To(c)||kn(c.dom),c=>En(c,e)).filter(jn).getOr(e),nL=(e,n)=>{const o=W.fromDom(e);return En(l5(o,n.from.block),l5(o,n.to.block))},Dx=e=>vn(e.from.block.dom)===!1&&vn(e.to.block.dom)===!1,v3=e=>{const n=o=>qp(o)||Hg(o.dom);return n(e.from.block)&&n(e.to.block)},oL=(e,n,o)=>co(o.position.getNode())&&!Jo(o.block)?fs(!1,o.block.dom).bind(r=>r.isEqual(o.position)?Wc(n,e,r).bind(c=>b3(e,c)):N.some(o)).getOr(o):o,sL=(e,n,o)=>{const r=b3(e,ie.fromRangeStart(o)),c=r.bind(u=>Wc(n,e,u.position).bind(f=>b3(e,f).map(b=>oL(e,n,b))));return _r(r,c,eL).filter(u=>tL(u)&&nL(e,u)&&Dx(u)&&v3(u))},rL=(e,n,o)=>o.collapsed?sL(e,n,o):N.none(),aL=e=>{const n=Ps(e);return ia(n,Bo).fold(Le(n),o=>n.slice(0,o))},y3=e=>{const n=aL(e);return be(n,Tn),n},u5=(e,n)=>{const o=gm(n,e);return Ho(o.reverse(),r=>Jo(r)).each(Tn)},cL=e=>ft(wC(e),n=>!Jo(n)).length===0,C3=(e,n,o,r)=>{if(Jo(o))return Du(o),gs(o.dom);cL(r)&&Jo(n)&&ba(r,W.fromTag("br"));const c=Ls(o.dom,ie.before(r.dom));return be(y3(n),u=>{ba(r,u)}),u5(e,n),c},iL=(e,n,o)=>{if(Jo(o)){if(Jo(n)){const u=dd((f=>{const b=(y,x)=>Wm(y).fold(()=>x,A=>oe(A)?b(A,x.concat(Iu(A))):x);return b(f,[])})(o),(f,b)=>(kC(f,b),b),ya());Eu(n),Yo(n,u)}return Tn(o),gs(n.dom)}const r=Ta(o.dom);return be(y3(n),c=>{Yo(o,c)}),u5(e,n),r},lL=(e,n)=>{const o=gm(n,e);return N.from(o[o.length-1])},uL=(e,n)=>mi(n,e)?lL(n,e):N.none(),d5=(e,n)=>{fs(e,n.dom).bind(o=>N.from(o.getNode())).map(W.fromDom).filter(Qs).each(Tn)},m5=(e,n,o)=>(d5(!0,n),d5(!1,o),uL(n,o).fold(Ee(iL,e,n,o),Ee(C3,e,n,o))),f5=(e,n,o,r)=>n?m5(e,r,o):m5(e,o,r),w3=(e,n)=>{const o=W.fromDom(e.getBody());return rL(o.dom,n,e.selection.getRng()).map(c=>()=>{f5(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},Rx=(e,n)=>{const o=n.getRng();return _r(Cb(e,W.fromDom(o.startContainer)),Cb(e,W.fromDom(o.endContainer)),(r,c)=>En(r,c)?N.none():N.some(()=>{o.deleteContents(),f5(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(N.none())},b2=(e,n)=>{const o=W.fromDom(n),r=Ee(En,e);return Xn(o,To,r).isSome()},dL=(e,n)=>b2(e,n.startContainer)||b2(e,n.endContainer),mL=(e,n)=>{const o=Ls(e.dom,ie.fromRangeStart(n)).isNone(),r=sr(e.dom,ie.fromRangeEnd(n)).isNone();return!dL(e,n)&&o&&r},Mx=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),fL=e=>{const n=W.fromDom(e.getBody()),o=e.selection.getRng();return mL(n,o)?Mx(e):Rx(n,e.selection)},S3=(e,n)=>e.selection.isCollapsed()?N.none():fL(e),Em=(e,n,o,r,c)=>N.from(n._selectionOverrides.showCaret(e,o,r,c)),gL=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},v2=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?N.none():N.some(gL(n)),hL=(e,n,o)=>{const r=Tf(1,e.getBody(),n),c=ie.fromRangeStart(r),u=c.getNode();if(W1(u))return Em(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(W1(f))return Em(1,e,f,!1,!1);const b=qf(e.dom.getRoot(),c.getNode());return W1(b)?Em(1,e,b,!1,o):N.none()},x3=(e,n,o)=>n.collapsed?hL(e,n,o).getOr(n):n,pL=e=>jf(e)||AS(e),bL=e=>Gf(e)||By(e),vL=(e,n)=>{_e(n)&&n.data.length===0&&e.remove(n)},g5=(e,n,o,r,c,u)=>{Em(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),vL(e.dom,o)},SZ=(e,n)=>{const o=e.selection.getRng();if(!_e(o.commonAncestorContainer))return N.none();const r=n?ms.Forwards:ms.Backwards,c=Ei(e.getBody()),u=Ee(ju,n?c.next:c.prev),f=n?pL:bL,b=Yd(r,e.getBody(),o),y=u(b),x=y&&Kc(n,y);if(!x||!bh(b,x))return N.none();if(f(x))return N.some(()=>g5(e,o,b.getNode(),r,n,x));const A=u(x);return A&&f(A)&&bh(x,A)?N.some(()=>g5(e,o,b.getNode(),r,n,A)):N.none()},Qc=(e,n)=>SZ(e,n),y2=(e,n)=>{const o=e.getBody();return n?gs(o).filter(jf):Ta(o).filter(Gf)},Bx=e=>{const n=e.selection.getRng();return!n.collapsed&&(y2(e,!0).exists(o=>o.isEqual(ie.fromRangeStart(n)))||y2(e,!1).exists(o=>o.isEqual(ie.fromRangeEnd(n))))},h5=e=>Ce(e)&&(To(W.fromDom(e))||va(W.fromDom(e))),ei=Si.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),p5=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return We(o)&&o.getAttribute("data-mce-caret")===r},yL=(e,n,o,r)=>{const c=u=>oe(W.fromDom(u))&&!Il(o,r,e);return Z0(!n,o).fold(()=>Z0(n,r).fold(we,c),c)},E3=(e,n,o,r)=>{const c=r.getNode(!n);return Cb(W.fromDom(e),W.fromDom(o.getNode())).map(u=>Jo(u)?ei.remove(u.dom):ei.moveToElement(c)).orThunk(()=>N.some(ei.moveToElement(c)))},b5=(e,n,o)=>Wc(n,e,o).bind(r=>h5(r.getNode())||yL(e,n,o,r)?N.none():n&&vn(r.getNode())||!n&&vn(r.getNode(!0))?E3(e,n,o,r):n&&Gf(o)||!n&&jf(o)?N.some(ei.moveToPosition(r)):N.none()),CL=(e,n)=>dn(n)?N.none():e&&vn(n.nextSibling)?N.some(ei.moveToElement(n.nextSibling)):!e&&vn(n.previousSibling)?N.some(ei.moveToElement(n.previousSibling)):N.none(),wL=(e,n,o)=>o.fold(r=>N.some(ei.remove(r)),r=>N.some(ei.moveToElement(r)),r=>Il(n,r,e)?N.none():N.some(ei.moveToPosition(r))),Zb=(e,n,o)=>p5(n,o)?CL(n,o.getNode(!n)).orThunk(()=>b5(e,n,o)):b5(e,n,o).bind(r=>wL(e,o,r)),v5=(e,n,o)=>{const r=Tf(n?1:-1,e,o),c=ie.fromRangeStart(r),u=W.fromDom(e);return!n&&Gf(c)?N.some(ei.remove(c.getNode(!0))):n&&jf(c)?N.some(ei.remove(c.getNode())):!n&&jf(c)&&R_(u,c)?Lt(u,c).map(f=>ei.remove(f.getNode())):n&&Gf(c)&&RS(u,c)?YD(u,c).map(f=>ei.remove(f.getNode())):Zb(e,n,c)},y5=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),yb(e,n,W.fromDom(o)),!0),C5=(e,n)=>o=>{const r=n?ie.before(o):ie.after(o);return e.selection.setRng(r.toRange()),!0},T3=e=>n=>(e.selection.setRng(n.toRange()),!0),w5=(e,n)=>N.from(qf(e.getBody(),n)),SL=(e,n)=>{const o=e.selection.getNode();return w5(e,o).filter(vn).fold(()=>v5(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(y5(e,n),C5(e,n),T3(e))),()=>N.some(pt))},xL=e=>{be(Ys(e,".mce-offscreen-selection"),Tn)},xZ=(e,n)=>{const o=e.selection.getNode();return vn(o)&&!Xs(o)?w5(e,o.parentNode).filter(vn).fold(()=>N.some(()=>{xL(W.fromDom(e.getBody())),yb(e,n,W.fromDom(e.selection.getNode())),L_(e)}),()=>N.some(pt)):Bx(e)?N.some(()=>{$h(e,e.selection.getRng(),W.fromDom(e.getBody()))}):N.none()},EL=e=>{const n=e.dom,o=e.selection,r=qf(e.getBody(),o.getNode());if(kn(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(ie.before(c).toRange())}return!0},S5=(e,n)=>e.selection.isCollapsed()?SL(e,n):xZ(e,n),cl=(e,n)=>{const o=ie.fromRangeStart(e.selection.getRng());return Wc(n,e.getBody(),o).filter(r=>n?FF(r):sZ(r)).bind(r=>Sf(n?0:-1,r)).map(r=>()=>e.selection.select(r))},k3=(e,n)=>e.selection.isCollapsed()?cl(e,n):N.none(),jb=_e,ag=e=>jb(e)&&e.data[0]===er,_3=e=>jb(e)&&e.data[e.data.length-1]===er,x5=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(er)},Nx=e=>{var n;if(jb(e.previousSibling))return _3(e.previousSibling)||e.previousSibling.appendData(er),e.previousSibling;if(jb(e))return ag(e)||e.insertData(0,er),e;{const o=x5(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},TL=e=>{var n,o;if(jb(e.nextSibling))return ag(e.nextSibling)||e.nextSibling.insertData(0,er),e.nextSibling;if(jb(e))return _3(e)||e.appendData(er),e;{const r=x5(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Px=(e,n)=>e?Nx(n):TL(n),kL=Ee(Px,!0),_L=Ee(Px,!1),E5=(e,n)=>_e(e.container())?Px(n,e.container()):Px(n,e.getNode()),T5=(e,n)=>{const o=n.get();return o&&e.container()===o&&El(o)},eu=(e,n)=>n.fold(o=>{Kd(e.get());const r=kL(o);return e.set(r),N.some(ie(r,r.length-1))},o=>gs(o).map(r=>{if(T5(r,e)){const c=e.get();return ie(c,1)}else{Kd(e.get());const c=E5(r,!0);return e.set(c),ie(c,1)}}),o=>Ta(o).map(r=>{if(T5(r,e)){const c=e.get();return ie(c,c.length-1)}else{Kd(e.get());const c=E5(r,!1);return e.set(c),ie(c,c.length-1)}}),o=>{Kd(e.get());const r=_L(o);return e.set(r),N.some(ie(r,1))}),k5=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return N.none()},Oa=Si.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),_5=(e,n)=>{const o=xi(n,e);return o||e},OL=(e,n,o)=>{const r=gR(o),c=_5(n,r.container());return Ju(e,c,r).fold(()=>sr(c,r).bind(Ee(Ju,e,c)).map(u=>Oa.before(u)),N.none)},AL=(e,n)=>Qd(e,n)===null,$x=(e,n,o)=>Ju(e,n,o).filter(Ee(AL,n)),O3=(e,n,o)=>{const r=hR(o);return $x(e,n,r).bind(c=>Ls(c,r).isNone()?N.some(Oa.start(c)):N.none())},A3=(e,n,o)=>{const r=gR(o);return $x(e,n,r).bind(c=>sr(c,r).isNone()?N.some(Oa.end(c)):N.none())},O5=(e,n,o)=>{const r=hR(o),c=_5(n,r.container());return Ju(e,c,r).fold(()=>Ls(c,r).bind(Ee(Ju,e,c)).map(u=>Oa.after(u)),N.none)},D3=e=>!dR(R3(e)),tu=(e,n,o)=>k5([OL,O3,A3,O5],[e,n,o]).filter(D3),R3=e=>e.fold(Eo,Eo,Eo,Eo),Gb=e=>e.fold(Le("before"),Le("start"),Le("end"),Le("after")),qb=e=>e.fold(Oa.before,Oa.before,Oa.after,Oa.after),Fx=e=>e.fold(Oa.start,Oa.start,Oa.end,Oa.end),A5=(e,n)=>Gb(e)===Gb(n)&&R3(e)===R3(n),D5=(e,n,o,r,c,u)=>_r(Ju(n,o,r),Ju(n,o,c),(f,b)=>f!==b&&I_(o,f,b)?Oa.after(e?f:b):u).getOr(u),R5=(e,n)=>e.fold(qe,o=>!A5(o,n)),Ix=(e,n,o,r,c)=>{const u=Kc(e,c);return Wc(e,o,u).map(Ee(Kc,e)).fold(()=>r.map(qb),y=>tu(n,o,y).map(Ee(D5,e,n,o,u,y)).filter(Ee(R5,r))).filter(D3)},M3=(e,n)=>e?n.fold(k(N.some,Oa.start),N.none,k(N.some,Oa.after),N.none):n.fold(N.none,k(N.some,Oa.before),N.none,k(N.some,Oa.end)),C2=(e,n,o,r)=>{const c=Kc(e,r),u=tu(n,o,c);return tu(n,o,c).bind(Ee(M3,e)).orThunk(()=>Ix(e,n,o,u,r))},DL=e=>G(e.selection.getSel().modify),B3=(e,n,o)=>{const r=e?1:-1;return n.setRng(ie(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},RL=(e,n)=>{const o=n.selection.getRng(),r=e?ie.fromRangeEnd(o):ie.fromRangeStart(o);return DL(n)?e&&Xm(r)?B3(!0,n.selection,r):!e&&Xp(r)?B3(!1,n.selection,r):!1:!1};var sd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(sd||(sd={}));const w2=(e,n)=>e===ms.Backwards?bo(n):n,ML=(e,n,o)=>e===ms.Forwards?n.next(o):n.prev(o),M5=(e,n,o,r)=>co(r.getNode(n===ms.Forwards))?sd.Br:Il(o,r)===!1?sd.Block:sd.Wrap,BL=(e,n,o,r)=>{const c=Ei(o);let u=r;const f=[];for(;u;){const b=ML(n,c,u);if(!b)break;if(co(b.getNode(!1)))return n===ms.Forwards?{positions:w2(n,f).concat([b]),breakType:sd.Br,breakAt:N.some(b)}:{positions:w2(n,f),breakType:sd.Br,breakAt:N.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=M5(o,n,u,b);return{positions:w2(n,f),breakType:y,breakAt:N.some(b)}}f.push(b),u=b}return{positions:w2(n,f),breakType:sd.Eol,breakAt:N.none()}},B5=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===ms.Backwards?u.concat(c):[c].concat(u)}).getOr([]),N3=(e,n)=>Ro(e,(o,r)=>o.fold(()=>N.some(r),c=>_r(Tr(c.getClientRects()),Tr(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),N.none()),Lx=(e,n)=>Tr(n.getClientRects()).bind(o=>N3(e,o.left)),S2=Ee(BL,ie.isAbove,-1),x2=Ee(BL,ie.isBelow,1),N5=Ee(B5,-1,S2),P5=Ee(B5,1,x2),NL=(e,n)=>S2(e,n).breakAt.isNone(),$5=(e,n)=>x2(e,n).breakAt.isNone(),PL=e=>gs(e).map(n=>[n].concat(x2(e,n).positions)).getOr([]),Qh=e=>Ta(e).map(n=>S2(e,n).positions.concat(n)).getOr([]),F5=(e,n)=>Lx(N5(e,n),n),P3=(e,n)=>Lx(P5(e,n),n),I5=vn,Hx=(e,n)=>Math.abs(e.left-n),Tm=(e,n)=>Math.abs(e.right-n),L5=e=>la(e,"node"),ti=(e,n)=>sc(e,(o,r)=>{const c=Math.min(Hx(o,n),Tm(o,n)),u=Math.min(Hx(r,n),Tm(r,n));return u===c&&L5(r)&&I5(r.node)||u<c?r:o}),ep=e=>{const n=o=>Ft(o,r=>{const c=Bl(r);return c.node=e,c});if(We(e))return n(e.getClientRects());if(_e(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Vx=e=>Pi(e,ep);var E2;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(E2||(E2={}));const H5=(e,n,o,r)=>{let c=r;for(;c=hh(c,e,Bu,n);)if(o(c))return},V5=(e,n,o,r,c,u)=>{let f=0;const b=[],y=O=>{let B=Vx([O]);e===-1&&(B=B.reverse());for(let L=0;L<B.length;L++){const z=B[L];if(!o(z,x)){if(b.length>0&&n(z,Nc(b))&&f++,z.line=f,c(z))return!0;b.push(z)}}return!1},x=Nc(u.getClientRects());if(!x)return b;const A=u.getNode();return A&&(y(A),H5(e,r,y,A)),b},$L=(e,n)=>n.line>e,FL=(e,n)=>n.line===e,IL=Ee(V5,E2.Up,hf,pf),LL=Ee(V5,E2.Down,pf,hf),$3=e=>Nc(e.getClientRects()),HL=(e,n,o,r)=>{const c=Ei(n);let u,f,b,y;const x=[];let A=0;e===1?(u=c.next,f=pf,b=hf,y=ie.after(r)):(u=c.prev,f=hf,b=pf,y=ie.before(r));const O=$3(y);do{if(!y.isVisible())continue;const B=$3(y);if(b(B,O))continue;x.length>0&&f(B,Nc(x))&&A++;const L=Bl(B);if(L.position=y,L.line=A,o(L))return x;x.push(L)}while(y=u(y));return x},z5=e=>n=>$L(e,n),cg=e=>n=>FL(e,n),nu=(e,n)=>{e.selection.setRng(n),Oi(e,e.selection.getRng())},zx=(e,n,o)=>N.some(x3(e,n,o)),F3=(e,n,o,r,c,u)=>{const f=n===ms.Forwards,b=Ei(e.getBody()),y=Ee(ju,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const z=go(o);if(u(z))return Em(n,e,z,n===ms.Backwards,!1);if(Bx(e)){const F=o.cloneRange();return F.collapse(n===ms.Backwards),N.from(F)}}const A=Yd(n,e.getBody(),o);if(x(A))return v2(e,A.getNode(!f));let O=y(A);const B=Jp(o);if(O)O=Kc(f,O);else return B?N.some(o):N.none();if(x(O))return Em(n,e,O.getNode(!f),f,!1);const L=y(O);return L&&x(L)&&bh(O,L)?Em(n,e,L.getNode(!f),f,!1):B?zx(e,O.toRange(),!1):N.none()},Ux=(e,n,o,r,c,u)=>{const f=Yd(n,e.getBody(),o),b=Nc(f.getClientRects()),y=n===E2.Down,x=e.getBody();if(!b)return N.none();if(Bx(e)){const V=y?ie.fromRangeEnd(o):ie.fromRangeStart(o);return(y?P3:F5)(x,V).orThunk(()=>N.from(V)).map(X=>X.toRange())}const O=(y?LL:IL)(x,z5(1),f),B=ft(O,cg(1)),L=b.left,z=ti(B,L);if(z&&u(z.node)){const V=Math.abs(L-z.left),q=Math.abs(L-z.right);return Em(n,e,z.node,V<q,!1)}let F;if(r(f)?F=f.getNode():c(f)?F=f.getNode(!0):F=go(o),F){const V=HL(n,x,z5(1),F);let q=ti(ft(V,cg(1)),L);if(q||(q=Nc(ft(V,cg(0))),q))return zx(e,q.position.toRange(),!1)}return B.length===0?I3(e,y).filter(y?c:r).map(V=>x3(e,V.toRange(),!1)):N.none()},I3=(e,n)=>{const o=e.selection.getRng(),r=n?ie.fromRangeEnd(o):ie.fromRangeStart(o),c=Iw(r.container(),e.getBody());if(n){const u=x2(c,r);return pu(u.positions)}else{const u=S2(c,r);return Tr(u.positions)}},U5=(e,n,o)=>I3(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Wx=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},W5=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},Z5=(e,n,o)=>eu(n,o).map(r=>(Wx(e,r),o)),VL=(e,n,o)=>{const r=ie.fromRangeStart(e);if(e.collapsed)return r;{const c=ie.fromRangeEnd(e);return o?Ls(n,c).getOr(c):sr(n,r).getOr(r)}},zL=(e,n,o)=>{const r=e.getBody(),c=VL(e.selection.getRng(),r,o),u=Ee(zr,e);return C2(o,u,r,c).bind(b=>Z5(e,n,b))},j5=(e,n,o)=>{const r=Ft(Ys(W.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ft(r,e),u=ft(o,e);be(wp(c,u),Ee(W5,!1)),be(wp(u,c),Ee(W5,!0))},UL=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=ie.fromRangeStart(e.selection.getRng());ie.isTextPosition(r)&&!fR(r)&&(Wx(e,Nk(o,r)),n.set(null))}},WL=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=ft(r,e);be(c,u=>{const f=ie.fromRangeStart(n.selection.getRng());tu(e,n.getBody(),f).bind(b=>Z5(n,o,b))})}},Oc=(e,n,o)=>jd(e)?zL(e,n,o).isSome():!1,G5=(e,n,o)=>jd(n)?RL(e,n):!1,L3=e=>{const n=us(null),o=Ee(zr,e);return e.on("NodeChange",r=>{jd(e)&&(j5(o,e.dom,r.parents),UL(e,n),WL(o,e,n,r.parents))}),n},q5=Ee(G5,!0),H3=Ee(G5,!1),Zx=(e,n,o)=>{if(jd(e)){const r=I3(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?ie.fromRangeEnd(c):ie.fromRangeStart(c)});return tu(Ee(zr,e),e.getBody(),r).exists(c=>{const u=qb(c);return eu(o,u).exists(f=>(Wx(e,f),!0))})}else return!1},ZL=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},jL=e=>_r(gs(e),Ta(e),(n,o)=>{const r=Kc(!0,n),c=Kc(!1,o);return sr(e,r).forall(u=>u.isEqual(c))}).getOr(!0),K5=(e,n)=>o=>eu(n,o).map(r=>()=>Wx(e,r)),Y5=(e,n,o,r)=>{const c=e.getBody(),u=Ee(zr,e);e.undoManager.ignore(()=>{e.selection.setRng(ZL(o,r)),Yc(e),tu(u,c,ie.fromRangeStart(e.selection.getRng())).map(Fx).bind(K5(e,n)).each(Zr)}),e.nodeChanged()},X5=(e,n)=>{const o=xi(n,e);return o||e},GL=(e,n,o,r)=>{const c=X5(e.getBody(),r.container()),u=Ee(zr,e),f=tu(u,c,r);return f.bind(y=>o?y.fold(Le(N.some(Fx(y))),N.none,Le(N.some(qb(y))),N.none):y.fold(N.none,Le(N.some(qb(y))),N.none,Le(N.some(Fx(y))))).map(K5(e,n)).getOrThunk(()=>{const y=q0(o,c,r),x=y.bind(A=>tu(u,c,A));return _r(f,x,()=>Ju(u,c,r).bind(A=>jL(A)?N.some(()=>{yb(e,o,W.fromDom(A))}):N.none())).getOrThunk(()=>x.bind(()=>y.map(A=>()=>{o?Y5(e,n,r,A):Y5(e,n,A,r)})))})},V3=(e,n,o)=>{if(e.selection.isCollapsed()&&jd(e)){const r=ie.fromRangeStart(e.selection.getRng());return GL(e,n,o,r)}return N.none()},T2=e=>pa(e)>1,rd=(e,n)=>{const o=W.fromDom(e.getBody()),r=W.fromDom(e.selection.getStart()),c=gm(r,o);return ia(c,n).fold(Le(c),u=>c.slice(0,u))},tp=e=>pa(e)===1,jx=e=>rd(e,n=>Bo(n)||T2(n)),z3=e=>rd(e,Bo),Gx=(e,n)=>{const o=Ee(QR,e);return Pi(n,r=>o(r)?[r.dom]:[])},U3=e=>{const n=z3(e);return Gx(e,n)},qL=(e,n,o,r)=>{const c=Gx(n,r);if(c.length===0)yb(n,e,o);else{const u=f4(o.dom,c);n.selection.setRng(u.toRange())}},J5=(e,n)=>{const o=ft(jx(e),tp);return pu(o).bind(r=>{const c=ie.fromRangeStart(e.selection.getRng());return wb(n,c,r.dom)&&!eM(r)?N.some(()=>qL(n,e,r,o)):N.none()})},Q5=(e,n)=>{const o=n.parentElement;return co(n)&&!Q(o)&&e.dom.isEmpty(o)},KL=e=>eM(W.fromDom(e)),eN=(e,n)=>{const o=e.selection.getStart(),r=Q5(e,o)||KL(o)?f4(o,n):FI(e.selection.getRng(),n);e.selection.setRng(r.toRange())},YL=(e,n)=>{const o=wp(n,U3(e));o.length>0&&eN(e,o)},tN=e=>_e(e.startContainer),XL=e=>e.startOffset===0&&tN(e),JL=(e,n)=>{const o=n.startContainer.parentElement;return!Q(o)&&QR(e,W.fromDom(o))},nN=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!Q(n)&&!Q(o)&&n.isEqualNode(o)},oN=e=>{const n=e.endContainer;return e.endOffset===(_e(n)?n.length:n.childNodes.length)},EZ=e=>nN(e)&&oN(e),TZ=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),kZ=e=>EZ(e)||TZ(e),QL=e=>{const n=e.selection.getRng();return XL(n)&&JL(e,n)&&kZ(n)},_Z=e=>{if(QL(e)){const n=U3(e);return N.some(()=>{Yc(e),YL(e,n)})}else return N.none()},sN=(e,n)=>e.selection.isCollapsed()?J5(e,n):_Z(e),eH=e=>MI(e,n=>yc(n.dom),Bo),tH=e=>eH(W.fromDom(e.selection.getStart())),OZ=e=>{const n=e.selection.getRng();return n.collapsed&&(tN(n)||e.dom.isEmpty(n.startContainer))&&!tH(e)},k2=e=>(OZ(e)&&eN(e,[]),!0),Aa=(e,n,o)=>Ce(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),yb(e,n,W.fromDom(o))}):N.none(),rN=(e,n)=>{const o=n?AS:By,r=n?ms.Forwards:ms.Backwards,c=Yd(r,e.getBody(),e.selection.getRng());return o(c)?Aa(e,n,c.getNode(!n)):N.from(Kc(n,c)).filter(u=>o(u)&&bh(c,u)).bind(u=>Aa(e,n,u.getNode(!n)))},_2=(e,n)=>{const o=e.selection.getNode();return Uo(o)?Aa(e,n,o):N.none()},W3=(e,n)=>e.selection.isCollapsed()?rN(e,n):_2(e,n),aN=e=>ic(e,n=>kn(n.dom)||vn(n.dom)).exists(n=>kn(n.dom)),qx=e=>vd(e??"").getOr(0),Kx=(e,n)=>{const o=e||Gv(n)?"margin":"padding",r=Os(n,"direction")==="rtl"?"-right":"-left";return o+r},nH=(e,n,o,r,c,u)=>{const f=Kx(o,W.fromDom(u)),b=qx(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},oH=(e,n)=>Ws(n,o=>{const r=Kx(N1(e),o),c=ea(o,r).map(qx).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),Z3=e=>{const n=iN(e);return!e.mode.isReadOnly()&&(n.length>1||oH(e,n))},cN=e=>za(e)||va(e),sH=e=>Fa(e).exists(cN),iN=e=>ft(zp(e.selection.getSelectedBlocks()),n=>!cN(n)&&!sH(n)&&aN(n)),Yx=(e,n)=>{var o,r;const{dom:c}=e,u=ck(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=qx(u),y=N1(e);be(iN(e),x=>{nH(c,n,y,b,f,x.dom)})},rH=e=>Yx(e,"indent"),lN=e=>Yx(e,"outdent"),aH=e=>{if(e.selection.isCollapsed()&&Z3(e)){const n=e.dom,o=e.selection.getRng(),r=ie.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&KD(W.fromDom(c),r))return N.some(()=>lN(e))}return N.none()},uN=(e,n,o)=>md([aH,S5,Qc,(r,c)=>V3(r,n,c),w3,Vy,k3,W3,S3,sN],r=>r(e,o)).filter(r=>e.selection.isEditable()),dN=(e,n)=>{uN(e,n,!1).fold(()=>{Yc(e),L_(e)},Zr)},AZ=(e,n)=>{uN(e,n,!0).fold(()=>cI(e),Zr)},cH=(e,n)=>{e.addCommand("delete",()=>{dN(e,n)}),e.addCommand("forwardDelete",()=>{AZ(e,n)})},mN=5,iH=400,Xx=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),Jx=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>mN||r>mN},fN=e=>{const n=Ds(),o=us(!1),r=d0(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},iH);e.on("touchstart",c=>{Xx(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),Xx(c).each(u=>{n.on(f=>{Jx(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},Qx=(e,n)=>kt(e,n.nodeName),lH=(e,n)=>_e(n)?!0:We(n)?!Qx(e.getBlockElements(),n)&&!ja(n)&&!Nu(e,n):!1,uH=(e,n,o)=>mo(O_(W.fromDom(o),W.fromDom(n)),r=>Qx(e,r.dom)),j3=(e,n)=>{if(_e(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||Qx(e,n.nextSibling)))return!0}return!1},gN=e=>e.dom.create(wo(e),zu(e)),dH=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,x=!1;const A=wo(e);if(!u||!We(u))return;const O=f.nodeName.toLowerCase();if(!r.isValidChild(O,A.toLowerCase())||uH(c,f,u))return;const B=o.getRng(),{startContainer:L,startOffset:z,endContainer:F,endOffset:V}=B,q=Bh(e);let X=f.firstChild;for(;X;)if(We(X)&&Qv(r,X),lH(r,X)){if(j3(c,X)){y=X,X=X.nextSibling,n.remove(y);continue}b||(b=gN(e),f.insertBefore(b,X),x=!0),y=X,X=X.nextSibling,b.appendChild(y)}else b=null,X=X.nextSibling;x&&q&&(B.setStart(L,z),B.setEnd(F,V),o.setRng(B),e.nodeChanged())},hN=(e,n,o)=>{const r=W.fromDom(gN(e)),c=ya();Yo(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},mH=e=>{e.on("NodeChange",Ee(dH,e))},Mi=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,pN=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},bN=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],pN(e,c,Ow(e)));o.content=c}},DZ=e=>{const n="contenteditable",o=" "+Te.trim(I0(e))+" ",r=" "+Te.trim(Ow(e))+" ",c=Mi(o),u=Mi(r),f=kk(e);f.length>0&&e.on("BeforeSetContent",b=>{bN(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const x=b[y];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const x=b[y];!c(x)&&!u(x)||(f.length>0&&x.attr("data-mce-content")?(x.name="#text",x.type=3,x.raw=!0,x.value=x.attr("data-mce-content")):x.attr(n,null))}})},RZ=e=>_d(W.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),fH=(e,n)=>{n.hasAttribute("data-mce-caret")&&(qv(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},MZ=(e,n)=>{const o=RZ(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),fH(e,o);return}zi(o)&&(fH(e,o),e.undoManager.add())}},gH=e=>{e.on("keyup compositionstart",Ee(MZ,e))},O2=vn,hH=(e,n,o)=>F3(n,e,o,jf,Gf,O2),G3=(e,n,o)=>Ux(n,e,o,u=>jf(u)||jD(u),u=>Gf(u)||bt(u),O2),vN=e=>{const n=e.dom.create(wo(e));return n.innerHTML='<br data-mce-bogus="1">',n},q3=(e,n,o)=>{const r=Ei(e.getBody()),c=Ee(ju,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(ie.fromRangeStart(o))){const b=W.fromDom(vN(e));n===1?La(W.fromDom(u),b):ba(W.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},yN=(e,n)=>{const o=n?ms.Forwards:ms.Backwards,r=e.selection.getRng();return hH(o,e,r).orThunk(()=>(q3(e,o,r),N.none()))},pH=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return G3(o,e,r).orThunk(()=>(q3(e,o,r),N.none()))},bH=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return dR(o)?!n:n},CN=(e,n)=>yN(e,bH(e.selection,n)).exists(o=>(nu(e,o),!0)),wN=(e,n)=>pH(e,n).exists(o=>(nu(e,o),!0)),A2=(e,n)=>U5(e,n,n?Gf:jf),eE=(e,n)=>y2(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(nu(e,o),!0)),vH=e=>Bt(["figcaption"],oo(e)),yH=(e,n)=>{const o=Ee(En,n);return ic(W.fromDom(e.container()),Bo,o).filter(vH)},K3=(e,n,o)=>n?$5(e.dom,o):NL(e.dom,o),CH=(e,n)=>{const o=W.fromDom(e.getBody()),r=ie.fromRangeStart(e.selection.getRng());return yH(r,o).exists(()=>{if(K3(o,n,r)){const u=hN(e,o,n?Yo:Zm);return e.selection.setRng(u),!0}else return!1})},SN=(e,n)=>e.selection.isCollapsed()?CH(e,n):!1,Y3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},wH=e=>Ft(e,n=>({...Y3,...n})),SH=e=>Ft(e,n=>({...Y3,...n})),xN=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,xH=(e,n)=>Pi(wH(e),o=>xN(o,n)?[o]:[]),EH=(e,n)=>Pi(SH(e),o=>xN(o,n)?[o]:[]),Ht=(e,...n)=>()=>e.apply(null,n),np=(e,n)=>Ho(xH(e,n),o=>o.action()),EN=(e,n)=>md(EH(e,n),o=>o.action()),X3=(e,n)=>{const o=n?ms.Forwards:ms.Backwards,r=e.selection.getRng();return F3(e,o,r,AS,By,Uo).exists(c=>(nu(e,c),!0))},TN=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Ux(e,o,r,AS,By,Uo).exists(c=>(nu(e,c),!0))},kN=(e,n)=>U5(e,n,n?By:AS),_N=Si.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),D2={..._N,none:e=>_N.none(e)},TH=(e,n)=>vs(e,n,qe),vs=(e,n,o)=>Pi(Ps(e),r=>Xr(r,n)?o(r)?[r]:[]:vs(r,n,o)),kH=(e,n,o=we)=>{if(o(n))return N.none();if(Bt(e,oo(n)))return N.some(n);const r=c=>Xr(c,"table")||o(c);return Rg(n,e.join(","),r)},_H=(e,n)=>kH(["td","th"],e,n),OH=e=>TH(e,"th,td"),J3=(e,n)=>Jr(e,"table",n),R2=(e,n,o,r,c=qe)=>{const u=r===1;if(!u&&o<=0)return D2.first(e[0]);if(u&&o>=e.length-1)return D2.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?D2.middle(n,b):R2(e,n,f,r,c)}},Q3=(e,n)=>J3(e,n).bind(o=>{const r=OH(o);return ia(r,u=>En(e,u)).map(u=>({index:u,all:r}))}),ig=(e,n,o)=>Q3(e,o).fold(()=>D2.none(e),c=>R2(c.all,e,c.index,1,n)),eO=(e,n,o)=>Q3(e,o).fold(()=>D2.none(),c=>R2(c.all,e,c.index,-1,n)),ON=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),tO=(e,n)=>Pi(n,o=>{const r=ON(Bl(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),nO=(e,n,o)=>Ro(e,(r,c)=>r.fold(()=>N.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return N.some(b<f?c:u)}),N.none()),tE=(e,n,o,r,c)=>{const u=Ys(W.fromDom(o),"td,th,caption").map(b=>b.dom),f=ft(tO(e,u),b=>n(b,c));return nO(f,r,c).map(b=>b.cell)},AN=e=>e.bottom,nE=e=>e.top,oE=(e,n)=>e.y<n,M2=(e,n)=>e.y>n,B2=Ee(tE,AN,oE),il=Ee(tE,nE,M2),N2=(e,n)=>Tr(n.getClientRects()).bind(o=>B2(e,o.left,o.top)).bind(o=>Lx(Qh(o),n)),DN=(e,n)=>pu(n.getClientRects()).bind(o=>il(e,o.left,o.top)).bind(o=>Lx(PL(o),n)),RN=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),AH=e=>e.breakType===sd.Wrap&&e.positions.length===0,MN=e=>e.breakType===sd.Br&&e.positions.length===1,BN=(e,n,o)=>{const r=e(n,o);return AH(r)||!co(o.getNode())&&MN(r)?!RN(e,n,r):r.breakAt.isNone()},DH=Ee(BN,S2),P2=Ee(BN,x2),RH=(e,n,o)=>{const r=ie.fromRangeStart(n);return fs(!e,o).exists(c=>c.isEqual(r))},MH=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return or()&&RH(n,c,o)?(Em(u,e,o,!n,!1).each(f=>{nu(e,f)}),!0):!1},BH=(e,n,o)=>N2(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>N3(N5(e,ie.before(n)),r.left))).getOr(ie.before(n)),NH=(e,n,o)=>DN(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>N3(P5(e,ie.after(n)),r.left))).getOr(ie.after(n)),NN=(e,n)=>{const o=n.getNode(e);return fo(o)?N.some(o):N.none()},PH=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?La:ba,c=hN(n,W.fromDom(o),r);nu(n,c)})},PN=(e,n,o)=>{const r=NN(!!n,o),c=n===!1;r.fold(()=>nu(e,o.toRange()),u=>fs(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>nu(e,o.toRange()),f=>PH(n,e,u)))},$H=(e,n,o,r)=>{const c=e.selection.getRng(),u=ie.fromRangeStart(c),f=e.getBody();if(!n&&DH(r,u)){const b=BH(f,o,u);return PN(e,n,b),!0}else if(n&&P2(r,u)){const b=NH(f,o,u);return PN(e,n,b),!0}else return!1},$N=(e,n,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),FN=(e,n)=>$N(e,n,MH),IN=(e,n)=>$N(e,n,$H),FH=e=>{const n=jl.exact(e,0,e,0);return _i(n)},LN=(e,n,o)=>o.fold(N.none,N.none,(r,c)=>xF(c).map(u=>FH(u)),r=>(e.execCommand("mceTableInsertRowAfter"),HN(e,n,r))),HN=(e,n,o)=>LN(e,n,ig(o,Nt)),VN=(e,n,o)=>LN(e,n,eO(o,Nt)),oO=(e,n)=>{const o=["table","li","dl"],r=W.fromDom(e.getBody()),c=b=>{const y=oo(b);return En(b,r)||Bt(o,y)},u=e.selection.getRng(),f=W.fromDom(n?u.endContainer:u.startContainer);return _H(f,c).map(b=>(J3(b,c).each(A=>{e.model.table.clearSelectedCells(A.dom)}),e.selection.collapse(!n),(n?HN:VN)(e,c,b).each(A=>{e.selection.setRng(A)}),!0)).getOr(!1)},zN=(e,n,o)=>{const r=gn.os.isMacOS()||gn.os.isiOS();np([{keyCode:Ke.RIGHT,action:Ht(CN,e,!0)},{keyCode:Ke.LEFT,action:Ht(CN,e,!1)},{keyCode:Ke.UP,action:Ht(wN,e,!1)},{keyCode:Ke.DOWN,action:Ht(wN,e,!0)},...r?[{keyCode:Ke.UP,action:Ht(eE,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Ke.DOWN,action:Ht(eE,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ke.RIGHT,action:Ht(FN,e,!0)},{keyCode:Ke.LEFT,action:Ht(FN,e,!1)},{keyCode:Ke.UP,action:Ht(IN,e,!1)},{keyCode:Ke.DOWN,action:Ht(IN,e,!0)},{keyCode:Ke.RIGHT,action:Ht(X3,e,!0)},{keyCode:Ke.LEFT,action:Ht(X3,e,!1)},{keyCode:Ke.UP,action:Ht(TN,e,!1)},{keyCode:Ke.DOWN,action:Ht(TN,e,!0)},{keyCode:Ke.RIGHT,action:Ht(Oc,e,n,!0)},{keyCode:Ke.LEFT,action:Ht(Oc,e,n,!1)},{keyCode:Ke.RIGHT,ctrlKey:!r,altKey:r,action:Ht(q5,e,n)},{keyCode:Ke.LEFT,ctrlKey:!r,altKey:r,action:Ht(H3,e,n)},{keyCode:Ke.UP,action:Ht(SN,e,!1)},{keyCode:Ke.DOWN,action:Ht(SN,e,!0)}],o).each(c=>{o.preventDefault()})},IH=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||zN(e,n,o)})},ou=(e,n)=>({container:e,offset:n}),sE=Dn.DOM,rE=e=>n=>e===n?-1:0,UN=e=>n=>e.isBlock(n)||Bt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",sO=(e,n,o)=>{if(_e(e)&&n>=0)return N.some(ou(e,n));{const r=Lu(sE);return N.from(r.backwards(e,n,rE(e),o)).map(c=>ou(c.container,c.container.data.length))}},WN=(e,n,o)=>{if(_e(e)&&n>=e.length)return N.some(ou(e,n));{const r=Lu(sE);return N.from(r.forwards(e,n,rE(e),o)).map(c=>ou(c.container,0))}},rO=(e,n,o)=>{if(!_e(e))return N.none();const r=e.data;if(n>=0&&n<=r.length)return N.some(ou(e,n));{const c=Lu(sE);return N.from(c.backwards(e,n,rE(e),o)).bind(u=>{const f=u.container.data;return rO(u.container,n+f.length,o)})}},aO=(e,n,o)=>{if(!_e(e))return N.none();const r=e.data;if(n<=r.length)return N.some(ou(e,n));{const c=Lu(sE);return N.from(c.forwards(e,n,rE(e),o)).bind(u=>aO(u.container,n-r.length,o))}},aE=(e,n,o,r,c)=>{const u=Lu(e,UN(e));return N.from(u.backwards(n,o,r,c))},LH=e=>e.collapsed&&_e(e.startContainer),ZN=e=>xl(e.toString().replace(/\u00A0/g," ")),jN=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,cE=(e,n)=>e.substring(n.length),HH=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(jN(u))return N.none();if(c===u&&Zs(e,o,r,n))break}return N.some(r)},VH=(e,n,o,r=0)=>{if(!LH(n))return N.none();const c={text:"",offset:0},u=(b,y,x)=>(c.text=x+c.text,c.offset+=y,HH(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return aE(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return N.none();const x=ZN(y);return x.lastIndexOf(o)!==0||cE(x,o).length<r?N.none():N.some({text:cE(x,o),range:y,trigger:o})})},cO=(e,n,o,r=0)=>TF(W.fromDom(n.startContainer)).fold(()=>VH(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=ZN(u);return N.some({range:u,text:cE(f,o),trigger:o})}),zH=e=>e.nodeType===_g,UH=e=>e.nodeType===Fm,iO=e=>{if(zH(e))return ou(e,e.data.length);{const n=e.childNodes;return n.length>0?iO(n[n.length-1]):ou(e,n.length)}},GN=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?GN(o[n],0):o.length>0&&UH(e)&&o.length===n?iO(o[o.length-1]):ou(e,n)},WH=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return aE(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!jN(u)}).isSome()},ZH=e=>n=>{const o=GN(n.startContainer,n.startOffset);return!WH(e,o)},qN=(e,n,o)=>md(o.triggers,r=>cO(e,n,r)),KN=(e,n)=>{const o=n(),r=e.selection.getRng();return qN(e.dom,r,o).bind(c=>YN(e,n,c))},YN=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=ft(u.lookupByTrigger(o.trigger),A=>o.text.length>=A.minChars&&A.matches.getOrThunk(()=>ZH(e.dom))(o.range,b,o.text));if(y.length===0)return N.none();const x=Promise.all(Ft(y,A=>A.fetch(o.text,A.maxResults,r).then(B=>({matchText:o.text,items:B,columns:A.columns,onAction:A.onAction,highlightOn:A.highlightOn}))));return N.some({lookupData:x,context:o})};var su;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(su||(su={}));const lO=(e,n,o)=>e.stype===su.Error?n(e.serror):o(e.svalue),jH=e=>{const n=[],o=[];return be(e,r=>{lO(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},GH=(e,n)=>e.stype===su.Error?{stype:su.Error,serror:n(e.serror)}:e,qH=(e,n)=>e.stype===su.Value?{stype:su.Value,svalue:n(e.svalue)}:e,KH=(e,n)=>e.stype===su.Value?n(e.svalue):e,YH=(e,n)=>e.stype===su.Error?n(e.serror):e,XH=e=>({stype:su.Value,svalue:e}),XN=e=>({stype:su.Error,serror:e}),ar={fromResult:e=>e.fold(XN,XH),toResult:e=>lO(e,vr.error,vr.value),svalue:XH,partition:jH,serror:XN,bind:KH,bindError:YH,map:qH,mapError:GH,fold:lO},dO=e=>Sn(e)&&jr(e).length>100?" removed due to size":JSON.stringify(e,null,2),JN=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Le("... (only showing first ten failures)")}]):e;return Ft(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},$2=(e,n)=>ar.serror([{path:e,getErrorInfo:n}]),QH=(e,n,o)=>$2(e,()=>'Could not find valid *required* value for "'+n+'" in '+dO(o)),eV=(e,n)=>$2(e,()=>'Choice schema did not contain choice key: "'+n+'"'),tV=(e,n,o)=>$2(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+dO(n)),QN=(e,n)=>$2(e,Le(n)),nV=(e,n,o,r)=>to(o,r).fold(()=>tV(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),mO=(e,n)=>({extract:(c,u)=>to(u,e).fold(()=>eV(c,e),b=>nV(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+jr(n)}),oV=(e,n)=>n,sV=(e,n)=>vp(e)&&vp(n)?F2(e,n):n,eP=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)kt(c,u)&&(o[u]=e(o[u],c[u]))}return o},F2=eP(sV),rV=eP(oV),tP=()=>({tag:"required",process:{}}),aV=e=>({tag:"defaultedThunk",process:e}),nP=e=>aV(Le(e)),cV=()=>({tag:"option",process:{}}),Bs=(e,n)=>e.length>0?ar.svalue(F2(n,rV.apply(void 0,e))):ar.svalue(n),ru=e=>k(ar.serror,Cp)(e),iV={consolidateObj:(e,n)=>{const o=ar.partition(e);return o.errors.length>0?ru(o.errors):Bs(o.values,n)},consolidateArr:e=>{const n=ar.partition(e);return n.errors.length>0?ru(n.errors):ar.svalue(n.values)}},lV=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),uV=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),oP=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},iE=e=>{const n=(r,c)=>ar.bindError(e(c),u=>QN(r,u)),o=Le("val");return{extract:n,toString:o}},Kb=iE(ar.svalue),PZ=(e,n,o,r)=>to(n,o).fold(()=>QH(e,o,n),r),sP=(e,n,o,r)=>{const c=to(e,n).getOrThunk(()=>o(e));return r(c)},dV=(e,n,o)=>o(to(e,n)),au=(e,n,o,r)=>{const c=to(e,n).map(u=>u===!0?o(e):u);return r(c)},mV=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>ar.svalue(N.none()),y=>{const x=c.extract(n.concat([r]),y);return ar.map(x,N.some)});switch(e.tag){case"required":return PZ(n,o,r,u);case"defaultedThunk":return sP(o,r,e.process,u);case"option":return dV(o,r,f);case"defaultedOptionThunk":return au(o,r,e.process,f);case"mergeWithThunk":return sP(o,r,Le({}),b=>{const y=F2(e.process(o),b);return u(y)})}},fV=(e,n,o)=>{const r={},c=[];for(const u of o)oP(u,(f,b,y,x)=>{const A=mV(y,e,n,f,x);ar.fold(A,O=>{c.push(...O)},O=>{r[b]=O})},(f,b)=>{r[f]=b(n)});return c.length>0?ar.serror(c):ar.svalue(r)},lE=e=>({extract:(r,c)=>fV(r,c,e),toString:()=>`obj{
`+Ft(e,c=>oP(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),rP=e=>({extract:(r,c)=>{const u=Ft(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return iV.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),fO=e=>iE(n=>e(n).fold(ar.serror,ar.svalue)),aP=(e,n,o)=>{const r=n.extract([e],o);return ar.mapError(r,c=>({input:o,errors:c}))},gV=(e,n,o)=>ar.toResult(aP(e,n,o)),hV=e=>`Errors: 
`+JN(e.errors).join(`
`)+`

Input object: `+dO(e.input),cP=(e,n)=>mO(e,wn(n,lE)),iP=Le(Kb),I2=(e,n)=>iE(o=>{const r=typeof o;return e(o)?ar.svalue(o):ar.serror(`Expected type: ${n} but got: ${r}`)}),gO=I2(Ma,"number"),Yb=I2(K,"string"),hO=I2(en,"boolean"),pO=I2(G,"function"),L2=lV,lP=uV,pV=e=>fO(n=>Bt(e,n)?vr.value(n):vr.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),uE=(e,n)=>L2(e,e,tP(),n),bO=e=>uE(e,Yb),uP=e=>uE(e,pO),dP=(e,n)=>L2(e,e,tP(),rP(n)),vO=(e,n)=>L2(e,e,cV(),n),Xb=e=>vO(e,Yb),bV=e=>vO(e,pO),vV=(e,n)=>L2(e,e,nP(n),iP()),Jb=(e,n,o)=>L2(e,e,nP(n),o),mP=(e,n)=>Jb(e,n,gO),yV=(e,n)=>Jb(e,n,Yb),yO=(e,n,o)=>Jb(e,n,pV(o)),H2=(e,n)=>Jb(e,n,hO),dE=(e,n)=>Jb(e,n,pO),fP=(e,n,o)=>Jb(e,n,rP(o)),CV=bO("type"),wV=uP("fetch"),CO=uP("onAction"),mE=dE("onSetup",()=>pt),gP=Xb("text"),hP=Xb("icon"),SV=Xb("tooltip"),xV=Xb("label"),$Z=H2("active",!1),FZ=H2("enabled",!0),EV=H2("primary",!1),TV=e=>vV("columns",e),fE=e=>yV("type",e),kV=lE([CV,bO("trigger"),mP("minChars",1),TV(1),mP("maxResults",10),bV("matches"),wV,CO,fP("highlightOn",[],Yb)]),_V=e=>gV("Autocompleter",kV,{trigger:e.ch,...e}),pP=[FZ,SV,hP,gP,mE],bP=[$Z].concat(pP),Po=[dE("predicate",we),yO("scope","node",["node","editor"]),yO("position","selection",["node","selection","line"])],wO=pP.concat([fE("contextformbutton"),EV,CO,lP("original",Eo)]),ad=bP.concat([fE("contextformbutton"),EV,CO,lP("original",Eo)]),vP=pP.concat([fE("contextformbutton")]),yP=bP.concat([fE("contextformtogglebutton")]),OV=cP("type",{contextformbutton:wO,contextformtogglebutton:ad});lE([fE("contextform"),dE("initValue",Le("")),xV,dP("commands",OV),vO("launch",cP("type",{contextformbutton:vP,contextformtogglebutton:yP}))].concat(Po));const gE=e=>{const n=e.ui.registry.getAll().popups,o=wn(n,f=>_V(f).fold(b=>{throw new Error(hV(b))},Eo)),r=Ep(gd(o,f=>f.trigger)),c=Rm(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ft(c,b=>b.trigger===f)}},SO=(e,n)=>{const o=d0(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},CP=e=>{const n=Ds(),o=us(!1),r=n.isSet,c=()=>{r()&&(bZ(e),a_(e),o.set(!1),n.clear())},u=x=>{r()||(Cn(e,x.range),n.set({trigger:x.trigger,matchLength:x.text.length}))},f=pd(()=>gE(e)),b=x=>n.get().map(A=>cO(e.dom,e.selection.getRng(),A.trigger).bind(O=>YN(e,f,O,x))).getOrThunk(()=>KN(e,f)),y=x=>{b(x).fold(c,A=>{u(A.context),A.lookupData.then(O=>{n.get().map(B=>{const L=A.context;B.trigger===L.trigger&&(L.text.length-B.matchLength>=10?c():(n.set({...B,matchLength:L.text.length}),o.get()?Cy(e,{lookupData:O}):(o.set(!0),Eh(e,{lookupData:O}))))})})})};e.addCommand("mceAutocompleterReload",(x,A)=>{const O=Sn(A)?A.fetchOptions:{};y(O)}),e.addCommand("mceAutocompleterClose",c),SO(e,{cancelIfNecessary:c,load:y})},xO=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:pt,inputType:o},f=Gg(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},hE=xO("input"),pE=xO("beforeinput"),AV=(e,n,o)=>{const r=o.keyCode===Ke.BACKSPACE?"deleteContentBackward":"deleteContentForward";EN([{keyCode:Ke.BACKSPACE,action:Ht(aH,e)},{keyCode:Ke.BACKSPACE,action:Ht(S5,e,!1)},{keyCode:Ke.DELETE,action:Ht(S5,e,!0)},{keyCode:Ke.BACKSPACE,action:Ht(Qc,e,!1)},{keyCode:Ke.DELETE,action:Ht(Qc,e,!0)},{keyCode:Ke.BACKSPACE,action:Ht(V3,e,n,!1)},{keyCode:Ke.DELETE,action:Ht(V3,e,n,!0)},{keyCode:Ke.BACKSPACE,action:Ht(Vy,e,!1)},{keyCode:Ke.DELETE,action:Ht(Vy,e,!0)},{keyCode:Ke.BACKSPACE,action:Ht(k3,e,!1)},{keyCode:Ke.DELETE,action:Ht(k3,e,!0)},{keyCode:Ke.BACKSPACE,action:Ht(W3,e,!1)},{keyCode:Ke.DELETE,action:Ht(W3,e,!0)},{keyCode:Ke.BACKSPACE,action:Ht(S3,e,!1)},{keyCode:Ke.DELETE,action:Ht(S3,e,!0)},{keyCode:Ke.BACKSPACE,action:Ht(w3,e,!1)},{keyCode:Ke.DELETE,action:Ht(w3,e,!0)},{keyCode:Ke.BACKSPACE,action:Ht(sN,e,!1)},{keyCode:Ke.DELETE,action:Ht(sN,e,!0)}],o).filter(c=>e.selection.isEditable()).each(c=>{o.preventDefault(),pE(e,r).isDefaultPrevented()||(c(),hE(e,r))})},DV=(e,n,o)=>{const r=Fi(),c=r.os,u=r.browser,f=c.isMacOS()?[{keyCode:Ke.BACKSPACE,altKey:!0,action:Ht(k2,e)},{keyCode:Ke.DELETE,altKey:!0,action:Ht(k2,e)}]:[{keyCode:Ke.BACKSPACE,ctrlKey:!0,action:Ht(k2,e)},{keyCode:Ke.DELETE,ctrlKey:!0,action:Ht(k2,e)}];c.isMacOS()&&o&&f.push({keyCode:u.isFirefox()?224:91,action:Ht(k2,e)}),np([{keyCode:Ke.BACKSPACE,action:Ht(EL,e)},{keyCode:Ke.DELETE,action:Ht(EL,e)},...f],n)},RV=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Ke.BACKSPACE,r.isDefaultPrevented()||AV(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||DV(e,r,o),o=!1})},wP=e=>{for(;e;){if(We(e)||_e(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Qb=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=wP(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(me),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Xo(n,n);let f=n,b;for(;b=u.current();){if(_e(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else co(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Oi(e,c)},bE=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},EO=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),MV=e=>EO(e).fold(Le(""),n=>n.nodeName.toUpperCase()),BV=e=>EO(e).filter(n=>va(W.fromDom(n))).isSome(),SP=(e,n)=>e.dom.getParent(n,As),xP=(e,n,o)=>{let r=n;for(;r&&r!==e&&Q(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return As(c);r=c}return!1},NV=(e,n,o)=>!n&&o.nodeName.toLowerCase()===wo(e)&&e.dom.isEmpty(o)&&xP(e.getBody(),o,r=>kt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),PV=(e,n,o)=>{var r,c,u;const f=n(wo(e)),b=SP(e,o);b&&(e.dom.insertAfter(f,b),Qb(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},IZ=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,TO=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},EP=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ce(o)&&o.nodeName===n},TP=e=>Ce(e)&&/^(OL|UL|LI)$/.test(e.nodeName),$V=e=>Ce(e)&&/^(LI|DT|DD)$/.test(e.nodeName),kP=e=>TP(e)&&TP(e.parentNode),vE=e=>{const n=e.parentNode;return $V(n)?n:e},V2=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!We(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},FV=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;kP(o)&&(c="LI");let y=n(c);if(V2(o,r,!0)&&V2(o,r,!1))if(EP(o,"LI")){const x=vE(o);u.insertAfter(y,x),TO(o)?u.remove(x):u.remove(o)}else u.replace(y,o);else if(V2(o,r,!0))EP(o,"LI")?(u.insertAfter(y,vE(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(V2(o,r,!1))u.insertAfter(y,vE(o)),u.remove(r);else{o=vE(o);const x=f.cloneRange();x.setStartAfter(r),x.setEndAfter(o);const A=x.extractContents();c==="LI"&&IZ(A,"LI")?(y=A.firstChild,u.insertAfter(A,o)):(u.insertAfter(A,o),u.insertAfter(y,o)),u.remove(r)}Qb(e,y)},IV=e=>{be(Wv(W.fromDom(e),Ar),n=>{const o=n.dom;o.nodeValue=xl(o.data)})},LZ=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},Ur=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),kO=e=>{e.innerHTML='<br data-mce-bogus="1">'},_O=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,OO=(e,n)=>Ce(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",LV=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;We(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||Ur(e,u))&&e.remove(u)},AO=(e,n,o)=>_e(n)?e?o===1&&n.data.charAt(o-1)===er?0:o:o===n.data.length-1&&n.data.charAt(o)===er?n.data.length:o:o,HV=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,AO(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,AO(!1,e.endContainer,e.endOffset)),n},VV=e=>{let n=e;do _e(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},yE=(e,n,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(y=>{const A={...Ks(W.fromDom(n)),...y};r.setStyles(n,A)});const c=N.from(o.class).map(y=>y.split(/\s+/)),u=N.from(n.className).map(y=>ft(y.split(/\s+/),x=>x!==""));_r(c,u,(y,x)=>{const A=ft(x,B=>!Bt(y,B)),O=[...y,...A];r.setAttrib(n,"class",O.join(" "))});const f=["style","class"],b=ro(o,(y,x)=>!Bt(f,x));r.setAttribs(n,b)},z2=(e,n)=>{if(wo(e).toLowerCase()===n.tagName.toLowerCase()){const r=zu(e);yE(e,n,r)}},zV=(e,n,o,r,c)=>{var u,f;const b=e.dom,y=(u=bE(b,r))!==null&&u!==void 0?u:b.getRoot();let x=b.getParent(r,b.isBlock);if(!x||!OO(b,x)){if(x=x||y,!x.hasChildNodes()){const L=b.create(n);return z2(e,L),x.appendChild(L),o.setStart(L,0),o.setEnd(L,0),L}let A=r;for(;A&&A.parentNode!==x;)A=A.parentNode;let O;for(;A&&!b.isBlock(A);)O=A,A=A.previousSibling;const B=(f=O==null?void 0:O.parentElement)===null||f===void 0?void 0:f.nodeName;if(O&&B&&e.schema.isValidChild(B,n.toLowerCase())){const L=O.parentNode,z=b.create(n);for(z2(e,z),L.insertBefore(z,O),A=O;A&&!b.isBlock(A);){const F=A.nextSibling;z.appendChild(A),A=F}o.setStart(r,c),o.setEnd(r,c)}}return r},DO=(e,n)=>{n.normalize();const o=n.lastChild;(!o||We(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},RO=(e,n)=>{const o=Ea(e);return dn(n)?!1:K(o)?Bt(Te.explode(o),n.nodeName.toLowerCase()):o},UV={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,x=y.getNonEmptyElements(),A=e.selection.getRng(),O=wo(e),B=A.collapsed&&A.startContainer===e.dom.getRoot(),L=W.fromDom(A.startContainer),z=xu(L,A.startOffset),F=z.exists(Ie=>Li(Ie)&&!Nt(Ie)),V=B&&F,q=Ie=>{let Ye=o;const vt=y.getTextInlineElements();let yt;Ie||c==="TABLE"||c==="HR"?yt=b.create(Ie||O):yt=xe.cloneNode(!1);let rn=yt;if(th(e)===!1)b.setAttrib(yt,"style",null),b.setAttrib(yt,"class",null);else do if(vt[Ye.nodeName]){if(yc(Ye)||ja(Ye))continue;const fn=Ye.cloneNode(!1);b.setAttrib(fn,"id",""),yt.hasChildNodes()?(fn.appendChild(yt.firstChild),yt.appendChild(fn)):(rn=fn,yt.appendChild(fn))}while((Ye=Ye.parentNode)&&Ye!==tt);return z2(e,yt),kO(rn),yt},X=Ie=>{const Ye=AO(Ie,o,r);if(_e(o)&&(Ie?Ye>0:Ye<o.data.length))return!1;if(o.parentNode===xe&&f&&!Ie||Ie&&We(o)&&o===xe.firstChild)return!0;if(_O(o,"TABLE")||_O(o,"HR"))return f&&!Ie||!f&&Ie;const vt=new Xo(o,xe);_e(o)&&(Ie&&Ye===0?vt.prev():!Ie&&Ye===o.data.length&&vt.next());let yt;for(;yt=vt.current();){if(We(yt)){if(!yt.getAttribute("data-mce-bogus")){const rn=yt.nodeName.toLowerCase();if(x[rn]&&rn!=="br")return!1}}else if(_e(yt)&&!pc(yt.data))return!1;Ie?vt.prev():vt.next()}return!0},J=()=>{let Ie;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&le!=="HGROUP"?Ie=q(O):Ie=q(),RO(e,u)&&OO(b,u)&&b.isEmpty(xe,void 0,{includeZwsp:!0})?Ie=b.split(u,xe):b.insertAfter(Ie,xe),Qb(e,Ie),Ie};Gl(b,A).each(Ie=>{A.setStart(Ie.startContainer,Ie.startOffset),A.setEnd(Ie.endContainer,Ie.endOffset)}),o=A.startContainer,r=A.startOffset;const se=!!(n&&n.shiftKey),ye=!!(n&&n.ctrlKey);We(o)&&o.hasChildNodes()&&!V&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&_e(o)?r=o.data.length:r=0);const tt=bE(b,o);if(!tt||LZ(e,o))return;se||(o=zV(e,O,A,o,r));let xe=b.getParent(o,b.isBlock)||b.getRoot();u=Ce(xe==null?void 0:xe.parentNode)?b.getParent(xe.parentNode,b.isBlock):null,c=xe?xe.nodeName.toUpperCase():"";const le=u?u.nodeName.toUpperCase():"";if(le==="LI"&&!ye){const Ie=u;xe=Ie,u=Ie.parentNode,c=le}if(We(u)&&NV(e,se,xe))return PV(e,q,xe);if(/^(LI|DT|DD)$/.test(c)&&We(u)&&b.isEmpty(xe)){FV(e,q,u,xe,O);return}if(!V&&(xe===e.getBody()||!OO(b,xe)))return;const fe=xe.parentNode;let Pe;if(V)Pe=q(O),z.fold(()=>{Yo(L,W.fromDom(Pe))},Ie=>{ba(Ie,W.fromDom(Pe))}),e.selection.setCursorLocation(Pe,0);else if(Ru(xe))Pe=qv(xe),b.isEmpty(xe)&&kO(xe),z2(e,Pe),Qb(e,Pe);else if(X(!1))Pe=J();else if(X(!0)&&fe){Pe=fe.insertBefore(q(),xe);const Ie=Dv(W.fromDom(A.startContainer))&&A.collapsed;Qb(e,_O(xe,"HR")||Ie?Pe:xe)}else{const Ie=HV(A).cloneRange();Ie.setEndAfter(xe);const Ye=Ie.extractContents();IV(Ye),VV(Ye),Pe=Ye.firstChild,b.insertAfter(Ye,xe),LV(b,x,Pe),DO(b,xe),b.isEmpty(xe)&&kO(xe),Pe.normalize(),b.isEmpty(Pe)?(b.remove(Pe),J()):(z2(e,Pe),Qb(e,Pe))}b.setAttrib(Pe,"id",""),e.dispatch("NewBlock",{newBlock:Pe})},fakeEventName:"insertParagraph"},VZ=(e,n,o)=>{const r=new Xo(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||_e(c)&&c.length>0)return!0;return!1},_P=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Oi(e,r)},WV=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Gl(r,c).each(L=>{c.setStart(L.startContainer,L.startOffset),c.setEnd(L.endContainer,L.endOffset)});let b=c.startOffset,y=c.startContainer;if(We(y)&&y.hasChildNodes()){const L=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,L&&_e(y)?b=y.data.length:b=0}let x=r.getParent(y,r.isBlock);const A=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,O=A?A.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);O==="LI"&&!B&&(x=A),_e(y)&&b>=y.data.length&&(VZ(e.schema,y,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),T1(r,c,u),_P(e,u,f),e.undoManager.add()},zZ=(e,n)=>{const o=W.fromTag("br");ba(W.fromDom(n),o),e.undoManager.add()},ZV=(e,n)=>{jV(e.getBody(),n)||La(W.fromDom(n),W.fromTag("br"));const o=W.fromTag("br");La(W.fromDom(n),o),_P(e,o.dom,!1),e.undoManager.add()},cu=e=>co(e.getNode()),jV=(e,n)=>cu(ie.after(n))?!0:sr(e,ie.after(n)).map(o=>co(o.getNode())).getOr(!1),OP=e=>e&&e.nodeName==="A"&&"href"in e,lg=e=>e.fold(we,OP,OP,we),GV=e=>{const n=Ee(zr,e),o=ie.fromRangeStart(e.selection.getRng());return tu(n,e.getBody(),o).filter(lg)},AP=(e,n)=>{n.fold(pt,Ee(zZ,e),Ee(ZV,e),pt)},DP={insert:(e,n)=>{const o=GV(e);o.isSome()?o.each(Ee(AP,e)):WV(e,n)},fakeEventName:"insertLineBreak"},RP=(e,n)=>EO(e).filter(o=>n.length>0&&Xr(W.fromDom(o),n)).isSome(),qV=e=>RP(e,Ji(e)),KV=e=>RP(e,Uc(e)),ni=Si.generate([{br:[]},{block:[]},{none:[]}]),MO=(e,n)=>KV(e),BO=e=>(n,o)=>BV(n)===e,U2=(e,n)=>(o,r)=>MV(o)===e.toUpperCase()===n,YV=e=>{const n=bE(e.dom,e.selection.getStart());return dn(n)},W2=e=>U2("pre",e),XV=()=>U2("summary",!0),CE=e=>(n,o)=>mw(n)===e,JV=(e,n)=>qV(e),Z2=(e,n)=>n,QV=e=>{const n=wo(e),o=bE(e.dom,e.selection.getStart());return Ce(o)&&e.schema.isValidChild(o.nodeName,n)},MP=e=>{const n=e.selection.getRng(),o=n.collapsed&&n.startContainer===e.dom.getRoot(),r=W.fromDom(n.startContainer),u=xu(r,n.startOffset).map(f=>Li(f)&&!Nt(f));return o&&u.getOr(!0)},oi=(e,n)=>(o,r)=>Ro(e,(u,f)=>u&&f(o,r),!0)?N.some(n):N.none(),e9=(e,n)=>k5([oi([MO],ni.none()),oi([W2(!0),YV],ni.none()),oi([XV()],ni.br()),oi([W2(!0),CE(!1),Z2],ni.br()),oi([W2(!0),CE(!1)],ni.block()),oi([W2(!0),CE(!0),Z2],ni.block()),oi([W2(!0),CE(!0)],ni.br()),oi([BO(!0),Z2],ni.br()),oi([BO(!0)],ni.block()),oi([JV],ni.br()),oi([Z2],ni.br()),oi([QV],ni.block()),oi([MP],ni.block())],[e,!!(n&&n.shiftKey)]).getOr(ni.none()),wE=(e,n,o)=>{n.selection.isCollapsed()||pR(n),!(Ce(o)&&pE(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ce(o)&&hE(n,e.fakeEventName))},SE=(e,n)=>{const o=()=>wE(DP,e,n),r=()=>wE(UV,e,n),c=e9(e,n);switch(wf(e)){case"linebreak":c.fold(o,o,pt);break;case"block":c.fold(r,r,pt);break;case"invert":c.fold(r,o,pt);break;default:c.fold(o,r,pt);break}},BP=Fi(),t9=BP.os.isiOS()&&BP.browser.isSafari(),j2=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),U8(e.undoManager),e.undoManager.transact(()=>{SE(e,n)}))},n9=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(_e(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},NO=e=>{let n=N.none();const o=c=>{n=N.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(pt,f=>c.selection.moveToBookmark(f)),j2(c,u),n=N.none()};e.on("keydown",c=>{c.keyCode===Ke.ENTER&&(t9&&n9(e.selection.getRng())?o(e):j2(e,c))}),e.on("keyup",c=>{c.keyCode===Ke.ENTER&&n.each(()=>r(e,c))})},PO=(e,n,o)=>{const r=gn.os.isMacOS()||gn.os.isiOS();np([{keyCode:Ke.END,action:Ht(A2,e,!0)},{keyCode:Ke.HOME,action:Ht(A2,e,!1)},...r?[]:[{keyCode:Ke.HOME,action:Ht(eE,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ke.END,action:Ht(eE,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ke.END,action:Ht(kN,e,!0)},{keyCode:Ke.HOME,action:Ht(kN,e,!1)},{keyCode:Ke.END,action:Ht(Zx,e,!0,n)},{keyCode:Ke.HOME,action:Ht(Zx,e,!1,n)}],o).each(c=>{o.preventDefault()})},NP=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||PO(e,n,o)})},o9=e=>{e.on("input",n=>{n.isComposing||rR(e)})},ZZ=Fi(),ug=(e,n,o)=>{np([{keyCode:Ke.PAGE_UP,action:Ht(Zx,e,!1,n)},{keyCode:Ke.PAGE_DOWN,action:Ht(Zx,e,!0,n)}],o)},PP=e=>e.stopImmediatePropagation(),$P=e=>e.keyCode===Ke.PAGE_UP||e.keyCode===Ke.PAGE_DOWN,FP=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",PP,!0):!o&&e.get()&&n.off("NodeChange",PP),e.set(o)},xE=(e,n)=>{if(ZZ.os.isMacOS())return;const o=us(!1);e.on("keydown",r=>{$P(r)&&FP(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||ug(e,n,r),$P(r)&&o.get()&&(FP(o,e,!1),e.nodeChanged())})},$O=(e,n)=>{const o=n.container(),r=n.offset();return _e(o)?(o.insertData(r,e),N.some(ie(o,r+e.length))):ph(n).map(c=>{const u=W.fromText(e);return n.isAtEnd()?La(c,u):ba(c,u),ie(u.dom,e.length)})},FO=Ee($O,me),IP=Ee($O," "),LP=(e,n)=>eR(e,n)?FO(n):IP(n),s9=e=>n=>n.fold(o=>Ls(e.dom,ie.before(o)),o=>gs(o),o=>Ta(o),o=>sr(e.dom,ie.after(o))),r9=(e,n)=>o=>eR(e,o)?FO(n):IP(n),HP=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},VP=(e,n)=>e.isEditable(e.getParent(n,"summary")),IO=e=>{const n=ie.fromRangeStart(e.selection.getRng()),o=W.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ee(zr,e),c=ie.fromRangeStart(e.selection.getRng());return tu(r,e.getBody(),c).bind(s9(o)).map(u=>()=>r9(o,n)(u).each(HP(e)))}else return N.none()},a9=e=>{const n=()=>{const o=W.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=ie.fromRangeStart(e.selection.getRng());LP(o,r).each(HP(e))};return sn(gn.browser.isFirefox()&&e.selection.isEditable()&&VP(e.dom,e.selection.getRng().startContainer),n)},LO=(e,n)=>{EN([{keyCode:Ke.SPACEBAR,action:Ht(IO,e)},{keyCode:Ke.SPACEBAR,action:Ht(a9,e)}],n).each(o=>{n.preventDefault(),pE(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),hE(e,"insertText",{data:" "}))})},zP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||LO(e,n)})},EE=e=>Mk(e)?[{keyCode:Ke.TAB,action:Ht(oO,e,!0)},{keyCode:Ke.TAB,shiftKey:!0,action:Ht(oO,e,!1)}]:[],UP=(e,n)=>{np([...EE(e)],n).each(o=>{n.preventDefault()})},WP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||UP(e,n)})},c9=e=>{if(e.addShortcut("Meta+P","","mcePrint"),CP(e),kc(e))return us(null);{const n=L3(e);return gH(e),IH(e,n),RV(e,n),NO(e),zP(e),o9(e),WP(e),NP(e,n),xE(e,n),n}};class i9{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Hf(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&sm(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&sm(n)&&(n.selection.getNode().nodeName==="IMG"?Vr.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!rh(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=bo(r.dom.getParents(n,qe,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const G2=qg("image"),ZP=e=>{const n=e;return N.from(n[G2])},l9=(e,n)=>{const o=e;o[G2]=n},HO=qg("event"),jP=e=>{const n=e;return N.from(n[HO])},TE=e=>n=>{const o=n;o[HO]=e},u9=(e,n)=>TE(n)(e),GP=TE(0),d9=TE(2),m9=TE(1),g9=(e=>n=>{const o=n;return N.from(o[HO]).exists(r=>r===e)})(0),qP=()=>Object.freeze({length:0,item:e=>null}),VO=qg("mode"),h9=e=>{const n=e;return N.from(n[VO])},kE=e=>n=>{const o=n;o[VO]=e},KP=(e,n)=>kE(n)(e),YP=kE(0),dg=kE(2),p9=kE(1),XP=e=>n=>{const o=n;return N.from(o[VO]).exists(r=>r===e)},op=XP(0),JP=XP(1),b9=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(op(e))if(K(o)){if(!Ns(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{op(e)&&n.remove(o)},clear:()=>{op(e)&&n.clear()}}),v9=["none","copy","link","move"],QP=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],zO=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){Bt(v9,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){g9(r)&&Bt(QP,c)&&(o=c)},get items(){return b9(r,e.items)},get files(){return JP(r)?qP():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{op(r)&&(l9(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>JP(r)?"":e.getData(c),setData:(c,u)=>{op(r)&&e.setData(c,u)},clearData:c=>{op(r)&&e.clearData(c)}};return YP(r),r},y9=e=>{const n=zO(),o=h9(e);return dg(e),GP(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,ZP(e).each(r=>n.setDragImage(r.image,r.x,r.y)),be(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),be(e.files,r=>n.items.add(r)),jP(e).each(r=>{u9(n,r)}),o.each(r=>{KP(e,r),KP(n,r)}),n},jZ=e=>{const n=e.getData("text/html");return n===""?N.none():N.some(n)},q2=(e,n)=>e.setData("text/html",n),e$="x-tinymce/html",_E=Le(e$),UO="<!-- "+e$+" -->",C9=e=>UO+e,w9=e=>e.replace(UO,""),t$=e=>e.indexOf(UO)!==-1,S9=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),x9=(e,n)=>{let o="<"+e;const r=gd(n,(c,u)=>u+'="'+Ol.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},E9=(e,n,o)=>{const r=e.split(/\n\n/),c=x9(n,o),u="</"+n+">",f=Ft(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:Ft(f,b).join("")},n$="%MCEPASTEBIN%",T9=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n$);gn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},k9=(e,n)=>{const o=e.dom;if(WO(e)){let r;const c=n.get();for(;r=WO(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},WO=e=>e.dom.get("mcepastebin"),Ln=e=>Ce(e)&&e.id==="mcepastebin",_9=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=ft(e.getBody().childNodes,Ln);be(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},ZO=e=>e===n$,O9=e=>{const n=us(null);return{create:()=>T9(e,n),remove:()=>k9(e,n),getEl:()=>WO(e),getHtml:()=>_9(e),getLastRng:n.get}},OE=(e,n)=>(Te.each(n,o=>{gu(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),o$=e=>{const n=yi(),o=Vb({},n);let r="";const c=n.getVoidElements(),u=Te.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const x=y.name,A=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let O=y.firstChild;if(O)do b(O);while(O=O.next)}f[x]&&A.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=OE(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},jO=e=>(e=OE(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":me],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),A9=e=>{let n=0;return()=>e+n++},s$=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Te.hasOwn(o,n)?"image/"+o[n]:"image/"+n},D9=(e,n)=>{const o=Vb({sanitize:z1(e)},e.schema);o.addNodeFilter("meta",c=>{Te.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Zf({validate:!0},e.schema).serialize(r)},r$=(e,n)=>({content:e,cancelled:n}),a$=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=ns(e,r,o);return r$(c.node.innerHTML,c.isDefaultPrevented())},R9=(e,n,o)=>{const r=Zo(e,n,o),c=D9(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?a$(e,c,o):r$(c,r.isDefaultPrevented())},M9=(e,n,o)=>R9(e,n,o),GO=(e,n)=>(e.insertContent(n,{merge:F0(e),paste:!0}),!0),mg=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),K2=(e,n)=>mg(n)&&mo(ih(e),o=>pl(n.toLowerCase(),`.${o.toLowerCase()}`)),B9=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),N9=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),ev=(e,n,o)=>!e.selection.isCollapsed()&&mg(n)?N9(e,n,o):!1,P9=(e,n,o)=>K2(e,n)?B9(e,n,o):!1,qO=(e,n)=>{Te.each([ev,P9,GO],o=>!o(e,n,GO))},KO=(e,n,o)=>{o||!Tw(e)?GO(e,n):qO(e,n)},c$=A9("mceclip"),$9=e=>{const n=zO();return q2(n,e),dg(n),n},i$=(e,n,o,r,c)=>{const u=M9(e,n,o);if(!u.cancelled){const f=u.content,b=()=>KO(e,f,r);c?pE(e,"insertFromPaste",{dataTransfer:$9(f)}).isDefaultPrevented()||(b(),hE(e,"insertFromPaste")):b()}},Y2=(e,n,o,r)=>{const c=o||t$(n);i$(e,w9(n),c,!1,r)},AE=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Co(r,kw(e)),u=E9(c,wo(e),zu(e));i$(e,u,!1,!0,o)},l$=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},fg=(e,n)=>n in e&&e[n].length>0,u$=e=>fg(e,"text/html")||fg(e,"text/plain"),d$=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ce(o)?e.dom.encode(o[1]):void 0},F9=(e,n,o,r)=>{const c=c$(),u=D0(e)&&Ce(o.name),f=u?d$(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},m$=(e,n)=>{S4(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),x=y??F9(e,b,f,u);Y2(e,`<img src="${x.blobUri()}">`,!1,!0)})},I9=e=>e.type==="paste",L9=e=>Promise.all(Ft(e,n=>MM(n).then(o=>({file:n,uri:o})))),H9=e=>{const n=ih(e);return o=>_s(o.type,"image/")&&mo(n,r=>s$(r)===o.type)},V9=(e,n)=>{const o=n.items?Pi(kr(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?kr(n.files):[];return ft(o.length>0?o:r,H9(e))},f$=(e,n,o)=>{const r=I9(n)?n.clipboardData:n.dataTransfer;if(vc(e)&&r){const c=V9(e,r);if(c.length>0)return n.preventDefault(),L9(c).then(u=>{o&&e.selection.setRng(o),be(u,f=>{m$(e,f)})}),!0}return!1},DE=e=>{var n,o;return gn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},z9=e=>Ke.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,RE=(e,n,o,r,c)=>{let u=jO(o);const f=fg(n,_E())||t$(o),b=!f&&S9(u),y=mg(u);(ZO(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(fg(n,"text/plain")&&b?u=n["text/plain"]:u=o$(u)),!ZO(u)&&(r?AE(e,u,c):Y2(e,u,f,c))},U9=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{z9(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||DE(u))return;const f=o.get()==="text"||r;r=!1;const b=l$(u.clipboardData);!u$(b)&&f$(e,u,c())||(fg(b,"text/html")?(u.preventDefault(),RE(e,b,b["text/html"],f,!0)):fg(b,"text/plain")&&fg(b,"text/uri-list")?(u.preventDefault(),RE(e,b,b["text/plain"],f,!0)):(n.create(),Vr.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),RE(e,b,y,f,!1)},0)))})},W9=e=>{const n=c=>_s(c,"webkit-fake-url"),o=c=>_s(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!vc(e)&&r(f))for(const b of c){const y=b.attr("src");K(y)&&!b.attr("data-mce-object")&&y!==gn.transparentSrc&&(n(y)||!Ek(e)&&o(y))&&b.remove()}})},Z9=(e,n,o)=>{U9(e,n,o),W9(e)},j9=(e,n)=>{n.get()==="text"?(n.set("html"),im(e,!1)):(n.set("text"),im(e,!0)),e.focus()},G9=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{j9(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&Y2(e,r.html,r.internal,!1),r.text&&AE(e,r.text,!1)})},q9=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(_E(),n),!0}catch{return!1}else return!1},YO=(e,n,o,r)=>{q9(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},g$=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),Vr.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},h$=e=>({html:C9(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),K9=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),p$=e=>!e.selection.isCollapsed()||K9(e),Y9=e=>n=>{!n.isDefaultPrevented()&&p$(e)&&YO(n,h$(e),g$(e),()=>{if(gn.browser.isChromium()||gn.browser.isFirefox()){const o=e.selection.getRng();Vr.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},X9=e=>n=>{!n.isDefaultPrevented()&&p$(e)&&YO(n,h$(e),g$(e),pt)},J9=e=>{e.on("cut",Y9(e)),e.on("copy",X9(e))},XO=(e,n)=>{var o,r;return Wt.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},Q9=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},b$=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},ez=e=>mo(e.files,n=>/^image\//.test(n.type)),tz=(e,n,o,r)=>{const c=e.getParent(o,u=>Nu(n,u));if(c&&kt(r,"text/html")){const u=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!Q(u.querySelector(c.nodeName.toLowerCase()))}else return!1},nz=(e,n)=>{xw(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),vc(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&ez(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=XO(e,o);if(dn(r))return;const c=l$(o.dataTransfer),u=fg(c,_E());if((!u$(c)||Q9(c))&&f$(e,o,r))return;const f=c[_E()],b=f||c["text/html"]||c["text/plain"],y=tz(e.dom,e.schema,r.startContainer,c);n.get()&&!y||b&&(o.preventDefault(),Vr.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),b$(e,r);const x=jO(b);c["text/html"]?Y2(e,x,u,!0):AE(e,x,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{vc(e)&&!n.get()&&(o.preventDefault(),b$(e,XO(e,o))),o.type==="dragend"&&n.set(!1)})},oz=e=>{const n=c=>u=>{c(e,u)},o=V1(e);G(o)&&e.on("PastePreProcess",n(o));const r=Ew(e);G(r)&&e.on("PastePostProcess",n(r))},sz=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},ME=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,JO=e=>Te.trim(e).replace(ME,om).toLowerCase(),rz=(e,n,o)=>{const r=qd(e);if(o||r==="all"||!ch(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,x,A)=>{const O=u.parseStyle(u.decode(x)),B={};for(let z=0;z<c.length;z++){const F=O[c[z]];let V=F,q=u.getStyle(f,c[z],!0);/color/.test(c[z])&&(V=JO(V),q=JO(q)),q!==V&&(B[c[z]]=F)}const L=u.serializeStyle(B,"span");return L?y+' style="'+L+'"'+A:y+A})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},v$=e=>{(gn.browser.isChromium()||gn.browser.isSafari())&&sz(e,rz)},y$=e=>{const n=us(!1),o=us(xk(e)?"text":"html"),r=O9(e);v$(e),G9(e,o),oz(e),e.on("PreInit",()=>{J9(e),nz(e,n),Z9(e,r,o)})},QO=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},az=e=>{e.parser.addNodeFilter("details",n=>{const o=lh(e);be(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=uh(e);be(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},eA=e=>Du(W.fromDom(e)),C$=(e,n)=>{const o=n.getNode();Ns(o)||e.selection.setCursorLocation(o,n.offset())},tA=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},w$=Fi(),S$=w$.browser,x$=w$.os,cz=S$.isSafari(),E$=x$.isMacOS()||x$.isiOS(),X2=(e,n)=>gs(n).exists(o=>o.isEqual(e)),iz=(e,n)=>Ta(n).exists(o=>co(o.getNode())&&Ls(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),lz=(e,n)=>{const o=N.from(e.getParent(n.startContainer,"details")),r=N.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>N.from(e.select("summary",u)[0]));return N.some({startSummary:c,startDetails:o,endDetails:r})}else return N.none()},T$=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(y=>n.endDetails.forall(x=>y!==x));return(c||u)&&!(c&&u)||f},uz=(e,n)=>n.startSummary.exists(o=>X2(e,o)),dz=(e,n)=>n.startSummary.exists(o=>iz(e,o)),mz=(e,n)=>n.startDetails.exists(o=>Ls(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),fz=(e,n,o)=>o.startDetails.exists(r=>sr(e,n).forall(c=>!r.contains(c.container()))),nA=(e,n)=>Ce(e.getParent(n.container(),"details")),J2=(e,n)=>{const o=e.dom.getParent(n.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&Ta(r).each(c=>C$(e,c))}else C$(e,n)},k$=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();if(e.selection.isCollapsed()){const u=ie.fromRangeStart(r.getRng()),f=o.getParent(u.container(),o.isBlock);if(f&&o.isEmpty(f)){if(Q(f.nextSibling)){const b=Ls(c,u).filter(y=>nA(o,y));if(b.isSome())return b.each(y=>{n||J2(e,y)}),!0}else if(Q(f.previousSibling)&&sr(c,u).filter(y=>nA(o,y)))return!0}return q0(n,c,u).fold(we,b=>nA(o,b)?(f&&o.isEmpty(f)&&e.dom.remove(f),n||J2(e,b),!0):!1)}else return!1},_$=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=o.keyCode===Ke.BACKSPACE,b=o.keyCode===Ke.DELETE,y=e.selection.isCollapsed(),x=ie.fromRangeStart(u),A=e.getBody();return!y&&T$(u,n)||y&&f&&uz(x,n)||y&&b&&dz(x,n)||y&&f&&mz(x,n)||y&&b&&fz(A,x,n)?!0:cz&&Rr(c)?(!y&&tA(u,c)||wb(b,x,c)?eA(c):e.undoManager.transact(()=>{const O=r.getSel();let{anchorNode:B,anchorOffset:L,focusNode:z,focusOffset:F}=O??{};const V=()=>{Ce(B)&&Ce(L)&&Ce(z)&&Ce(F)&&(O==null||O.setBaseAndExtent(B,L,z,F))},q=()=>{B=O==null?void 0:O.anchorNode,L=O==null?void 0:O.anchorOffset,z=O==null?void 0:O.focusNode,F=O==null?void 0:O.focusOffset},X=(se,ye)=>{be(se.childNodes,tt=>{yh(tt)&&ye.appendChild(tt)})},J=e.dom.create("span",{"data-mce-bogus":"all"});X(c,J),c.appendChild(J),V(),y&&(E$&&(o.altKey||f&&o.metaKey)||!E$&&o.ctrlKey)&&(O==null||O.modify("extend",f?"left":"right",o.metaKey?"line":"word")),!r.isCollapsed()&&tA(r.getRng(),J)?eA(c):(e.execCommand(f?"Delete":"ForwardDelete"),q(),X(J,c),V()),e.dom.remove(J)}),!0):!1},gz=e=>{e.on("keydown",n=>{(n.keyCode===Ke.BACKSPACE||n.keyCode===Ke.DELETE)&&lz(e.dom,e.selection.getRng()).fold(()=>{k$(e,n.keyCode===Ke.DELETE)&&n.preventDefault()},o=>{_$(e,o,n)&&n.preventDefault()})})},hz=e=>{QO(e),az(e),gz(e)},pz=co,bz=_e,vz=e=>vn(e.dom),oA=e=>kn(e.dom),BE=e=>n=>En(W.fromDom(e),n),NE=(e,n)=>ic(W.fromDom(e),o=>oA(o)||Bo(o),BE(n)).getOr(W.fromDom(n)).dom,O$=(e,n)=>ic(W.fromDom(e),vz,BE(n)),A$=(e,n,o)=>{const r=new Xo(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!pz(f);f=c())Ca(f)&&(u=f);return u},D$=(e,n)=>{const r=ie.fromRangeStart(e).getNode(),c=NE(r,n),u=A$(r,c,!1),f=A$(r,c,!0),b=document.createRange();return O$(u,c).fold(()=>{bz(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),O$(f,c).fold(()=>{bz(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},yz=e=>{const n=D$(e.selection.getRng(),e.getBody());e.selection.setRng(Zy(n))},sA=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),yz(e))})};var sp;(function(e){e.Before="before",e.After="after"})(sp||(sp={}));const Cz=(e,n)=>Math.abs(e.left-n),wz=(e,n)=>Math.abs(e.right-n),R$=(e,n)=>e>=n.top&&e<=n.bottom,Sz=(e,n)=>e.top<n.bottom&&e.bottom>n.top,GZ=(e,n)=>{const o=Nl(e,n)/Math.min(e.height,n.height);return Sz(e,n)&&o>.5},xz=(e,n)=>{const o=ft(e,r=>R$(n,r));return QC(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=Er(e,f=>GZ(f,r));return[c,u]})},Ez=(e,n)=>({node:e.node,position:Cz(e,n)<wz(e,n)?sp.Before:sp.After}),Tz=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),PE=(e,n,o)=>{const r=A=>Ca(A.node)?N.some(A):We(A.node)?PE(kr(A.node.childNodes),n,o):N.none(),c=(A,O)=>{if(A.length>=2){const B=r(A[0]).getOr(A[0]),L=r(A[1]).getOr(A[1]);if(Math.abs(O(B,n,o)-O(L,n,o))<2){if(_e(B.node))return N.some(B);if(_e(L.node))return N.some(L)}}return N.none()},u=(A,O)=>{const B=vo(A,(L,z)=>O(L,n,o)-O(z,n,o));return c(B,O).orThunk(()=>md(B,r))},[f,b]=xz(Vx(e),o),{pass:y,fail:x}=Er(b,A=>A.top<o);return u(f,Tz).orThunk(()=>u(x,p0)).orThunk(()=>u(y,p0))},kz=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>We(x)&&x.classList.contains("mce-drag-container"),y=ft(u.dom.childNodes,Io(b));return f.fold(()=>PE(y,o,r),x=>{const A=ft(y,O=>O!==x.dom);return PE(A,o,r)}).orThunk(()=>(En(u,e)?N.none():Fp(u)).bind(A=>c(A,N.some(u))))};return c(n,N.none())},M$=(e,n,o)=>{const r=W.fromDom(e),c=vl(r),f=W.fromPoint(c,n,o).filter(b=>mi(r,b)).getOr(r);return kz(r,f,n,o)},B$=(e,n,o)=>M$(e,n,o).filter(r=>Qi(r.node)).map(r=>Ez(r,n)),N$=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},_z=e=>e.inline?N$(e.getBody()):{left:0,top:0},Oz=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Az=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},P$=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=N$(e.getContentAreaContainer()),r=Az(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},qZ=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Dz=(e,n)=>qZ(_z(e),Oz(e),P$(e,n)),rA=e=>({target:e,srcElement:e}),Rz=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...rA(o)}),aA=(e,n,o)=>{const r=Ba("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:pt,stopImmediatePropagation:pt,stopPropagation:pt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...rA(n)}},Mz=(e,n)=>{const o=y9(e);return n==="dragstart"?(GP(o),YP(o)):n==="drop"?(d9(o),dg(o)):(m9(o),p9(o)),o},Bz=(e,n,o,r)=>{const c=Mz(o,e);return Ns(r)?aA(e,n,c):Rz(e,r,n,c)},$E=32,$$=100,rp=8,Q2=16,cA=vn,Nz=jT(cA,kn),Pz=(e,n,o)=>cA(o)&&o!==n&&e.isEditable(o.parentElement),F$=(e,n,o)=>dn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),$z=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},Fz=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},FE=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},IE=FE("left",-$E),I$=FE("left",$E),L$=FE("top",-$E),H$=FE("top",$E),Iz=(e,n,o,r,c,u,f,b,y,x,A,O)=>{let B=0,L=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(B=n.pageX+o-c),n.pageY+r>u&&(L=n.pageY+r-u),e.style.width=o-B+"px",e.style.height=r-L+"px";const z=y.clientHeight,F=y.clientWidth,V=f+y.getBoundingClientRect().top,q=b+y.getBoundingClientRect().left;A.on(X=>{X.intervalId.clear(),X.dragging&&O&&(f+rp>=z?X.intervalId.set(H$(x)):f-rp<=0?X.intervalId.set(L$(x)):b+rp>=F?X.intervalId.set(I$(x)):b-rp<=0?X.intervalId.set(IE(x)):V+Q2>=window.innerHeight?X.intervalId.set(H$(window)):V-Q2<=0?X.intervalId.set(L$(window)):q+Q2>=window.innerWidth?X.intervalId.set(I$(window)):q-Q2<=0&&X.intervalId.set(IE(window)))})},V$=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Lz=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);V$(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Du(W.fromDom(o))},z$=e=>e.button===0,U$=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),iA=(e,n)=>o=>{if(z$(o)){const r=Ho(n.dom.getParents(o.target),Nz).getOr(null);if(Ce(r)&&Pz(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:zO(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:$z(n,r,r.offsetWidth,r.offsetHeight),intervalId:Ki($$)})}}},lA=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),B$(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===sp.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},eC=(e,n,o,r,c)=>{n==="dragstart"&&q2(r,e.dom.getOuterHTML(o));const u=Bz(n,o,r,c);return e.dispatch(n,u)},uA=(e,n)=>{const o=Rl((c,u)=>lA(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=eC(n,"dragstart",u.element,u.dataTransfer,c);if(Ce(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=U$(u,Dz(n,c));Fz(u.ghost,n.getBody()),Iz(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Hz=e=>{const n=e.getSel();if(Ce(n)){const r=n.getRangeAt(0).startContainer;return _e(r)?r.parentNode:r}else return null},Vz=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(F$(n,Hz(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();eC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{Lz(n.dom,r.element),jZ(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}eC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),W$(e)},dA=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>eC(n,"dragend",r.element,r.dataTransfer),c=>eC(n,"dragend",r.element,r.dataTransfer,c))}),W$(e)},zz=(e,n)=>o=>dA(e,n,N.some(o)),W$=e=>{e.on(n=>{n.intervalId.clear(),V$(n.ghost)}),e.clear()},Uz=e=>{const n=Ds(),o=Dn.DOM,r=document,c=iA(n,e),u=uA(n,e),f=Vz(n,e),b=zz(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===Ke.ESC&&dA(n,e,N.none())})},Wz=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Bt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&h2(e,"Dropped file type is not supported"))}},o=c=>{Ry(e,c.target)&&n(c)},r=()=>{const c=Dn.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];be(y,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{be(y,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{Vr.setEditorTimeout(e,r,0)})},Zz=e=>{Uz(e),Sw(e)&&Wz(e)},jz=e=>{const n=Rl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=x3(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},Gz=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Uo(o)){const r=qf(e.getBody(),o),c=vn(r)?r:o;e.selection.getNode()!==c&&v2(e,c).each(u=>e.selection.setRng(u))}})})},tv=vn,Z$=(e,n)=>qf(e.getBody(),n),mA=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=Pw(e,r,o.isBlock,()=>Bh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=xe=>Ce(xe)&&o.hasClass(xe,"mce-offscreen-selection"),x=xe=>xe!==r&&(tv(xe)||Uo(xe))&&o.isChildOf(xe,r)&&o.isEditable(xe.parentNode),A=xe=>{xe&&n.setRng(xe)},O=(xe,le,fe,Pe=!0)=>e.dispatch("ShowCaret",{target:le,direction:xe,before:fe}).isDefaultPrevented()?null:(Pe&&n.scrollIntoView(le,xe===-1),c.show(fe,le)),B=xe=>{xe.hasAttribute("data-mce-caret")&&(qv(xe),n.scrollIntoView(xe))},L=()=>{e.on("click",le=>{o.isEditable(le.target)||(le.preventDefault(),e.focus())}),e.on("blur NewBlock",se),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",le=>{const fe=le.target,Pe=Z$(e,fe);tv(Pe)?(le.preventDefault(),v2(e,Pe).each(J)):x(fe)&&v2(e,fe).each(J)},!0),e.on("mousedown",le=>{const fe=le.target;if(fe!==r&&fe.nodeName!=="HTML"&&!o.isChildOf(fe,r)||!Xh(e,le.clientX,le.clientY))return;se(),tt();const Pe=Z$(e,fe);tv(Pe)?(le.preventDefault(),v2(e,Pe).each(J)):B$(r,le.clientX,le.clientY).each(Ie=>{le.preventDefault();const Ye=O(1,Ie.node,Ie.position===sp.Before,!1);A(Ye),We(Pe)?Pe.focus():e.getBody().focus()})}),e.on("keypress",le=>{Ke.modifierPressed(le)||tv(n.getNode())&&le.preventDefault()}),e.on("GetSelectionRange",le=>{let fe=le.range;if(b){if(!b.parentNode){b=null;return}fe=fe.cloneRange(),fe.selectNode(b),le.range=fe}}),e.on("SetSelectionRange",le=>{le.range=V(le.range);const fe=J(le.range,le.forward);fe&&(le.range=fe)});const xe=le=>We(le)&&le.id==="mcepastebin";e.on("AfterSetSelectionRange",le=>{const fe=le.range,Pe=fe.startContainer.parentElement;!F(fe)&&!xe(Pe)&&tt(),y(Pe)||se()}),Zz(e),jz(e),Gz(e)},z=xe=>hc(xe)||Ui(xe)||$g(xe),F=xe=>z(xe.startContainer)||z(xe.endContainer),V=xe=>{const le=e.schema.getVoidElements(),fe=o.createRng(),Pe=xe.startContainer,Ie=xe.startOffset,Ye=xe.endContainer,vt=xe.endOffset;return kt(le,Pe.nodeName.toLowerCase())?Ie===0?fe.setStartBefore(Pe):fe.setStartAfter(Pe):fe.setStart(Pe,Ie),kt(le,Ye.nodeName.toLowerCase())?vt===0?fe.setEndBefore(Ye):fe.setEndAfter(Ye):fe.setEnd(Ye,vt),fe},q=(xe,le)=>{const fe=W.fromDom(e.getBody()),Pe=e.getDoc(),Ie=_d(fe,"#"+u).getOrThunk(()=>{const yt=W.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Pe);return qo(yt,"id",u),Yo(fe,yt),yt}),Ye=o.createRng();Eu(Ie),Vn(Ie,[W.fromText(me,Pe),W.fromDom(le),W.fromText(me,Pe)]),Ye.setStart(Ie.dom.firstChild,1),Ye.setEnd(Ie.dom.lastChild,0),Vp(Ie,{top:o.getPos(xe,e.getBody()).y+"px"}),Rh(Ie);const vt=n.getSel();return vt&&(vt.removeAllRanges(),vt.addRange(Ye)),Ye},X=xe=>{const le=xe.cloneNode(!0),fe=e.dispatch("ObjectSelected",{target:xe,targetClone:le});if(fe.isDefaultPrevented())return null;const Pe=q(xe,fe.targetClone),Ie=W.fromDom(xe);return be(Ys(W.fromDom(e.getBody()),`*[${f}]`),Ye=>{En(Ie,Ye)||Ko(Ye,f)}),o.getAttrib(xe,f)||xe.setAttribute(f,"1"),b=xe,tt(),Pe},J=(xe,le)=>{if(!xe)return null;if(xe.collapsed){if(!F(xe)){const Ye=le?1:-1,vt=Yd(Ye,r,xe),yt=vt.getNode(!le);if(Ce(yt)){if(Qi(yt))return O(Ye,yt,le?!vt.isAtEnd():!1,!1);if(El(yt)&&vn(yt.nextSibling)){const fn=o.createRng();return fn.setStart(yt,0),fn.setEnd(yt,0),fn}}const rn=vt.getNode(le);if(Ce(rn)){if(Qi(rn))return O(Ye,rn,le?!1:!vt.isAtEnd(),!1);if(El(rn)&&vn(rn.previousSibling)){const fn=o.createRng();return fn.setStart(rn,1),fn.setEnd(rn,1),fn}}}return null}let fe=xe.startContainer,Pe=xe.startOffset;const Ie=xe.endOffset;if(_e(fe)&&Pe===0&&tv(fe.parentNode)&&(fe=fe.parentNode,Pe=o.nodeIndex(fe),fe=fe.parentNode),!We(fe))return null;if(Ie===Pe+1&&fe===xe.endContainer){const Ye=fe.childNodes[Pe];if(x(Ye))return X(Ye)}return null},se=()=>{b&&b.removeAttribute(f),_d(W.fromDom(e.getBody()),"#"+u).each(Tn),b=null},ye=()=>{c.destroy(),b=null},tt=()=>{c.hide()};return kc(e)||L(),{showCaret:O,showBlockCaretContainer:B,hideFakeCaret:tt,destroy:ye}},qz=(e,n)=>{let o=n;for(let r=e.previousSibling;_e(r);r=r.previousSibling)o+=r.data.length;return o},j$=(e,n,o,r,c)=>{if(_e(o)&&(r<0||r>o.data.length))return[];const u=c&&_e(o)?[qz(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},fA=(e,n,o,r,c,u,f=!1)=>{const b=j$(e,n,o,r,f),y=j$(e,n,c,u,f);return{start:b,end:y}},G$=(e,n)=>{const o=n.slice(),r=o.pop();return Ma(r)?Ro(o,(u,f)=>u.bind(b=>N.from(b.childNodes[f])),N.some(e)).bind(u=>_e(u)&&(r<0||r>u.data.length)?N.none():N.some({node:u,offset:r})):N.none()},q$=(e,n)=>G$(e,n.start).bind(({node:o,offset:r})=>G$(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),Kz=(e,n,o,r=!1)=>fA(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),km=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),km(e,r,o)}},LE=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(_e(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),_e(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),km(e,c,o),c!==u&&km(e,u,o))},gA=(e,n)=>N.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),K$=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:R1(r).concat(e.blockPatterns),inlinePatterns:M1(r).concat(e.inlinePatterns)}},Y$=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},Yz=e=>/^\s[^\s]/.test(e),X$=(e,n,o)=>{WN(n,0,n).each(c=>{const u=c.container;aO(u,o.start.length,n).each(y=>{const x=e.createRng();x.setStart(u,0),x.setEnd(y.container,y.offset),LE(e,x,A=>A===n)});const f=W.fromDom(u),b=jp(f);Yz(b)&&AT(f,b.slice(1))})},Xz=(e,n)=>{const o=e.dom,r=n.pattern,c=q$(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return On(y)&&Tr(y).exists(x=>kt(x,"block"))};return gA(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{X$(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{X$(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},Jz=e=>vo(e,(n,o)=>o.start.length-n.start.length),Qz=(e,n)=>{const o=Jz(e),r=n.replace(me," ");return Ho(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},J$=(e,n,o,r)=>{var c;const u=e.dom,f=wo(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return Qz(o.blockPatterns,b).map(y=>Te.trim(b).length===y.start.length?[]:[{pattern:y,range:fA(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},eU=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();be(n,r=>Xz(e,r)),e.selection.moveToBookmark(o)},hA=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),HE=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},Q$=(e,n,o)=>{const r=q$(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(hA(e,n+"-end"),f),start:y.insertBefore(hA(e,n+"-start"),b)}},pA=(e,n,o)=>{km(e,e.get(n.prefix+"-end"),o),km(e,e.get(n.prefix+"-start"),o)},ap=e=>e.start.length===0,tU=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},bA=(e,n,o,r)=>{const c=n.start;return aE(e,r.container,r.offset,tU(c),o).bind(f=>{var b,y;const x=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(x!==-1&&f.offset>=x+c.length){const O=e.createRng();return O.setStart(f.container,f.offset-c.length),O.setEnd(f.container,f.offset),N.some(O)}else{const O=f.offset-c.length;return rO(f.container,O,o).map(B=>{const L=e.createRng();return L.setStart(B.container,B.offset),L.setEnd(f.container,f.offset),L}).filter(B=>B.toString()===c).orThunk(()=>bA(e,n,o,ou(f.container,0)))}})},nU=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),N.some(f)}return sO(o,r,c).bind(f=>bA(e,n,c,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return N.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return N.none()}return N.some(y)}))},oU=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return rO(b,y-o.pattern.end.length,n).bind(x=>{const A=fA(c,u,x.container,x.offset,b,y,r);if(ap(f))return N.some({matches:[{pattern:f,startRng:A,endRng:A}],position:x});{const O=VE(e,o.remainingPatterns,x.container,x.offset,n,r),B=O.getOr({matches:[],position:x}),L=B.position;return nU(c,f,L.container,L.offset,n,O.isNone()).map(F=>{const V=Kz(c,u,F,r);return{matches:B.matches.concat([{pattern:f,startRng:V,endRng:A}]),position:ou(F.startContainer,F.startOffset)}})}})},VE=(e,n,o,r,c,u)=>{const f=e.dom;return sO(o,r,f.getRoot()).bind(b=>{const y=Y$(f,c,o,r);for(let x=0;x<n.length;x++){const A=n[x];if(!pl(y,A.end))continue;const O=n.slice();O.splice(x,1);const B=oU(e,c,{pattern:A,remainingPatterns:O,position:b},u);if(B.isNone()&&r>0)return VE(e,n,o,r-1,c,u);if(B.isSome())return B}return N.none()})},e6=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?be(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},t6=(e,n,o,r)=>{const c=HE(e.dom,o);LE(e.dom,c,r),e6(e,n,c)},sU=(e,n,o,r,c)=>{const u=e.dom,f=HE(u,r),b=HE(u,o);LE(u,b,c),LE(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},x=HE(u,y);e6(e,n,x)},n6=(e,n)=>{const o=qg("mce_textpattern"),r=dd(n,(c,u)=>{const f=Q$(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return dd(r,(c,u)=>{const f=r.length-c.length-1,b=ap(u.pattern)?u.endMarker:Q$(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},rU=e=>vo(e,(n,o)=>o.end.length-n.end.length),aU=(e,n)=>{const o=Ws(e,r=>mo(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},o6=(e,n,o,r,c,u)=>{const f=VE(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=VE(e,rU(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return aU(f,b)},s6=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=n6(o,n);be(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;ap(u.pattern)?t6(e,u.pattern,u.endMarker,b):sU(e,u.pattern,u.startMarker,u.endMarker,b),pA(o,u.endMarker,b),pA(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},cU=(e,n)=>{const o=e.selection.getRng();return gA(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=K$(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=o6(e,r,o.startContainer,u,f,!0),y=J$(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(wl),s6(e,b),eU(e,y);const x=e.selection.getRng(),A=sO(x.startContainer,x.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),A.each(O=>{const B=O.container;B.data.charAt(O.offset-1)===wl&&(B.deleteData(O.offset-1,1),km(e.dom,B.parentNode,L=>L===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},iU=(e,n)=>{const o=e.selection.getRng();gA(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=Y$(e.dom,r,o.startContainer,c),f=K$(n,r,u),b=o6(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{s6(e,b)})})},r6=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},lU=(e,n)=>r6(e,n,(o,r)=>o===r.keyCode&&!Ke.modifierPressed(r)),uU=(e,n)=>r6(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),a6=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>aD(Tk(e),_w(e)),c=()=>Aw(e);e.on("keydown",f=>{if(f.keyCode===13&&!Ke.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&cU(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&iU(e,f)}};e.on("keyup",f=>{lU(o,f)&&u()}),e.on("keypress",f=>{uU(n,f)&&Vr.setEditorTimeout(e,u)})},vA=e=>{a6(e)},c6=e=>{const n=Te.each,o=Ke.BACKSPACE,r=Ke.DELETE,c=e.dom,u=e.selection,f=e.parser,b=gn.browser,y=b.isFirefox(),x=b.isChromium()||b.isSafari(),A=gn.deviceType.isiPhone()||gn.deviceType.isiPad(),O=gn.os.isMacOS()||gn.os.isiOS(),B=(nt,rt)=>{try{e.getDoc().execCommand(nt,!1,String(rt))}catch{}},L=nt=>nt.isDefaultPrevented(),z=()=>{const nt=Ae=>{const wt=c.create("body"),Mt=Ae.cloneContents();return wt.appendChild(Mt),u.serializer.serialize(wt,{format:"html"})},rt=Ae=>{const wt=nt(Ae),Mt=c.createRng();Mt.selectNode(e.getBody());const an=nt(Mt);return wt===an};e.on("keydown",Ae=>{const wt=Ae.keyCode;if(!L(Ae)&&(wt===r||wt===o)&&e.selection.isEditable()){const Mt=e.selection.isCollapsed(),an=e.getBody();if(Mt&&!c.isEmpty(an)||!Mt&&!rt(e.selection.getRng()))return;Ae.preventDefault(),e.setContent(""),an.firstChild&&c.isBlock(an.firstChild)?e.selection.setCursorLocation(an.firstChild,0):e.selection.setCursorLocation(an,0),e.nodeChanged()}})},F=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},V=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",nt=>{let rt;if(nt.target===e.getDoc().documentElement)if(rt=u.getRng(),e.getBody().focus(),nt.type==="mousedown"){if(hc(rt.startContainer))return;u.placeCaretAt(nt.clientX,nt.clientY)}else u.setRng(rt)})},q=()=>{e.on("keydown",nt=>{if(!L(nt)&&nt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const rt=u.getNode(),Ae=rt.previousSibling;if(rt.nodeName==="HR"){c.remove(rt),nt.preventDefault();return}Ae&&Ae.nodeName&&Ae.nodeName.toLowerCase()==="hr"&&(c.remove(Ae),nt.preventDefault())}}})},X=()=>{Range.prototype.getClientRects||e.on("mousedown",nt=>{if(!L(nt)&&nt.target.nodeName==="HTML"){const rt=e.getBody();rt.blur(),Vr.setEditorTimeout(e,()=>{rt.focus()})}})},J=()=>{const nt=ah(e);e.on("click",rt=>{const Ae=rt.target;/^(IMG|HR)$/.test(Ae.nodeName)&&c.isEditable(Ae.parentNode)&&(rt.preventDefault(),e.selection.select(Ae),e.nodeChanged()),Ae.nodeName==="A"&&c.hasClass(Ae,nt)&&Ae.childNodes.length===0&&c.isEditable(Ae.parentNode)&&(rt.preventDefault(),u.select(Ae))})},se=()=>{const nt=()=>{const Ae=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const wt=u.getStart();wt!==e.getBody()&&(c.setAttrib(wt,"style",null),n(Ae,Mt=>{wt.setAttributeNode(Mt.cloneNode(!0))}))}},rt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Ae=>{let wt;return!L(Ae)&&(Ae.keyCode===8||Ae.keyCode===46)&&rt()?(wt=nt(),e.getDoc().execCommand("delete",!1),wt(),Ae.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Ae=>{if(!L(Ae)&&rt()){const wt=nt();Vr.setEditorTimeout(e,()=>{wt()})}})},ye=()=>{e.on("keydown",nt=>{if(!L(nt)&&nt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const rt=u.getNode().previousSibling;if(rt&&rt.nodeName&&rt.nodeName.toLowerCase()==="table")return nt.preventDefault(),!1}return!0})},tt=()=>{e.on("keydown",nt=>{if(L(nt)||nt.keyCode!==Ke.BACKSPACE)return;let rt=u.getRng();const Ae=rt.startContainer,wt=rt.startOffset,Mt=c.getRoot();let an=Ae;if(!(!rt.collapsed||wt!==0)){for(;an.parentNode&&an.parentNode.firstChild===an&&an.parentNode!==Mt;)an=an.parentNode;an.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,an),rt=c.createRng(),rt.setStart(Ae,0),rt.setEnd(Ae,0),u.setRng(rt))}})},xe=()=>{const nt=()=>{B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),vw(e)||B("enableObjectResizing",!1)};P0(e)||e.on("BeforeExecCommand mousedown",nt)},le=()=>{const nt=()=>{n(c.select("a:not([data-mce-block])"),rt=>{var Ae;let wt=rt.parentNode;const Mt=c.getRoot();if((wt==null?void 0:wt.lastChild)===rt){for(;wt&&!c.isBlock(wt);){if(((Ae=wt.parentNode)===null||Ae===void 0?void 0:Ae.lastChild)!==wt||wt===Mt)return;wt=wt.parentNode}c.add(wt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",rt=>{(rt.type==="setcontent"||rt.command==="mceInsertLink")&&nt()})},fe=()=>{e.on("init",()=>{B("DefaultParagraphSeparator",wo(e))})},Pe=nt=>{const rt=nt.getBody(),Ae=nt.selection.getRng();return Ae.startContainer===Ae.endContainer&&Ae.startContainer===rt&&Ae.startOffset===0&&Ae.endOffset===rt.childNodes.length},Ie=()=>{e.on("keyup focusin mouseup",nt=>{!Ke.modifierPressed(nt)&&!Pe(e)&&u.normalize()},!0)},Ye=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},vt=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},yt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",nt=>{let rt;nt.target.nodeName==="HTML"&&(rt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(rt),e.selection.normalize(),e.nodeChanged())}))},rn=()=>{O&&e.on("keydown",nt=>{Ke.metaKeyPressed(nt)&&!nt.shiftKey&&(nt.keyCode===37||nt.keyCode===39)&&(nt.preventDefault(),e.selection.getSel().modify("move",nt.keyCode===37?"backward":"forward","lineboundary"))})},fn=()=>{e.on("click",nt=>{let rt=nt.target;do if(rt.tagName==="A"){nt.preventDefault();return}while(rt=rt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Mn=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",nt=>{nt.preventDefault()})})},wr=()=>{f.addNodeFilter("br",nt=>{let rt=nt.length;for(;rt--;)nt[rt].attr("class")==="Apple-interchange-newline"&&nt[rt].remove()})},ks=pt,Me=()=>{if(!y||e.removed)return!1;const nt=e.selection.getSel();return!nt||!nt.rangeCount||nt.rangeCount===0},Je=()=>{x&&(V(),J(),Mn(),F(),A&&(vt(),yt(),fn())),y&&(X(),xe(),Ye(),rn())},un=()=>{e.on("drop",nt=>{var rt;const Ae=(rt=nt.dataTransfer)===null||rt===void 0?void 0:rt.getData("text/html");K(Ae)&&/^<img[^>]*>$/.test(Ae)&&e.dispatch("dragend",new window.DragEvent("dragend",nt))})},tn=()=>{tt(),z(),gn.windowsPhone||Ie(),x&&(V(),J(),fe(),Mn(),ye(),wr(),A?(vt(),yt(),fn()):F()),y&&(q(),X(),se(),xe(),le(),Ye(),rn(),ye(),un())};return kc(e)?Je():tn(),{refreshContentEditable:ks,isHidden:Me}},zE=Dn.DOM,dU=(e,n)=>{const o=W.fromDom(e.getBody()),r=Lp(Hi(o)),c=W.fromTag("style");qo(c,"type","text/css"),Yo(c,W.fromText(n)),Yo(r,c),e.on("remove",()=>{Tn(c)})},mU=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,yA=e=>ro(e,n=>Ns(n)===!1),CA=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return yA({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:mU(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},wA=e=>{const n=e.options.get;return yA({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},fU=e=>{const n=e.options.get;return{...CA(e),...wA(e),...yA({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},gU=e=>{const n=Vb(CA(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),_k(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Ka("br",1))}}),n},SA=e=>{const n=L1(e);n&&Vr.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},UE=e=>{const n=e.dom.getRoot();!e.inline&&(!sm(e)||e.selection.getStart(!0)===n)&&gs(n).each(o=>{const r=o.getNode(),c=fo(r)?gs(r).getOr(o):o;e.selection.setRng(c.toRange())})},WE=e=>{e.bindPendingEventDelegates(),e.initialized=!0,cS(e),e.focus(!0),UE(e),e.nodeChanged({initial:!0});const n=Sk(e);G(n)&&n.call(e,e),SA(e)},cd=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,ZE=(e,n,o)=>{const r=[cd(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},cp=e=>{const n=cd(e),o=nh(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";Te.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(ZE(e,r,o)).then(u).catch(u),b=ik(e);return b&&dU(e,b),f},i6=e=>{const n=e.getDoc(),o=e.getBody();aS(e),H1(e)||(n.body.spellcheck=!1,zE.setAttrib(o,"spellcheck","false")),e.quirks=c6(e),py(e);const r=lk(e);r!==void 0&&(o.dir=r);const c=$0(e);c&&e.on("BeforeSetContent",u=>{Te.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},hU=e=>{kc(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},xA=e=>{e.removed!==!0&&(hU(e),WE(e))},EA=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(zE.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=P0(e),e._editableRoot=cD(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&zE.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=u3(e),e.schema=yi(wA(e)),e.dom=Dn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:rk(e),referrerPolicy:N0(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=gU(e),e.serializer=IB(fU(e),e),e.selection=Ub(e.dom,e.getWin(),e.serializer,e),e.annotator=nS(e),e.formatter=m3(e),e.undoManager=a5(e),e._nodeChangeDispatcher=new i9(e),e._selectionOverrides=mA(e),fN(e),hz(e),DZ(e),kc(e)||(sA(e),vA(e));const c=c9(e);cH(e,c),mH(e),J7(e),y$(e);const u=SB(e);i6(e),u.fold(()=>{cp(e).then(()=>xA(e))},f=>{e.setProgressState(!0),cp(e).then(()=>{f().then(b=>{e.setProgressState(!1),xA(e),OB(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),xA(e),OB(e)})})})},pU=qe,TA=(e,n,o)=>Vv(e,n,pU,o),nv=Dn.DOM,gg=(e,n,o,r)=>{const c=W.fromTag("iframe");return r.each(u=>qo(c,"tabindex",u)),qr(c,o),qr(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Ed(c,"tox-edit-area__iframe"),c},ip=e=>{let n=tk(e)+"<html><head>";O0(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=nk(e),r=Pr(e),c=e.translate(Ck(e));return A0(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+A0(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},l6=(e,n)=>{const o=e.translate("Rich Text Area"),r=di(W.fromDom(e.getElement()),"tabindex").bind(vd),c=gg(e.id,o,Rs(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=ip(e),nv.add(n.iframeContainer,c)},bU=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,EA(e)};if(L0(e)||gn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=TA(W.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},vU=(e,n)=>{l6(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=nv.isHidden(n.editorContainer)),e.getElement().style.display="none",nv.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,bU(e)},u6=Dn.DOM,yU=(e,n,o)=>{const r=tg.get(o),c=tg.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Te.trim(o),r&&Te.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,G(u.init)&&(u.init(e,c),n.push(o))}catch(u){al(e,o,u)}}},CU=e=>e.replace(/^\-/,""),wU=e=>{const n=[];be(I1(e),o=>{yU(e,n,CU(o))})},d6=e=>{const n=Te.trim(M0(e)),o=e.ui.registry.getAll().icons,r={...wx.get("default").icons,...wx.get(n).icons};Ze(r,(c,u)=>{kt(o,u)||e.ui.registry.addIcon(u,c)})},SU=e=>{const n=$r(e);if(K(n)){const o=ng.get(n);e.theme=o(e,ng.urls[n])||{},G(e.theme.init)&&e.theme.init(e,ng.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},xU=e=>{const n=P1(e),o=eg.get(n);e.model=o(e,eg.urls[n])},EU=e=>{const n=e.theme.renderUI;return n?n():f6(e)},KZ=e=>{const n=e.getElement(),r=$r(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},m6=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),kA=e=>{const n=u6.create("div");return u6.insertAfter(n,e),m6(n,n)},f6=e=>{const n=e.getElement();return e.inline?m6(null):kA(n)},TU=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,K($r(e))?EU(e):G($r(e))?KZ(e):f6(e)},g6=(e,n)=>{const o={show:N.from(n.show).getOr(pt),hide:N.from(n.hide).getOr(pt),isEnabled:N.from(n.isEnabled).getOr(qe),setEnabled:r=>{e.mode.isReadOnly()||N.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},kU=async e=>{e.dispatch("ScriptsLoaded"),d6(e),SU(e),xU(e),wU(e);const n=await TU(e);g6(e,N.from(n.api).getOr({})),e.editorContainer=n.editorContainer,H7(e),e.inline?EA(e):vU(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},hg=Dn.DOM,h6=e=>e.charAt(0)==="-",_A=(e,n)=>{const o=pw(n),r=ak(n);if(!Ci.hasCode(o)&&o!=="en"){const c=Pn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{KB(n,c,o)})}},_U=(e,n)=>{const o=$r(e);if(K(o)&&!h6(o)&&!kt(ng.urls,o)){const r=Kn(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;ng.load(o,c).catch(()=>{xm(e,c,o)})}},OU=(e,n)=>{const o=P1(e);if(o!=="plugin"&&!kt(eg.urls,o)){const r=Fr(e),c=K(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;eg.load(o,c).catch(()=>{sg(e,c,o)})}},AU=e=>N.from(gw(e)).filter(Pn).map(n=>({url:n,name:N.none()})),p6=(e,n,o)=>N.from(n).filter(r=>Pn(r)&&!wx.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),b6=(e,n,o)=>{const r=p6(n,"default",o),c=AU(n).orThunk(()=>p6(n,M0(n),""));be(Cs([r,c]),u=>{e.add(u.url).catch(()=>{qB(n,u.url,u.name.getOrUndefined())})})},OA=(e,n)=>{const o=(r,c)=>{tg.load(r,c).catch(()=>{GB(e,c,r)})};Ze(vk(e),(r,c)=>{o(c,r),e.options.set("plugins",I1(e).concat(c))}),be(I1(e),r=>{r=Te.trim(r),r&&!tg.urls[r]&&!h6(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},v6=e=>{const n=$r(e);return!K(n)||Ce(ng.get(n))},AA=e=>{const n=P1(e);return Ce(eg.get(n))},DU=(e,n)=>{const o=Sa.ScriptLoader,r=()=>{!e.removed&&v6(e)&&AA(e)&&kU(e)};_U(e,n),OU(e,n),_A(o,e),b6(o,e,n),OA(e,n),o.loadQueue().then(r,r)},YZ=(e,n)=>Fn.forElement(e,{contentCssCors:Uu(n),referrerPolicy:N0(n)}),XZ=e=>{const n=e.id;Ci.setCode(pw(e));const o=()=>{hg.unbind(window,"ready",o),e.render()};if(!Hd.Event.domLoaded){hg.bind(window,"ready",o);return}if(!e.getElement())return;const r=W.fromDom(e.getElement()),c=Mp(r);e.on("remove",()=>{hu(r.dom.attributes,f=>Ko(r,f.name)),qr(r,c)}),e.ui.styleSheetLoader=YZ(r,e),F1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||hg.getParent(n,"form");u&&(e.formElement=u,ww(e)&&!Ng(e.getElement())&&(hg.insertAfter(hg.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},hg.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),gk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=Jh(e),e.notificationManager=kx(e),Rk(e)&&e.on("GetContent",f=>{f.save&&(f.content=hg.encode(f.content))}),hk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),pk(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),DU(e,e.suffix)},RU=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),mb(e,n))},y6=e=>e._editableRoot,MU=(e,n)=>({sections:Le(e),options:Le(n)}),C6=Fi().deviceType,w6=C6.isPhone(),JZ=C6.isTablet(),jE=e=>{if(dn(e))return[];{const n=On(e)?e:e.split(/[ ,]/),o=Ft(n,bd);return ft(o,Pn)}},S6=(e,n)=>{const o=fd(n,(r,c)=>Bt(e,c));return MU(o.t,o.f)},x6=(e,n,o={})=>{const r=e.sections(),c=to(r,n).getOr({});return Te.extend({},o,c)},DA=(e,n)=>kt(e.sections(),n),BU=(e,n)=>DA(e,n)?e.sections()[n]:{},NU=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:to(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),QZ=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Te.extend({},e.external_plugins,r):r},ej=(e,n)=>[...jE(e),...jE(n)],tj=(e,n,o,r)=>e&&DA(n,"mobile")?r:o,PU=(e,n,o,r)=>{const c=jE(o.forced_plugins),u=jE(r.plugins),f=BU(n,"mobile"),b=f.plugins?jE(f.plugins):u,y=tj(e,n,u,b),x=ej(c,y);return Te.extend(r,{forced_plugins:c,plugins:x})},nj=(e,n)=>e&&DA(n,"mobile"),$U=(e,n,o,r,c)=>{var u;const f=e?{mobile:NU((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=S6(["mobile"],F2(f,c)),y=Te.extend(o,r,b.options(),nj(e,b)?x6(b,"mobile"):{},{external_plugins:QZ(r,b.options())});return PU(e,b,r,y)},lp=(e,n)=>$U(w6||JZ,w6,n,e,n),RA=(e,n)=>g7(e,n),GE=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{be("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},E6=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return mo(c,u=>Ce(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},T6=e=>{GE(e),E6(e)},k6=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(gn.os.isMacOS()||gn.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},FU=(e,n,o)=>{const r=W.fromDom(e.getRoot());return $y(r,ie.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Nh(r,ie.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},IU=e=>{if(typeof e!="string"){const n=Te.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},LU=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?FU(r,o.getRng(),n):n},qE=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=IU(n);L4(e,{...r,content:LU(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=m7(e,c.content,r);H4(e,u,c),e.addVisual()})}},pg=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{qE(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{qE(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{qE(e,r)},mceInsertContent:(n,o,r)=>{qE(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Fl(e))}})},HU={"font-size":"size","font-family":"face"},_6=Im("font"),VU=(e,n,o)=>{const r=u=>ea(u,e).orThunk(()=>_6(u)?to(HU,e).bind(f=>di(u,f)):N.none()),c=u=>En(W.fromDom(n),u);return a4(W.fromDom(o),u=>r(u),c)},KE=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),zU=(e,n)=>N.from(Dn.DOM.getStyle(n,e,!0)),O6=e=>(n,o)=>N.from(o).map(W.fromDom).filter(jn).bind(r=>VU(e,n,r.dom).or(zU(e,r.dom))).getOr(""),UU=O6("font-size"),A6=k(KE,O6("font-family")),WU=e=>gs(e.getBody()).bind(n=>{const o=n.container();return N.from(_e(o)?o.parentNode:o)}),ZU=e=>N.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),jU=(e,n)=>ZU(e).orThunk(Ee(WU,e)).map(W.fromDom).filter(jn).bind(n),tC=(e,n)=>jU(e,Fo(N.some,n)),D6=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Ak(e),c=Dk(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},GU=e=>{const n=e.split(/\s*,\s*/);return Ft(n,o=>o.indexOf(" ")!==-1&&!(_s(o,'"')||_s(o,"'"))?`'${o}'`:o).join(",")},Ts=(e,n)=>{const o=D6(e,n);e.formatter.toggle("fontname",{value:GU(o)}),e.nodeChanged()},qU=e=>tC(e,n=>A6(e.getBody(),n.dom)).getOr(""),KU=(e,n)=>{e.formatter.toggle("fontsize",{value:D6(e,n)}),e.nodeChanged()},MA=e=>tC(e,n=>UU(e.getBody(),n.dom)).getOr(""),R6=e=>tC(e,n=>{const o=W.fromDom(e.getBody()),r=a4(n,u=>ea(u,"line-height"),Ee(En,o)),c=()=>{const u=parseFloat(Os(n,"line-height")),f=parseFloat(Os(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),BA=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},YU=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Ts(e,c)},FontSize:(o,r,c)=>{KU(e,c)},LineHeight:(o,r,c)=>{BA(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(K(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},XU=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>qU(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>MA(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>R6(e))},JU=e=>{YU(e),XU(e)},QU=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},eW=e=>{e.editorCommands.addCommands({Indent:()=>{rH(e)},Outdent:()=>{lN(e)}}),e.editorCommands.addCommands({Outdent:()=>Z3(e)},"state")},tW=e=>{const n=(o,r,c)=>{const u=K(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Sn(u)&&K(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},nW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},oW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},ov=e=>{nW(e),oW(e)},iu=e=>{e.editorCommands.addCommands({insertParagraph:()=>{wE(UV,e)},mceInsertNewLine:(n,o,r)=>{SE(e,r)},InsertLineBreak:(n,o,r)=>{wE(DP,e)}})},sW=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>We(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),kn);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},rW=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{bF(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},aW=e=>{T6(e),k6(e),QU(e),sW(e),pg(e),tW(e),eW(e),iu(e),ov(e),JU(e),rW(e)},cW=["toggleview"],M6=e=>Bt(cW,e.toLowerCase());class B6{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():CS(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return G(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!M6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return G(r)?r(o):!1}queryCommandValue(n){if(!M6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return G(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Ze(n,(c,u)=>{be(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const up="data-mce-contenteditable",iW=(e,n,o)=>{Pp(e,n)&&!o?Td(e,n):o&&Ed(e,n)},NA=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},PA=(e,n)=>{e.dom.contentEditable=n?"true":"false"},lW=e=>{be(Ys(e,'*[contenteditable="true"]'),n=>{qo(n,up,"true"),PA(n,!1)})},uW=e=>{be(Ys(e,`*[${up}="true"]`),n=>{Ko(n,up),PA(n,!0)})},dW=e=>{N.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},mW=e=>{e.selection.setRng(e.selection.getRng())},fW=(e,n)=>{const o=W.fromDom(e.getBody());iW(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),dW(e),e.readonly=!0,PA(o,!1),lW(o)):(e.readonly=!1,e.hasEditableRoot()&&PA(o,!0),uW(o),NA(e,"StyleWithCSS",!1),NA(e,"enableInlineTableEditing",!1),NA(e,"enableObjectResizing",!1),hF(e)&&e.focus(),mW(e),e.nodeChanged())},dp=e=>e.readonly,gW=e=>{e.parser.addAttributeFilter("contenteditable",n=>{dp(e)&&be(n,o=>{o.attr(up,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(up,n=>{dp(e)&&be(n,o=>{o.attr("contenteditable",o.attr(up))})}),e.serializer.addTempAttr(up)},hW=e=>{e.serializer?gW(e):e.on("PreInit",()=>{gW(e)})},pW=e=>e.type==="click",bW=["copy"],vW=e=>Bt(bW,e.type),yW=(e,n)=>Jr(n,"a",r=>En(r,W.fromDom(e.getBody()))).bind(r=>di(r,"href")),CW=(e,n)=>{if(pW(n)&&!Ke.metaKeyPressed(n)){const o=W.fromDom(n.target);yW(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Bm(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else vW(n)&&e.dispatch(n.type,n)},wW=e=>{e.on("ShowCaret",n=>{dp(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{dp(e)&&n.preventDefault()})},SW=Te.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class $A{static isNative(n){return!!SW[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||we}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=u1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=we),o){const u={func:o,removed:!1};c&&Te.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return Ze(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=Er(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,be(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Ze(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const nC=e=>(e._eventDispatcher||(e._eventDispatcher=new $A({scope:e,toggleEvent:(n,o)=>{$A.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),FA={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return u1(e.toLowerCase(),n??{},r);const c=nC(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return nC(this).on(e,n,o)},off(e,n){return nC(this).off(e,n)},once(e,n){return nC(this).once(e,n)},hasEventListeners(e){return nC(this).has(e)}},YE=Dn.DOM;let mp;const XE=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=oh(e);return o?(e.eventRoot||(e.eventRoot=YE.select(o)[0]),e.eventRoot):e.getBody()},xW=e=>!e.hidden&&!dp(e),N6=(e,n,o)=>{xW(e)?e.dispatch(n,o):dp(e)&&CW(e,o)},IA=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=XE(e,n);if(oh(e)){if(mp||(mp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||mp&&(Ze(mp,(c,u)=>{e.dom.unbind(XE(e,u))}),mp=null)})),mp[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||YE.isChildOf(u,y))&&N6(f[b],n,c)}};mp[n]=r,YE.bind(o,n,r)}else{const r=c=>{N6(e,n,c)};YE.bind(o,n,r),e.delegates[n]=r}},P6={...FA,bindPendingEventDelegates(){const e=this;Te.each(e._pendingNativeEvents,n=>{IA(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?IA(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(XE(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Ze(e.delegates,(r,c)=>{e.dom.unbind(XE(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},EW=e=>K(e)?{value:e.split(/[ ,]/),valid:!0}:An(e,K)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},TW=e=>{const n=(()=>{switch(e){case"array":return On;case"boolean":return en;case"function":return G;case"number":return Ma;case"object":return Sn;case"string":return K;case"string[]":return EW;case"object[]":return o=>An(o,Sn);case"regexp":return o=>gu(o,RegExp);default:return qe}})();return o=>LA(o,n,`The value must be a ${e}.`)},kW=e=>K(e.processor),$6=(e,n)=>{const o=Pa(n.message)?"":`. ${n.message}`;return e+o},F6=e=>e.valid,LA=(e,n,o="")=>{const r=n(e);return en(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},_W=(e,n,o)=>{if(!Ns(n)){const r=LA(n,o);if(F6(r))return r.value;console.error($6(`Invalid default value passed for the "${e}" option`,r))}},I6=(e,n)=>{const o={},r={},c=(O,B,L)=>{const z=LA(B,L);return F6(z)?(r[O]=z.value,!0):(console.warn($6(`Invalid value passed for the ${O} option`,z)),!1)},u=(O,B)=>{const L=kW(B)?TW(B.processor):B.processor,z=_W(O,B.default,L);o[O]={...B,default:z,processor:L},to(r,O).orThunk(()=>to(n,O)).each(V=>c(O,V,L))},f=O=>kt(o,O);return{register:u,isRegistered:f,get:O=>to(r,O).orThunk(()=>to(o,O).map(B=>B.default)).getOrUndefined(),set:(O,B)=>{if(f(O)){const L=o[O];return L.immutable?(console.error(`"${O}" is an immutable option and cannot be updated`),!1):c(O,B,L.processor)}else return console.warn(`"${O}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:O=>{const B=f(O);return B&&delete r[O],B},isSet:O=>kt(r,O)}},OW=["design","readonly"],L6=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&fW(e,u.editorReadOnly),n.set(r),Ku(e,r)},AW=(e,n,o,r)=>{if(r!==o.get()){if(!kt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?L6(e,o,n,r):e.on("init",()=>L6(e,o,n,r))}},DW=(e,n,o)=>{if(Bt(OW,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},RW=e=>{const n=us("design"),o=us({design:{activate:pt,deactivate:pt,editorReadOnly:!1},readonly:{activate:pt,deactivate:pt,editorReadOnly:!0}});return hW(e),wW(e),{isReadOnly:()=>dp(e),set:r=>AW(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(DW(o.get(),r,c))}}},HA=Te.each,VA=Te.explode,MW={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},zA=Te.makeMap("alt,ctrl,shift,meta,access"),oj=e=>e in zA,H6=e=>{const n={},o=gn.os.isMacOS()||gn.os.isiOS();HA(VA(e.toLowerCase(),"+"),u=>{oj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=MW[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in zA)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class V6{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(HA(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return HA(VA(Te.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Te.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Te.map(VA(n,">"),H6);return u[u.length-1]=Te.extend(u[u.length-1],{func:r,scope:c||this.editor}),Te.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const z6=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(A,O)=>(B,L)=>{A[B.toLowerCase()]={...L,type:O}},x=(A,O)=>r[A.toLowerCase()]=O;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:x,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},BW=()=>{const e=z6();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},fp=Dn.DOM,U6=Te.extend,NW=Te.each;class JE{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,U6(this,P6);const c=this;this.id=n,this.hidden=!1;const u=lp(r.defaultOptions,o);this.options=I6(c,u),ek(c);const f=this.options.get;f("deprecation_warnings")&&D7(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=N0(c);x&&(Sa.ScriptLoader._setReferrerPolicy(x),Dn.DOM.styleSheetLoader._setReferrerPolicy(x));const A=Uu(c);Ce(A)&&Dn.DOM.styleSheetLoader._setContentCssCors(A),mn.languageLoad=f("language_load"),mn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Jl(O0(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=F1(c),this.hasVisual=yk(c),this.shortcuts=new V6(this),this.editorCommands=new B6(this),aW(this);const O=f("cache_suffix");O&&(gn.cacheSuffix=O.replace(/^[\?\&]+/,"")),this.ui={registry:BW(),styleSheetLoader:void 0,show:pt,hide:pt,setEnabled:pt,isEnabled:qe},this.mode=RW(c),r.dispatch("SetupEditor",{editor:this});const B=wk(c);G(B)&&B.call(c,c)}render(){XZ(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Bh(this)}translate(n){return Ci.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Ce(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:qe,default:o})),!c.isSet(n)&&!Ns(o)?o:c.get(n)}hasPlugin(n,o){return Bt(I1(this),n)?o?tg.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(fp.show(n.getContainer()),fp.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(fp.hide(n.getContainer()),fp.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=Ng(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Ng(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=fp.getParent(o.id,"form");b&&NW(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return LB(this,n,o)}getContent(n){return S7(this,n)}insertContent(n,o){o&&(n=U6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?LB(this,this.startContent,{format:"raw"}):LB(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||fp.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=fp.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=$l(c);return G(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||Sn(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){RA(this,n)}setEditableRoot(n){RU(this,n)}hasEditableRoot(){return y6(this)}remove(){N7(this)}destroy(n){wZ(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const sv=Dn.DOM,rv=Te.each;let QE=!1,eT,Da=[];const tT=e=>{const n=e.type;rv(bg.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},W6=e=>{if(e!==QE){const n=Dn.DOM;e?(n.bind(window,"resize",tT),n.bind(window,"scroll",tT)):(n.unbind(window,"resize",tT),n.unbind(window,"scroll",tT)),QE=e}},Z6=e=>{const n=Da;return Da=ft(Da,o=>e!==o),bg.activeEditor===e&&(bg.activeEditor=Da.length>0?Da[0]:null),bg.focusedEditor===e&&(bg.focusedEditor=null),n.length!==Da.length},PW=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Z6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},$W=document.compatMode!=="CSS1Compat",bg={...FA,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.2",releaseDate:"2023-08-09",i18n:Ci,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Jl.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Jl(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Jl(e.baseURL),e.suffix=o,uF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Ze(r,(c,u)=>{mn.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Te.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(A,O)=>A.inline&&O.tagName.toLowerCase()in r,u=A=>{let O=A.id;return O||(O=to(A,"name").filter(B=>!sv.get(B)).getOrThunk(sv.uniqueId),A.setAttribute("id",O)),O},f=A=>{const O=e[A];if(O)return O.apply(n,[])},b=A=>gn.browser.isIE()||gn.browser.isEdge()?(_x("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):$W?(_x("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):K(A.selector)?sv.select(A.selector):Ce(A.target)?[A.target]:[];let y=A=>{o=A};const x=()=>{let A=0;const O=[];let B;const L=(z,F,V)=>{const q=new JE(z,F,n);O.push(q),q.on("init",()=>{++A===B.length&&y(O)}),q.targetElm=q.targetElm||V,q.render()};sv.unbind(window,"ready",x),f("onpageload"),B=Sp(b(e)),Te.each(B,z=>{PW(n.get(z.id))}),B=Te.grep(B,z=>!n.get(z.id)),B.length===0?y([]):rv(B,z=>{c(e,z)?_x("Could not initialize inline editor on invalid inline target element",z):L(u(z),e,z)})};return sv.bind(window,"ready",x),new Promise(A=>{o?A(o):y=O=>{A(O)}})},get(e){return arguments.length===0?Da.slice(0):K(e)?Ho(Da,n=>n.id===e).getOr(null):Ma(e)&&Da[e]?Da[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Da.push(e),W6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),eT||(eT=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",eT))),e},createEditor(e,n){return this.add(new JE(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Da.length-1;r>=0;r--)n.remove(Da[r]);return}if(K(e)){rv(sv.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,Q(n.get(o.id))?null:(Z6(o)&&n.dispatch("RemoveEditor",{editor:o}),Da.length===0&&window.removeEventListener("beforeunload",eT),o.remove(),W6(Da.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Sn(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new JE(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{rv(Da,e=>{e.save()})},addI18n:(e,n)=>{Ci.add(e,n)},translate:e=>Ci.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Jl(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Jl(this.baseURL)}};bg.setup();const FW=(()=>{const e=Ds(),n=u=>({items:u,types:jr(u),getType:f=>to(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),j6=Math.min,av=Math.max,cv=Math.round,G6=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=y),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=cv(y/2)),x[1]==="c"&&(r+=cv(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=cv(f/2)),x[4]==="c"&&(r-=cv(u/2)),gp(r,c,u,f)},IW=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=G6(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},LW=(e,n,o)=>gp(e.x-n,e.y-o,e.w+n*2,e.h+o*2),HW=(e,n)=>{const o=av(e.x,n.x),r=av(e.y,n.y),c=j6(e.x+e.w,n.x+n.w),u=j6(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:gp(o,r,c-o,u-r)},VW=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,x=av(0,n.x-r),A=av(0,n.y-c),O=av(0,u-b),B=av(0,f-y);return r+=x,c+=A,o&&(u+=x,f+=A,r-=O,c-=B),u-=O,f-=B,gp(r,c,u-r,f-c)},gp=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),rj={inflate:LW,relativePosition:G6,findBestRelativePosition:IW,intersect:HW,clamp:VW,create:gp,fromClientRect:e=>gp(e.left,e.top,e.width,e.height)},zW=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...A)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),x.apply(null,A))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},UW=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const x=new Promise((A,O)=>{const B=zW(A,O);n[u]=B.resolve,Sa.ScriptLoader.loadScript(f).then(()=>B.start(y),()=>B.reject(b))});return e[u]=x,x}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),WW=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let nT;try{const e="__storage_test__";nT=window.localStorage,nT.setItem(e,e),nT.removeItem(e)}catch{nT=WW()}var ZW=nT;const si={geom:{Rect:rj},util:{Delay:Vr,Tools:Te,VK:Ke,URI:Jl,EventDispatcher:$A,Observable:FA,I18n:Ci,LocalStorage:ZW,ImageUploader:j7},dom:{EventUtils:Hd,TreeWalker:Xo,TextSeeker:Lu,DOMUtils:Dn,ScriptLoader:Sa,RangeUtils:Wt,Serializer:IB,StyleSheetLoader:e0,ControlSelection:uS,BookmarkManager:cm,Selection:Ub,Event:Hd.Event},html:{Styles:s0,Entities:Ol,Node:Ka,Schema:yi,DomParser:Vb,Writer:_S,Serializer:Zf},Env:gn,AddOnManager:mn,Annotator:nS,Formatter:m3,UndoManager:a5,EditorCommands:B6,WindowManager:Jh,NotificationManager:kx,EditorObservable:P6,Shortcuts:V6,Editor:JE,FocusManager:wS,EditorManager:bg,DOM:Dn.DOM,ScriptLoader:Sa.ScriptLoader,PluginManager:tg,ThemeManager:ng,ModelManager:eg,IconManager:wx,Resource:UW,FakeClipboard:FW,trim:Te.trim,isArray:Te.isArray,is:Te.is,toArray:Te.toArray,makeMap:Te.makeMap,each:Te.each,map:Te.map,grep:Te.grep,inArray:Te.inArray,extend:Te.extend,walk:Te.walk,resolve:Te.resolve,explode:Te.explode,_addCacheSuffix:Te._addCacheSuffix},UA=Te.extend(bg,si),jW=e=>{try{iT.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(UA),jW(UA)})()})(lG);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const iT=Object.getPrototypeOf,hv=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},lT=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&hv(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},wg=t=>s=>lT(s)===t,Sg=t=>s=>typeof s===t,ud=t=>s=>t===s,xg=(t,s)=>Bc(t)&&hv(t,s,(a,i)=>iT(a)===i),xn=wg("string"),Bc=wg("object"),aC=t=>xg(t,Object),ml=wg("array"),fu=ud(null),fl=Sg("boolean"),ca=ud(void 0),Ni=t=>t==null,ir=t=>!Ni(t),mt=Sg("function"),gl=Sg("number"),gu=(t,s)=>{if(ml(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},K=()=>{},Sn=t=>()=>t(),vp=(t,s)=>(...a)=>t(s.apply(null,a)),On=(t,s)=>a=>t(s(a)),Q=t=>()=>t,en=t=>t,Ns=(t,s)=>t===s;function dn(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const Ce=t=>s=>!t(s),G=t=>()=>{throw new Error(t)},Ma=t=>t(),An=Q(!1),pt=Q(!0);class k{constructor(s,a){this.tag=s,this.value=a}static some(s){return new k(!0,s)}static none(){return k.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?k.some(s(this.value)):k.none()}bind(s){return this.tag?s(this.value):k.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:k.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return ir(s)?k.some(s):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const Fo=Array.prototype.slice,Le=Array.prototype.indexOf,Eo=Array.prototype.push,Dt=(t,s)=>Le.call(t,s),Ee=(t,s)=>{const a=Dt(t,s);return a===-1?k.none():k.some(a)},Io=(t,s)=>Dt(t,s)>-1,Ba=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},Lo=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},Zr=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=Fo.call(t,i,i+s);a.push(d)}return a},we=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},qe=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},N=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Dm=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:i).push(p)}return{pass:a,fail:i}},Yn=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},rs=(t,s,a)=>(N(t,(i,d)=>{a=s(a,i,d)}),a),eo=(t,s,a)=>(qe(t,(i,d)=>{a=s(a,i,d)}),a),uT=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(a(g,i))break}return k.none()},Bt=(t,s)=>uT(t,s,An),mo=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return k.some(a)}return k.none()},Ft=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!ml(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Eo.apply(s,t[a])}return s},be=(t,s)=>Ft(we(t,s)),hu=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Er=t=>{const s=Fo.call(t,0);return s.reverse(),s},ft=(t,s)=>Yn(t,a=>!Io(s,a)),dd=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Ro=t=>[t],yp=(t,s)=>{const a=Fo.call(t,0);return a.sort(s),a},Ho=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),ia=t=>Ho(t,0),Cp=t=>Ho(t,t.length-1),Pi=mt(Array.from)?Array.from:t=>Fo.call(t),Ws=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return k.none()},bo=Object.keys,wp=Object.hasOwnProperty,ys=(t,s)=>{const a=bo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];s(p,g)}},vo=(t,s)=>Eg(t,(a,i)=>({k:i,v:s(a,i)})),Eg=(t,s)=>{const a={};return ys(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Tr=t=>(s,a)=>{t[a]=s},pu=(t,s,a,i)=>{ys(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},kr=(t,s)=>{const a={},i={};return pu(t,s,Tr(a),Tr(i)),{t:a,f:i}},md=(t,s)=>{const a={};return pu(t,s,Tr(a),K),a},Sp=(t,s)=>{const a=[];return ys(t,(i,d)=>{a.push(s(i,d))}),a},jr=(t,s)=>{const a=bo(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];if(s(p,g,t))return k.some(p)}return k.none()},pv=t=>Sp(t,en),Ze=(t,s)=>wn(t,s)?k.from(t[s]):k.none(),wn=(t,s)=>wp.call(t,s),oc=(t,s)=>wn(t,s)&&t[s]!==void 0&&t[s]!==null,Na=(t,s,a=Ns)=>t.exists(i=>a(i,s)),xp=(t,s,a=Ns)=>gd(t,s,a).getOr(t.isNone()&&s.isNone()),fd=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},ro=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},gd=(t,s,a)=>t.isSome()&&s.isSome()?k.some(a(t.getOrDie(),s.getOrDie())):k.none(),Rm=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):k.none(),to=(t,s)=>t!=null?k.some(s(t)):k.none(),kt=(t,s)=>t?k.some(s):k.none(),la=(t,s)=>t+s,hd=(t,s)=>t.substring(s),Ep=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,bv=(t,s)=>as(t,s)?hd(t,s.length):t,ua=(t,s)=>$i(t,s)?t:la(t,s),lr=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?ca(i)?!0:d+s.length<=i:!1},as=(t,s)=>Ep(t,s,0),$i=(t,s)=>Ep(t,s,t.length-s.length),bu=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),sc=t=>t.length>0,Vo=t=>!sc(t),Nc=t=>t.style!==void 0&&mt(t.style.getPropertyValue),pd=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return hl(i.childNodes[0])},dT=(t,s)=>{const i=(s||document).createElement(t);return hl(i)},mT=(t,s)=>{const i=(s||document).createTextNode(t);return hl(i)},hl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},te={fromHtml:pd,fromTag:dT,fromText:mT,fromDom:hl,fromPoint:(t,s,a)=>k.from(t.dom.elementFromPoint(s,a)).map(hl)},da=typeof window<"u"?window:Function("return this;")(),Mm=(t,s)=>{let a=s??da;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},cC=(t,s)=>{const a=t.split(".");return Mm(a,s)},vv=(t,s)=>cC(t,s),no=(t,s)=>{const a=vv(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},yv=Object.getPrototypeOf,fT=t=>no("HTMLElement",t),Tg=t=>{const s=cC("ownerDocument.defaultView",t);return Bc(t)&&(fT(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(yv(t).constructor.name))},Bm=9,Zs=11,_s=1,pl=3,Pc=t=>t.dom.nodeName.toLowerCase(),bd=t=>t.dom.nodeType,kg=t=>s=>bd(s)===t,Nm=t=>Pn(t)&&Tg(t.dom),Pn=kg(_s),Pa=kg(pl),gT=kg(Bm),vd=kg(Zs),vu=t=>s=>Pn(s)&&Pc(s)===t,rc=(t,s)=>{const a=t.dom;if(a.nodeType!==_s)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Mo=t=>t.nodeType!==_s&&t.nodeType!==Bm&&t.nodeType!==Zs||t.childElementCount===0,hT=(t,s)=>{const a=s===void 0?document:s.dom;return Mo(a)?[]:we(a.querySelectorAll(t),te.fromDom)},iC=(t,s)=>{const a=s===void 0?document:s.dom;return Mo(a)?k.none():k.from(a.querySelector(t)).map(te.fromDom)},$n=(t,s)=>t.dom===s.dom,ac=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},$a=t=>te.fromDom(t.dom.ownerDocument),js=t=>gT(t)?t:$a(t),kp=t=>te.fromDom(js(t).dom.documentElement),yd=t=>te.fromDom(js(t).dom.defaultView),ci=t=>k.from(t.dom.parentNode).map(te.fromDom),ma=t=>k.from(t.dom.parentElement).map(te.fromDom),Cv=(t,s)=>{const a=mt(s)?s:An;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,p=te.fromDom(g);if(d.push(p),a(p)===!0)break;i=g}return d},wv=t=>k.from(t.dom.offsetParent).map(te.fromDom),lC=t=>k.from(t.dom.nextSibling).map(te.fromDom),ii=t=>we(t.dom.childNodes,te.fromDom),yu=(t,s)=>{const a=t.dom.childNodes;return k.from(a[s]).map(te.fromDom)},Sv=t=>yu(t,0),xv=(t,s)=>({element:t,offset:s}),_p=(t,s)=>{const a=ii(t);return a.length>0&&s<a.length?xv(a[s],0):xv(t,s)},Op=t=>vd(t)&&ir(t.dom.host),uC=mt(Element.prototype.attachShadow)&&mt(Node.prototype.getRootNode),Ap=Q(uC),ur=uC?t=>te.fromDom(t.dom.getRootNode()):js,Gs=t=>Op(t)?t:te.fromDom(js(t).dom.body),Cd=t=>Ev(t).isSome(),Ev=t=>{const s=ur(t);return Op(s)?k.some(s):k.none()},dC=t=>te.fromDom(t.dom.host),Fi=t=>{if(Ap()&&ir(t.target)){const s=te.fromDom(t.target);if(Pn(s)&&pT(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return ia(a)}}return k.from(t.target)},pT=t=>ir(t.dom.shadowRoot),fa=t=>{const s=Pa(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Ev(te.fromDom(s)).fold(()=>a.body.contains(s),On(fa,dC))},qs=()=>Ii(te.fromDom(document)),Ii=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return te.fromDom(s)},Cu=(t,s,a)=>{if(xn(a)||fl(a)||gl(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Vt=(t,s,a)=>{Cu(t.dom,s,a)},gn=(t,s)=>{const a=t.dom;ys(s,(i,d)=>{Cu(a,d,i)})},dr=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},jo=(t,s)=>k.from(dr(t,s)),mC=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},zo=(t,s)=>{t.dom.removeAttribute(s)},bT=t=>eo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Tv=(t,s,a)=>{if(!xn(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Nc(t)&&t.style.setProperty(s,a)},Dp=(t,s)=>{Nc(t)&&t.style.removeProperty(s)},Rt=(t,s,a)=>{const i=t.dom;Tv(i,s,a)},wu=(t,s)=>{const a=t.dom;ys(s,(i,d)=>{Tv(a,d,i)})},$c=(t,s)=>{const a=t.dom;ys(s,(i,d)=>{i.fold(()=>{Dp(a,d)},g=>{Tv(a,d,g)})})},Te=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!fa(t)?li(a,s):d},li=(t,s)=>Nc(t)?t.style.getPropertyValue(s):"",Cs=(t,s)=>{const a=t.dom,i=li(a,s);return k.from(i).filter(d=>d.length>0)},_r=t=>{const s={},a=t.dom;if(Nc(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},fC=(t,s,a)=>{const i=te.fromTag(t);return Rt(i,s,a),Cs(i,s).isSome()},sn=(t,s)=>{const a=t.dom;Dp(a,s),Na(jo(t,"style").map(bu),"")&&zo(t,"style")},wd=t=>t.dom.offsetWidth,Pm=(t,s)=>{const a=(C,w)=>{if(!gl(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const E=C.dom;Nc(E)&&(E.style[t]=w+"px")},i=C=>{const w=s(C);if(w<=0||w===null){const E=Te(C,t);return parseFloat(E)||0}return w},d=i,g=(C,w)=>eo(w,(E,_)=>{const D=Te(C,_),M=D===void 0?0:parseInt(D,10);return isNaN(M)?E:E+M},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,w,E)=>{const _=g(C,E);return w>_?w-_:0}}},ws=Pm("height",t=>{const s=t.dom;return fa(t)?s.getBoundingClientRect().height:s.offsetHeight}),Go=t=>ws.get(t),bl=t=>ws.getOuter(t),vT=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=ws.max(t,s,a);Rt(t,"max-height",i+"px")},Rp=(t,s)=>({left:t,top:s,translate:(i,d)=>Rp(t+i,s+d)}),ao=Rp,ga=t=>{const s=t.getBoundingClientRect();return ao(s.left,s.top)},$m=(t,s)=>t!==void 0?t:s!==void 0?s:0,Gr=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return ao(a.offsetLeft,a.offsetTop);const g=$m(i==null?void 0:i.pageYOffset,d.scrollTop),p=$m(i==null?void 0:i.pageXOffset,d.scrollLeft),C=$m(d.clientTop,a.clientTop),w=$m(d.clientLeft,a.clientLeft);return Fm(t).translate(p-w,g-C)},Fm=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?ao(i.offsetLeft,i.offsetTop):fa(t)?ga(s):ao(0,0)},_g=Pm("width",t=>t.dom.offsetWidth),oo=(t,s)=>_g.set(t,s),Or=t=>_g.get(t),ha=t=>_g.getOuter(t),gC=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=_g.max(t,s,a);Rt(t,"max-width",i+"px")},Li=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},jn=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),C=p||i("(pointer:coarse)"),w=d||!g&&p&&i("(min-device-width:768px)"),E=g||p&&!w,_=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,D=!E&&!w&&!_;return{isiPad:Q(d),isiPhone:Q(g),isTablet:Q(w),isPhone:Q(E),isTouch:Q(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Q(_),isDesktop:Q(D)}},Ar=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},Sd=(t,s)=>{const a=Ar(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return ui(i(1),i(2))},hC=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Im():Sd(t,a)},Im=()=>ui(0,0),ui=(t,s)=>({major:t,minor:s}),qo={nu:ui,detect:hC,unknown:Im},qr=(t,s)=>Ws(s.brands,a=>{const i=a.brand.toLowerCase();return Bt(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:qo.nu(parseInt(a.version,10),0)}))}),Kr=(t,s)=>{const a=String(s).toLowerCase();return Bt(t,i=>i.search(a))},di=(t,s)=>Kr(t,s).map(a=>{const i=qo.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Og=(t,s)=>Kr(t,s).map(a=>{const i=qo.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Ko=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,cc=t=>s=>lr(s,t),Mp=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>lr(t,"edge/")&&lr(t,"chrome")&&lr(t,"safari")&&lr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ko],search:t=>lr(t,"chrome")&&!lr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>lr(t,"msie")||lr(t,"trident")},{name:"Opera",versionRegexes:[Ko,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:cc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:cc("firefox")},{name:"Safari",versionRegexes:[Ko,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(lr(t,"safari")||lr(t,"mobile/"))&&lr(t,"applewebkit")}],Lm=[{name:"Windows",search:cc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>lr(t,"iphone")||lr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:cc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:cc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:cc("linux"),versionRegexes:[]},{name:"Solaris",search:cc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:cc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:cc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Bp={browsers:Q(Mp),oses:Q(Lm)},pC="Edge",xd="Chromium",Su="IE",Ag="Opera",Yr="Firefox",kv="Safari",Ed=()=>Np({current:void 0,version:qo.unknown()}),Np=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(pC),isChromium:i(xd),isIE:i(Su),isOpera:i(Ag),isFirefox:i(Yr),isSafari:i(kv)}},Td={unknown:Ed,nu:Np,edge:Q(pC),chromium:Q(xd),ie:Q(Su),opera:Q(Ag),firefox:Q(Yr),safari:Q(kv)},_v="Windows",Pp="iOS",Hm="Android",bC="Linux",vC="macOS",Vm="Solaris",yT="FreeBSD",W="ChromeOS",$p=()=>Xr({current:void 0,version:qo.unknown()}),Xr=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(_v),isiOS:i(Pp),isAndroid:i(Hm),isMacOS:i(vC),isLinux:i(bC),isSolaris:i(Vm),isFreeBSD:i(yT),isChromeOS:i(W)}},Ov={unknown:$p,nu:Xr,windows:Q(_v),ios:Q(Pp),android:Q(Hm),linux:Q(bC),macos:Q(vC),solaris:Q(Vm),freebsd:Q(yT),chromeos:Q(W)},wT={detect:(t,s,a)=>{const i=Bp.browsers(),d=Bp.oses(),g=s.bind(w=>qr(i,w)).orThunk(()=>di(i,t)).fold(Td.unknown,Td.nu),p=Og(d,t).fold(Ov.unknown,Ov.nu),C=jn(p,g,t,a);return{browser:g,os:p,deviceType:C}}},En=t=>window.matchMedia(t).matches;let mi=Li(()=>wT.detect(navigator.userAgent,k.from(navigator.userAgentData),En));const mr=()=>mi(),vl=(t,s,a,i,d,g,p)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:p}),yC=t=>{const s=te.fromDom(Fi(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=vp(i,a);return vl(s,t.clientX,t.clientY,a,i,d,t)},zm=(t,s)=>a=>{t(a)&&s(yC(a))},Fa=(t,s,a,i,d)=>{const g=zm(a,i);return t.dom.addEventListener(s,g,d),{unbind:dn(CC,t,s,g,d)}},Fp=(t,s,a,i)=>Fa(t,s,a,i,!1),Av=(t,s,a,i)=>Fa(t,s,a,i,!0),CC=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},Fc=(t,s)=>{ci(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},Um=(t,s)=>{lC(t).fold(()=>{ci(t).each(d=>{Ia(d,s)})},i=>{Fc(i,s)})},wC=(t,s)=>{Sv(t).fold(()=>{Ia(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Ia=(t,s)=>{t.dom.appendChild(s.dom)},Ps=(t,s,a)=>{yu(t,a).fold(()=>{Ia(t,s)},i=>{Fc(i,s)})},xu=(t,s)=>{qe(s,a=>{Ia(t,a)})},Wm=t=>{t.dom.textContent="",qe(ii(t),s=>{Ic(s)})},Ic=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},pa=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return ao(a,i)},Dv=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},SC=t=>{const s=t===void 0?window:t;return mr().browser.isFirefox()?k.none():k.from(s.visualViewport)},Dg=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Ip=t=>{const s=t===void 0?window:t,a=s.document,i=pa(te.fromDom(a));return SC(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Dg(i.left,i.top,g,p)},d=>Dg(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},Rv=()=>te.fromDom(document),Hi=(t,s)=>t.view(s).fold(Q([]),i=>{const d=t.owner(i),g=Hi(t,d);return[i].concat(g)}),Lp=(t,s)=>{const a=s.owner(t),i=Hi(s,a);return k.some(i)};var ST=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?k.none():k.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(te.fromDom)},owner:t=>$a(t)});const Hp=t=>{const s=Rv(),a=pa(s);return Lp(t,ST).fold(dn(Gr,t),d=>{const g=Fm(t),p=rs(d,(C,w)=>{const E=Fm(w);return{left:C.left+E.left,top:C.top+E.top}},{left:0,top:0});return ao(p.left+g.left+a.left,p.top+g.top+a.top)})},xC=(t,s,a)=>({point:t,width:s,height:a}),kd=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),cs=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Xn=t=>{const s=Gr(t),a=ha(t),i=bl(t);return cs(s.left,s.top,a,i)},ic=t=>{const s=Hp(t),a=ha(t),i=bl(t);return cs(s.left,s.top,a,i)},Mv=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,C=g-i;return cs(a,i,p,C)},xT=(t,s)=>eo(s,(a,i)=>Mv(a,i),t),Dr=()=>Ip(window);var Rg=tinymce.util.Tools.resolve("tinymce.ThemeManager");const _d=t=>{const s=g=>g(t),a=Q(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:pt,isError:An,map:g=>Nt.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>k.some(t)};return d},Jr=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:An,isError:pt,map:s,mapError:i=>Nt.error(i(t)),bind:s,exists:An,forall:pt,getOr:en,or:en,getOrThunk:Ma,orThunk:Ma,getOrDie:G(String(t)),each:K,toOptional:k.none};return a},Nt={value:_d,error:Jr,fromOption:(t,s)=>t.fold(()=>Jr(s),_d)};var lc;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(lc||(lc={}));const yl=(t,s,a)=>t.stype===lc.Error?s(t.serror):a(t.svalue),Bv=t=>{const s=[],a=[];return qe(t,i=>{yl(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Mg=(t,s)=>t.stype===lc.Error?{stype:lc.Error,serror:s(t.serror)}:t,Nv=(t,s)=>t.stype===lc.Value?{stype:lc.Value,svalue:s(t.svalue)}:t,Vp=(t,s)=>t.stype===lc.Value?s(t.svalue):t,Os=(t,s)=>t.stype===lc.Error?s(t.serror):t,Qr=t=>({stype:lc.Value,svalue:t}),ea=t=>({stype:lc.Error,serror:t}),yo={fromResult:t=>t.fold(ea,Qr),toResult:t=>yl(t,Nt.error,Nt.value),svalue:Qr,partition:Bv,serror:ea,bind:Vp,bindError:Os,map:Nv,mapError:Mg,fold:yl},ba=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),La=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Zm=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Yo=(t,s)=>s,kC=(t,s)=>aC(t)&&aC(s)?Vn(t,s):s,Pv=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)wn(d,g)&&(a[g]=t(a[g],d[g]))}return a},Vn=Pv(kC),Eu=Pv(Yo),Tn=()=>({tag:"required",process:{}}),fi=t=>({tag:"defaultedThunk",process:t}),$v=t=>fi(Q(t)),zp=()=>({tag:"option",process:{}}),Fv=t=>({tag:"mergeWithThunk",process:t}),Gt=t=>Fv(Q(t)),Iv=(t,s)=>t.length>0?yo.svalue(Vn(s,Eu.apply(void 0,t))):yo.svalue(s),Lv=t=>vp(yo.serror,Ft)(t),Hv={consolidateObj:(t,s)=>{const a=yo.partition(t);return a.errors.length>0?Lv(a.errors):Iv(a.values,s)},consolidateArr:t=>{const s=yo.partition(t);return s.errors.length>0?Lv(s.errors):yo.svalue(s.values)}},Vv=t=>Bc(t)&&bo(t).length>100?" removed due to size":JSON.stringify(t,null,2),_C=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Q("... (only showing first ten failures)")}]):t;return we(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Tu=(t,s)=>yo.serror([{path:t,getErrorInfo:s}]),Od=(t,s,a)=>Tu(t,()=>'Could not find valid *required* value for "'+s+'" in '+Vv(a)),TT=(t,s)=>Tu(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Bg=(t,s,a)=>Tu(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Vv(s)),Cl=(t,s)=>Tu(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),zv=(t,s)=>Tu(t,Q(s)),gi=t=>{const s=(i,d)=>yo.bindError(t(d),g=>zv(i,g)),a=Q("val");return{extract:s,toString:a}},Ad=gi(yo.svalue),kT=(t,s,a,i)=>Ze(s,a).fold(()=>Od(t,a,s),i),Up=(t,s,a,i)=>{const d=Ze(t,s).getOrThunk(()=>a(t));return i(d)},Uv=(t,s,a)=>a(Ze(t,s)),OC=(t,s,a,i)=>{const d=Ze(t,s).map(g=>g===!0?a(t):g);return i(d)},Wv=(t,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),p=C=>C.fold(()=>yo.svalue(k.none()),w=>{const E=d.extract(s.concat([i]),w);return yo.map(E,k.some)});switch(t.tag){case"required":return kT(s,a,i,g);case"defaultedThunk":return Up(a,i,t.process,g);case"option":return Uv(a,i,p);case"defaultedOptionThunk":return OC(a,i,t.process,p);case"mergeWithThunk":return Up(a,i,Q({}),C=>{const w=Vn(t.process(a),C);return g(w)})}},Ys=(t,s,a)=>{const i={},d=[];for(const g of a)Zm(g,(p,C,w,E)=>{const _=Wv(w,t,s,p,E);yo.fold(_,D=>{d.push(...D)},D=>{i[C]=D})},(p,C)=>{i[p]=C(s)});return d.length>0?yo.serror(d):yo.svalue(i)},Wp=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),Xo=t=>bo(md(t,ir)),$s=t=>{const s=lt(t),a=rs(t,(d,g)=>Zm(g,p=>Vn(d,{[p]:!0}),Q(d)),{});return{extract:(d,g)=>{const p=fl(g)?[]:Xo(g),C=Yn(p,w=>!oc(a,w));return C.length===0?s.extract(d,g):Cl(d,C)},toString:s.toString}},lt=t=>({extract:(i,d)=>Ys(i,d,t),toString:()=>`obj{
`+we(t,d=>Zm(d,(g,p,C,w)=>g+" -> "+w.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),We=t=>({extract:(i,d)=>{const g=we(d,(p,C)=>t.extract(i.concat(["["+C+"]"]),p));return Hv.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Dd=(t,s)=>{const a=s!==void 0?s:en;return{extract:(g,p)=>{const C=[];for(const w of t){const E=w.extract(g,p);if(E.stype===lc.Value)return{stype:lc.Value,svalue:a(E.svalue)};C.push(E)}return Hv.consolidateArr(C)},toString:()=>"oneOf("+we(t,g=>g.toString()).join(", ")+")"}},uc=(t,s)=>{const a=(g,p)=>We(gi(t)).extract(g,p);return{extract:(g,p)=>{const C=bo(p),w=a(g,C);return yo.bind(w,E=>{const _=we(E,D=>ba(D,D,Tn(),s));return lt(_).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},Zv=(t,s)=>{const a=Li(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},jv=vp(We,lt),dc=Q(Ad),mc=(t,s)=>gi(a=>{const i=typeof a;return t(a)?yo.svalue(a):yo.serror(`Expected type: ${s} but got: ${i}`)}),Zp=mc(gl,"number"),fo=mc(xn,"string"),jm=mc(fl,"boolean"),Ng=mc(mt,"function"),_e=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>_e(t[s]));default:return!1}},_T=gi(t=>_e(t)?yo.svalue(t):yo.serror("Expected value to be acceptable for sending via postMessage")),OT=(t,s,a,i)=>Ze(a,i).fold(()=>Bg(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),Ha=(t,s)=>({extract:(d,g)=>Ze(g,t).fold(()=>TT(d,t),C=>OT(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+bo(s)}),Gm=()=>We(Ad),ku=t=>gi(s=>t(s).fold(yo.serror,yo.svalue)),co=(t,s)=>uc(a=>yo.fromResult(t(a)),s),AC=(t,s,a)=>{const i=s.extract([t],a);return yo.mapError(i,d=>({input:a,errors:d}))},kn=(t,s,a)=>yo.toResult(AC(t,s,a)),vn=t=>t.fold(s=>{throw new Error(qm(s))},en),Xs=(t,s,a)=>vn(kn(t,s,a)),qm=t=>`Errors: 
`+_C(t.errors).join(`
`)+`

Input object: `+Vv(t.input),Uo=(t,s)=>Ha(t,vo(s,lt)),Rd=(t,s)=>Zv(t,s),As=ba,Rr=La,wl=t=>ku(s=>Io(t,s)?Nt.value(s):Nt.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),me=t=>As(t,t,Tn(),dc()),ta=(t,s)=>As(t,t,Tn(),s),DC=t=>ta(t,Zp),is=t=>ta(t,fo),Lc=(t,s)=>As(t,t,Tn(),wl(s)),jp=t=>ta(t,jm),fc=t=>ta(t,Ng),AT=(t,s)=>As(t,t,zp(),gi(a=>yo.serror("The field: "+t+" is forbidden. "+s))),_u=(t,s)=>As(t,t,Tn(),lt(s)),RC=(t,s)=>As(t,t,Tn(),jv(s)),Va=(t,s)=>As(t,t,Tn(),We(s)),bn=t=>As(t,t,zp(),dc()),Vi=(t,s)=>As(t,t,zp(),s),Pg=t=>Vi(t,Zp),Js=t=>Vi(t,fo),Gp=(t,s)=>Vi(t,wl(s)),Ou=t=>Vi(t,Ng),Sl=(t,s)=>Vi(t,We(s)),Bo=(t,s)=>Vi(t,lt(s)),Gv=(t,s)=>Vi(t,$s(s)),oe=(t,s)=>As(t,t,$v(s),dc()),Qs=(t,s,a)=>As(t,t,$v(s),a),qp=(t,s)=>Qs(t,s,Zp),za=(t,s)=>Qs(t,s,fo),va=(t,s,a)=>Qs(t,s,wl(a)),Fs=(t,s)=>Qs(t,s,jm),To=(t,s)=>Qs(t,s,Ng),Kp=(t,s)=>Qs(t,s,_T),Km=(t,s,a)=>Qs(t,s,We(a)),Au=(t,s,a)=>Qs(t,s,lt(a)),gt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},ya={generate:t=>{if(!ml(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return qe(t,(i,d)=>{const g=bo(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],C=i[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ml(C))throw new Error("case arguments must be an array");s.push(p),a[p]=(...w)=>{const E=w.length;if(E!==C.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+C.length+" ("+C+"), got "+E);return{fold:(...D)=>{if(D.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+D.length);return D[d].apply(null,w)},match:D=>{const M=bo(D);if(s.length!==M.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+M.join(","));if(!hu(s,I=>Io(M,I)))throw new Error("Not all branches were specified when using match. Specified: "+M.join(", ")+`
Required: `+s.join(", "));return D[p].apply(null,w)},log:D=>{console.log(D,{constructors:s,constructor:p,params:w})}}}}),a}};ya.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Du=t=>{const s=[],a=[];return qe(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},DT=(t,s)=>{const a={};return ys(t,(i,d)=>{Io(s,d)||(a[d]=i)}),a},er=(t,s)=>({[t]:s}),Yp=t=>{const s={};return qe(t,a=>{s[a.key]=a.value}),s},xl=(t,s)=>DT(t,s),Ym=(t,s)=>er(t,s),gc=t=>Yp(t),Ru=(t,s)=>t.length===0?Nt.value(s):Nt.value(Vn(s,Eu.apply(void 0,t))),El=t=>Nt.error(Ft(t)),hc=(t,s)=>{const a=Du(t);return a.errors.length>0?El(a.errors):Ru(a.values,s)},zi=t=>mt(t)?t:An,MC=(t,s,a)=>{let i=t.dom;const d=zi(a);for(;i.parentNode;){i=i.parentNode;const g=te.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return k.none()},Xm=(t,s,a)=>{const i=s(t),d=zi(a);return i.orThunk(()=>d(t)?k.none():MC(t,s,d))},Xp=(t,s)=>$n(t.element,s.event.target),BC={can:pt,abort:An,run:K},Ui=t=>{if(!oc(t,"can")&&!oc(t,"abort")&&!oc(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...BC,...t}},$g=(t,s)=>(...a)=>eo(t,(i,d)=>i&&s(d).apply(void 0,a),!0),RT=(t,s)=>(...a)=>eo(t,(i,d)=>i||s(d).apply(void 0,a),!1),qv=t=>mt(t)?{can:pt,abort:An,run:t}:t,Jp=t=>{const s=$g(t,d=>d.can),a=RT(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{qe(t,g=>{g.run.apply(void 0,d)})}}},ls=Q,Wi=ls("touchstart"),Jm=ls("touchmove"),Md=ls("touchend"),NC=ls("touchcancel"),Ua=ls("mousedown"),Qp=ls("mousemove"),Fg=ls("mouseout"),Ca=ls("mouseup"),Tl=ls("mouseover"),hi=ls("focusin"),Mu=ls("focusout"),Hc=ls("keydown"),PC=ls("keyup"),Bu=ls("input"),Qm=ls("change"),pc=ls("click"),$C=ls("transitioncancel"),Ig=ls("transitionend"),Kv=ls("transitionstart"),Yv=ls("selectstart"),Co=t=>Q("alloy."+t),FC={tap:Co("tap")},Zi=Co("focus"),ef=Co("blur.post"),pi=Co("paste.post"),bi=Co("receive"),Wa=Co("execute"),tf=Co("focus.item"),Lg=FC.tap,Jo=Co("longpress"),Bd=Co("sandbox.close"),Xv=Co("typeahead.cancel"),Nd=Co("system.init"),nf=Co("system.touchmove"),Jv=Co("system.touchend"),Pd=Co("system.scroll"),kl=Co("system.resize"),na=Co("system.attached"),_l=Co("system.detached"),ji=Co("system.dismissRequested"),Qv=Co("system.repositionRequested"),e1=Co("focusmanager.shifted"),Hg=Co("slotcontainer.visibility"),t1=Co("system.external.element.scroll"),of=Co("change.tab"),Nu=Co("dismiss.tab"),IC=Co("highlight"),Vg=Co("dehighlight"),hn=(t,s)=>{o1(t,t.element,s,{})},at=(t,s,a)=>{o1(t,t.element,s,a)},$d=t=>{hn(t,Wa())},n1=(t,s,a)=>{o1(t,s,a,{})},o1=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},e0=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},MT=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},Fn=t=>gc(t),s1=(t,s)=>({key:t,value:Ui({abort:s})}),LC=(t,s)=>({key:t,value:Ui({can:s})}),zg=t=>({key:t,value:Ui({run:(s,a)=>{a.event.prevent()}})}),ve=(t,s)=>({key:t,value:Ui({run:s})}),sf=(t,s,a)=>({key:t,value:Ui({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),BT=t=>s=>ve(t,s),r1=t=>s=>({key:t,value:Ui({run:(a,i)=>{Xp(a,i)&&s(a,i)}})}),t0=(t,s)=>ve(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{MT(d,d.element,t,i)})}),rf=(t,s,a)=>{const i=s.partUids[a];return t0(t,i)},af=(t,s)=>ve(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Xm(d.target,C=>a.getSystem().getByDom(C).toOptional(),An).getOr(a));s(a,g,i)}),Gi=t=>ve(t,(s,a)=>{a.cut()}),NT=t=>ve(t,(s,a)=>{a.stop()}),cf=(t,s)=>r1(t)(s),Gn=r1(na()),fr=r1(_l()),PT=r1(Nd()),vi=BT(Wa()),Ug=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,ii(te.fromDom(i))},Fd=t=>t.dom.innerHTML,Id=(t,s)=>{const i=$a(t).dom,d=te.fromDom(i.createDocumentFragment()),g=Ug(s,i);xu(d,g),Wm(t),Ia(t,d)},HC=t=>{const s=te.fromTag("div"),a=te.fromDom(t.dom.cloneNode(!0));return Ia(s,a),Fd(s)},VC=(t,s)=>te.fromDom(t.dom.cloneNode(s)),n0=t=>VC(t,!1),$T=t=>{if(Op(t))return"#shadow-root";{const s=n0(t);return HC(s)}},Ld=t=>$T(t),Ol=(t,s,a)=>$n(s,t.element)&&!$n(s,a),a1=Fn([LC(Zi(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return Ol(t,i,d)?(console.warn(Zi()+` did not get interpreted by the desired target. 
Originator: `+Ld(i)+`
Target: `+Ld(d)+`
Check the `+Zi()+" event handlers"),!1):!0})]);var c1=Object.freeze({__proto__:null,events:a1});let Wg=0;const je=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return Wg++,t+"_"+i+Wg+String(a)},gr=Q("alloy-id-"),Zg=Q("data-alloy-id"),zC=gr(),i1=Zg(),tr=(t,s)=>{const a=je(zC+t);return l1(s,a),a},l1=(t,s)=>{Object.defineProperty(t.dom,i1,{value:s,writable:!0})},Vc=t=>{const s=Pn(t)?t.dom[i1]:null;return k.from(s)},Al=t=>je(t),o0=en,yi=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Ld(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:Q("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:An}},s0=yi(),UC=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:r0(p.slice(0,1).concat(p.slice(3)))}),t},r0=t=>we(t,s=>$i(s,"/*")?s.substring(0,s.length-2):s),jg=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:r0(g)}),t},qi=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:r0(g.slice(1))}),t},Gg=je("alloy-premade"),u1=t=>(Object.defineProperty(t.element.dom,Gg,{value:t.uid,writable:!0}),Ym(Gg,t)),FT=t=>wn(t.dom,Gg),WC=t=>Ze(t,Gg),lf=t=>qi((s,...a)=>t(s.getApis(),s,...a),t),hr={init:()=>wa({readState:Q("No State required")})},wa=t=>t,uf=(t,s)=>{const a=we(s,d=>Bo(d.name(),[me("config"),oe("state",hr)])),i=kn("component.behaviours",lt(a),t.behaviours).fold(d=>{throw new Error(qm(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},en);return{list:s,data:vo(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return Q(g)})}},ZC=t=>t.list,Hd=t=>t.data,d1=(t,s)=>{const a={};return ys(t,(i,d)=>{ys(i,(g,p)=>{const C=Ze(a,p).getOr([]);a[p]=C.concat([s(d,g)])})}),a},zc=t=>({classes:ca(t.classes)?[]:t.classes,attributes:ca(t.attributes)?{}:t.attributes,styles:ca(t.styles)?{}:t.styles}),a0=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),m1=(t,s,a,i)=>{const d={...s};qe(a,_=>{d[_.name()]=_.exhibit(t,i)});const g=d1(d,(_,D)=>({name:_,modification:D})),p=_=>rs(_,(D,M)=>({...M.modification,...D}),{}),C=rs(g.classes,(_,D)=>D.modification.concat(_),[]),w=p(g.attributes),E=p(g.styles);return zc({classes:C,attributes:w,styles:E})},df=(t,s,a,i)=>{try{const d=yp(a,(g,p)=>{const C=g[s],w=p[s],E=i.indexOf(C),_=i.indexOf(w);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));return E<_?-1:_<E?1:0});return Nt.value(d)}catch(d){return Nt.error([d])}},c0=(t,s)=>({handler:t,purpose:s}),Dl=(t,s)=>({cHandler:t,purpose:s}),jC=(t,s)=>Dl(dn.apply(void 0,[t.handler].concat(s)),t.purpose),f1=t=>t.cHandler,g1=(t,s)=>({name:t,handler:s}),i0=(t,s)=>{const a={};return qe(t,i=>{a[i.name()]=i.handlers(s)}),a},Dn=(t,s,a)=>{const i={...a,...i0(s,t)};return d1(i,g1)},h1=(t,s,a,i)=>{const d=Dn(t,a,i);return qC(d,s)},IT=t=>{const s=qv(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},GC=(t,s)=>Nt.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(we(s,a=>a.name),null,2)]),mf=(t,s,a)=>{const i=s[a];return i?df("Event: "+a,"name",t,i).map(d=>{const g=we(d,p=>p.handler);return Jp(g)}):GC(a,t)},qC=(t,s)=>{const a=Sp(t,(i,d)=>(i.length===1?Nt.value(i[0].handler):mf(i,s,d)).map(p=>{const C=IT(p),w=i.length>1?Yn(s[d],E=>Ba(i,_=>_.name===E)).join(" > "):i[0].name;return Ym(d,c0(C,w))}));return hc(a,{})},Sa="alloy.base.behaviour",us=lt([As("dom","dom",Tn(),lt([me("tag"),oe("styles",{}),oe("classes",[]),oe("attributes",{}),bn("value"),bn("innerHtml")])),me("components"),me("uid"),oe("events",{}),oe("apis",{}),As("eventOrder","eventOrder",Gt({[Wa()]:["disabling",Sa,"toggling","typeaheadevents"],[Zi()]:[Sa,"focusing","keying"],[Nd()]:[Sa,"disabling","toggling","representing"],[Bu()]:[Sa,"representing","streaming","invalidating"],[_l()]:[Sa,"representing","item-events","tooltipping"],[Ua()]:["focusing",Sa,"item-type-events"],[Wi()]:["focusing",Sa,"item-type-events"],[Tl()]:["item-type-events","tooltipping"],[bi()]:["receiving","reflecting","tooltipping"]}),dc()),bn("domModification")]),l0=t=>kn("custom.definition",us,t),KC=t=>({...t.dom,uid:t.uid,domChildren:we(t.components,s=>s.element)}),ff=t=>t.domModification.fold(()=>zc({}),zc),p1=t=>t.events,u0=(t,s)=>{const a=dr(t,s);return a===void 0||a===""?[]:a.split(" ")},rF=(t,s,a)=>{const d=u0(t,s).concat([a]);return Vt(t,s,d.join(" ")),!0},b1=(t,s,a)=>{const i=Yn(u0(t,s),d=>d!==a);return i.length>0?Vt(t,s,i.join(" ")):zo(t,s),!1},Pu=t=>t.dom.classList!==void 0,YC=t=>u0(t,"class"),nD=(t,s)=>rF(t,"class",s),oD=(t,s)=>b1(t,"class",s),Wo=(t,s)=>{Pu(t)?t.dom.classList.add(s):nD(t,s)},Ci=t=>{(Pu(t)?t.dom.classList:YC(t)).length===0&&zo(t,"class")},mn=(t,s)=>{Pu(t)?t.dom.classList.remove(s):oD(t,s),Ci(t)},Mr=(t,s)=>Pu(t)&&t.dom.classList.contains(s),Ki=(t,s)=>{qe(s,a=>{Wo(t,a)})},Ds=(t,s)=>{qe(s,a=>{mn(t,a)})},Rl=(t,s)=>hu(s,a=>Mr(t,a)),d0=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},$u=t=>Pu(t)?d0(t):YC(t),Br=t=>t.dom.value,Za=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Qo=(t,s,a)=>yu(t,s).map(d=>{if(a.exists(p=>!$n(p,d))){const p=a.map(Pc).getOr("span"),C=te.fromTag(p);return Fc(d,C),C}else return d}),gf=(t,s,a)=>{a.fold(()=>Ia(t,s),i=>{$n(i,s)||(Fc(i,s),Ic(i))})},Fu=(t,s,a)=>{const i=we(s,a),d=ii(t);return qe(d.slice(i.length),Ic),i},m0=(t,s,a,i)=>{const d=yu(t,s),g=i(a,d),p=Qo(t,s,d);return gf(t,g.element,p),g},XC=(t,s,a)=>Fu(t,s,(i,d)=>m0(t,d,i,a)),Ml=(t,s)=>Fu(t,s,(a,i)=>{const d=yu(t,i);return gf(t,a,d),a}),wi=(t,s)=>{const a=bo(t),i=bo(s),d=ft(i,a),g=kr(t,(p,C)=>!wn(s,C)||p!==s[C]).t;return{toRemove:d,toSet:g}},JC=(t,s)=>{const{class:a,style:i,...d}=bT(s),{toSet:g,toRemove:p}=wi(t.attributes,d),C=()=>{qe(p,pe=>zo(s,pe)),gn(s,g)},w=_r(s),{toSet:E,toRemove:_}=wi(t.styles,w),D=()=>{qe(_,pe=>sn(s,pe)),wu(s,E)},M=$u(s),P=ft(M,t.classes),I=ft(t.classes,M),U=()=>{Ki(s,I),Ds(s,P)},ne=pe=>{Id(s,pe)},Y=()=>{const pe=t.domChildren;Ml(s,pe)},j=()=>{const pe=s,ce=t.value.getOrUndefined();ce!==Br(pe)&&Za(pe,ce??"")};return C(),U(),D(),t.innerHtml.fold(Y,ne),j(),s},f0=t=>{const s=te.fromTag(t.tag);gn(s,t.attributes),Ki(s,t.classes),wu(s,t.styles),t.innerHtml.each(i=>Id(s,i));const a=t.domChildren;return xu(s,a),t.value.each(i=>{Za(s,i)}),s},LT=(t,s)=>{try{const a=JC(t,s);return k.some(a)}catch{return k.none()}},HT=t=>t.innerHtml.isSome()&&t.domChildren.length>0,VT=(t,s)=>{const a=d=>Pc(d)===t.tag&&!HT(t)&&!FT(d),i=s.filter(a).bind(d=>LT(t,d)).getOrThunk(()=>f0(t));return l1(i,t.uid),i},g0=t=>{const s=Ze(t,"behaviours").getOr({});return be(bo(s),a=>{const i=s[a];return ir(i)?[i.me]:[]})},qg=(t,s)=>uf(t,s),zT=t=>{const s=g0(t);return qg(t,s)},UT=(t,s,a)=>{const i=KC(t),d=ff(t),g={"alloy.base.modification":d},p=s.length>0?m1(a,g,s,i):d;return a0(i,p)},h0=(t,s,a)=>{const i={"alloy.base.behaviour":p1(t)};return h1(a,t.eventOrder,s,i).getOrDie()},Iu=(t,s)=>{const a=()=>pe,i=gt(s0),d=vn(l0(t)),g=zT(t),p=ZC(g),C=Hd(g),w=UT(d,p,C),E=VT(w,s),_=h0(d,p,C),D=gt(d.components),M=ce=>{i.set(ce)},P=()=>{i.set(yi(a))},I=()=>{const ce=ii(E),Re=be(ce,ke=>i.get().getByDom(ke).fold(()=>[],Ro));D.set(Re)},U=ce=>{const Re=C;return(mt(Re[ce.name()])?Re[ce.name()]:()=>{throw new Error("Could not find "+ce.name()+" in "+JSON.stringify(t,null,2))})()},ne=ce=>mt(C[ce.name()]),Y=()=>d.apis,j=ce=>C[ce]().map(Re=>Re.state.readState()).getOr("not enabled"),pe={uid:t.uid,getSystem:i.get,config:U,hasConfigured:ne,spec:t,readState:j,getApis:Y,connect:M,disconnect:P,element:E,syncComponents:I,components:D.get,events:_};return pe},WT=(t,s)=>{const a=Ze(t,"components").getOr([]);return s.fold(()=>we(a,Is),i=>we(a,(d,g)=>Bl(d,yu(i,g))))},v1=(t,s)=>{const{events:a,...i}=o0(t),d=WT(i,s),g={...i,events:{...c1,...a},components:d};return Nt.value(Iu(g,s))},ko=t=>{const s=te.fromText(t);return y1({element:s})},y1=t=>{const s=Xs("external.component",$s([me("element"),bn("uid")]),t),a=gt(yi()),i=C=>{a.set(C)},d=()=>{a.set(yi(()=>p))},g=s.uid.getOrThunk(()=>Al("external"));l1(s.element,g);const p={uid:g,getSystem:a.get,config:k.none,hasConfigured:An,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:Q("No state"),syncComponents:K,components:Q([]),events:{}};return u1(p)},Lu=Al,Hu=t=>wn(t,"uid"),Bl=(t,s)=>WC(t).getOrThunk(()=>{const a=Hu(t)?t:{uid:Lu(""),...t};return v1(a,s).getOrDie()}),Is=t=>Bl(t,k.none()),bc=u1;var Vd=(t,s,a,i,d)=>t(a,i)?k.some(a):mt(d)&&d(a)?k.none():s(a,i,d);const hf=(t,s,a)=>{let i=t.dom;const d=mt(a)?a:An;for(;i.parentNode;){i=i.parentNode;const g=te.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},pf=(t,s,a)=>Vd((d,g)=>g(d),hf,t,s,a),ZT=(t,s)=>{const a=d=>s(te.fromDom(d));return Bt(t.dom.childNodes,a).map(te.fromDom)},QC=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=te.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const p=a(i.childNodes[d]);if(p.isSome())return p}return k.none()};return a(t.dom)},p0=(t,s,a)=>pf(t,s,a).isSome(),Nl=(t,s,a)=>hf(t,i=>rc(i,s),a),C1=(t,s)=>ZT(t,a=>rc(a,s)),go=(t,s)=>iC(s,t),nr=(t,s,a)=>Vd((d,g)=>rc(d,g),Nl,t,s,a),Kg="aria-controls",ew=t=>pf(t,a=>{if(!Pn(a))return!1;const i=dr(a,"id");return i!==void 0&&i.indexOf(Kg)>-1}).bind(a=>{const i=dr(a,"id"),d=ur(a);return go(d,`[${Kg}="${i}"]`)}),b0=()=>{const t=je(Kg);return{id:t,link:i=>{Vt(i,Kg,t)},unlink:i=>{zo(i,Kg)}}},jT=(t,s)=>ew(s).exists(a=>zd(t,a)),zd=(t,s)=>p0(s,a=>$n(a,t.element),An)||jT(t,s),v0="unknown";var Ud;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Ud||(Ud={}));const w1=gt({}),GT=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();Io(["mousemove","mouseover","mouseout",Nd()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:we(a,g=>Io(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Ld(g.target)+")":g.outcome)})}}},bf=(t,s,a)=>{switch(Ze(w1.get(),t).orThunk(()=>{const d=bo(w1.get());return Ws(d,g=>t.indexOf(g)>-1?k.some(w1.get()[g]):k.none())}).getOr(Ud.NORMAL)){case Ud.NORMAL:return a(Xg());case Ud.LOGGING:{const d=GT(t,s),g=a(d);return d.write(),g}case Ud.STOP:return!0}},qT=["alloy/data/Fields","alloy/debugging/Debugging"],Yg=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Bt(s,a=>a.indexOf("alloy")>0&&!Ba(qT,i=>a.indexOf(i)>-1)).getOr(v0)}else return v0},S1={logEventCut:K,logEventStopped:K,logNoParent:K,logEventNoHandlers:K,logEventResponse:K,write:K},vf=(t,s,a)=>bf(t,s,a),Xg=Q(S1),x1=Q([me("menu"),me("selectedMenu")]),yf=Q([me("item"),me("selectedItem")]);Q(lt(yf().concat(x1())));const tw=Q(lt(yf())),E1=_u("initSize",[me("numColumns"),me("numRows")]),sD=()=>ta("markers",tw()),Yi=()=>_u("markers",[me("backgroundMenu")].concat(x1()).concat(yf())),Wd=t=>_u("markers",we(t,me)),oa=(t,s,a)=>(Yg(),As(s,s,a,ku(i=>Nt.value((...d)=>i.apply(void 0,d))))),zt=t=>oa("onHandler",t,$v(K)),xa=t=>oa("onKeyboardHandler",t,$v(k.none)),ie=t=>oa("onHandler",t,Tn()),Cf=t=>oa("onKeyboardHandler",t,Tn()),qn=(t,s)=>Rr(t,Q(s)),nw=t=>Rr(t,en),T1=Q(E1),io=(t,s,a,i,d,g,p,C=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:C}),Pl=ya.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),k1=(t,s,a,i,d,g,p,C,w)=>t.fold(s,a,i,d,g,p,C,w),y0=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),C0=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),_1=Pl.southeast,O1=Pl.southwest,Vu=Pl.northeast,Jg=Pl.northwest,w0=Pl.south,A1=Pl.north,ow=Pl.east,sw=Pl.west,Zd=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},pr=(t,s,a)=>Math.min(Math.max(t,s),a),rD=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},In=(t,s)=>dd(["left","right","top","bottom"],a=>Ze(s,a).map(i=>rD(t,i))),KT=(t,s,a)=>{const i=(w,E)=>s[w].map(_=>{const D=w==="top"||w==="bottom",M=D?a.top:a.left,I=(w==="left"||w==="top"?Math.max:Math.min)(_,E)+M;return D?pr(I,t.y,t.bottom):pr(I,t.x,t.right)}).getOr(E),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),C=i("bottom",t.bottom);return cs(d,g,p-d,C-g)},Xi="layout",S0=t=>t.x,x0=(t,s)=>t.x+t.width/2-s.width/2,Qg=(t,s)=>t.x+t.width-s.width,eh=(t,s)=>t.y-s.height,D1=t=>t.y+t.height,rw=(t,s)=>t.y+t.height/2-s.height/2,YT=t=>t.x+t.width,E0=(t,s)=>t.x-s.width,Ss=(t,s,a)=>io(S0(t),D1(t),a.southeast(),_1(),"southeast",In(t,{left:1,top:3}),Xi),ds=(t,s,a)=>io(Qg(t,s),D1(t),a.southwest(),O1(),"southwest",In(t,{right:0,top:3}),Xi),br=(t,s,a)=>io(S0(t),eh(t,s),a.northeast(),Vu(),"northeast",In(t,{left:1,bottom:2}),Xi),Nr=(t,s,a)=>io(Qg(t,s),eh(t,s),a.northwest(),Jg(),"northwest",In(t,{right:0,bottom:2}),Xi),zn=(t,s,a)=>io(x0(t,s),eh(t,s),a.north(),A1(),"north",In(t,{bottom:2}),Xi),es=(t,s,a)=>io(x0(t,s),D1(t),a.south(),w0(),"south",In(t,{top:3}),Xi),vr=(t,s,a)=>io(YT(t),rw(t,s),a.east(),ow(),"east",In(t,{left:0}),Xi),aw=(t,s,a)=>io(E0(t,s),rw(t,s),a.west(),sw(),"west",In(t,{right:1}),Xi),Si=()=>[Ss,ds,br,Nr,es,zn,vr,aw],cw=()=>[ds,Ss,Nr,br,es,zn,vr,aw],iw=()=>[br,Nr,Ss,ds,zn,es],lw=()=>[Nr,br,ds,Ss,zn,es],T0=()=>[Ss,ds,br,Nr,es,zn],R1=()=>[ds,Ss,Nr,br,es,zn],M1=(t,s)=>s.universal?t:Yn(t,a=>Io(s.channels,a));var uw=Object.freeze({__proto__:null,events:t=>Fn([ve(bi(),(s,a)=>{const i=t.channels,d=bo(i),g=a,p=M1(d,g);qe(p,C=>{const w=i[C],E=w.schema,_=Xs("channel["+C+`] data
Receiver: `+Ld(s.element),E,g.data);w.onReceive(s,_)})})])}),XT=[ta("channels",co(Nt.value,$s([ie("onReceive"),oe("schema",dc())])))];const k0=(t,s,a)=>vi(i=>{a(i,t,s)}),_0=(t,s,a)=>PT((i,d)=>{a(i,t,s)}),JT=(t,s,a,i,d,g)=>{const p=$s(t),C=Bo(s,[Gv("config",t)]);return B1(p,C,s,a,i,d,g)},QT=(t,s,a,i,d,g)=>{const p=t,C=Bo(s,[Vi("config",t)]);return B1(p,C,s,a,i,d,g)},dw=(t,s,a)=>UC((d,...g)=>{const p=[d].concat(g);return d.config({name:Q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const w=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,C.config,C.state].concat(w))})},a,s),Ge=t=>({key:t,value:void 0}),B1=(t,s,a,i,d,g,p)=>{const C=D=>oc(D,a)?D[a]():k.none(),w=vo(d,(D,M)=>dw(a,D,M)),_={...vo(g,(D,M)=>jg(D,M)),...w,revoke:dn(Ge,a),config:D=>{const M=Xs(a+"-config",t,D);return{key:a,value:{config:M,me:_,configAsRaw:Li(()=>Xs(a+"-config",t,D)),initialConfig:D,state:p}}},schema:Q(s),exhibit:(D,M)=>gd(C(D),Ze(i,"exhibit"),(P,I)=>I(M,P.config,P.state)).getOrThunk(()=>zc({})),name:Q(a),handlers:D=>C(D).map(M=>Ze(i,"events").getOr(()=>({}))(M.config,M.state)).getOr({})};return _},De=t=>gc(t),ek=$s([me("fields"),me("name"),oe("active",{}),oe("apis",{}),oe("state",hr),oe("extra",{})]),Rs=t=>{const s=Xs("Creating behaviour: "+t.name,ek,t);return JT(s.fields,s.name,s.active,s.apis,s.extra,s.state)},tk=$s([me("branchKey"),me("branches"),me("name"),oe("active",{}),oe("apis",{}),oe("state",hr),oe("extra",{})]),O0=t=>{const s=Xs("Creating behaviour: "+t.name,tk,t);return QT(Uo(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},nk=Q(void 0),Pr=Rs({fields:XT,name:"receiving",active:uw});var mw=Object.freeze({__proto__:null,exhibit:(t,s)=>zc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const wo=t=>t.dom.focus(),zu=t=>t.dom.blur(),wf=t=>{const s=ur(t).dom;return t.dom===s.activeElement},Ji=(t=Rv())=>k.from(t.dom.activeElement).map(te.fromDom),Uc=t=>Ji(ur(t)).filter(s=>t.dom.contains(s.dom)),th=(t,s)=>{const a=ur(s),i=Ji(a).bind(g=>{const p=C=>$n(g,C);return p(s)?k.some(s):QC(s,p)}),d=t(s);return i.each(g=>{Ji(a).filter(p=>$n(p,g)).fold(()=>{wo(g)},K)}),d},Ea=(t,s,a,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},fw=t=>({...t,position:k.some(t.position)}),D0=(t,s)=>{$c(t,fw(s))},R0=ya.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),M0=(t,s,a,i,d,g)=>{const p=s.rect,C=p.x-a,w=p.y-i,E=p.width,_=p.height,D=d-(C+E),M=g-(w+_),P=k.some(C),I=k.some(w),U=k.some(D),ne=k.some(M),Y=k.none();return k1(s.direction,()=>Ea(t,P,I,Y,Y),()=>Ea(t,Y,I,U,Y),()=>Ea(t,P,Y,Y,ne),()=>Ea(t,Y,Y,U,ne),()=>Ea(t,P,I,Y,Y),()=>Ea(t,P,Y,Y,ne),()=>Ea(t,P,I,Y,Y),()=>Ea(t,Y,I,U,Y))},gw=(t,s)=>t.fold(()=>{const a=s.rect;return Ea("absolute",k.some(a.x),k.some(a.y),k.none(),k.none())},(a,i,d,g)=>M0("absolute",s,a,i,d,g),(a,i,d,g)=>M0("fixed",s,a,i,d,g)),B0=(t,s)=>{const a=dn(Hp,s),i=t.fold(a,a,()=>{const p=pa();return Hp(s).translate(-p.left,-p.top)}),d=ha(s),g=bl(s);return cs(i.left,i.top,d,g)},ok=(t,s)=>s.fold(()=>t.fold(Dr,Dr,cs),a=>t.fold(Q(a),Q(a),()=>{const i=hw(t,a.x,a.y);return cs(i.left,i.top,a.width,a.height)})),hw=(t,s,a)=>{const i=ao(s,a),d=()=>{const g=pa();return i.translate(-g.left,-g.top)};return t.fold(Q(i),Q(i),d)},sk=(t,s,a,i)=>t.fold(s,a,i);R0.none;const rk=R0.relative,N0=R0.fixed,pw=(t,s)=>({anchorBox:t,origin:s}),ak=(t,s)=>pw(t,s),N1="data-alloy-placement",ck=(t,s)=>{Vt(t,N1,s)},bw=t=>jo(t,N1),ik=t=>zo(t,N1),nh=ya.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),lk=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:C,right:w,bottom:E,width:_,height:D}=t,M=p>=a&&p<=d,P=C>=i&&C<=g,I=M&&P,U=w<=d&&w>=a,ne=E<=g&&E>=i,Y=U&&ne,j=Math.min(_,p>=a?d-p:w-a),pe=Math.min(D,C>=i?g-C:E-i);return{originInBounds:I,sizeInBounds:Y,visibleW:j,visibleH:pe}},uk=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:C,width:w,height:E}=t,_=Math.max(a,d-w),D=Math.max(i,g-E),M=pr(p,a,_),P=pr(C,i,D),I=Math.min(M+w,d)-M,U=Math.min(P+E,g)-P;return cs(M,P,I,U)},vw=(t,s,a)=>{const i=Q(s.bottom-a.y),d=Q(a.bottom-s.y),g=y0(t,d,d,i),p=Q(s.right-a.x),C=Q(a.right-s.x);return{maxWidth:C0(t,C,C,p),maxHeight:g}},dk=(t,s,a,i)=>{const d=t.bubble,g=d.offset,p=KT(i,t.restriction,g),C=t.x+g.left,w=t.y+g.top,E=cs(C,w,s,a),{originInBounds:_,sizeInBounds:D,visibleW:M,visibleH:P}=lk(E,p),I=_&&D,U=I?E:uk(E,p),ne=U.width>0&&U.height>0,{maxWidth:Y,maxHeight:j}=vw(t.direction,U,i),pe={rect:U,maxHeight:j,maxWidth:Y,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return I||t.alwaysFit?nh.fit(pe):nh.nofit(pe,M,P,ne)},mk=(t,s,a,i,d,g)=>{const p=i.width,C=i.height,w=(_,D,M,P,I)=>{const U=_(a,i,d,t,g),ne=dk(U,p,C,g);return ne.fold(Q(ne),(Y,j,pe,ce)=>(I===ce?pe>P||j>M:!I&&ce)?ne:nh.nofit(D,M,P,I))};return eo(s,(_,D)=>{const M=dn(w,D);return _.fold(Q(_),M)},nh.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:_1(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(en,en)},oh=t=>{const s=gt(k.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(k.some(C))}}},yw=()=>oh(t=>t.destroy()),$r=()=>oh(t=>t.unbind()),Kn=()=>{const t=oh(K);return{...t,on:a=>t.get().each(a)}},P1=pt,Fr=(t,s,a)=>Fp(t,s,P1,a),jd=(t,s,a)=>Av(t,s,P1,a),sh=yC,xs=["top","bottom","right","left"],$1="data-alloy-transition-timer",Cw=(t,s)=>Rl(t,s.classes),fk=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),F1=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return jr(s,(i,d)=>{const g=t[d].map(a),p=i.map(a);return!xp(g,p)}).isSome()},ww=t=>{const s=g=>{const C=Te(t,g).split(/\s*,\s*/);return Yn(C,sc)},a=g=>{if(xn(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return $i(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return eo(d,(g,p,C)=>{const w=a(i[C])+a(p);return Math.max(g,w)},0)},gk=(t,s)=>{const a=$r(),i=$r();let d;const g=E=>{var _;const D=(_=E.raw.pseudoElement)!==null&&_!==void 0?_:"";return $n(E.target,t)&&Vo(D)&&Io(xs,E.raw.propertyName)},p=E=>{if(Ni(E)||g(E)){a.clear(),i.clear();const _=E==null?void 0:E.raw.type;(Ni(_)||_===Ig())&&(clearTimeout(d),zo(t,$1),Ds(t,s.classes))}},C=Fr(t,Kv(),E=>{g(E)&&(C.unbind(),a.set(Fr(t,Ig(),p)),i.set(Fr(t,$C(),p)))}),w=ww(t);requestAnimationFrame(()=>{d=setTimeout(p,w+17),Vt(t,$1,d)})},hk=(t,s)=>{Ki(t,s.classes),jo(t,$1).each(a=>{clearTimeout(parseInt(a,10)),zo(t,$1)}),gk(t,s)},pk=(t,s,a,i,d,g)=>{const p=fk(i,d,g);if(p||Cw(t,i)){Rt(t,"position",a.position);const C=B0(s,t),w=gw(s,{...d,rect:C}),E=dd(xs,_=>w[_]);F1(a,E)&&($c(t,E),p&&hk(t,i),wd(t))}else Ds(t,i.classes)},bk=t=>({width:ha(t),height:bl(t)}),rh=(t,s,a,i)=>{sn(s,"max-height"),sn(s,"max-width");const d=bk(s);return mk(s,i.preference,t,d,a,i.bounds)},P0=(t,s)=>{const a=s.classes;Ds(t,a.off),Ki(t,a.on)},cD=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},Uu=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},I1=(t,s,a)=>{const i=gw(a.origin,s);a.transition.each(d=>{pk(t,a.origin,i,d,s,a.lastPlacement)}),D0(t,i)},vk=(t,s)=>{ck(t,s.placement)},Sw=(t,s)=>{vT(t,Math.floor(s))},yk=Q((t,s)=>{Sw(t,s),wu(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Gd=Q((t,s)=>{Sw(t,s)}),ah=(t,s,a)=>t[s]===void 0?a:t[s],Ck=(t,s,a,i,d,g,p,C)=>{const w=ah(p,"maxHeightFunction",yk()),E=ah(p,"maxWidthFunction",K),_=t.anchorBox,D=t.origin,M={bounds:ok(D,g),origin:D,preference:i,maxHeightFunction:w,maxWidthFunction:E,lastPlacement:d,transition:C};return wk(_,s,a,M)},wk=(t,s,a,i)=>{const d=rh(t,s,a,i);return I1(s,d,i),vk(s,d),P0(s,d),cD(s,d,i),Uu(s,d,i),{layout:d.layout,placement:d.placement}},Sk=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],$l=(t,s,a,i=1)=>{const d=t*i,g=s*i,p=w=>Ze(a,w).getOr([]),C=(w,E,_)=>{const D=ft(Sk,_);return{offset:ao(w,E),classesOn:be(_,p),classesOff:be(D,p)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},L1=()=>$l(0,0,{}),H1=en,$0=(t,s)=>a=>xw(a)==="rtl"?s:t,xw=t=>Te(t,"direction")==="rtl"?"rtl":"ltr";var vc;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(vc||(vc={}));const V1="data-alloy-vertical-dir",Ew=t=>p0(t,s=>Pn(s)&&dr(s,"data-alloy-vertical-dir")===vc.BottomToTop),Fl=()=>Bo("layouts",[me("onLtr"),me("onRtl"),bn("onBottomLtr"),bn("onBottomRtl")]),qd=(t,s,a,i,d,g,p)=>{const C=p.map(Ew).getOr(!1),w=s.layouts.map(P=>P.onLtr(t)),E=s.layouts.map(P=>P.onRtl(t)),_=C?s.layouts.bind(P=>P.onBottomLtr.map(I=>I(t))).or(w).getOr(d):w.getOr(a),D=C?s.layouts.bind(P=>P.onBottomRtl.map(I=>I(t))).or(E).getOr(g):E.getOr(i);return $0(_,D)(t)},ch=(t,s,a)=>{const i=s.hotspot,d=B0(a,i.element),g=qd(t.element,s,T0(),R1(),iw(),lw(),k.some(s.hotspot.element));return k.some(H1({anchorBox:d,bubble:s.bubble.getOr(L1()),overrides:s.overrides,layouts:g}))};var F0=[me("hotspot"),bn("bubble"),oe("overrides",{}),Fl(),qn("placement",ch)];const Tw=(t,s,a)=>{const i=hw(a,s.x,s.y),d=cs(i.left,i.top,s.width,s.height),g=qd(t.element,s,Si(),cw(),Si(),cw(),k.none());return k.some(H1({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var xk=[me("x"),me("y"),oe("height",0),oe("width",0),oe("bubble",L1()),oe("overrides",{}),Fl(),qn("placement",Tw)];const kw=ya.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Ek=t=>t.fold(en,(s,a,i)=>s.translate(-a,-i)),Tk=t=>t.fold(en,en),_w=t=>eo(t,(s,a)=>s.translate(a.left,a.top),ao(0,0)),Ow=t=>{const s=we(t,Ek);return _w(s)},I0=t=>{const s=we(t,Tk);return _w(s)},kk=kw.screen,_k=kw.absolute,Ok=(t,s,a)=>{const i=yd(a.root).dom,d=g=>{const p=$a(g),C=$a(t.element);return $n(p,C)};return k.from(i.frameElement).map(te.fromDom).filter(d).map(Gr)},z1=(t,s,a)=>{const i=$a(t.element),d=pa(i),g=Ok(t,s,a).getOr(d);return _k(g,d.left,d.top)},L0=(t,s,a,i)=>{const d=kk(ao(t,s));return k.some(xC(d,a,i))},Aw=(t,s,a,i,d)=>t.map(g=>{const p=[s,g.point],C=sk(i,()=>I0(p),()=>I0(p),()=>Ow(p)),w=kd(C.left,C.top,g.width,g.height),E=a.showAbove?iw():T0(),_=a.showAbove?lw():R1(),D=qd(d,a,E,_,E,_,k.none());return H1({anchorBox:w,bubble:a.bubble.getOr(L1()),overrides:a.overrides,layouts:D})}),Ak=(t,s,a)=>{const i=z1(t,a,s);return s.node.filter(fa).bind(d=>{const g=d.dom.getBoundingClientRect(),p=L0(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return Aw(p,i,s,a,C)})};var Dk=[me("node"),me("root"),bn("bubble"),Fl(),oe("overrides",{}),oe("showAbove",!1),qn("placement",Ak)];const Rk="\uFEFF",ih=" ",lh={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},uh=ya.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Dw=(t,s,a,i)=>t.fold(s,a,i),U1=t=>t.fold(en,en,en),H0=uh.before,V0=uh.on,z0=uh.after,Rw={before:H0,on:V0,after:z0,cata:Dw,getStart:U1},dh=ya.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Mw=t=>dh.exact(t.start,t.soffset,t.finish,t.foffset),Bk=t=>t.match({domRange:s=>te.fromDom(s.startContainer),relative:(s,a)=>Rw.getStart(s),exact:(s,a,i,d)=>s}),U0=dh.domRange,Nk=dh.relative,Kd=dh.exact,Pk=t=>{const s=Bk(t);return yd(s)},W0=lh.create,mh={domRange:U0,relative:Nk,exact:Kd,exactFromRange:Mw,getWin:Pk,range:W0},$k=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},Bw=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},Nw=(t,s,a)=>{const i=t.document.createRange();return $k(i,s),Bw(i,a),i},Pw=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},or=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),W1=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?k.some(a).map(or):k.none()},Qi=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(or):k.none()},fh=ya.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Z1=(t,s,a)=>s(te.fromDom(a.startContainer),a.startOffset,te.fromDom(a.endContainer),a.endOffset),Fk=(t,s)=>s.match({domRange:a=>({ltr:Q(a),rtl:k.none}),relative:(a,i)=>({ltr:Li(()=>Nw(t,a,i)),rtl:Li(()=>k.some(Nw(t,i,a)))}),exact:(a,i,d,g)=>({ltr:Li(()=>Pw(t,a,i,d,g)),rtl:Li(()=>k.some(Pw(t,d,g,a,i)))})}),$w=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>fh.rtl(te.fromDom(d.endContainer),d.endOffset,te.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Z1(t,fh.ltr,a)):Z1(t,fh.ltr,a)},Fw=(t,s)=>{const a=Fk(t,s);return $w(t,a)},j1=(t,s)=>Fw(t,s).match({ltr:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,p),C},rtl:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(g.dom,p),C.setEnd(i.dom,d),C}});fh.ltr,fh.rtl;const G1=(t,s,a)=>Yn(Cv(t,a),s),Ir=(t,s)=>hT(s,t),Ik=(t,s,a,i)=>{const g=$a(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},el=(t,s,a,i)=>{const d=Ik(t,s,a,i),g=$n(t,a)&&s===i;return d.collapsed&&!g},Wu=t=>k.from(t.getSelection()),gh=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return k.some(lh.create(te.fromDom(s.startContainer),s.startOffset,te.fromDom(a.endContainer),a.endOffset))}else return k.none()},hh=t=>{if(t.anchorNode===null||t.focusNode===null)return gh(t);{const s=te.fromDom(t.anchorNode),a=te.fromDom(t.focusNode);return el(s,t.anchorOffset,a,t.focusOffset)?k.some(lh.create(s,t.anchorOffset,a,t.focusOffset)):gh(t)}},Iw=t=>Wu(t).filter(s=>s.rangeCount>0).bind(hh),xi=(t,s)=>{const a=j1(t,s);return W1(a)},Il=(t,s)=>{const a=j1(t,s);return Qi(a)},Lk=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:a,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(Pa,"text"),Lw=t=>Lk.get(t),xf=(t,s)=>({element:t,offset:s}),Zu=(t,s)=>{const a=ii(t);if(a.length===0)return xf(t,s);if(s<a.length)return xf(a[s],0);{const i=a[a.length-1],d=Pa(i)?Lw(i).length:ii(i).length;return xf(i,d)}},Ef=(t,s)=>Pa(t)?xf(t,s):Zu(t,s),Tf=t=>t.foffset!==void 0,Z0=(t,s)=>s.getSelection.getOrThunk(()=>()=>Iw(t))().map(i=>{if(Tf(i)){const d=Ef(i.start,i.soffset),g=Ef(i.finish,i.foffset);return mh.range(d.element,d.offset,g.element,g.offset)}else return i}),Yd=(t,s,a)=>{const i=yd(s.root).dom,d=z1(t,a,s),g=Z0(i,s).bind(w=>{if(Tf(w))return Il(i,mh.exactFromRange(w)).orThunk(()=>{const _=te.fromText(Rk);Fc(w.start,_);const D=xi(i,mh.exact(_,0,_,1));return Ic(_),D}).bind(_=>L0(_.left,_.top,_.width,_.height));{const E=vo(w,D=>D.dom.getBoundingClientRect()),_={left:Math.min(E.firstCell.left,E.lastCell.left),right:Math.max(E.firstCell.right,E.lastCell.right),top:Math.min(E.firstCell.top,E.lastCell.top),bottom:Math.max(E.firstCell.bottom,E.lastCell.bottom)};return L0(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),C=Z0(i,s).bind(w=>Tf(w)?Pn(w.start)?k.some(w.start):ma(w.start):k.some(w.firstCell)).getOr(t.element);return Aw(g,d,s,a,C)};var ph=[bn("getSelection"),me("root"),bn("bubble"),Fl(),oe("overrides",{}),oe("showAbove",!1),qn("placement",Yd)];const Ll="link-layout",ju=t=>t.x+t.width,bh=(t,s)=>t.x-s.width,ms=(t,s)=>t.y-s.height+t.height,Hk=t=>t.y,tl=(t,s,a)=>io(ju(t),Hk(t),a.southeast(),_1(),"southeast",In(t,{left:0,top:2}),Ll),q1=(t,s,a)=>io(bh(t,s),Hk(t),a.southwest(),O1(),"southwest",In(t,{right:1,top:2}),Ll),kf=(t,s,a)=>io(ju(t),ms(t,s),a.northeast(),Vu(),"northeast",In(t,{left:0,bottom:3}),Ll),Xd=(t,s,a)=>io(bh(t,s),ms(t,s),a.northwest(),Jg(),"northwest",In(t,{right:1,bottom:3}),Ll),j0=()=>[tl,q1,kf,Xd],_f=()=>[q1,tl,Xd,kf],Vk=(t,s,a)=>{const i=B0(a,s.item.element),d=qd(t.element,s,j0(),_f(),j0(),_f(),k.none());return k.some(H1({anchorBox:i,bubble:L1(),overrides:s.overrides,layouts:d}))};var Hw=[me("item"),Fl(),oe("overrides",{}),qn("placement",Vk)],G0=Uo("type",{selection:ph,node:Dk,hotspot:F0,submenu:Hw,makeshift:xk});const Vw=[Va("classes",fo),va("mode","all",["all","layout","placement"])],Of=[oe("useFixed",An),bn("getBounds")],Ei=[ta("anchor",G0),Bo("transition",Vw)],zw=()=>{const t=document.documentElement;return N0(0,0,t.clientWidth,t.clientHeight)},zk=t=>{const s=Gr(t.element),a=t.element.dom.getBoundingClientRect();return rk(s.left,s.top,a.width,a.height)},Uw=(t,s,a,i,d,g)=>{const p=ak(s.anchorBox,t);return Ck(p,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},Ww=(t,s,a,i,d)=>{const g=k.none();Af(t,s,a,i,d,g)},Af=(t,s,a,i,d,g)=>{const p=Xs("placement.info",lt(Ei),d),C=p.anchor,w=i.element,E=a.get(i.uid);th(()=>{Rt(w,"position","fixed");const _=Cs(w,"visibility");Rt(w,"visibility","hidden");const D=s.useFixed()?zw():zk(t);C.placement(t,C,D).each(M=>{const P=g.orThunk(()=>s.getBounds.map(Ma)),I=Uw(D,M,P,i,E,p.transition);a.set(i.uid,I)}),_.fold(()=>{sn(w,"visibility")},M=>{Rt(w,"visibility",M)}),Cs(w,"left").isNone()&&Cs(w,"top").isNone()&&Cs(w,"right").isNone()&&Cs(w,"bottom").isNone()&&Na(Cs(w,"position"),"fixed")&&sn(w,"position")},w)};var Wc=Object.freeze({__proto__:null,position:Ww,positionWithinBounds:Af,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;qe(["position","left","right","top","bottom"],g=>sn(d,g)),ik(d),a.clear(i.uid)}}),Jd=Object.freeze({__proto__:null,init:()=>{let t={};return wa({readState:()=>t,clear:d=>{ir(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Ze(t,d)})}});const fs=Rs({fields:Of,name:"positioning",active:mw,apis:Wc,state:Jd}),sr=t=>t.getSystem().isConnected(),Ls=t=>{hn(t,_l());const s=t.components();qe(s,Ls)},gs=t=>{const s=t.components();qe(s,gs),hn(t,na())},Ta=(t,s)=>{t.getSystem().addToWorld(s),fa(t.element)&&gs(s)},vh=t=>{Ls(t),t.getSystem().removeFromWorld(t)},yc=(t,s)=>{Ia(t.element,s.element)},Qd=t=>{qe(t.components(),s=>Ic(s.element)),Wm(t.element),t.syncComponents()},Uk=(t,s,a)=>{const i=t.components();Qd(t);const d=a(s),g=ft(i,d);qe(g,p=>{Ls(p),t.getSystem().removeFromWorld(p)}),qe(d,p=>{sr(p)?yc(t,p):(t.getSystem().addToWorld(p),yc(t,p),fa(t.element)&&gs(p))}),t.syncComponents()},Wk=(t,s,a)=>{const i=t.components(),d=be(s,C=>WC(C).toArray());qe(i,C=>{Io(d,C)||vh(C)});const g=a(s),p=ft(i,g);qe(p,C=>{sr(C)&&vh(C)}),qe(g,C=>{sr(C)||Ta(t,C)}),t.syncComponents()},nl=(t,s)=>{Df(t,s,Ia)},Df=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),fa(t.element)&&gs(s),t.syncComponents()},K1=t=>{Ls(t),Ic(t.element),t.getSystem().removeFromWorld(t)},Zc=t=>{const s=ci(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());K1(t),s.each(a=>{a.syncComponents()})},K0=t=>{const s=t.components();qe(s,K1),Wm(t.element),t.syncComponents()},Y0=(t,s)=>{X0(t,s,Ia)},em=(t,s)=>{X0(t,s,Um)},X0=(t,s,a)=>{a(t,s.element);const i=ii(s.element);qe(i,d=>{s.getByDom(d).each(gs)})},Zw=t=>{const s=ii(t.element);qe(s,a=>{t.getByDom(a).each(Ls)}),Ic(t.element)},Y1=(t,s,a,i)=>{a.get().each(p=>{K0(t)});const d=s.getAttachPoint(t);nl(d,t);const g=t.getSystem().build(i);return nl(t,g),a.set(g),g},Hl=(t,s,a,i)=>{const d=Y1(t,s,a,i);return s.onOpen(t,d),d},J0=(t,s,a,i)=>a.get().map(()=>Y1(t,s,a,i)),Ti=(t,s,a,i,d)=>{ja(t,s),Hl(t,s,a,i),d(),tm(t,s)},jw=(t,s,a)=>{a.get().each(i=>{K0(t),Zc(t),s.onClose(t,i),a.clear()})},Q0=(t,s,a)=>a.isOpen(),Zk=(t,s,a,i)=>Q0(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),uD=(t,s,a)=>a.get(),jk=(t,s,a,i)=>{Cs(t.element,s).fold(()=>{zo(t.element,a)},d=>{Vt(t.element,a,d)}),Rt(t.element,s,i)},Gk=(t,s,a)=>{jo(t.element,a).fold(()=>sn(t.element,s),i=>Rt(t.element,s,i))},ja=(t,s,a)=>{const i=s.getAttachPoint(t);Rt(t.element,"position",fs.getMode(i)),jk(t,"visibility",s.cloakVisibilityAttr,"hidden")},dD=t=>Ba(["top","left","right","bottom"],s=>Cs(t,s).isSome()),tm=(t,s,a)=>{dD(t.element)||sn(t.element,"position"),Gk(t,"visibility",s.cloakVisibilityAttr)};var Rf=Object.freeze({__proto__:null,cloak:ja,decloak:tm,open:Hl,openWhileCloaked:Ti,close:jw,isOpen:Q0,isPartOf:Zk,getState:uD,setContent:J0}),ty=Object.freeze({__proto__:null,events:(t,s)=>Fn([ve(Bd(),(a,i)=>{jw(a,t,s)})])}),qk=[zt("onOpen"),zt("onClose"),me("isPartOf"),me("getAttachPoint"),oe("cloakVisibilityAttr","data-precloak-visibility")],ny=Object.freeze({__proto__:null,init:()=>{const t=Kn(),s=Q("not-implemented");return wa({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Xt=Rs({fields:qk,name:"sandboxing",active:ty,apis:Rf,state:ny}),Vl=Q("dismiss.popups"),nm=Q("reposition.popups"),X1=Q("mouse.released"),Kk=$s([oe("isExtraPart",An),Bo("fireEventInstead",[oe("event",ji())])]),om=t=>{const s=Xs("Dismissal",Kk,t);return{[Vl()]:{schema:$s([me("target")]),onReceive:(a,i)=>{Xt.isOpen(a)&&(Xt.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>Xt.close(a),g=>hn(a,g.event)))}}}},J1=$s([Bo("fireEventInstead",[oe("event",Qv())]),fc("doReposition")]),oy=t=>{const s=Xs("Reposition",J1,t);return{[nm()]:{onReceive:a=>{Xt.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>hn(a,i.event))}}}},sy=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},ry=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var Mf=Object.freeze({__proto__:null,onLoad:sy,onUnload:ry,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Xk=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Gn((i,d)=>{sy(i,t,s)}),fr((i,d)=>{ry(i,t,s)})]:[_0(t,s,sy)];return Fn(a)}});const Q1=()=>{const t=gt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return wa({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},eb=()=>wa({readState:K}),zl=()=>{const t=gt({}),s=gt({});return wa({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>Ze(t.get(),p).orThunk(()=>Ze(s.get(),p)),update:p=>{const C=t.get(),w=s.get(),E={},_={};qe(p,D=>{E[D.value]=D,Ze(D,"meta").each(M=>{Ze(M,"text").each(P=>{_[P]=D})})}),t.set({...C,...E}),s.set({...w,..._})},clear:()=>{t.set({}),s.set({})}})};var sm=Object.freeze({__proto__:null,memory:Q1,dataset:zl,manual:eb,init:t=>t.store.manager.state(t)});const Ul=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Kw=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},yh=(t,s,a)=>{s.store.initialValue.each(d=>{Ul(t,s,a,d)})},ay=(t,s,a)=>{a.clear()};var Jk=[bn("initialValue"),me("getFallbackEntry"),me("getDataKey"),me("setValue"),qn("manager",{setValue:Ul,getValue:Kw,onLoad:yh,onUnload:ay,state:zl})];const ol=(t,s,a)=>s.store.getValue(t),Yw=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Qk=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var Xw=[me("getValue"),oe("setValue",K),bn("initialValue"),qn("manager",{setValue:Yw,getValue:ol,onLoad:Qk,onUnload:K,state:hr.init})];const cy=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},Bf=(t,s,a)=>a.get(),iy=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},e_=(t,s,a)=>{a.clear()};var Nf=[bn("initialValue"),qn("manager",{setValue:cy,getValue:Bf,onLoad:iy,onUnload:e_,state:Q1})],Jw=[Qs("store",{mode:"memory"},Uo("mode",{memory:Nf,manual:Xw,dataset:Jk})),zt("onSetValue"),oe("resetOnDom",!1)];const Ve=Rs({fields:Jw,name:"representing",active:Xk,apis:Mf,extra:{setValueFrom:(t,s)=>{const a=Ve.getValue(s);Ve.setValue(t,a)}},state:sm}),ts=(t,s)=>Au(t,{},we(s,a=>AT(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Rr("dump",en)])),Pf=t=>t.dump,_o=(t,s)=>({...De(s),...t.dump}),Cc={field:ts,augment:_o,get:Pf},Ch="placeholder",$f=ya.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ly=t=>wn(t,"uiType"),nb=(t,s,a,i)=>t.exists(d=>d!==a.owner)?$f.single(!0,Q(a)):Ze(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+bo(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),ki=(t,s,a,i)=>ly(a)&&a.uiType===Ch?nb(t,s,a,i):$f.single(!1,Q(a)),ob=(t,s,a,i)=>ki(t,s,a,i).fold((g,p)=>{const C=ly(a)?p(s,a.config,a.validated):p(s),w=Ze(C,"components").getOr([]),E=be(w,_=>ob(t,s,_,i));return[{...C,components:E}]},(g,p)=>{if(ly(a)){const C=p(s,a.config,a.validated);return a.validated.preprocess.getOr(en)(C)}else return p(s)}),t_=(t,s,a,i)=>be(a,d=>ob(t,s,d,i)),Ga=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,C)=>p,(p,C)=>p);return{name:Q(t),required:g,used:i,replace:d}},hs=(t,s,a,i)=>{const d=vo(i,(p,C)=>Ga(C,p)),g=t_(t,s,a,d);return ys(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},uy=$f.single,sb=$f.multiple,rm=Q(Ch),Ff=ya.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),wh=oe("factory",{sketch:en}),rb=oe("schema",[]),ab=me("name"),cb=As("pname","pname",fi(t=>"<alloy."+je(t.name)+">"),dc()),Qw=Rr("schema",()=>[bn("preprocess")]),If=oe("defaults",Q({})),Wl=oe("overrides",Q({})),eS=lt([wh,rb,ab,cb,If,Wl]),dy=lt([wh,rb,ab,If,Wl]),ib=lt([wh,rb,ab,cb,If,Wl]),tS=lt([wh,Qw,ab,me("unit"),cb,If,Wl]),Sh=t=>t.fold(k.some,k.none,k.some,k.some),xh=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},am=t=>t.fold(en,en,en,en),qu=(t,s)=>a=>{const i=Xs("Converting part type",s,a);return t(i)},Es=qu(Ff.required,eS),jc=qu(Ff.external,dy),wc=qu(Ff.optional,ib),lb=qu(Ff.group,tS),Gc=Q("entirety");var n_=Object.freeze({__proto__:null,required:Es,external:jc,optional:wc,group:lb,asNamedPart:Sh,name:xh,asCommon:am,original:Gc});const ub=(t,s,a,i)=>Vn(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),my=(t,s,a)=>{const i={},d={};return qe(a,g=>{g.fold(p=>{i[p.pname]=uy(!0,(C,w,E)=>p.factory.sketch(ub(C,p,w,E)))},p=>{const C=s.parts[p.name];d[p.name]=Q(p.factory.sketch(ub(s,p,C[Gc()]),C))},p=>{i[p.pname]=uy(!1,(C,w,E)=>p.factory.sketch(ub(C,p,w,E)))},p=>{i[p.pname]=sb(!0,(C,w,E)=>{const _=C[p.name];return we(_,D=>p.factory.sketch(Vn(p.defaults(C,D,E),D,p.overrides(C,D))))})})}),{internals:Q(i),externals:Q(d)}},fy=(t,s)=>{const a={};return qe(s,i=>{Sh(i).each(d=>{const g=nS(t,d.pname);a[d.name]=p=>{const C=Xs("Part: "+d.name+" in "+t,lt(d.schema),p);return{...g,config:p,validated:C}}})}),a},nS=(t,s)=>({uiType:rm(),owner:t,name:s}),cm=(t,s,a)=>({uiType:rm(),owner:t,name:s,config:a,validated:{}}),oS=t=>be(t,s=>s.fold(k.none,k.some,k.none,k.none).map(a=>_u(a.name,a.schema.concat([nw(Gc())]))).toArray()),o_=t=>we(t,xh),gy=(t,s,a)=>my(t,s,a),hy=(t,s,a)=>hs(k.some(t),s,s.components,a),Rn=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Ku=(t,s,a)=>Rn(t,s,a).getOrDie("Could not find part: "+a),sS=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return qe(a,p=>{i[p]=Q(g.getByUid(d[p]))}),i},rS=(t,s)=>{const a=t.getSystem();return vo(s.partUids,(i,d)=>Q(a.getByUid(i)))},aS=t=>bo(t.partUids),py=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return qe(a,p=>{i[p]=Q(g.getByUid(d[p]).getOrDie())}),i},cS=(t,s)=>{const a=o_(s);return gc(we(a,i=>({key:i,value:t+"-"+i})))},by=t=>As("partUids","partUids",Fv(s=>cS(s.uid,t)),dc());var vy=Object.freeze({__proto__:null,generate:fy,generateOne:cm,schemas:oS,names:o_,substitutes:gy,components:hy,defaultUids:cS,defaultUidsSchema:by,getAllParts:rS,getAllPartNames:aS,getPart:Rn,getPartOrDie:Ku,getParts:sS,getPartsOrDie:py});const iS=(t,s)=>(t.length>0?[_u("parts",t)]:[]).concat([me("uid"),oe("dom",{}),oe("components",[]),nw("originalSpec"),oe("debug.sketcher",{})]).concat(s),yy=(t,s,a,i,d)=>{const g=iS(i,d);return Xs(t+" [SpecSchema]",$s(g.concat(s)),a)},s_=(t,s,a,i)=>{const d=Yu(i),g=yy(t,s,d,[],[]);return a(g,d)},db=(t,s,a,i,d)=>{const g=Yu(d),p=oS(a),C=by(a),w=yy(t,s,g,p,[C]),E=gy(t,w,a),_=hy(t,w,E.internals());return i(w,_,g,E.externals())},r_=t=>wn(t,"uid"),Yu=t=>r_(t)?t:{...t,uid:Al("uid")},Eh=t=>t.uid!==void 0,Cy=$s([me("name"),me("factory"),me("configFields"),oe("apis",{}),oe("extraApis",{})]),a_=$s([me("name"),me("factory"),me("configFields"),me("partFields"),oe("apis",{}),oe("extraApis",{})]),Zo=t=>{const s=Xs("Sketcher for "+t.name,Cy,t),a=g=>s_(s.name,s.configFields,s.factory,g),i=vo(s.apis,lf),d=vo(s.extraApis,(g,p)=>jg(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},ns=t=>{const s=Xs("Sketcher for "+t.name,a_,t),a=p=>db(s.name,s.configFields,s.partFields,s.factory,p),i=fy(s.name,s.partFields),d=vo(s.apis,lf),g=vo(s.extraApis,(p,C)=>jg(p,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},im=t=>vu("input")(t)&&dr(t,"type")!=="radio"||vu("textarea")(t);var Ke=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const lm=[me("find")],Kt=Rs({fields:lm,name:"composing",apis:Ke}),lS=["input","button","textarea","select"],Th=(t,s,a)=>{(s.disabled()?um:fb)(t,s)},kh=(t,s)=>s.useNative===!0&&Io(lS,Pc(t.element)),c_=t=>mC(t.element,"disabled"),uS=t=>{Vt(t.element,"disabled","disabled")},wy=t=>{zo(t.element,"disabled")},i_=t=>dr(t.element,"aria-disabled")==="true",dS=t=>{Vt(t.element,"aria-disabled","true")},Sy=t=>{Vt(t.element,"aria-disabled","false")},um=(t,s,a)=>{s.disableClass.each(d=>{Wo(t.element,d)}),(kh(t,s)?uS:dS)(t),s.onDisabled(t)},fb=(t,s,a)=>{s.disableClass.each(d=>{mn(t.element,d)}),(kh(t,s)?wy:Sy)(t),s.onEnabled(t)},mS=(t,s)=>kh(t,s)?c_(t):i_(t);var fS=Object.freeze({__proto__:null,enable:fb,disable:um,isDisabled:mS,onLoad:Th,set:(t,s,a,i)=>{(i?um:fb)(t,s)}}),l_=Object.freeze({__proto__:null,exhibit:(t,s)=>zc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Fn([s1(Wa(),(a,i)=>mS(a,t)),_0(t,s,Th)])}),gD=[To("disabled",An),oe("useNative",!0),bn("disableClass"),zt("onDisabled"),zt("onEnabled")];const ht=Rs({fields:gD,name:"disabling",active:l_,apis:fS}),u_=(t,s,a,i)=>{const d=Ir(t.element,"."+s.highlightClass);qe(d,g=>{Ba(i,C=>$n(C.element,g))||(mn(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),hn(C,Vg())}))})},hS=(t,s,a)=>u_(t,s,a,[]),d_=(t,s,a,i)=>{Lf(t,s,a,i)&&(mn(i.element,s.highlightClass),s.onDehighlight(t,i),hn(i,Vg()))},_h=(t,s,a,i)=>{u_(t,s,a,[i]),Lf(t,s,a,i)||(Wo(i.element,s.highlightClass),s.onHighlight(t,i),hn(i,IC()))},hD=(t,s,a)=>{Ey(t,s).each(i=>{_h(t,s,a,i)})},gb=(t,s,a)=>{Ty(t,s).each(i=>{_h(t,s,a,i)})},m_=(t,s,a,i)=>{xy(t,s,a,i).fold(d=>{throw d},d=>{_h(t,s,a,d)})},Zl=(t,s,a,i)=>{const d=jl(t,s);Bt(d,i).each(p=>{_h(t,s,a,p)})},Lf=(t,s,a,i)=>Mr(i.element,s.highlightClass),f_=(t,s,a)=>go(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),xy=(t,s,a,i)=>{const d=Ir(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>Nt.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Ey=(t,s,a)=>go(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Ty=(t,s,a)=>{const i=Ir(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},ky=(t,s,a,i)=>{const d=Ir(t.element,"."+s.itemClass);return mo(d,p=>Mr(p,s.highlightClass)).bind(p=>{const C=Zd(p,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},g_=(t,s,a)=>ky(t,s,a,-1),h_=(t,s,a)=>ky(t,s,a,1),jl=(t,s,a)=>{const i=Ir(t.element,"."+s.itemClass);return fd(we(i,d=>t.getSystem().getByDom(d).toOptional()))};var Oh=Object.freeze({__proto__:null,dehighlightAll:hS,dehighlight:d_,highlight:_h,highlightFirst:hD,highlightLast:gb,highlightAt:m_,highlightBy:Zl,isHighlighted:Lf,getHighlighted:f_,getFirst:Ey,getLast:Ty,getPrevious:g_,getNext:h_,getCandidates:jl}),p_=[me("highlightClass"),me("itemClass"),zt("onHighlight"),zt("onDehighlight")];const ln=Rs({fields:p_,name:"highlighting",apis:Oh}),b_=[8],qc=[9],_i=[13],hb=[27],sa=[32],Hf=[37],Ah=[38],Dh=[39],Vf=[40],pD=(t,s,a)=>{const i=Er(t.slice(0,s)),d=Er(t.slice(s+1));return Bt(i.concat(d),a)},pS=(t,s,a)=>{const i=Er(t.slice(0,s));return Bt(i,a)},bD=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return Bt(d.concat(i),a)},vD=(t,s,a)=>{const i=t.slice(s+1);return Bt(i,a)},Jt=t=>s=>{const a=s.raw;return Io(t,a.which)},Sc=t=>s=>hu(t,a=>a(s)),Gl=t=>t.raw.shiftKey===!0,pb=t=>t.raw.ctrlKey===!0,Xu=Ce(Gl),Wt=(t,s)=>({matches:t,classification:s}),bS=(t,s)=>Bt(t,i=>i.matches(s)).map(i=>i.classification),vS=(t,s,a)=>{s.exists(d=>a.exists(g=>$n(g,d)))||at(t,e1(),{prevFocus:s,newFocus:a})},_y=()=>{const t=a=>Uc(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);vS(a,d,g)}}},yS=()=>{const t=a=>ln.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(K,p=>{ln.highlight(a,p)});const g=t(a);vS(a,d,g)}}};var dm;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(dm||(dm={}));const mm=(t,s,a,i,d)=>{const g=()=>t.concat([oe("focusManager",_y()),Qs("focusInside","onFocus",ku(E=>Io(["onFocus","onEnterOrSpace","onApi"],E)?Nt.value(E):Nt.error("Invalid value for focusInside"))),qn("handler",w),qn("state",s),qn("sendFocusIn",d)]),p=(E,_,D,M,P)=>{const I=D(E,_,M,P);return bS(I,_.event).bind(U=>U(E,_,M,P))},w={schema:g,processKey:p,toEvents:(E,_)=>{const D=E.focusInside!==dm.OnFocusMode?k.none():d(E).map(I=>ve(Zi(),(U,ne)=>{I(U,E,_),ne.stop()})),M=(I,U)=>{const ne=Jt(sa.concat(_i))(U.event);E.focusInside===dm.OnEnterOrSpaceMode&&ne&&Xp(I,U)&&d(E).each(Y=>{Y(I,E,_),U.stop()})},P=[ve(Hc(),(I,U)=>{p(I,U,a,E,_).fold(()=>{M(I,U)},ne=>{U.stop()})}),ve(PC(),(I,U)=>{p(I,U,i,E,_).each(ne=>{U.stop()})})];return Fn(D.toArray().concat(P))}};return w},v_=t=>{const s=[bn("onEscape"),bn("onEnter"),oe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),oe("firstTabstop",0),oe("useTabstopAt",pt),bn("visibilitySelector")].concat([t]),a=(U,ne)=>{const Y=U.visibilitySelector.bind(j=>nr(ne,j)).getOr(ne);return Go(Y)>0},i=(U,ne)=>{const Y=Ir(U.element,ne.selector),j=Yn(Y,pe=>a(ne,pe));return k.from(j[ne.firstTabstop])},d=(U,ne)=>ne.focusManager.get(U).bind(Y=>nr(Y,ne.selector)),g=(U,ne)=>a(U,ne)&&U.useTabstopAt(ne),p=(U,ne,Y)=>{i(U,ne).each(j=>{ne.focusManager.set(U,j)})},C=(U,ne,Y,j,pe)=>pe(ne,Y,ce=>g(j,ce)).fold(()=>j.cyclic?k.some(!0):k.none(),ce=>(j.focusManager.set(U,ce),k.some(!0))),w=(U,ne,Y,j)=>{const pe=Ir(U.element,Y.selector);return d(U,Y).bind(ce=>mo(pe,dn($n,ce)).bind(ke=>C(U,pe,ke,Y,j)))},E=(U,ne,Y)=>{const j=Y.cyclic?pD:pS;return w(U,ne,Y,j)},_=(U,ne,Y)=>{const j=Y.cyclic?bD:vD;return w(U,ne,Y,j)},D=(U,ne,Y)=>Y.onEnter.bind(j=>j(U,ne)),M=(U,ne,Y)=>Y.onEscape.bind(j=>j(U,ne)),P=Q([Wt(Sc([Gl,Jt(qc)]),E),Wt(Jt(qc),_),Wt(Sc([Xu,Jt(_i)]),D)]),I=Q([Wt(Jt(hb),M)]);return mm(s,hr.init,P,I,()=>k.some(p))};var l=v_(Rr("cyclic",An)),m=v_(Rr("cyclic",pt));const h=(t,s,a)=>(n1(t,a,Wa()),k.some(!0)),v=(t,s,a)=>im(a)&&Jt(sa)(s.event)?k.none():h(t,s,a),S=(t,s)=>k.some(!0),T=[oe("execute",v),oe("useSpace",!1),oe("useEnter",!0),oe("useControlEnter",!1),oe("useDown",!1)],R=(t,s,a)=>a.execute(t,s,t.element),$=(t,s,a,i)=>{const d=a.useSpace&&!im(t.element)?sa:[],g=a.useEnter?_i:[],p=a.useDown?Vf:[],C=d.concat(g).concat(p);return[Wt(Jt(C),R)].concat(a.useControlEnter?[Wt(Sc([pb,Jt(_i)]),R)]:[])},H=(t,s,a,i)=>a.useSpace&&!im(t.element)?[Wt(Jt(sa),S)]:[];var Z=mm(T,hr.init,$,H,()=>k.none());const ee=()=>{const t=Kn();return wa({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var ze=Object.freeze({__proto__:null,flatgrid:ee,init:t=>t.state(t)});const Fe=t=>(s,a,i,d)=>{const g=t(s.element);return Xe(g,s,a,i,d)},he=(t,s)=>{const a=$0(t,s);return Fe(a)},He=(t,s)=>{const a=$0(s,t);return Fe(a)},ge=t=>(s,a,i,d)=>Xe(t,s,a,i,d),Xe=(t,s,a,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),Ct=ge,It=ge,Un=ge,Ms=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Oo=t=>!Ms(t.dom),ka=(t,s)=>mo(t,s).map(a=>({index:a,candidates:t})),Oi=(t,s,a)=>{const i=p=>$n(p,s),d=Ir(t,a),g=Yn(d,Oo);return ka(g,i)},Rh=(t,s)=>mo(t,a=>$n(s,a)),bb=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(p=>{const C=p.row*a+p.column;return C>=0&&C<t.length?k.some(t[C]):k.none()})},zf=(t,s,a,i,d)=>bb(t,s,i,(g,p)=>{const w=g===a-1?t.length-g*i:i,E=Zd(p,d,0,w-1);return k.some({row:g,column:E})}),_n=(t,s,a,i,d)=>bb(t,s,i,(g,p)=>{const C=Zd(g,d,0,a-1),E=C===a-1?t.length-C*i:i,_=pr(p,0,E-1);return k.some({row:C,column:_})}),yr=(t,s,a,i)=>zf(t,s,a,i,1),Lr=(t,s,a,i)=>zf(t,s,a,i,-1),xc=(t,s,a,i)=>_n(t,s,a,i,-1),qa=(t,s,a,i)=>_n(t,s,a,i,1),Uf=[me("selector"),oe("execute",v),xa("onEscape"),oe("captureTab",!1),T1()],Hr=(t,s,a)=>{go(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Oy=(t,s)=>s.focusManager.get(t).bind(a=>nr(a,s.selector)),Mh=(t,s,a,i)=>Oy(t,a).bind(d=>a.execute(t,s,d)),Ec=t=>(s,a,i,d)=>Oi(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),Hs=(t,s,a)=>a.captureTab?k.some(!0):k.none(),Ay=(t,s,a)=>a.onEscape(t,s),vb=Ec(Lr),CS=Ec(yr),yD=Ec(xc),wS=Ec(qa),Dy=Q([Wt(Jt(Hf),he(vb,CS)),Wt(Jt(Dh),He(vb,CS)),Wt(Jt(Ah),Ct(yD)),Wt(Jt(Vf),It(wS)),Wt(Sc([Gl,Jt(qc)]),Hs),Wt(Sc([Xu,Jt(qc)]),Hs),Wt(Jt(sa.concat(_i)),Mh)]),y_=Q([Wt(Jt(hb),Ay),Wt(Jt(sa),S)]);var Vr=mm(Uf,ee,Dy,y_,()=>k.some(Hr));const CD=(t,s,a,i,d)=>{const g=C=>Pc(C)==="button"&&dr(C,"disabled")==="disabled",p=(C,w,E)=>d(C,w,i,0,E.length-1,E[w],_=>g(E[_])?p(C,_,E):k.from(E[_]));return Oi(t,a,s).bind(C=>{const w=C.index,E=C.candidates;return p(w,w,E)})},wD=(t,s,a,i)=>CD(t,s,a,i,(d,g,p,C,w,E,_)=>{const D=pr(g+p,C,w);return D===d?k.from(E):_(D)}),SS=(t,s,a,i)=>CD(t,s,a,i,(d,g,p,C,w,E,_)=>{const D=Zd(g,p,C,w);return D===d?k.none():_(D)}),aF=[me("selector"),oe("getInitial",k.none),oe("execute",v),xa("onEscape"),oe("executeOnMove",!1),oe("allowVertical",!0),oe("allowHorizontal",!0),oe("cycles",!0)],cF=(t,s)=>s.focusManager.get(t).bind(a=>nr(a,s.selector)),Wf=(t,s,a)=>cF(t,a).bind(i=>a.execute(t,s,i)),C_=(t,s,a)=>{s.getInitial(t).orThunk(()=>go(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},SD=(t,s,a)=>(a.cycles?SS:wD)(t,a.selector,s,-1),xS=(t,s,a)=>(a.cycles?SS:wD)(t,a.selector,s,1),Ry=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?Wf(s,a,i):k.some(!0)),w_=(t,s,a)=>a.onEscape(t,s),iF=(t,s,a,i)=>{const d=[...a.allowHorizontal?Hf:[]].concat(a.allowVertical?Ah:[]),g=[...a.allowHorizontal?Dh:[]].concat(a.allowVertical?Vf:[]);return[Wt(Jt(d),Ry(he(SD,xS))),Wt(Jt(g),Ry(He(SD,xS))),Wt(Jt(_i),Wf),Wt(Jt(sa),Wf)]},lF=Q([Wt(Jt(sa),S),Wt(Jt(hb),w_)]);var uF=mm(aF,hr.init,iF,lF,()=>k.some(C_));const ES=(t,s,a)=>k.from(t[s]).bind(i=>k.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),xD=(t,s,a,i)=>{const g=t[s].length,p=Zd(a,i,0,g-1);return ES(t,s,p)},ED=(t,s,a,i)=>{const d=Zd(a,i,0,t.length-1),g=t[d].length,p=pr(s,0,g-1);return ES(t,d,p)},S_=(t,s,a,i)=>{const g=t[s].length,p=pr(a+i,0,g-1);return ES(t,s,p)},TS=(t,s,a,i)=>{const d=pr(a+i,0,t.length-1),g=t[d].length,p=pr(s,0,g-1);return ES(t,d,p)},dF=(t,s,a)=>xD(t,s,a,1),mF=(t,s,a)=>xD(t,s,a,-1),fF=(t,s,a)=>ED(t,a,s,-1),gF=(t,s,a)=>ED(t,a,s,1),Bh=(t,s,a)=>S_(t,s,a,-1),hF=(t,s,a)=>S_(t,s,a,1),pF=(t,s,a)=>TS(t,a,s,-1),x_=(t,s,a)=>TS(t,a,s,1),bF=[_u("selectors",[me("row"),me("cell")]),oe("cycles",!0),oe("previousSelector",k.none),oe("execute",v)],TD=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return go(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},kD=(t,s,a)=>Uc(t.element).bind(i=>a.execute(t,s,i)),_D=(t,s)=>we(t,a=>Ir(a,s.selectors.cell)),My=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return nr(i,d.selectors.row).bind(p=>{const C=Ir(p,d.selectors.cell);return Rh(C,i).bind(w=>{const E=Ir(a,d.selectors.row);return Rh(E,p).bind(_=>{const D=_D(E,d);return g(D,_,w).map(M=>M.cell)})})})},OD=My(mF,Bh),AD=My(dF,hF),vF=My(fF,pF),E_=My(gF,x_),yF=Q([Wt(Jt(Hf),he(OD,AD)),Wt(Jt(Dh),He(OD,AD)),Wt(Jt(Ah),Ct(vF)),Wt(Jt(Vf),It(E_)),Wt(Jt(sa.concat(_i)),kD)]),CF=Q([Wt(Jt(sa),S)]);var wF=mm(bF,hr.init,yF,CF,()=>k.some(TD));const SF=[me("selector"),oe("execute",v),oe("moveOnTab",!1)],T_=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),xF=(t,s,a)=>{go(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},DD=(t,s,a)=>SS(t,a.selector,s,-1),RD=(t,s,a)=>SS(t,a.selector,s,1),MD=(t,s,a,i)=>a.moveOnTab?Un(DD)(t,s,a,i):k.none(),EF=(t,s,a,i)=>a.moveOnTab?Un(RD)(t,s,a,i):k.none(),TF=Q([Wt(Jt(Ah),Un(DD)),Wt(Jt(Vf),Un(RD)),Wt(Sc([Gl,Jt(qc)]),MD),Wt(Sc([Xu,Jt(qc)]),EF),Wt(Jt(_i),T_),Wt(Jt(sa),T_)]),BD=Q([Wt(Jt(sa),S)]);var kF=mm(SF,hr.init,TF,BD,()=>k.some(xF));const _F=[xa("onSpace"),xa("onEnter"),xa("onShiftEnter"),xa("onLeft"),xa("onRight"),xa("onTab"),xa("onShiftTab"),xa("onUp"),xa("onDown"),xa("onEscape"),oe("stopSpaceKeyup",!1),bn("focusIn")],kS=(t,s,a)=>[Wt(Jt(sa),a.onSpace),Wt(Sc([Xu,Jt(_i)]),a.onEnter),Wt(Sc([Gl,Jt(_i)]),a.onShiftEnter),Wt(Sc([Gl,Jt(qc)]),a.onShiftTab),Wt(Sc([Xu,Jt(qc)]),a.onTab),Wt(Jt(Ah),a.onUp),Wt(Jt(Vf),a.onDown),Wt(Jt(Hf),a.onLeft),Wt(Jt(Dh),a.onRight),Wt(Jt(sa),a.onSpace)],OF=(t,s,a)=>[...a.stopSpaceKeyup?[Wt(Jt(sa),S)]:[],Wt(Jt(hb),a.onEscape)];var ND=mm(_F,hr.init,kS,OF,t=>t.focusIn);const Ka=l.schema(),AF=m.schema(),PD=uF.schema(),DF=Vr.schema(),RF=wF.schema(),$D=Z.schema(),MF=kF.schema(),FD=ND.schema();var ID=Object.freeze({__proto__:null,acyclic:Ka,cyclic:AF,flow:PD,flatgrid:DF,matrix:RF,execution:$D,menu:MF,special:FD});const BF=t=>oc(t,"setGridSize"),ct=O0({branchKey:"mode",branches:ID,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{BF(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:ze}),LD=(t,s)=>{th(()=>{Uk(t,s,()=>we(s,t.getSystem().build))},t.element)},HD=(t,s)=>{th(()=>{Wk(t,s,()=>XC(t.element,s,t.getSystem().buildOrPatch))},t.element)},VD=(t,s,a,i)=>{vh(s);const d=m0(t.element,a,i,t.getSystem().buildOrPatch);Ta(t,d),t.syncComponents()},_S=(t,s,a)=>{const i=t.getSystem().build(a);Df(t,i,s)},Zf=(t,s,a,i)=>{Zc(s),_S(t,(d,g)=>Ps(d,g,a),i)},zD=(t,s,a,i)=>(s.reuseDom?HD:LD)(t,i),UD=(t,s,a,i)=>{_S(t,Ia,i)},k_=(t,s,a,i)=>{_S(t,wC,i)},NF=(t,s,a,i)=>{const d=OS(t);Bt(d,p=>$n(i.element,p.element)).each(Zc)},OS=(t,s)=>t.components(),WD=(t,s,a,i,d)=>{const g=OS(t);return k.from(g[i]).map(p=>(d.fold(()=>Zc(p),C=>{(s.reuseDom?VD:Zf)(t,p,i,C)}),p))};var ZD=Object.freeze({__proto__:null,append:UD,prepend:k_,remove:NF,replaceAt:WD,replaceBy:(t,s,a,i,d)=>{const g=OS(t);return mo(g,i).bind(p=>WD(t,s,a,p,d))},set:zD,contents:OS});const xt=Rs({fields:[Fs("reuseDom",!0)],name:"replacing",apis:ZD}),__=(t,s)=>{const a=Fn(s);return Rs({fields:[me("enabled")],name:t,active:{events:Q(a)}})},Pt=(t,s)=>{const a=__(t,s);return{key:t,value:{config:{},me:a,configAsRaw:Q({}),initialConfig:{},state:hr}}},fm=(t,s)=>{s.ignore||(wo(t.element),s.onFocus(t))};var FF=Object.freeze({__proto__:null,focus:fm,blur:(t,s)=>{s.ignore||zu(t.element)},isFocused:t=>wf(t.element)}),By=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return zc(a)},events:t=>Fn([ve(Zi(),(s,a)=>{fm(s,t),a.stop()})].concat(t.stopMousedown?[ve(Ua(),(s,a)=>{a.event.prevent()})]:[]))}),jD=[zt("onFocus"),oe("stopMousedown",!1),oe("ignore",!1)];const bt=Rs({fields:jD,name:"focusing",active:By,apis:FF}),jf=t=>({init:()=>{const a=gt(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),Gf=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},IF=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?Wo(t.element,i):mn(t.element,i)})},Ny=(t,s,a,i)=>{const d=a.get();a.set(i),IF(t,s,a),Gf(t,s,a),d!==i&&s.onToggled(t,i)},O_=(t,s,a)=>{Ny(t,s,a,!a.get())},gm=(t,s,a)=>{Ny(t,s,a,!0)},A_=(t,s,a)=>{Ny(t,s,a,!1)},GD=(t,s,a)=>a.get(),D_=(t,s,a)=>{Ny(t,s,a,s.selected)};var qD=Object.freeze({__proto__:null,onLoad:D_,toggle:O_,isOn:GD,on:gm,off:A_,set:Ny}),HF=Object.freeze({__proto__:null,exhibit:()=>zc({}),events:(t,s)=>{const a=k0(t,s,O_),i=_0(t,s,D_);return Fn(Ft([t.toggleOnExecute?[a]:[],[i]]))}});const VF=(t,s,a)=>{Vt(t.element,"aria-pressed",a),s.syncWithExpanded&&RS(t,s,a)},zF=(t,s,a)=>{Vt(t.element,"aria-selected",a)},DS=(t,s,a)=>{Vt(t.element,"aria-checked",a)},RS=(t,s,a)=>{Vt(t.element,"aria-expanded",a)};var R_=[oe("selected",!1),bn("toggleClass"),oe("toggleOnExecute",!0),zt("onToggled"),Qs("aria",{mode:"none"},Uo("mode",{pressed:[oe("syncWithExpanded",!1),qn("update",VF)],checked:[qn("update",DS)],expanded:[qn("update",RS)],selected:[qn("update",zF)],none:[qn("update",K)]}))];const Lt=Rs({fields:R_,name:"toggling",active:HF,apis:qD,state:jf(!1)}),YD=()=>{const t=(s,a)=>{a.stop(),$d(s)};return[ve(pc(),t),ve(Lg(),t),Gi(Wi()),Gi(Ua())]},Py=t=>{const s=a=>vi((i,d)=>{a(i),d.stop()});return Fn(Ft([t.map(s).toArray(),YD()]))},M_="alloy.item-hover",B_="alloy.item-focus",N_="alloy.item-toggled",XD=t=>{(Uc(t.element).isNone()||bt.isFocused(t))&&(bt.isFocused(t)||bt.focus(t),at(t,M_,{item:t}))},MS=t=>{at(t,B_,{item:t})},UF=(t,s)=>{at(t,N_,{item:t,state:s})},JD=Q(M_),WF=Q(B_),ZF=Q(N_),QD=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),jF=t=>({aria:{mode:"checked"},...md(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{mt(t.onToggled)&&t.onToggled(s,a),UF(s,a)}}),GF=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:QD(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Cc.augment(t.itemBehaviours,[t.toggling.fold(Lt.revoke,s=>Lt.config(jF(s))),bt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{MS(s)}}),ct.config({mode:"execution"}),Ve.config({store:{mode:"memory",initialValue:t.data}}),Pt("item-type-events",[...YD(),ve(Tl(),XD),ve(tf(),bt.focus)])]),components:t.components,eventOrder:t.eventOrder}),eR=[me("data"),me("components"),me("dom"),oe("hasSubmenu",!1),bn("toggling"),Cc.field("itemBehaviours",[Lt,bt,ct,Ve]),oe("ignoreFocus",!1),oe("domModification",{}),qn("builder",GF),oe("eventOrder",{})],$y=t=>({dom:t.dom,components:t.components,events:Fn([NT(tf())])}),qF=[me("dom"),me("components"),qn("builder",$y)],Nh=Q("item-widget"),Fy=Q([Es({name:"widget",overrides:t=>({behaviours:De([Ve.config({store:{mode:"manual",getValue:s=>t.data,setValue:K}})])})})]),tR=t=>{const s=gy(Nh(),t,Fy()),a=hy(Nh(),t,s.internals()),i=g=>Rn(g,t,"widget").map(p=>(ct.focusIn(p),p)),d=(g,p)=>im(p.event.target)?k.none():(()=>(t.autofocus&&p.setSource(g.element),k.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Fn([vi((g,p)=>{i(g).each(C=>{p.stop()})}),ve(Tl(),XD),ve(tf(),(g,p)=>{t.autofocus?i(g):bt.focus(g)})]),behaviours:Cc.augment(t.widgetBehaviours,[Ve.config({store:{mode:"memory",initialValue:t.data}}),bt.config({ignore:t.ignoreFocus,onFocus:g=>{MS(g)}}),ct.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:nk(),onLeft:d,onRight:d,onEscape:(g,p)=>!bt.isFocused(g)&&!t.autofocus?(bt.focus(g),k.some(!0)):(t.autofocus&&p.setSource(g.element),k.none())})])}},nR=[me("uid"),me("data"),me("components"),me("dom"),oe("autofocus",!1),oe("ignoreFocus",!1),Cc.field("widgetBehaviours",[Ve,bt,ct]),oe("domModification",{}),by(Fy()),qn("builder",tR)],KF=Uo("type",{widget:nR,item:eR,separator:qF}),YF=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),oR=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),XF=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),sR=Q([lb({factory:{sketch:t=>{const s=Xs("menu.spec item",KF,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>wn(s,"uid")?s:{...s,uid:Al("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),JF=Q([me("value"),me("items"),me("dom"),me("components"),oe("eventOrder",{}),ts("menuBehaviours",[ln,Ve,Kt,ct]),Qs("movement",{mode:"menu",moveOnTab:!0},Uo("mode",{grid:[T1(),qn("config",YF)],matrix:[qn("config",oR),me("rowSelector"),oe("previousSelector",k.none)],menu:[oe("moveOnTab",!0),qn("config",XF)]})),sD(),oe("fakeFocus",!1),oe("focusManager",_y()),zt("onHighlight"),zt("onDehighlight")]),rR=Q("alloy.menu-focus"),aR=(t,s)=>{const a=Ir(t.element,'[role="menuitemradio"][aria-checked="true"]');qe(a,i=>{$n(i,s.element)||t.getSystem().getByDom(i).each(d=>{Lt.off(d)})})},BS=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:_o(t.menuBehaviours,[ln.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ve.config({store:{mode:"memory",initialValue:t.value}}),Kt.config({find:k.some}),ct.config(t.movement.config(t,t.movement))]),events:Fn([ve(WF(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(C=>{ln.highlight(d,C),g.stop(),at(d,rR(),{menu:d,item:C})})}),ve(JD(),(d,g)=>{const p=g.event.item;ln.highlight(d,p)}),ve(ZF(),(d,g)=>{const{item:p,state:C}=g.event;C&&dr(p.element,"role")==="menuitemradio"&&aR(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),hm=ns({name:"Menu",configFields:JF(),partFields:sR(),factory:BS}),P_=t=>Eg(t,(s,a)=>({k:s,v:a})),cR=(t,s,a,i)=>Ze(a,i).bind(d=>Ze(t,d).bind(g=>{const p=cR(t,s,a,g);return k.some([g].concat(p))})).getOr([]),QF=(t,s)=>{const a={};ys(t,(p,C)=>{qe(p,w=>{a[w]=C})});const i=s,d=P_(s),g=vo(d,(p,C)=>[C].concat(cR(a,i,d,C)));return vo(a,p=>Ze(g,p).getOr([p]))},eI=()=>{const t=gt({}),s=gt({}),a=gt({}),i=Kn(),d=gt({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},p=()=>i.get().isNone(),C=(Re,ke)=>{s.set({...s.get(),[Re]:{type:"prepared",menu:ke}})},w=(Re,ke,Ne,Ue)=>{i.set(Re),t.set(Ne),s.set(ke),d.set(Ue);const Zt=QF(Ue,Ne);a.set(Zt)},E=Re=>jr(t.get(),(ke,Ne)=>ke===Re),_=(Re,ke,Ne)=>U(Re).bind(Ue=>E(Re).bind(Zt=>ke(Zt).map(ot=>({triggeredMenu:Ue,triggeringItem:ot,triggeringPath:Ne})))),D=(Re,ke)=>{const Ne=Yn(Y(Re).toArray(),Ue=>U(Ue).isSome());return Ze(a.get(),Re).bind(Ue=>{const Zt=Er(Ne.concat(Ue)),ot=be(Zt,(At,Et)=>_(At,ke,Zt.slice(0,Et+1)).fold(()=>Na(i.get(),At)?[]:[k.none()],Qt=>[k.some(Qt)]));return ro(ot)})},M=Re=>Ze(t.get(),Re).map(ke=>{const Ne=Ze(a.get(),Re).getOr([]);return[ke].concat(Ne)}),P=Re=>Ze(a.get(),Re).bind(ke=>ke.length>1?k.some(ke.slice(1)):k.none()),I=Re=>Ze(a.get(),Re),U=Re=>ne(Re).bind(iR),ne=Re=>Ze(s.get(),Re),Y=Re=>Ze(t.get(),Re);return{setMenuBuilt:C,setContents:w,expand:M,refresh:I,collapse:P,lookupMenu:ne,lookupItem:Y,otherMenus:Re=>{const ke=d.get();return ft(bo(ke),Re)},getPrimary:()=>i.get().bind(U),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:D}},iR=t=>t.type==="prepared"?k.some(t.menu):k.none(),$_={init:eI,extractPreparedMenu:iR},F_=je("tiered-menu-item-highlight"),lR=je("tiered-menu-item-dehighlight");var _a;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(_a||(_a={}));const tI=(t,s)=>{const a=Kn(),i=($e,et,St)=>vo(St,(jt,dt)=>{const Tt=()=>hm.sketch({...jt,value:dt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Bn,pn)=>{at(Bn,F_,{menuComp:Bn,itemComp:pn})},onDehighlight:(Bn,pn)=>{at(Bn,lR,{menuComp:Bn,itemComp:pn})},focusManager:t.fakeFocus?yS():_y()});return dt===et?{type:"prepared",menu:$e.getSystem().build(Tt())}:{type:"notbuilt",nbMenu:Tt}}),d=$_.init(),g=$e=>{const et=i($e,t.data.primary,t.data.menus),St=w();return d.setContents(t.data.primary,et,t.data.expansions,St),d.getPrimary()},p=$e=>Ve.getValue($e).value,C=($e,et,St)=>Ws(et,jt=>{if(!jt.getSystem().isConnected())return k.none();const dt=ln.getCandidates(jt);return Bt(dt,Tt=>p(Tt)===St)}),w=$e=>vo(t.data.menus,(et,St)=>be(et.items,jt=>jt.type==="separator"?[]:[jt.data.value])),E=ln.highlight,_=($e,et)=>{E($e,et),ln.getHighlighted(et).orThunk(()=>ln.getFirst(et)).each(St=>{t.fakeFocus?ln.highlight(et,St):n1($e,St.element,tf())})},D=($e,et)=>fd(we(et,St=>$e.lookupMenu(St).bind(jt=>jt.type==="prepared"?k.some(jt.menu):k.none()))),M=($e,et,St)=>{const jt=D(et,et.otherMenus(St));qe(jt,dt=>{Ds(dt.element,[t.markers.backgroundMenu]),t.stayInDom||xt.remove($e,dt)})},P=$e=>a.get().getOrThunk(()=>{const et={},St=Ir($e.element,`.${t.markers.item}`),jt=Yn(St,dt=>dr(dt,"aria-haspopup")==="true");return qe(jt,dt=>{$e.getSystem().getByDom(dt).each(Tt=>{const Bn=p(Tt);et[Bn]=Tt})}),a.set(et),et}),I=($e,et)=>{const St=P($e);ys(St,(jt,dt)=>{const Tt=Io(et,dt);Vt(jt.element,"aria-expanded",Tt)})},U=($e,et,St)=>k.from(St[0]).bind(jt=>et.lookupMenu(jt).bind(dt=>{if(dt.type==="notbuilt")return k.none();{const Tt=dt.menu,Bn=D(et,St.slice(1));return qe(Bn,pn=>{Wo(pn.element,t.markers.backgroundMenu)}),fa(Tt.element)||xt.append($e,bc(Tt)),Ds(Tt.element,[t.markers.backgroundMenu]),_($e,Tt),M($e,et,St),k.some(Tt)}}));let ne;(function($e){$e[$e.HighlightSubmenu=0]="HighlightSubmenu",$e[$e.HighlightParent=1]="HighlightParent"})(ne||(ne={}));const Y=($e,et,St)=>{if(St.type==="notbuilt"){const jt=$e.getSystem().build(St.nbMenu());return d.setMenuBuilt(et,jt),jt}else return St.menu},j=($e,et,St=ne.HighlightSubmenu)=>{if(et.hasConfigured(ht)&&ht.isDisabled(et))return k.some(et);{const jt=p(et);return d.expand(jt).bind(dt=>(I($e,dt),k.from(dt[0]).bind(Tt=>d.lookupMenu(Tt).bind(Bn=>{const pn=Y($e,Tt,Bn);return fa(pn.element)||xt.append($e,bc(pn)),t.onOpenSubmenu($e,et,pn,Er(dt)),St===ne.HighlightSubmenu?(ln.highlightFirst(pn),U($e,d,dt)):(ln.dehighlightAll(pn),k.some(et))}))))}},pe=($e,et)=>{const St=p(et);return d.collapse(St).bind(jt=>(I($e,jt),U($e,d,jt).map(dt=>(t.onCollapseMenu($e,et,dt),dt))))},ce=($e,et)=>{const St=p(et);return d.refresh(St).bind(jt=>(I($e,jt),U($e,d,jt)))},Re=($e,et)=>im(et.element)?k.none():j($e,et,ne.HighlightSubmenu),ke=($e,et)=>im(et.element)?k.none():pe($e,et),Ne=($e,et)=>pe($e,et).orThunk(()=>t.onEscape($e,et).map(()=>$e)),Ue=$e=>(et,St)=>nr(St.getSource(),`.${t.markers.item}`).bind(jt=>et.getSystem().getByDom(jt).toOptional().bind(dt=>$e(et,dt).map(pt))),Zt=Fn([ve(rR(),($e,et)=>{const St=et.event.item;d.lookupItem(p(St)).each(()=>{const jt=et.event.menu;ln.highlight($e,jt);const dt=p(et.event.item);d.refresh(dt).each(Tt=>M($e,d,Tt))})}),vi(($e,et)=>{const St=et.event.target;$e.getSystem().getByDom(St).each(jt=>{p(jt).indexOf("collapse-item")===0&&pe($e,jt),j($e,jt,ne.HighlightSubmenu).fold(()=>{t.onExecute($e,jt)},K)})}),Gn(($e,et)=>{g($e).each(St=>{xt.append($e,bc(St)),t.onOpenMenu($e,St),t.highlightOnOpen===_a.HighlightMenuAndItem?_($e,St):t.highlightOnOpen===_a.HighlightJustMenu&&E($e,St)})}),ve(F_,($e,et)=>{t.onHighlightItem($e,et.event.menuComp,et.event.itemComp)}),ve(lR,($e,et)=>{t.onDehighlightItem($e,et.event.menuComp,et.event.itemComp)}),...t.navigateOnHover?[ve(JD(),($e,et)=>{const St=et.event.item;ce($e,St),j($e,St,ne.HighlightParent),t.onHover($e,St)})]:[]]),ot=$e=>ln.getHighlighted($e).bind(ln.getHighlighted),At=$e=>{ot($e).each(et=>{pe($e,et)})},Et=$e=>{d.getPrimary().each(et=>{_($e,et)})},Qt=$e=>k.from($e.components()[0]).filter(et=>dr(et.element,"role")==="menu"),Yt={collapseMenu:At,highlightPrimary:Et,repositionMenus:$e=>{d.getPrimary().bind(St=>ot($e).bind(jt=>{const dt=p(jt),Tt=pv(d.getMenus()),Bn=fd(we(Tt,$_.extractPreparedMenu));return d.getTriggeringPath(dt,pn=>C($e,Bn,pn))}).map(jt=>({primary:St,triggeringPath:jt}))).fold(()=>{Qt($e).each(St=>{t.onRepositionMenu($e,St,[])})},({primary:St,triggeringPath:jt})=>{t.onRepositionMenu($e,St,jt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:_o(t.tmenuBehaviours,[ct.config({mode:"special",onRight:Ue(Re),onLeft:Ue(ke),onEscape:Ue(Ne),focusIn:($e,et)=>{d.getPrimary().each(St=>{n1($e,St.element,tf())})}}),ln.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Kt.config({find:$e=>ln.getHighlighted($e)}),xt.config({})]),eventOrder:t.eventOrder,apis:Yt,events:Zt}},nI=Q("collapse-item"),oI=(t,s,a)=>({primary:t,menus:s,expansions:a}),sI=(t,s)=>({primary:t,menus:Ym(t,s),expansions:{}}),uR=t=>({value:je(nI()),meta:{text:t}}),Ph=Zo({name:"TieredMenu",configFields:[Cf("onExecute"),Cf("onEscape"),ie("onOpenMenu"),ie("onOpenSubmenu"),zt("onRepositionMenu"),zt("onCollapseMenu"),oe("highlightOnOpen",_a.HighlightMenuAndItem),_u("data",[me("primary"),me("menus"),me("expansions")]),oe("fakeFocus",!1),zt("onHighlightItem"),zt("onDehighlightItem"),zt("onHover"),Yi(),me("dom"),oe("navigateOnHover",!0),oe("stayInDom",!1),ts("tmenuBehaviours",[ct,ln,Kt,xt]),oe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:tI,extraApis:{tieredData:oI,singleData:sI,collapseItem:uR}}),rI=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>T0(),onRtl:()=>R1()}}:{},C=E=>E.length===2,w=E=>C(E)?p:{};return Ph.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Xt.close(s),t.onEscape.map(E=>E(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(E,_)=>{fs.positionWithinBounds(g().getOrDie(),_,a,d())},onOpenSubmenu:(E,_,D,M)=>{const P=g().getOrDie();fs.position(P,D,{anchor:{type:"submenu",item:_,...w(M)}})},onRepositionMenu:(E,_,D)=>{const M=g().getOrDie();fs.positionWithinBounds(M,_,a,d()),qe(D,P=>{const I=w(P.triggeringPath);fs.position(M,P.triggeredMenu,{anchor:{type:"submenu",item:P.triggeringItem,...I}})})}})},aI=(t,s)=>{const a=(M,P)=>t.getRelated(M).exists(U=>zd(U,P)),i=(M,P)=>{Xt.setContent(M,P)},d=(M,P,I)=>{const U=k.none;g(M,P,I,U)},g=(M,P,I,U)=>{const ne=t.lazySink(M).getOrDie();Xt.openWhileCloaked(M,P,()=>fs.positionWithinBounds(ne,M,I,U())),Ve.setValue(M,k.some({mode:"position",config:I,getBounds:U}))},p=(M,P,I)=>{C(M,P,I,k.none)},C=(M,P,I,U)=>{const ne=rI(t,M,P,I,U);Xt.open(M,ne),Ve.setValue(M,k.some({mode:"menu",menu:ne}))},w=M=>{Xt.isOpen(M)&&(Ve.setValue(M,k.none()),Xt.close(M))},E=M=>Xt.getState(M),_=M=>{Xt.isOpen(M)&&Ve.getValue(M).each(P=>{switch(P.mode){case"menu":Xt.getState(M).each(Ph.repositionMenus);break;case"position":const I=t.lazySink(M).getOrDie();fs.positionWithinBounds(I,M,P.config,P.getBounds());break}})},D={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:C,hide:w,getContent:E,reposition:_,isOpen:Xt.isOpen};return{uid:t.uid,dom:t.dom,behaviours:_o(t.inlineBehaviours,[Xt.config({isPartOf:(M,P,I)=>zd(P,I)||a(M,I),getAttachPoint:M=>t.lazySink(M).getOrDie(),onOpen:M=>{t.onShow(M)},onClose:M=>{t.onHide(M)}}),Ve.config({store:{mode:"memory",initialValue:k.none()}}),Pr.config({channels:{...om({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(M=>({fireEventInstead:{event:M.event}})).getOr({})}),...oy({...t.fireRepositionEventInstead.map(M=>({fireEventInstead:{event:M.event}})).getOr({}),doReposition:_})}})]),eventOrder:t.eventOrder,apis:D}},ho=Zo({name:"InlineView",configFields:[me("lazySink"),zt("onShow"),zt("onHide"),Ou("onEscape"),ts("inlineBehaviours",[Xt,Ve,Pr]),Bo("fireDismissalEventInstead",[oe("event",ji())]),Bo("fireRepositionEventInstead",[oe("event",Qv())]),oe("getRelated",k.none),oe("isExtraPart",An),oe("eventOrder",k.none)],factory:aI,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var NS=tinymce.util.Tools.resolve("tinymce.util.Delay");const rr=Zo({name:"Button",factory:t=>{const s=Py(t.action),a=t.dom.tag,i=g=>Ze(t.dom,"attributes").bind(p=>Ze(p,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),p=i("role").map(C=>({role:C})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Cc.augment(t.buttonBehaviours,[bt.config({}),ct.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[oe("uid",void 0),me("dom"),oe("components",[]),Cc.field("buttonBehaviours",[bt,ct]),bn("action"),bn("role"),oe("eventOrder",{})]}),yn=t=>{const s=Eh(t)&&oc(t,"uid")?t.uid:Al("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var zr=tinymce.util.Tools.resolve("tinymce.util.I18n");const dR={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},mR="temporary-placeholder",Ju=t=>()=>Ze(t,mR).getOr("!not found!"),I_=(t,s)=>{const a=t.toLowerCase();if(zr.isRtl()){const i=ua(a,"-rtl");return wn(s,i)?i:a}else return a},fR=(t,s)=>Ze(s,I_(t,s)),Kc=(t,s)=>{const a=s();return fR(t,a).getOrThunk(Ju(a))},gR=(t,s,a)=>{const i=s();return fR(t,i).or(a).getOrThunk(Ju(i))},hR=t=>zr.isRtl()?wn(dR,t):!1,PS=()=>Pt("add-focusable",[Gn(t=>{C1(t.element,"svg").each(s=>Vt(s,"focusable","false"))})]),pR=(t,s,a,i)=>{var d,g;const p=hR(s)?["tox-icon--flip"]:[],C=Ze(a,I_(s,a)).or(i).getOrThunk(Ju(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:C},behaviours:De([...(g=t.behaviours)!==null&&g!==void 0?g:[],PS()])}},Yc=(t,s,a,i=k.none())=>pR(s,t,a(),i),cI=(t,s,a)=>{const i=a(),d=Bt(t,g=>wn(i,I_(g,i)));return pR(s,d.getOr(mR),i,k.none())},iI={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Cb=Zo({name:"Notification",factory:t=>{const s=yn({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:De([xt.config({})])}),a=P=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${P}%`}}}),i=P=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${P}%`}}),d=yn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},i(0)],behaviours:De([xt.config({})])}),C={updateProgress:(P,I)=>{P.getSystem().isConnected()&&d.getOpt(P).each(U=>{xt.set(U,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(I)]},i(I)])})},updateText:(P,I)=>{if(P.getSystem().isConnected()){const U=s.get(P);xt.set(U,[ko(I)])}}},w=Ft([t.icon.toArray(),t.level.toArray(),t.level.bind(P=>k.from(iI[P])).toArray()]),E=yn(rr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Yc("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:P=>{t.onAction(P)}})),_=cI(w,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),D={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:De([xt.config({})])},M=[_,D];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(P=>["tox-notification","tox-notification--in",`tox-notification--${P}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:De([bt.config({}),Pt("notification-events",[ve(hi(),P=>{E.getOpt(P).each(bt.focus)})])]),components:M.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[E.asSpec()]:[]),apis:C}},configFields:[bn("level"),me("progress"),bn("icon"),me("onAction"),me("text"),me("iconProvider"),me("translationProvider"),Fs("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var L_=(t,s,a)=>{const i=s.backstage.shared,d=()=>{const w=Xn(te.fromDom(t.getContentAreaContainer())),E=Dr(),_=pr(E.x,w.x,w.right),D=pr(E.y,w.y,w.bottom),M=Math.max(w.right,E.right),P=Math.max(w.bottom,E.bottom);return k.some(cs(_,D,M-_,P-D))};return{open:(w,E)=>{const _=()=>{E(),ho.hide(M)},D=Is(Cb.sketch({text:w.text,level:Io(["success","error","warning","warn","info"],w.type)?w.type:void 0,progress:w.progressBar===!0,icon:w.icon,closeButton:w.closeButton,onAction:_,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),M=Is(ho.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(M),gl(w.timeout)&&w.timeout>0&&NS.setEditorTimeout(t,()=>{_()},w.timeout);const I={close:_,reposition:()=>{const U=bc(D),ne={maxHeightFunction:Gd()},Y=t.notificationManager.getNotifications();if(Y[0]===I){const j={...i.anchors.banner(),overrides:ne};ho.showWithinBounds(M,U,{anchor:j},d)}else Ee(Y,I).each(j=>{const pe=Y[j-1].getEl(),ce={type:"node",root:qs(),node:k.some(te.fromDom(pe)),overrides:ne,layouts:{onRtl:()=>[es],onLtr:()=>[es]}};ho.showWithinBounds(M,U,{anchor:ce},d)})},text:U=>{Cb.updateText(D,U)},settings:w,getEl:()=>D.element.dom,progressBar:{value:U=>{Cb.updateProgress(D,U)}}};return I},close:w=>{w.close()},getArgs:w=>w.settings}},wb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),bR=tinymce.util.Tools.resolve("tinymce.EditorManager"),$h=tinymce.util.Tools.resolve("tinymce.Env"),Ai;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Ai||(Ai={}));var Fh;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Fh||(Fh={}));const Wn=t=>s=>s.options.get(t),Ih=t=>s=>k.from(t(s)),vR=t=>{const s=$h.deviceType.isPhone(),a=$h.deviceType.isTablet()||s,i=t.options.register,d=p=>xn(p)||p===!1,g=p=>xn(p)||gl(p);i("skin",{processor:p=>xn(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:wb.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>xn(p)||fl(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>fl(p)||xn(p)||ml(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Lo(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Fh.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||fl(p),default:!$h.deviceType.isTouch()}),i("sidebar_show",{processor:"string"})},Sb=Wn("readonly"),xb=Wn("height"),$S=Wn("width"),FS=Ih(Wn("min_width")),H_=Ih(Wn("min_height")),IS=Ih(Wn("max_width")),V_=Ih(Wn("max_height")),yR=Ih(Wn("style_formats")),LS=Wn("style_formats_merge"),z_=Wn("style_formats_autohide"),U_=Wn("content_langs"),HS=Wn("removed_menuitems"),Eb=Wn("toolbar_mode"),W_=Wn("toolbar_groups"),Z_=Wn("toolbar_location"),lI=Wn("fixed_toolbar_container"),uI=Wn("fixed_toolbar_container_target"),j_=Wn("toolbar_persist"),CR=Wn("toolbar_sticky_offset"),wR=Wn("menubar"),Tb=Wn("toolbar"),G_=Wn("file_picker_callback"),q_=Wn("file_picker_validator_handler"),SR=Wn("font_size_input_default_unit"),VS=Wn("file_picker_types"),xR=Wn("typeahead_urls"),ER=Wn("anchor_top"),TR=Wn("anchor_bottom"),kR=Wn("draggable_modal"),_R=Wn("statusbar"),K_=Wn("elementpath"),zS=Wn("branding"),OR=Wn("resize"),Iy=Wn("paste_as_text"),AR=Wn("sidebar_show"),DR=Wn("promotion"),Y_=t=>t.options.get("skin")===!1,US=t=>t.options.get("menubar")!==!1,RR=t=>{const s=t.options.get("skin_url");if(Y_(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return bR.baseURL+"/skins/ui/"+a}},MR=t=>t.options.get("line_height_formats").split(" "),Ly=t=>{const s=Tb(t),a=xn(s),i=ml(s)&&s.length>0;return!Hy(t)&&(i||a||s===!0)},X_=t=>{const s=Lo(9,i=>t.options.get("toolbar"+(i+1))),a=Yn(s,xn);return kt(a.length>0,a)},Hy=t=>X_(t).fold(()=>{const s=Tb(t);return gu(s,xn)&&s.length>0},pt),Vy=t=>Z_(t)===Fh.bottom,qf=t=>{var s;if(!t.inline)return k.none();const a=(s=lI(t))!==null&&s!==void 0?s:"";if(a.length>0)return go(qs(),a);const i=uI(t);return ir(i)?k.some(te.fromDom(i)):k.none()},kb=t=>t.inline&&qf(t).isSome(),J_=t=>qf(t).getOrThunk(()=>Gs(ur(te.fromDom(t.getElement())))),zy=t=>t.inline&&!US(t)&&!Ly(t)&&!Hy(t),Uy=t=>(t.options.get("toolbar_sticky")||t.inline)&&!kb(t)&&!zy(t),pm=t=>!kb(t)&&t.options.get("ui_mode")==="split",BR=t=>{const s=t.options.get("menu");return vo(s,a=>({...a,items:a.items}))};var NR=Object.freeze({__proto__:null,get ToolbarMode(){return Ai},get ToolbarLocation(){return Fh},register:vR,getSkinUrl:RR,isReadOnly:Sb,isSkinDisabled:Y_,getHeightOption:xb,getWidthOption:$S,getMinWidthOption:FS,getMinHeightOption:H_,getMaxWidthOption:IS,getMaxHeightOption:V_,getUserStyleFormats:yR,shouldMergeStyleFormats:LS,shouldAutoHideStyleFormats:z_,getLineHeightFormats:MR,getContentLanguages:U_,getRemovedMenuItems:HS,isMenubarEnabled:US,isMultipleToolbars:Hy,isToolbarEnabled:Ly,isToolbarPersist:j_,getMultipleToolbarsOption:X_,getUiContainer:J_,useFixedContainer:kb,isSplitUiMode:pm,getToolbarMode:Eb,isDraggableModal:kR,isDistractionFree:zy,isStickyToolbar:Uy,getStickyToolbarOffset:CR,getToolbarLocation:Z_,isToolbarLocationBottom:Vy,getToolbarGroups:W_,getMenus:BR,getMenubar:wR,getToolbar:Tb,getFilePickerCallback:G_,getFilePickerTypes:VS,useTypeaheadUrls:xR,getAnchorTop:ER,getAnchorBottom:TR,getFilePickerValidatorHandler:q_,getFontSizeInputDefaultUnit:SR,useStatusBar:_R,useElementPath:K_,promotionEnabled:DR,useBranding:zS,getResize:OR,getPasteAsText:Iy,getSidebarShow:AR});const Q_="[data-mce-autocompleter]",WS=t=>nr(t,Q_),dI=t=>go(t,Q_),fI={setup:(t,s)=>{const a=(d,g)=>{at(d,Hc(),{raw:g})},i=()=>t.getMenu().bind(ln.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each($d),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(ln.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&WS(te.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var Lh;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(Lh||(Lh={}));var ql=Lh;const e4="tox-menu-nav__js",_b="tox-collection__item",Wy="tox-swatch",gI={normal:e4,color:Wy},t4="tox-collection__item--enabled",hI="tox-collection__group-heading",PR="tox-collection__item-icon",Zy="tox-collection__item-label",pI="tox-collection__item-accessory",$R="tox-collection__item-caret",bI="tox-collection__item-checkmark",jy="tox-collection__item--active",FR="tox-collection__item-container",vI="tox-collection__item-container--column",IR="tox-collection__item-container--row",yI="tox-collection__item-container--align-right",CI="tox-collection__item-container--align-left",wI="tox-collection__item-container--valign-top",SI="tox-collection__item-container--valign-middle",xI="tox-collection__item-container--valign-bottom",ZS=t=>Ze(gI,t).getOr(e4),EI=t=>t==="color"?"tox-swatches":"tox-menu",n4=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:EI(t),tieredMenu:"tox-tiered-menu"}),Hh=t=>{const s=n4(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:ZS(t)}},LR=(t,s,a)=>{const i=n4(a);return{tag:"div",classes:Ft([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},TI=[hm.parts.items({})],jS=(t,s,a)=>{const i=n4(a);return{dom:{tag:"div",classes:Ft([[i.tieredMenu]])},markers:Hh(a)}},HR=Q([bn("data"),oe("inputAttributes",{}),oe("inputStyles",{}),oe("tag","input"),oe("inputClasses",[]),zt("onSetValue"),oe("styles",{}),oe("eventOrder",{}),ts("inputBehaviours",[Ve,bt]),oe("selectOnFocus",!0)]),VR=t=>De([bt.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=Br(a);a.dom.setSelectionRange(0,i.length)}:K})]),kI=t=>({...VR(t),..._o(t.inputBehaviours,[Ve.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Br(s.element),setValue:(s,a)=>{Br(s.element)!==a&&Za(s.element,a)}},onSetValue:t.onSetValue})])}),zR=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),o4=(t,s)=>({uid:t.uid,dom:zR(t),components:[],behaviours:kI(t),eventOrder:t.eventOrder}),Vh=Zo({name:"Input",configFields:HR(),factory:o4}),UR=je("refetch-trigger-event"),WR=je("redirect-menu-item-interaction"),ZR="tox-menu__searcher",GS=t=>go(t.element,`.${ZR}`).bind(s=>t.getSystem().getByDom(s).toOptional()),jR=GS,_I=(t,s)=>{Ve.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},GR=t=>{const s=Ve.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},OI=(t,s)=>{jo(s.element,"id").each(a=>Vt(t.element,"aria-activedescendant",a))},AI=t=>{const s=(d,g)=>(g.cut(),k.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return at(d,WR,p),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[_b]},components:[Vh.sketch({inputClasses:[ZR,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:De([Pt(i,[ve(Bu(),d=>{hn(d,UR)}),ve(Hc(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),ct.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,ct.name()]}})]}},qS="tox-collection--results__js",qR=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:je("aria-item-search-result-id"),"aria-selected":"false"}}}:t},s4=(t,s)=>a=>{const i=Zr(a,s);return we(i,d=>({dom:t,components:d}))},KS=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[hm.parts.items({preprocess:t!=="auto"?s4({tag:"div",classes:["tox-swatches__row"]},t):en})]}]}),DI=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[hm.parts.items({preprocess:s4({tag:"div",classes:["tox-collection__group"]},t)})]}),YS=(t,s)=>{const a=[];let i=[];return qe(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(wn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),we(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},r4=(t,s,a)=>hm.parts.items({preprocess:i=>{const d=we(i,a);return t!=="auto"&&t>1?s4({tag:"div",classes:["tox-collection__group"]},t)(d):YS(d,(g,p)=>s[p].type==="separator")}}),KR=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[r4(t,s,en)]}),RI=(t,s,a=!0)=>{const i=je("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",qS].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[r4(t,s,qR)]}},MI=(t,s,a)=>{const i=je("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[AI({i18n:zr.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],qS],attributes:{id:i}},components:[r4(t,s,qR)]}]}},BI=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[hm.parts.items({preprocess:a=>YS(a,(i,d)=>t[d].type==="separator")})]}),Gy=t=>Ba(t,s=>"icon"in s&&s.icon!==void 0),bm=t=>(console.error(qm(t)),console.log(t),k.none()),a4=(t,s,a,i,d)=>{const g=BI(a);return{value:t,dom:g.dom,components:g.components,items:a}},qy=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?KR(i,a):d.searchMode.searchMode==="search-with-field"?MI(i,a,d.searchMode):RI(i,a);if(d.menuType==="color"){const p=KS(i);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const p=KR(i,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=DI(i);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:LR(s,i,d.menuType),components:TI,items:a}},No=is("type"),Ky=is("name"),Ob=is("label"),Qu=is("text"),Kl=is("title"),XS=is("icon"),Yy=is("value"),NI=fc("fetch"),PI=fc("getSubmenuItems"),Ab=fc("onAction"),Db=fc("onItemAction"),zh=To("onSetup",()=>K),$I=Js("name"),vm=Js("text"),Xc=Js("icon"),Rb=Js("tooltip"),c4=Js("label"),i4=Js("shortcut"),l4=Ou("select"),JS=Fs("active",!1),YR=Fs("borderless",!1),Di=Fs("enabled",!0),QS=Fs("primary",!1),XR=t=>oe("columns",t),u4=oe("meta",{}),d4=To("onAction",K),Uh=t=>za("type",t),m4=t=>As("name","name",fi(()=>je(`${t}-name`)),fo),JR=t=>As("value","value",fi(()=>je(`${t}-value`)),dc()),f4=lt([No,vm]),FI=t=>kn("separatormenuitem",f4,t),QR=lt([Uh("autocompleteitem"),JS,Di,u4,Yy,vm,Xc]),eM=t=>kn("Autocompleter.Separator",f4,t),Xy=t=>kn("Autocompleter.Item",QR,t),Mb=[Di,Rb,Xc,vm,zh],II=lt([No,Ab].concat(Mb)),tM=t=>kn("toolbarbutton",II,t),ex=[JS].concat(Mb),LI=lt(ex.concat([No,Ab])),nM=t=>kn("ToggleButton",LI,t),g4=[To("predicate",An),va("scope","node",["node","editor"]),va("position","selection",["node","selection","line"])],oM=Mb.concat([Uh("contextformbutton"),QS,Ab,Rr("original",en)]),sM=ex.concat([Uh("contextformbutton"),QS,Ab,Rr("original",en)]),rM=Mb.concat([Uh("contextformbutton")]),HI=ex.concat([Uh("contextformtogglebutton")]),VI=Uo("type",{contextformbutton:oM,contextformtogglebutton:sM}),aM=lt([Uh("contextform"),To("initValue",Q("")),c4,Va("commands",VI),Vi("launch",Uo("type",{contextformbutton:rM,contextformtogglebutton:HI}))].concat(g4)),h4=t=>kn("ContextForm",aM,t),p4=lt([Uh("contexttoolbar"),is("items")].concat(g4)),cM=t=>kn("ContextToolbar",p4,t),iM=[No,is("src"),Js("alt"),Km("classes",[],fo)],lM=lt(iM),zI=[No,Qu,$I,Km("classes",["tox-collection__item-label"],fo)],b4=lt(zI),uM=Wp(()=>Ha("type",{cardimage:lM,cardtext:b4,cardcontainer:dM})),dM=lt([No,za("direction","horizontal"),za("align","left"),za("valign","middle"),Va("items",uM)]),Wh=[Di,vm,i4,JR("menuitem"),u4],Zh=lt([No,c4,Va("items",uM),zh,d4].concat(Wh)),UI=t=>kn("cardmenuitem",Zh,t),v4=lt([No,JS,Xc].concat(Wh)),tx=t=>kn("choicemenuitem",v4,t),mM=[No,is("fancytype"),d4],fM=[oe("initData",{})].concat(mM),gM=[Ou("select"),Au("initData",{},[Fs("allowCustomColors",!0),za("storageKey","default"),Sl("colors",dc())])].concat(mM),hM=Uo("fancytype",{inserttable:fM,colorswatch:gM}),y4=t=>kn("fancymenuitem",hM,t),pM=lt([No,zh,d4,Xc].concat(Wh)),WI=t=>kn("menuitem",pM,t),bM=lt([No,PI,zh,Xc].concat(Wh)),vM=t=>kn("nestedmenuitem",bM,t),yM=lt([No,Xc,JS,zh,Ab].concat(Wh)),CM=t=>kn("togglemenuitem",yM,t),C4=(t,s,a)=>{const i=Ir(t.element,"."+a);if(i.length>0){const d=mo(i,g=>{const p=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(p-C)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},w4=(t,s)=>De([Pt(t,s)]),Jy={namedEvents:w4,unnamedEvents:t=>w4(je("unnamed-events"),t)},wM=je("tooltip.exclusive"),Qy=je("tooltip.show"),Bb=je("tooltip.hide"),Nb=(t,s,a)=>{t.getSystem().broadcastOn([wM],{})};var jI=Object.freeze({__proto__:null,hideAllExclusive:Nb,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&xt.set(d,i)})}}),GI=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Zc(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){Nb(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Fn(t.mode==="normal"?[ve(Tl(),C=>{hn(d,Qy)}),ve(Fg(),C=>{hn(d,Bb)})]:[]),behaviours:De([xt.config({})])});s.setTooltip(p),nl(g,p),t.onShow(d,p),fs.position(g,p,{anchor:t.anchor(d)})}};return Fn(Ft([[ve(Qy,d=>{s.resetTimer(()=>{i(d)},t.delay)}),ve(Bb,d=>{s.resetTimer(()=>{a(d)},t.delay)}),ve(bi(),(d,g)=>{const p=g;p.universal||Io(p.channels,wM)&&a(d)}),fr(d=>{a(d)})],t.mode==="normal"?[ve(hi(),d=>{hn(d,Qy)}),ve(ef(),d=>{hn(d,Bb)}),ve(Tl(),d=>{hn(d,Qy)}),ve(Fg(),d=>{hn(d,Bb)})]:[ve(IC(),(d,g)=>{hn(d,Qy)}),ve(Vg(),d=>{hn(d,Bb)})]]))}}),qI=[me("lazySink"),me("tooltipDom"),oe("exclusive",!0),oe("tooltipComponents",[]),oe("delay",300),va("mode","normal",["normal","follow-highlight"]),oe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:Q([es,zn,Ss,br,ds,Nr]),onRtl:Q([es,zn,Ss,br,ds,Nr])}})),zt("onHide"),zt("onShow")],nx=Object.freeze({__proto__:null,init:()=>{const t=Kn(),s=Kn(),a=()=>{t.on(clearTimeout)},i=(g,p)=>{a(),t.set(setTimeout(g,p))},d=Q("not-implemented");return wa({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const SM=Rs({fields:qI,name:"tooltipping",active:GI,state:nx,apis:jI}),xM=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),EM="silver.readonly",TM=lt([jp("readonly")]),e2=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&qe(d,g=>{g.broadcastOn([Vl()],{target:i})}),qe(d,g=>{g.broadcastOn([EM],{readonly:s})})},kM=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&e2(s,!0)}),t.on("SwitchMode",()=>e2(s,t.mode.isReadOnly())),Sb(t)&&t.mode.set("readonly")},ps=()=>Pr.config({channels:{[EM]:{schema:TM,onReceive:(t,s)=>{ht.set(t,s.readonly)}}}}),sl={item:t=>ht.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>ht.config({disabled:t}),splitButton:t=>ht.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>ht.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},ox=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Kf=(t,s)=>Gn(a=>{ox(t,a)(d=>{const g=t.onSetup(d);mt(g)&&s.set(g)})}),ym=(t,s)=>fr(a=>ox(t,a)(s.get())),_M=(t,s)=>vi((a,i)=>{ox(t,a)(t.onAction),!t.triggersSubmenu&&s===ql.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&hn(a,Bd()),i.stop())}),JI={[Wa()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Pb=fd,$b=(t,s,a,i)=>{const d=gt(K);return{type:"item",dom:s.dom,components:Pb(s.optComponents),data:t.data,eventOrder:JI,hasSubmenu:t.triggersSubmenu,itemBehaviours:De([Pt("item-events",[_M(t,a),Kf(t,d),ym(t,d)]),sl.item(()=>!t.enabled||i.isDisabled()),ps(),xt.config({})].concat(t.itemBehaviours))}},Fb=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),QI=t=>{const s=$h.os.isMacOS()||$h.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=we(g,C=>{const w=C.toLowerCase().trim();return wn(d,w)?d[w]:C});return s?p.join(""):p.join("+")},sx=(t,s,a=[PR])=>Yc(t,{tag:"div",classes:a},s),OM=t=>({dom:{tag:"div",classes:[Zy]},components:[ko(zr.translate(t))]}),AM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),S4=(t,s)=>({dom:{tag:"div",classes:[Zy]},components:[{dom:{tag:t.tag,styles:t.styles},components:[ko(zr.translate(s))]}]}),DM=t=>({dom:{tag:"div",classes:[pI]},components:[ko(QI(t))]}),RM=t=>sx("checkmark",t,[bI]),e8=t=>sx("chevron-right",t,[$R]),MM=t=>sx("chevron-down",t,[$R]),t8=(t,s)=>{const a=t.direction==="vertical"?vI:IR,i=t.align==="left"?CI:yI;return{dom:{tag:"div",classes:[FR,a,i,(()=>{switch(t.valign){case"top":return wI;case"middle":return SI;case"bottom":return xI}})()]},components:s}},n8=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),BM=(t,s,a)=>{const i="custom",d="remove",g=t.ariaLabel,p=t.value,C=t.iconContent.map(E=>gR(E,s.icons,a));return{dom:(()=>{const E=Wy,_=C.getOr(""),M={tag:"div",attributes:g.map(P=>({title:s.translate(P)})).getOr({}),classes:[E]};return p===i?{...M,tag:"button",classes:[...M.classes,"tox-swatches__picker-btn"],innerHtml:_}:p===d?{...M,classes:[...M.classes,"tox-swatch--remove"],innerHtml:_}:ir(p)?{...M,attributes:{...M.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:_}:M})(),optComponents:[]}},x4=t=>{const s=t.map(a=>({attributes:{title:zr.translate(a),id:je("menu-item")}})).getOr({});return{tag:"div",classes:[e4,_b],...s}},NM=(t,s,a,i)=>{const d={tag:"div",classes:[PR]},g=M=>Yc(M,d,s.icons,i),p=()=>k.some({dom:d}),C=a?t.iconContent.map(g).orThunk(p):k.none(),w=t.checkMark,E=k.from(t.meta).fold(()=>OM,M=>wn(M,"style")?dn(S4,M.style):OM),_=t.htmlContent.fold(()=>t.textContent.map(E),M=>k.some(AM(M,[Zy])));return{dom:x4(t.ariaLabel),optComponents:[C,_,t.shortcutContent.map(DM),w,t.caret]}},t2=(t,s,a,i=k.none())=>t.presets==="color"?BM(t,s,i):NM(t,s,a,i),PM=(t,s)=>Ze(t,"tooltipWorker").map(a=>[SM.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:Gd}}),mode:"follow-highlight",onShow:(i,d)=>{a(g=>{SM.setComponents(i,[y1({element:te.fromDom(g)})])})}})]).getOr([]),o8=t=>wb.DOM.encode(t),$M=(t,s)=>{const a=zr.translate(t),i=o8(a);if(s.length>0){const d=new RegExp(xM(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},s8=(t,s,a,i,d,g,p,C=!0)=>{const w=t2({presets:i,textContent:k.none(),htmlContent:a?t.text.map(E=>$M(E,s)):k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},p.providers,C,t.icon);return $b({data:Fb(t),enabled:t.enabled,getApi:Q({}),onAction:E=>d(t.value,t.meta),onSetup:Q(K),triggersSubmenu:!1,itemBehaviours:PM(t.meta,p)},w,g,p.providers)},Yf=(t,s)=>we(t,a=>{switch(a.type){case"cardcontainer":return t8(a,Yf(a.items,s));case"cardimage":return n8(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>Io(s.cardText.highlightOn,g))?k.from(s.cardText.matchText).getOr(""):"";return AM($M(a.text,d),a.classes)}}),E4=(t,s,a,i)=>{const d=p=>({isEnabled:()=>!ht.isDisabled(p),setEnabled:C=>{ht.set(p,!C),qe(Ir(p.element,"*"),w=>{p.getSystem().getByDom(w).each(E=>{E.hasConfigured(ht)&&ht.set(E,!C)})})}}),g={dom:x4(t.label),optComponents:[k.some({dom:{tag:"div",classes:[FR,IR]},components:Yf(t.items,i)})]};return $b({data:Fb({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,a.providers)},r8=(t,s,a,i,d,g,p,C=!0)=>{const w=_=>({setActive:D=>{Lt.set(_,D)},isActive:()=>Lt.isOn(_),isEnabled:()=>!ht.isDisabled(_),setEnabled:D=>ht.set(_,!D)}),E=t2({presets:a,textContent:s?t.text:k.none(),htmlContent:k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(RM(p.icons)):k.none(),caret:k.none(),value:t.value},p,C);return Vn($b({data:Fb(t),enabled:t.enabled,getApi:w,onAction:_=>i(t.value),onSetup:_=>(_.setActive(d),K),triggersSubmenu:!1,itemBehaviours:[]},E,g,p),{toggling:{toggleClass:t4,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},n2=fy(Nh(),Fy()),rl=t=>({value:rx(t)}),FM=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,IM=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,LM=t=>FM.test(t)||IM.test(t),rx=t=>bv(t,"#").toUpperCase(),a8=t=>LM(t)?k.some({value:rx(t)}):k.none(),c8=t=>({value:t.value.replace(FM,(a,i,d,g)=>i+i+d+d+g+g)}),HM=t=>{const s=c8(t),a=IM.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},T4=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},o2=t=>{const s=T4(t.red)+T4(t.green)+T4(t.blue);return rl(s)},VM=Math.min,Ya=Math.max,Ri=Math.round,i8=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,zM=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Yl=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),s2=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},UM=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=Ya(0,VM(g,1)),p=Ya(0,VM(p,1)),g===0)return s=a=i=Ri(255*p),Yl(s,a,i,1);const C=d/60,w=p*g,E=w*(1-Math.abs(C%2-1)),_=p-w;switch(Math.floor(C)){case 0:s=w,a=E,i=0;break;case 1:s=E,a=w,i=0;break;case 2:s=0,a=w,i=E;break;case 3:s=0,a=E,i=w;break;case 4:s=E,a=0,i=w;break;case 5:s=w,a=0,i=E;break;default:s=a=i=0}return s=Ri(255*(s+_)),a=Ri(255*(a+_)),i=Ri(255*(i+_)),Yl(s,a,i,1)},r2=t=>{const s=HM(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Yl(a,i,d,1)},Ib=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),C=parseFloat(i);return Yl(d,g,p,C)},Lb=t=>{if(t==="transparent")return k.some(Yl(0,0,0,0));const s=i8.exec(t);if(s!==null)return k.some(Ib(s[1],s[2],s[3],"1"));const a=zM.exec(t);return a!==null?k.some(Ib(a[1],a[2],a[3],a[4])):k.none()},WM=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Cm=Yl(255,0,0,1),l8=t=>{t.dispatch("SkinLoaded")},u8=(t,s)=>{t.dispatch("SkinLoadError",s)},Tc=t=>{t.dispatch("ResizeEditor")},a2=(t,s)=>{t.dispatch("ResizeContent",s)},Xl=(t,s)=>{t.dispatch("ScrollContent",s)},ZM=(t,s)=>{t.dispatch("TextColorChange",s)},Nn=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},jh=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),ax=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},cx=(t,s)=>()=>{t(),s()},Cr=t=>wm(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),k4=(t,s)=>a=>{const i=$r(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},ix=(t,s)=>a=>{const i=Cr(t)(a),d=k4(t,s)(a);return()=>{i(),d()}},wm=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},jM=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Xa=(t,s)=>()=>t.execCommand(s);var Xf=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const lx={},GM=(t,s=10)=>{const a=Xf.getItem(t),i=xn(a)?JSON.parse(a):[],g=(E=>s-E.length<0?E.slice(0,s):E)(i),p=E=>{Ee(g,E).each(C),g.unshift(E),g.length>s&&g.pop(),Xf.setItem(t,JSON.stringify(g))},C=E=>{g.splice(E,1)};return{add:p,state:()=>g.slice(0)}},c2=t=>Ze(lx,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Xf.getItem(s);if(Ni(a)){const d=Xf.getItem("tinymce-custom-colors");Xf.setItem(s,ir(d)?d:"[]")}const i=GM(s,10);return lx[t]=i,i}),d8=t=>we(c2(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),qM=(t,s)=>{c2(t).add(s)},i2=(t,s,a)=>({hue:t,saturation:s,value:a}),_4=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,C=Math.min(d,Math.min(g,p)),w=Math.max(d,Math.max(g,p));if(C===w)return i=C,i2(0,0,i*100);const E=d===C?g-p:p===C?d-g:p-d;return s=d===C?3:p===C?1:5,s=60*(s-E/(w-C)),a=(w-C)/w,i=w,i2(Math.round(s),Math.round(a*100),Math.round(i*100))},m8=t=>_4(r2(t)),KM=t=>o2(UM(t)),f8=t=>a8(t).orThunk(()=>Lb(t).map(o2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],C=i[3];return o2(Yl(d,g,p,C))}),O4="forecolor",A4="hilitecolor",D4=5,R4=t=>Math.max(D4,Math.ceil(Math.sqrt(t))),YM=(t,s)=>{const a=R4(s),i=ed("color_cols")(t);return i!==D4?i:a},XM=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+f8(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},ed=t=>s=>s.options.get(t),M4="#000000",g8=t=>{const s=t.options.register,a=i=>gu(i,xn)?{value:XM(i),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:R4(Hb(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:YM(t,Hb(t,O4).length)}),s("color_cols_background",{processor:"number",default:YM(t,Hb(t,A4).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:M4}),s("color_default_background",{processor:"string",default:M4})},h8=(t,s)=>s===O4?ed("color_cols_foreground")(t):s===A4?ed("color_cols_background")(t):ed("color_cols")(t),JM=(t,s)=>{const a=Math.round(h8(t,s));return a>0?a:D4},QM=ed("custom_colors"),Hb=(t,s)=>s===O4&&t.options.isSet("color_map_foreground")?ed("color_map_foreground")(t):s===A4&&t.options.isSet("color_map_background")?ed("color_map_background")(t):ed("color_map")(t),Jl=ed("color_default_foreground"),p8=ed("color_default_background"),B4="rgba(0, 0, 0, 0)",eB=t=>Lb(t).exists(s=>s.alpha!==0),tB=t=>Xm(t,s=>{if(Pn(s)){const a=Te(s,"background-color");return kt(eB(a),a)}else return k.none()}).getOr(B4),N4=(t,s)=>{const a=te.fromDom(t.selection.getStart()),i=s==="hilitecolor"?tB(a):Te(a,"color");return Lb(i).map(d=>"#"+o2(d).value)},nB=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},oB=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},b8=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{nB(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{oB(t,s)})},sB=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},P4=(t,s,a,i)=>{a==="custom"?iB(t)(g=>{g.each(p=>{qM(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},N4(t,s).getOr(M4)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},rB=(t,s,a)=>t.concat(d8(s).concat(sB(a))),$4=(t,s,a)=>i=>{i(rB(t,s,a))},ux=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},F4=(t,s)=>a=>{const i=N4(t,s);return Na(i,a.toUpperCase())},aB=(t,s,a,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:F4(t,a),columns:JM(t,a),fetch:$4(Hb(t,a),a,QM(t)),onAction:g=>{P4(t,a,d.get(),K)},onItemAction:(g,p)=>{P4(t,a,p,C=>{d.set(C),ZM(t,{name:s,color:C})})},onSetup:g=>{ux(g,s,d.get());const p=C=>{C.name===s&&ux(g,C.name,C.color)};return t.on("TextColorChange",p),cx(Cr(t)(g),()=>{t.off("TextColorChange",p)})}})},cB=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(ux(g,s,d.get()),Cr(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:F4(t,a),initData:{storageKey:a},onAction:g=>{P4(t,a,g.value,p=>{d.set(p),ZM(t,{name:s,color:p})})}}]})},iB=t=>(s,a)=>{let i=!1;const d=C=>{const E=C.getData().colorpicker;i?(s(k.from(E)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},g=(C,w)=>{w.name==="hex-valid"&&(i=w.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:K,onCancel:()=>{s(k.none())}})},Vb=t=>{b8(t);const s=Jl(t),a=p8(t),i=gt(s),d=gt(a);aB(t,"forecolor","forecolor","Text color",i),aB(t,"backcolor","hilitecolor","Background color",d),cB(t,"forecolor","forecolor","Text color",i),cB(t,"backcolor","hilitecolor","Background color",d)},I4=(t,s,a,i,d,g,p,C)=>{const w=Gy(s),_=lB(s,a,i,d!=="color"?"normal":"color",g,p,C);return qy(t,w,_,i,{menuType:d})},lB=(t,s,a,i,d,g,p)=>fd(we(t,C=>C.type==="choiceitem"?tx(C).fold(bm,w=>k.some(r8(w,a===1,i,s,g(w.value),d,p,Gy(t)))):k.none())),l2=(t,s)=>{const a=Hh(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?go(d.element,"[aria-checked=true]"):k.none()}},uB=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${Wy}`:`.${_b}`}},L4=(t,s)=>{const a=H4(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...I4(je("menu-value"),a,C=>{t.onAction({value:C})},i,d,ql.CLOSE_ON_EXECUTE,t.select.getOr(An),s.shared.providers),markers:Hh(d),movement:l2(i,d)};return{type:"widget",data:{value:je("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[n2.widget(hm.sketch(p))]}},H4=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>rB(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(sB(a)))},dx=je("cell-over"),V4=je("cell-execute"),v8=(t,s,a)=>{const i=p=>at(p,dx,{row:t,col:s}),d=p=>at(p,V4,{row:t,col:s}),g=(p,C)=>{C.stop(),d(p)};return Is({dom:{tag:"div",attributes:{role:"button","aria-labelledby":a}},behaviours:De([Pt("insert-table-picker-cell",[ve(Tl(),bt.focus),ve(Wa(),d),ve(pc(),g),ve(Lg(),g)]),Lt.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),bt.config({onFocus:i})])})},dB=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(v8(d,p,t));i.push(g)}return i},y8=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)Lt.set(t[g][p],g<=s&&p<=a)},C8=t=>be(t,s=>we(s,bc)),mB=(t,s)=>ko(`${s}x${t}`),fB={inserttable:t=>{const i=je("size-label"),d=dB(i,10,10),g=mB(0,0),p=yn({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[g],behaviours:De([xt.config({})])});return{type:"widget",data:{value:je("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[n2.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:C8(d).concat(p.asSpec()),behaviours:De([Pt("insert-table-picker",[Gn(C=>{xt.set(p.get(C),[g])}),af(dx,(C,w,E)=>{const{row:_,col:D}=E.event;y8(d,_,D,10,10),xt.set(p.get(C),[mB(_+1,D+1)])}),af(V4,(C,w,E)=>{const{row:_,col:D}=E.event;t.onAction({numRows:_+1,numColumns:D+1}),hn(C,Bd())})]),ct.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:L4},gB=(t,s)=>Ze(fB,t.fancytype).map(a=>a(t,s)),S8=(t,s,a,i=!0,d=!1)=>{const g=d?MM(a.icons):e8(a.icons),p=w=>({isEnabled:()=>!ht.isDisabled(w),setEnabled:E=>ht.set(w,!E),setIconFill:(E,_)=>{go(w.element,`svg path[class="${E}"], rect[class="${E}"]`).each(D=>{Vt(D,"fill",_)})}}),C=t2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return $b({data:Fb(t),getApi:p,enabled:t.enabled,onAction:K,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},x8=(t,s,a,i=!0)=>{const d=p=>({isEnabled:()=>!ht.isDisabled(p),setEnabled:C=>ht.set(p,!C)}),g=t2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},a,i);return $b({data:Fb(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},E8=t=>({type:"separator",dom:{tag:"div",classes:[_b,hI]},components:t.text.map(ko).toArray()}),T8=(t,s,a,i=!0)=>{const d=p=>({setActive:C=>{Lt.set(p,C)},isActive:()=>Lt.isOn(p),isEnabled:()=>!ht.isDisabled(p),setEnabled:C=>ht.set(p,!C)}),g=t2({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,checkMark:k.some(RM(a.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return Vn($b({data:Fb(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:t4,toggleOnExecute:!1,selected:t.active}})},k8=s8,hB=E8,_8=x8,O8=S8,A8=T8,D8=gB,R8=E4;var B8=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),N8=[ta("others",co(Nt.value,dc()))],P8=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(bo(g.others).length===0)throw new Error("Cannot find any known coupled components");return Ze(t,p)},a=(g,p,C)=>s(p,C).getOrThunk(()=>{const E=Ze(p.others,C).getOrDie("No information found for coupled component: "+C)(g),_=g.getSystem().build(E);return t[C]=_,_}),i=(g,p,C)=>s(p,C).orThunk(()=>(Ze(p.others,C).getOrDie("No information found for coupled component: "+C),k.none())),d=Q({});return wa({readState:d,getExisting:i,getOrCreate:a})}});const lo=Rs({fields:N8,name:"coupling",apis:B8,state:P8}),mx=t=>{let s=k.none(),a=[];const i=E=>mx(_=>{d(D=>{_(E(D))})}),d=E=>{p()?w(E):a.push(E)},g=E=>{p()||(s=k.some(E),C(a),a=[])},p=()=>s.isSome(),C=E=>{qe(E,w)},w=E=>{s.each(_=>{setTimeout(()=>{E(_)},0)})};return t(g),{get:d,map:i,isReady:p}},$8={nu:mx,pure:t=>mx(s=>{s(t)})},F8=t=>{setTimeout(()=>{throw t},0)},zb=t=>{const s=w=>{t().then(w,F8)};return{map:w=>zb(()=>t().then(w)),bind:w=>zb(()=>t().then(E=>w(E).toPromise())),anonBind:w=>zb(()=>t().then(()=>w.toPromise())),toLazy:()=>$8.nu(s),toCached:()=>{let w=null;return zb(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},Vs={nu:t=>zb(()=>new Promise(t)),pure:t=>zb(()=>Promise.resolve(t))},z4=Q("sink"),U4=Q(wc({name:z4(),overrides:Q({dom:{tag:"div"},behaviours:De([fs.config({useFixed:pt})]),events:Fn([Gi(Hc()),Gi(Ua()),Gi(pc())])})})),pB=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},bB=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},I8=(t,s,a,i,d,g,p)=>{const C=bB(t,s,i),w=vB(i,t);return C.map(E=>E.bind(_=>k.from(Ph.sketch({...g.menu(),uid:Al(""),data:_,highlightOnOpen:p,onOpenMenu:(D,M)=>{const P=w().getOrDie();fs.position(P,M,{anchor:a}),Xt.decloak(d)},onOpenSubmenu:(D,M,P)=>{const I=w().getOrDie();fs.position(I,P,{anchor:{type:"submenu",item:M}}),Xt.decloak(d)},onRepositionMenu:(D,M,P)=>{const I=w().getOrDie();fs.position(I,M,{anchor:a}),qe(P,U=>{fs.position(I,U.triggeredMenu,{anchor:{type:"submenu",item:U.triggeringItem}})})},onEscape:()=>(bt.focus(i),Xt.close(d),k.some(!0))}))))},fx=(t,s,a,i,d,g,p)=>{const C=pB(t,a);return I8(t,s,C,a,i,d,p).map(E=>(E.fold(()=>{Xt.isOpen(i)&&Xt.close(i)},_=>{Xt.cloak(i),Xt.open(i,_),g(i)}),i))},L8=(t,s,a,i,d,g,p)=>(Xt.close(i),Vs.pure(i)),W4=(t,s,a,i,d,g)=>{const p=lo.getCoupled(a,"sandbox");return(Xt.isOpen(p)?L8:fx)(t,s,a,p,i,d,g)},H8=(t,s,a)=>{const i=Kt.getCurrent(s).getOr(s),d=Or(t.element);a?Rt(i.element,"min-width",d+"px"):oo(i.element,d)},vB=(t,s)=>t.getSystem().getByUid(s.uid+"-"+z4()).map(a=>()=>Nt.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Nt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),yB=t=>{Xt.getState(t).each(s=>{Ph.repositionMenus(s)})},Z4=(t,s,a)=>{const i=b0(),d=(C,w)=>{const E=pB(t,s);i.link(s.element),t.matchWidth&&H8(E.hotspot,w,t.useMinWidth),t.onOpen(E,C,w),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,w)},g=(C,w)=>{i.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(C,w)},p=vB(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:Cc.augment(t.sandboxBehaviours,[Ve.config({store:{mode:"memory",initialValue:s}}),Xt.config({onOpen:d,onClose:g,isPartOf:(C,w,E)=>zd(w,E)||zd(s,E),getAttachPoint:()=>p().getOrDie()}),Kt.config({find:C=>Xt.getState(C).bind(w=>Kt.getCurrent(w))}),Pr.config({channels:{...om({isExtraPart:An}),...oy({doReposition:yB})}})])}},CB=t=>{const s=lo.getCoupled(t,"sandbox");yB(s)},j4=()=>[oe("sandboxClasses",[]),Cc.field("sandboxBehaviours",[Kt,Pr,Xt,Ve])],gx=Q([me("dom"),me("fetch"),zt("onOpen"),xa("onExecute"),oe("getHotspot",k.some),oe("getAnchorOverrides",Q({})),Fl(),ts("dropdownBehaviours",[Lt,lo,ct,bt]),me("toggleClass"),oe("eventOrder",{}),bn("lazySink"),oe("matchWidth",!1),oe("useMinWidth",!1),bn("role")].concat(j4())),G4=Q([jc({schema:[Yi(),oe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),U4()]),q4=(t,s,a,i)=>{const d=_=>Ze(t.dom,"attributes").bind(D=>Ze(D,_)),g=_=>{Xt.getState(_).each(D=>{Ph.highlightPrimary(D)})},p=(_,D,M)=>W4(t,en,_,i,D,M),C=_=>{p(_,g,_a.HighlightMenuAndItem).get(K)},w={expand:_=>{Lt.isOn(_)||p(_,K,_a.HighlightNone).get(K)},open:_=>{Lt.isOn(_)||p(_,K,_a.HighlightMenuAndItem).get(K)},refetch:_=>lo.getExistingCoupled(_,"sandbox").fold(()=>p(_,K,_a.HighlightMenuAndItem).map(K),M=>fx(t,en,_,M,i,K,_a.HighlightMenuAndItem).map(K)),isOpen:Lt.isOn,close:_=>{Lt.isOn(_)&&p(_,K,_a.HighlightMenuAndItem).get(K)},repositionMenus:_=>{Lt.isOn(_)&&CB(_)}},E=(_,D)=>($d(_),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:_o(t.dropdownBehaviours,[Lt.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),lo.config({others:{sandbox:_=>Z4(t,_,{onOpen:()=>Lt.on(_),onClose:()=>Lt.off(_)})}}),ct.config({mode:"special",onSpace:E,onEnter:E,onDown:(_,D)=>{if(Jc.isOpen(_)){const M=lo.getCoupled(_,"sandbox");g(M)}else Jc.open(_);return k.some(!0)},onEscape:(_,D)=>Jc.isOpen(_)?(Jc.close(_),k.some(!0)):k.none()}),bt.config({})]),events:Py(k.some(C)),eventOrder:{...t.eventOrder,[Wa()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),_=>({role:_})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Jc=ns({name:"Dropdown",configFields:gx(),partFields:G4(),factory:q4,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),V8=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},z8=t=>{const s=Ve.getValue(t),a=GS(t).map(GR);Jc.refetch(s).get(()=>{const i=lo.getCoupled(s,"sandbox");a.each(d=>GS(i).each(g=>_I(g,d)))})},K4=(t,s)=>{Y4(t).each(a=>{e0(t,a.element,s.event.eventType,s.event.interactionEvent)})},Y4=t=>Xt.getState(t).bind(ln.getHighlighted).bind(ln.getHighlighted),hx=t=>Mr(t.element,qS)?k.some(t.element):go(t.element,"."+qS),X4=(t,s,a)=>{jR(t).each(i=>{OI(i,a),hx(s).each(g=>{jo(g,"id").each(p=>Vt(i.element,"aria-controls",p))})}),Vt(a.element,"aria-selected","true")},U8=(t,s,a)=>{Vt(a.element,"aria-selected","false")},W8=t=>{jR(t).each(s=>bt.focus(s))},Z8=t=>lo.getExistingCoupled(t,"sandbox").bind(GS).map(GR).map(a=>a.fetchPattern).getOr("");var px;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(px||(px={}));const j8=(t,s,a,i,d)=>{const g=a.shared.providers,p=C=>d?{...C,shortcut:k.none(),icon:C.text.isSome()?k.none():C.icon}:C;switch(t.type){case"menuitem":return WI(t).fold(bm,C=>k.some(_8(p(C),s,g,i)));case"nestedmenuitem":return vM(t).fold(bm,C=>k.some(O8(p(C),s,g,i,d)));case"togglemenuitem":return CM(t).fold(bm,C=>k.some(A8(p(C),s,g,i)));case"separator":return FI(t).fold(bm,C=>k.some(hB(C)));case"fancymenuitem":return y4(t).fold(bm,C=>D8(C,a));default:return console.error("Unknown item in general menu",t),k.none()}},G8=(t,s,a,i,d,g,p)=>{const C=i===1,w=!C||Gy(t);return fd(we(t,E=>{switch(E.type){case"separator":return eM(E).fold(bm,_=>k.some(hB(_)));case"cardmenuitem":return UI(E).fold(bm,_=>k.some(R8({..._,onAction:D=>{_.onAction(D),a(_.value,_.meta)}},d,g,{itemBehaviours:PM(_.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return Xy(E).fold(bm,_=>k.some(k8(_,s,C,"normal",a,d,g,w)))}}))},wB=(t,s,a,i,d,g)=>{const p=Gy(s),C=fd(we(s,_=>{const D=P=>d?!wn(P,"text"):p,M=P=>j8(P,a,i,D(P),d);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?M({..._,enabled:!1}):M(_)})),w=V8(g);return(d?a4:qy)(t,p,C,1,w)},J4=t=>Ph.singleData(t.value,t),q8=(t,s,a,i)=>{const d=l2(s,i),g=Hh(i);return{data:J4({...t,movement:d,menuBehaviours:Jy.unnamedEvents(s!=="auto"?[]:[Gn((p,C)=>{C4(p,4,g.item).each(({numColumns:w,numRows:E})=>{ct.setGridSize(p,E,w)})})])}),menu:{markers:Hh(i),fakeFocus:a===px.ContentFocus}}},K8=(t,s)=>WS(te.fromDom(s.startContainer)).map(a=>{const i=t.createRng();return i.selectNode(a.dom),i}),Y8={register:(t,s)=>{const a=gt(!1),i=gt(!1),d=Is(ho.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:De([Pt("dismissAutocompleter",[ve(ji(),()=>E())])]),lazySink:s.getSink})),g=()=>ho.isOpen(d),p=i.get,C=()=>{g()&&ho.hide(d)},w=()=>ho.getContent(d).bind(I=>Ho(I.components(),0)),E=()=>t.execCommand("mceAutocompleterClose"),_=I=>{const U=Ws(I,ne=>k.from(ne.columns)).getOr(1);return be(I,ne=>{const Y=ne.items;return G8(Y,ne.matchText,(j,pe)=>{const ce=t.selection.getRng();K8(t.dom,ce).each(Re=>{const ke={hide:()=>E(),reload:Ne=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ne})}};a.set(!0),ne.onAction(ke,Re,j,pe),a.set(!1)})},U,ql.BUBBLE_TO_SANDBOX,s,ne.highlightOn)})},D=(I,U)=>{dI(te.fromDom(t.getBody())).each(ne=>{const Y=Ws(I,j=>k.from(j.columns)).getOr(1);ho.showMenuAt(d,{anchor:{type:"node",root:te.fromDom(t.getBody()),node:k.from(ne)}},q8(qy("autocompleter-value",!0,U,Y,{menuType:"normal"}),Y,px.ContentFocus,"normal"))}),w().each(ln.highlightFirst)},M=I=>{const U=_(I);U.length>0?D(I,U):C()};t.on("AutocompleterStart",({lookupData:I})=>{i.set(!0),a.set(!1),M(I)}),t.on("AutocompleterUpdate",({lookupData:I})=>M(I)),t.on("AutocompleterEnd",()=>{C(),i.set(!1),a.set(!1)});const P={cancelIfNecessary:E,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:w};fI.setup(P,t)}},X8=["visible","hidden"],Q4=t=>{if(Nm(t)){const s=Te(t,"overflow");return bu(s).length>0&&!Io(X8,s)}else return!1},J8=t=>{const s=G1(t,Q4),a=s.length===0?Ev(t).map(dC).map(i=>G1(i,Q4)).getOr([]):s;return ia(a).map(i=>({element:i,others:a.slice(1)}))},Gh=(t,s)=>pm(t)?J8(s):k.none(),kc=t=>{const s=[...we(t.others,Xn),Dr()];return xT(Xn(t.element),s)},u2=(t,s,a)=>nr(t,s,a).isSome(),SB=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},bx=5,bs=400,xB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},Q8=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>bx||i>bx},e7=t=>{const s=Kn(),a=gt(!1),i=SB(E=>{t.triggerEvent(Jo(),E),a.set(!0)},bs),d=E=>(xB(E).each(_=>{i.cancel();const D={x:_.clientX,y:_.clientY,target:E.target};i.schedule(E),a.set(!1),s.set(D)}),k.none()),g=E=>(i.cancel(),xB(E).each(_=>{s.on(D=>{Q8(_,D)&&s.clear()})}),k.none()),p=E=>{i.cancel();const _=D=>$n(D.target,E.target);return s.get().filter(_).map(D=>a.get()?(E.prevent(),!1):t.triggerEvent(Lg(),E))},C=gc([{key:Wi(),value:d},{key:Jm(),value:g},{key:Md(),value:p}]);return{fireIfReady:(E,_)=>Ze(C,_).bind(D=>D(E))}},t7=t=>t.raw.which===b_[0]&&!Io(["input","textarea"],Pc(t.target))&&!u2(t.target,'[contenteditable="true"]'),n7=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=e7(a),g=we(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),P=>Fr(t,P,I=>{d.fireIfReady(I,P).each(ne=>{ne&&I.kill()}),a.triggerEvent(P,I)&&I.kill()})),p=Kn(),C=Fr(t,"paste",P=>{d.fireIfReady(P,"paste").each(U=>{U&&P.kill()}),a.triggerEvent("paste",P)&&P.kill(),p.set(setTimeout(()=>{a.triggerEvent(pi(),P)},0))}),w=Fr(t,"keydown",P=>{a.triggerEvent("keydown",P)?P.kill():a.stopBackspace&&t7(P)&&P.prevent()}),E=Fr(t,"focusin",P=>{a.triggerEvent("focusin",P)&&P.kill()}),_=Kn(),D=Fr(t,"focusout",P=>{a.triggerEvent("focusout",P)&&P.kill(),_.set(setTimeout(()=>{a.triggerEvent(ef(),P)},0))});return{unbind:()=>{qe(g,P=>{P.unbind()}),w.unbind(),E.unbind(),D.unbind(),C.unbind(),p.on(clearTimeout),_.on(clearTimeout)}}},EB=(t,s)=>{const a=Ze(t,"target").getOr(s);return gt(a)},o7=(t,s)=>{const a=gt(!1),i=gt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},s7=t=>{const s=gt(!1);return{stop:()=>{s.set(!0)},cut:K,isStopped:s.get,isCut:An,event:t,setSource:G("Cannot set source of a broadcasted event"),getSource:G("Cannot get source of a broadcasted event")}},d2=ya.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),TB=(t,s,a,i,d,g)=>{const p=t(s,i),C=o7(a,d);return p.fold(()=>(g.logEventNoHandlers(s,i),d2.complete()),w=>{const E=w.descHandler;return f1(E)(C),C.isStopped()?(g.logEventStopped(s,w.element,E.purpose),d2.stopped()):C.isCut()?(g.logEventCut(s,w.element,E.purpose),d2.complete()):ci(w.element).fold(()=>(g.logNoParent(s,w.element,E.purpose),d2.complete()),D=>(g.logEventResponse(s,w.element,E.purpose),d2.resume(D)))})},kB=(t,s,a,i,d,g)=>TB(t,s,a,i,d,g).fold(pt,p=>kB(t,s,a,p,d,g),An),r7=(t,s,a,i,d)=>{const g=EB(a,i);return TB(t,s,a,i,g,d)},a7=(t,s,a)=>{const i=s7(s);return qe(t,d=>{const g=d.descHandler;f1(g)(i)}),i.isStopped()},c7=(t,s,a,i)=>_B(t,s,a,a.target,i),_B=(t,s,a,i,d)=>{const g=EB(a,i);return kB(t,s,a,i,g,d)},i7=(t,s)=>({element:t,descHandler:s}),l7=(t,s)=>({id:t,descHandler:s}),u7=()=>{const t={},s=(p,C,w)=>{ys(w,(E,_)=>{const D=t[_]!==void 0?t[_]:{};D[C]=jC(E,p),t[_]=D})},a=(p,C)=>Vc(C).bind(w=>Ze(p,w)).map(w=>i7(C,w));return{registerId:s,unregisterId:p=>{ys(t,(C,w)=>{wn(C,p)&&delete C[p]})},filterByType:p=>Ze(t,p).map(C=>Sp(C,(w,E)=>l7(E,w))).getOr([]),find:(p,C,w)=>Ze(t,C).bind(E=>Xm(w,_=>a(E,_),p))}},d7=()=>{const t=u7(),s={},a=E=>{const _=E.element;return Vc(_).getOrThunk(()=>tr("uid-",E.element))},i=(E,_)=>{const D=s[_];if(D===E)g(E);else throw new Error('The tagId "'+_+'" is already used by: '+Ld(D.element)+`
Cannot use it for: `+Ld(E.element)+`
The conflicting element is`+(fa(D.element)?" ":" not ")+"already in the DOM")},d=E=>{const _=a(E);oc(s,_)&&i(E,_);const D=[E];t.registerId(D,_,E.events),s[_]=E},g=E=>{Vc(E.element).each(_=>{delete s[_],t.unregisterId(_)})};return{find:(E,_,D)=>t.find(E,_,D),filter:E=>t.filterByType(E),register:d,unregister:g,getById:E=>Ze(s,E)}},Ql=Zo({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Pf(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[oe("components",[]),ts("containerBehaviours",[]),oe("events",{}),oe("domModification",{}),oe("eventOrder",{})]}),e3=t=>{const s=Y=>ci(t.element).fold(pt,j=>$n(Y,j)),a=d7(),i=(Y,j)=>a.find(s,Y,j),d=n7(t.element,{triggerEvent:(Y,j)=>vf(Y,j.target,pe=>c7(i,Y,j,pe))}),g={debugInfo:Q("real"),triggerEvent:(Y,j,pe)=>{vf(Y,j,ce=>_B(i,Y,pe,j,ce))},triggerFocus:(Y,j)=>{Vc(Y).fold(()=>{wo(Y)},pe=>{vf(Zi(),Y,ce=>(r7(i,Zi(),{originator:j,kill:K,prevent:K,target:Y},Y,ce),!1))})},triggerEscape:(Y,j)=>{g.triggerEvent("keydown",Y.element,j.event)},getByUid:Y=>U(Y),getByDom:Y=>ne(Y),build:Is,buildOrPatch:Bl,addToGui:Y=>{w(Y)},removeFromGui:Y=>{E(Y)},addToWorld:Y=>{p(Y)},removeFromWorld:Y=>{C(Y)},broadcast:Y=>{M(Y)},broadcastOn:(Y,j)=>{P(Y,j)},broadcastEvent:(Y,j)=>{I(Y,j)},isConnected:pt},p=Y=>{Y.connect(g),Pa(Y.element)||(a.register(Y),qe(Y.components(),p),g.triggerEvent(Nd(),Y.element,{target:Y.element}))},C=Y=>{Pa(Y.element)||(qe(Y.components(),C),a.unregister(Y)),Y.disconnect()},w=Y=>{nl(t,Y)},E=Y=>{Zc(Y)},_=()=>{d.unbind(),Ic(t.element)},D=Y=>{const j=a.filter(bi());qe(j,pe=>{const ce=pe.descHandler;f1(ce)(Y)})},M=Y=>{D({universal:!0,data:Y})},P=(Y,j)=>{D({universal:!1,channels:Y,data:j})},I=(Y,j)=>{const pe=a.filter(Y);return a7(pe,j)},U=Y=>a.getById(Y).fold(()=>Nt.error(new Error('Could not find component with uid: "'+Y+'" in system.')),Nt.value),ne=Y=>{const j=Vc(Y).getOr("not found");return U(j)};return p(t),{root:t,element:t.element,destroy:_,add:w,remove:E,getByUid:U,getByDom:ne,addToWorld:p,removeFromWorld:C,broadcast:M,broadcastOn:P,broadcastEvent:I}},m7=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:we(t.items,s.interpreter)}),f7=Q([oe("prefix","form-field"),ts("fieldBehaviours",[Kt,Ve])]),g7=Q([wc({schema:[me("dom")],name:"label"}),wc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[me("text")],name:"aria-descriptor"}),Es({factory:{sketch:t=>{const s=xl(t,["factory"]);return t.factory.sketch(s)}},schema:[me("factory")],name:"field"})]),OB=(t,s,a,i)=>{const d=_o(t.fieldBehaviours,[Kt.config({find:C=>Rn(C,t,"field")}),Ve.config({store:{mode:"manual",getValue:C=>Kt.getCurrent(C).bind(Ve.getValue),setValue:(C,w)=>{Kt.getCurrent(C).each(E=>{Ve.setValue(E,w)})}}})]),g=Fn([Gn((C,w)=>{const E=sS(C,t,["label","field","aria-descriptor"]);E.field().each(_=>{const D=je(t.prefix);E.label().each(M=>{Vt(M.element,"for",D),Vt(_.element,"id",D)}),E["aria-descriptor"]().each(M=>{const P=je(t.prefix);Vt(M.element,"id",P),Vt(_.element,"aria-describedby",P)})})})]),p={getField:C=>Rn(C,t,"field"),getLabel:C=>Rn(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},Cn=ns({name:"FormField",configFields:f7(),partFields:g7(),factory:OB,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var h7=Object.freeze({__proto__:null,exhibit:(t,s)=>zc({attributes:gc([{key:s.tabAttr,value:"true"}])})}),AB=[oe("tabAttr","data-alloy-tabstop")];const So=Rs({fields:AB,name:"tabstopping",active:h7});var p7=tinymce.util.Tools.resolve("tinymce.html.Entities");const m2=(t,s,a,i)=>{const d=b7(t,s,a,i);return Cn.sketch(d)},DB=(t,s)=>m2(t,s,[],[]),b7=(t,s,a,i)=>({dom:RB(a),components:t.toArray().concat([s]),fieldBehaviours:De(i)}),v7=()=>RB([]),RB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Jf=(t,s)=>Cn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ko(s.translate(t))]}),Ja=je("form-component-change"),f2=je("form-close"),Sm=je("form-cancel"),td=je("form-action"),Ub=je("form-submit"),t3=je("form-block"),n3=je("form-unblock"),MB=je("form-tabchange"),BB=je("form-resize"),y7=(t,s,a)=>{const i=t.label.map(D=>Jf(D,s)),d=D=>(M,P)=>{nr(P.event.target,"[data-collection-item-value]").each(I=>{D(M,P,I,dr(I,"data-collection-item-value"))})},g=(D,M)=>{const P=we(M,ne=>{const Y=zr.translate(ne.text),j=t.columns===1?`<div class="tox-collection__item-label">${Y}</div>`:"",pe=`<div class="tox-collection__item-icon">${ne.icon}</div>`,ce={_:" "," - ":" ","-":" "},Re=Y.replace(/\_| \- |\-/g,Ne=>ce[Ne]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${p7.encodeAllRaw(ne.value)}" title="${Re}" aria-label="${Re}">${pe}${j}</div>`}),I=t.columns!=="auto"&&t.columns>1?Zr(P,t.columns):[P],U=we(I,ne=>`<div class="tox-collection__group">${ne.join("")}</div>`);Id(D.element,U.join(""))},p=d((D,M,P,I)=>{M.stop(),s.isDisabled()||at(D,td,{name:t.name,value:I})}),C=[ve(Tl(),d((D,M,P)=>{wo(P)})),ve(pc(),p),ve(Lg(),p),ve(hi(),d((D,M,P)=>{go(D.element,"."+jy).each(I=>{mn(I,jy)}),Wo(P,jy)})),ve(Mu(),d(D=>{go(D.element,"."+jy).each(M=>{mn(M,jy)})})),vi(d((D,M,P,I)=>{at(D,td,{name:t.name,value:I})}))],w=(D,M)=>we(Ir(D.element,".tox-collection__item"),M),E=Cn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:en},behaviours:De([ht.config({disabled:s.isDisabled,onDisabled:D=>{w(D,M=>{Wo(M,"tox-collection__item--state-disabled"),Vt(M,"aria-disabled",!0)})},onEnabled:D=>{w(D,M=>{mn(M,"tox-collection__item--state-disabled"),zo(M,"aria-disabled")})}}),ps(),xt.config({}),Ve.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(D,M)=>{g(D,M),t.columns==="auto"&&C4(D,5,"tox-collection__item").each(({numRows:P,numColumns:I})=>{ct.setGridSize(D,P,I)}),hn(D,BB)}}),So.config({}),ct.config(uB(t.columns,"normal")),Pt("collection-events",C)]),eventOrder:{[Wa()]:["disabling","alloy.base.behaviour","collection-events"]}});return m2(i,E,["tox-form__group--collection"],[])},C7=["input","textarea"],NB=t=>{const s=Pc(t);return Io(C7,s)},PB=(t,s)=>{const a=s.getRoot(t).getOr(t.element);mn(a,s.invalidClass),s.notify.each(i=>{NB(t.element)&&Vt(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Id(d,i.validHtml)}),i.onValid(t)})},$B=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);Wo(d,s.invalidClass),s.notify.each(g=>{NB(t.element)&&Vt(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{Id(p,i)}),g.onInvalid(t,i)})},FB=(t,s,a)=>s.validator.fold(()=>Vs.pure(Nt.value(!0)),i=>i.validate(t)),o3=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),FB(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>($B(t,s,a,d),Nt.error(d)),d=>(PB(t,s),Nt.value(d))):Nt.error("No longer in system")));var IB=Object.freeze({__proto__:null,markValid:PB,markInvalid:$B,query:FB,run:o3,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Mr(a,s.invalidClass)}}),w7=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Fn([ve(a.onEvent,i=>{o3(i,t,s).get(en)})].concat(a.validateOnLoad?[Gn(i=>{o3(i,t,s).get(K)})]:[]))).getOr({})}),S7=[me("invalidClass"),oe("getRoot",k.none),Bo("notify",[oe("aria","alert"),oe("getContainer",k.none),oe("validHtml",""),zt("onValid"),zt("onInvalid"),zt("onValidate")]),Bo("validator",[me("validate"),oe("onEvent","input"),oe("validateOnLoad",!0)])];const nd=Rs({fields:S7,name:"invalidating",active:w7,apis:IB,extra:{validation:t=>s=>{const a=Ve.getValue(s);return Vs.pure(t(a))}}});var x7=Object.freeze({__proto__:null,events:()=>Fn([s1(Yv(),pt)]),exhibit:()=>zc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const g2=Rs({fields:[],name:"unselecting",active:x7}),E7=(t,s)=>Jc.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:De([sl.button(s.providers.isDisabled),ps(),g2.config({}),So.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Vs.nu(i=>t.fetch(i)).map(i=>k.from(J4(Vn(I4(je("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,ql.CLOSE_ON_EXECUTE,An,s.providers),{movement:l2(t.columns,t.presets)})))),parts:{menu:jS(!1,1,t.presets)}}),s3=je("color-input-change"),r3=je("color-swatch-change"),HB=je("color-picker-cancel"),T7=(t,s,a,i)=>{const d=Cn.parts.field({factory:Vh,inputClasses:["tox-textfield"],data:i,onSetValue:E=>nd.run(E).get(K),inputBehaviours:De([ht.config({disabled:s.providers.isDisabled}),ps(),So.config({}),nd.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>ma(E.element),notify:{onValid:E=>{const _=Ve.getValue(E);at(E,s3,{color:_})}},validator:{validateOnLoad:!1,validate:E=>{const _=Ve.getValue(E);if(_.length===0)return Vs.pure(Nt.value(!0));{const D=te.fromTag("span");Rt(D,"background-color",_);const M=Cs(D,"background-color").fold(()=>Nt.error("blah"),P=>Nt.value(_));return Vs.pure(M)}}}})]),selectOnFocus:!1}),g=t.label.map(E=>Jf(E,s.providers)),p=(E,_)=>{at(E,r3,{value:_})},C=(E,_)=>{w.getOpt(E).each(D=>{_==="custom"?a.colorPicker(M=>{M.fold(()=>hn(D,HB),P=>{p(D,P),qM(t.storageKey,P)})},"#ffffff"):_==="remove"?p(D,""):p(D,_)})},w=yn(E7({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ds,Ss,es],onLtr:()=>[Ss,ds,es]},components:[],fetch:$4(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return Cn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:De([Pt("form-field-events",[ve(s3,(E,_)=>{w.getOpt(E).each(D=>{Rt(D.element,"background-color",_.event.color)}),at(E,Ja,{name:t.name})}),ve(r3,(E,_)=>{Cn.getField(E).each(D=>{Ve.setValue(D,_.event.value),Kt.getCurrent(E).each(bt.focus)})}),ve(HB,(E,_)=>{Cn.getField(E).each(D=>{Kt.getCurrent(E).each(bt.focus)})})])])})},VB=wc({schema:[me("dom")],name:"label"}),Qf=t=>wc({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Fn([sf(Wi(),(d,g,p)=>i(d,p),[s]),sf(Ua(),(d,g,p)=>i(d,p),[s]),sf(Qp(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),k7=Qf("top-left"),_7=Qf("top"),O7=Qf("top-right"),A7=Qf("right"),D7=Qf("bottom-right"),vx=Qf("bottom"),R7=Qf("bottom-left"),yx=Qf("left"),M7=Es({name:"thumb",defaults:Q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Fn([rf(Wi(),t,"spectrum"),rf(Jm(),t,"spectrum"),rf(Md(),t,"spectrum"),rf(Ua(),t,"spectrum"),rf(Qp(),t,"spectrum"),rf(Ca(),t,"spectrum")])})}),B7=Es({schema:[Rr("mouseIsDown",()=>gt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:De([ct.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),bt.config({})]),events:Fn([ve(Wi(),i),ve(Jm(),i),ve(Ua(),i),ve(Qp(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var N7=[VB,yx,A7,_7,vx,k7,O7,R7,D7,M7,B7];const Cx=Q("slider.change.value"),wx=t=>t.type.indexOf("touch")!==-1,eg=t=>{const s=t.event.raw;if(wx(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?k.some(a.touches[0]).map(i=>ao(i.clientX,i.clientY)):k.none()}else{const a=s;return a.clientX!==void 0?k.some(a).map(i=>ao(i.clientX,i.clientY)):k.none()}},zB="top",UB="right",P7="bottom",$7="left",qh=t=>t.model.minX,Kh=t=>t.model.minY,Sx=t=>t.model.minX-1,xx=t=>t.model.minY-1,Yh=t=>t.model.maxX,Xh=t=>t.model.maxY,Ex=t=>t.model.maxX+1,Tx=t=>t.model.maxY+1,WB=(t,s,a)=>s(t)-a(t),kx=t=>WB(t,Yh,qh),tg=t=>WB(t,Xh,Kh),ng=t=>kx(t)/2,ZB=t=>tg(t)/2,Jh=t=>t.stepSize,a3=t=>t.snapToGrid,h2=t=>t.snapStart,jB=t=>t.rounded,og=(t,s)=>t[s+"-edge"]!==void 0,Wb=t=>og(t,$7),GB=t=>og(t,UB),qB=t=>og(t,zB),KB=t=>og(t,P7),xm=t=>t.model.value.get(),sg=(t,s)=>({x:t,y:s}),al=(t,s)=>{at(t,Cx(),{value:s})},_x=(t,s)=>{al(t,sg(Sx(s),xx(s)))},F7=(t,s)=>{al(t,xx(s))},I7=(t,s)=>{al(t,sg(ng(s),xx(s)))},L7=(t,s)=>{al(t,sg(Ex(s),xx(s)))},YB=(t,s)=>{al(t,Ex(s))},H7=(t,s)=>{al(t,sg(Ex(s),ZB(s)))},V7=(t,s)=>{al(t,sg(Ex(s),Tx(s)))},z7=(t,s)=>{al(t,Tx(s))},XB=(t,s)=>{al(t,sg(ng(s),Tx(s)))},U7=(t,s)=>{al(t,sg(Sx(s),Tx(s)))},W7=(t,s)=>{al(t,Sx(s))},Z7=(t,s)=>{al(t,sg(Sx(s),ZB(s)))},c3=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),i3=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),l3=(t,s,a)=>Math.max(s,Math.min(a,t)),JB=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return l3(s+p,s-1,a+1)},g=>{const p=(t-g)%i,C=Math.round(p/i),w=Math.floor((t-g)/i),E=Math.floor((a-g)/i),_=Math.min(E,w+C),D=g+_*i;return Math.max(g,D)}),j7=(t,s,a)=>Math.min(a,Math.max(t,s))-s,QB=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:p,snapStart:C,rounded:w,hasMinEdge:E,hasMaxEdge:_,minBound:D,maxBound:M,screenRange:P}=t,I=E?s-1:s,U=_?a+1:a;if(d<D)return I;if(d>M)return U;{const ne=j7(d,D,M),Y=l3(ne/P*i+s,I,U);return p&&Y>=s&&Y<=a?JB(Y,s,a,g,C):w?Math.round(Y):Y}},e5=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:C,maxOffset:w,centerMinEdge:E,centerMaxEdge:_}=t;return d<s?g?0:E:d>a?p?C:_:(d-s)/i*w},u3="top",t5="right",d3="bottom",rg="left",G7="width",q7="height",od=t=>t.element.dom.getBoundingClientRect(),_c=(t,s)=>t[s],Qa=t=>{const s=od(t);return _c(s,rg)},Ox=t=>{const s=od(t);return _c(s,t5)},p2=t=>{const s=od(t);return _c(s,u3)},n5=t=>{const s=od(t);return _c(s,d3)},o5=t=>{const s=od(t);return _c(s,G7)},s5=t=>{const s=od(t);return _c(s,q7)},r5=(t,s,a)=>(t+s)/2-a,m3=(t,s)=>{const a=od(t),i=od(s),d=_c(a,rg),g=_c(a,t5),p=_c(i,rg);return r5(d,g,p)},f3=(t,s)=>{const a=od(t),i=od(s),d=_c(a,u3),g=_c(a,d3),p=_c(i,u3);return r5(d,g,p)},Ax=(t,s)=>{at(t,Cx(),{value:s})},g3=(t,s,a)=>{const i={min:qh(s),max:Yh(s),range:kx(s),value:a,step:Jh(s),snap:a3(s),snapStart:h2(s),rounded:jB(s),hasMinEdge:Wb(s),hasMaxEdge:GB(s),minBound:Qa(t),maxBound:Ox(t),screenRange:o5(t)};return QB(i)},a5=(t,s,a)=>{const i=g3(t,s,a);return Ax(t,i),i},K7=(t,s)=>{const a=qh(s);Ax(t,a)},c5=(t,s)=>{const a=Yh(s);Ax(t,a)},i5=(t,s,a)=>{const d=(t>0?i3:c3)(xm(a),qh(a),Yh(a),Jh(a));return Ax(s,d),k.some(d)},h3=t=>(s,a)=>i5(t,s,a).map(pt),Y7=t=>eg(t).map(a=>a.left),X7=(t,s,a,i,d)=>{const p=o5(t),C=i.bind(_=>k.some(m3(_,t))).getOr(0),w=d.bind(_=>k.some(m3(_,t))).getOr(p),E={min:qh(s),max:Yh(s),range:kx(s),value:a,hasMinEdge:Wb(s),hasMaxEdge:GB(s),minBound:Qa(t),minOffset:0,maxBound:Ox(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:w};return e5(E)},p3=(t,s,a,i,d,g)=>{const p=X7(s,g,a,i,d);return Qa(s)-Qa(t)+p},J7=(t,s,a,i)=>{const d=xm(a),g=p3(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),p=Or(s.element)/2;Rt(s.element,"left",g-p+"px")},Q7=h3(-1),eL=h3(1),b3=k.none,tL=k.none,l5={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(YB),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(W7)};var nL=Object.freeze({__proto__:null,setValueFrom:a5,setToMin:K7,setToMax:c5,findValueOfOffset:g3,getValueFromEvent:Y7,findPositionOfValue:p3,setPositionFromValue:J7,onLeft:Q7,onRight:eL,onUp:b3,onDown:tL,edgeActions:l5});const Dx=(t,s)=>{at(t,Cx(),{value:s})},v3=(t,s,a)=>{const i={min:Kh(s),max:Xh(s),range:tg(s),value:a,step:Jh(s),snap:a3(s),snapStart:h2(s),rounded:jB(s),hasMinEdge:qB(s),hasMaxEdge:KB(s),minBound:p2(t),maxBound:n5(t),screenRange:s5(t)};return QB(i)},oL=(t,s,a)=>{const i=v3(t,s,a);return Dx(t,i),i},sL=(t,s)=>{const a=Kh(s);Dx(t,a)},rL=(t,s)=>{const a=Xh(s);Dx(t,a)},aL=(t,s,a)=>{const d=(t>0?i3:c3)(xm(a),Kh(a),Xh(a),Jh(a));return Dx(s,d),k.some(d)},y3=t=>(s,a)=>aL(t,s,a).map(pt),u5=t=>eg(t).map(a=>a.top),cL=(t,s,a,i,d)=>{const p=s5(t),C=i.bind(_=>k.some(f3(_,t))).getOr(0),w=d.bind(_=>k.some(f3(_,t))).getOr(p),E={min:Kh(s),max:Xh(s),range:tg(s),value:a,hasMinEdge:qB(s),hasMaxEdge:KB(s),minBound:p2(t),minOffset:0,maxBound:n5(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:w};return e5(E)},C3=(t,s,a,i,d,g)=>{const p=cL(s,g,a,i,d);return p2(s)-p2(t)+p},iL=(t,s,a,i)=>{const d=xm(a),g=C3(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),p=Go(s.element)/2;Rt(s.element,"top",g-p+"px")},lL=k.none,uL=k.none,d5=y3(-1),m5=y3(1),f5={"top-left":k.none(),top:k.some(F7),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(z7),"bottom-left":k.none(),left:k.none()};var w3=Object.freeze({__proto__:null,setValueFrom:oL,setToMin:sL,setToMax:rL,findValueOfOffset:v3,getValueFromEvent:u5,findPositionOfValue:C3,setPositionFromValue:iL,onLeft:lL,onRight:uL,onUp:d5,onDown:m5,edgeActions:f5});const Rx=(t,s)=>{at(t,Cx(),{value:s})},b2=(t,s)=>({x:t,y:s}),dL=(t,s,a)=>{const i=g3(t,s,a.left),d=v3(t,s,a.top),g=b2(i,d);return Rx(t,g),g},mL=(t,s,a,i)=>{const d=t>0?i3:c3,g=s?xm(i).x:d(xm(i).x,qh(i),Yh(i),Jh(i)),p=s?d(xm(i).y,Kh(i),Xh(i),Jh(i)):xm(i).y;return Rx(a,b2(g,p)),k.some(g)},Mx=(t,s)=>(a,i)=>mL(t,s,a,i).map(pt),fL=(t,s)=>{const a=qh(s),i=Kh(s);Rx(t,b2(a,i))},S3=(t,s)=>{const a=Yh(s),i=Xh(s);Rx(t,b2(a,i))},Em=t=>eg(t),gL=(t,s,a,i)=>{const d=xm(a),g=p3(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),p=C3(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),C=Or(s.element)/2,w=Go(s.element)/2;Rt(s.element,"left",g-C+"px"),Rt(s.element,"top",p-w+"px")},v2=Mx(-1,!1),hL=Mx(1,!1),x3=Mx(-1,!0),pL=Mx(1,!0),bL={"top-left":k.some(_x),top:k.some(I7),"top-right":k.some(L7),right:k.some(H7),"bottom-right":k.some(V7),bottom:k.some(XB),"bottom-left":k.some(U7),left:k.some(Z7)};var vL=Object.freeze({__proto__:null,setValueFrom:dL,setToMin:fL,setToMax:S3,getValueFromEvent:Em,setPositionFromValue:gL,onLeft:v2,onRight:hL,onUp:x3,onDown:pL,edgeActions:bL});const g5=[oe("stepSize",1),oe("onChange",K),oe("onChoose",K),oe("onInit",K),oe("onDragStart",K),oe("onDragEnd",K),oe("snapToGrid",!1),oe("rounded",!0),bn("snapStart"),ta("model",Uo("mode",{x:[oe("minX",0),oe("maxX",100),Rr("value",t=>gt(t.mode.minX)),me("getInitialValue"),qn("manager",nL)],y:[oe("minY",0),oe("maxY",100),Rr("value",t=>gt(t.mode.minY)),me("getInitialValue"),qn("manager",w3)],xy:[oe("minX",0),oe("maxX",100),oe("minY",0),oe("maxY",100),Rr("value",t=>gt({x:t.mode.minX,y:t.mode.minY})),me("getInitialValue"),qn("manager",vL)]})),ts("sliderBehaviours",[ct,Ve]),Rr("mouseIsDown",()=>gt(!1))],Qc=ns({name:"Slider",configFields:g5,partFields:N7,factory:(t,s,a,i)=>{const d=ce=>Ku(ce,t,"thumb"),g=ce=>Ku(ce,t,"spectrum"),p=ce=>Rn(ce,t,"left-edge"),C=ce=>Rn(ce,t,"right-edge"),w=ce=>Rn(ce,t,"top-edge"),E=ce=>Rn(ce,t,"bottom-edge"),_=t.model,D=_.manager,M=(ce,Re)=>{D.setPositionFromValue(ce,Re,t,{getLeftEdge:p,getRightEdge:C,getTopEdge:w,getBottomEdge:E,getSpectrum:g})},P=(ce,Re)=>{_.value.set(Re);const ke=d(ce);M(ce,ke)},I=(ce,Re)=>{P(ce,Re);const ke=d(ce);return t.onChange(ce,ke,Re),k.some(!0)},U=ce=>{D.setToMin(ce,t)},ne=ce=>{D.setToMax(ce,t)},Y=ce=>{const Re=()=>{Rn(ce,t,"thumb").each(Ne=>{const Ue=_.value.get();t.onChoose(ce,Ne,Ue)})},ke=t.mouseIsDown.get();t.mouseIsDown.set(!1),ke&&Re()},j=(ce,Re)=>{Re.stop(),t.mouseIsDown.set(!0),t.onDragStart(ce,d(ce))},pe=(ce,Re)=>{Re.stop(),t.onDragEnd(ce,d(ce)),Y(ce)};return{uid:t.uid,dom:t.dom,components:s,behaviours:_o(t.sliderBehaviours,[ct.config({mode:"special",focusIn:ce=>Rn(ce,t,"spectrum").map(ct.focusIn).map(pt)}),Ve.config({store:{mode:"manual",getValue:ce=>_.value.get(),setValue:P}}),Pr.config({channels:{[X1()]:{onReceive:Y}}})]),events:Fn([ve(Cx(),(ce,Re)=>{I(ce,Re.event.value)}),Gn((ce,Re)=>{const ke=_.getInitialValue();_.value.set(ke);const Ne=d(ce);M(ce,Ne);const Ue=g(ce);t.onInit(ce,Ne,Ue,_.value.get())}),ve(Wi(),j),ve(Md(),pe),ve(Ua(),j),ve(Ca(),pe)]),apis:{resetToMin:U,resetToMax:ne,setValue:P,refresh:M},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),y2=je("rgb-hex-update"),Bx=je("slider-update"),h5=je("palette-update"),ei=(t,s)=>{const a=Qc.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Qc.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Qc.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:Q(0)},components:[a,i],sliderBehaviours:De([bt.config({})]),onChange:(d,g,p)=>{at(d,Bx,{value:p})}})},p5="form",yL=[ts("formBehaviours",[Ve])],E3=t=>"<alloy.field."+t+">",b5=t=>{const s=(()=>{const g=[];return{field:(C,w)=>(g.push(C),cm(p5,E3(C),w)),record:Q(g)}})(),a=t(s),i=s.record(),d=we(i,g=>Es({name:g,pname:E3(g)}));return db(p5,yL,d,wL,a)},CL=(t,s)=>t.fold(()=>Nt.error(s),Nt.value),wL=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:_o(t.formBehaviours,[Ve.config({store:{mode:"manual",getValue:a=>{const i=rS(a,t);return vo(i,(d,g)=>d().bind(p=>{const C=Kt.getCurrent(p);return CL(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Ld(p.element)))}).map(Ve.getValue))},setValue:(a,i)=>{ys(i,(d,g)=>{Rn(a,t,g).each(p=>{Kt.getCurrent(p).each(C=>{Ve.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>Rn(a,t,i).bind(Kt.getCurrent)}}),Zb={getField:lf((t,s,a)=>t.getField(s,a)),sketch:b5},v5=je("valid-input"),y5=je("invalid-input"),C5=je("validating-input"),T3="colorcustom.rgb.",w5=(t,s,a,i)=>{const d=(M,P)=>nd.config({invalidClass:s("invalid"),notify:{onValidate:I=>{at(I,C5,{type:M})},onValid:I=>{at(I,v5,{type:M,value:Ve.getValue(I)})},onInvalid:I=>{at(I,y5,{type:M,value:Ve.getValue(I)})}},validator:{validate:I=>{const U=Ve.getValue(I),ne=P(U)?Nt.value(!0):Nt.error(t("aria.input.invalid"));return Vs.pure(ne)},validateOnLoad:!1}}),g=(M,P,I,U,ne)=>{const Y=t(T3+"range"),j=Cn.parts.label({dom:{tag:"label",attributes:{"aria-label":U}},components:[ko(I)]}),pe=Cn.parts.field({data:ne,factory:Vh,inputAttributes:{type:"text",...P==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:De([d(P,M),So.config({})]),onSetValue:Ne=>{nd.isInvalid(Ne)&&nd.run(Ne).get(K)}}),ce=[j,pe],Re=P!=="hex"?[Cn.parts["aria-descriptor"]({text:Y})]:[],ke=ce.concat(Re);return{dom:{tag:"div",attributes:{role:"presentation"}},components:ke}},p=(M,P)=>{const I=o2(P);return Zb.getField(M,"hex").each(U=>{bt.isFocused(U)||Ve.setValue(M,{hex:I.value})}),I},C=(M,P)=>{const I=P.red,U=P.green,ne=P.blue;Ve.setValue(M,{red:I,green:U,blue:ne})},w=yn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),E=(M,P)=>{w.getOpt(M).each(I=>{Rt(I.element,"background-color","#"+P.value)})};return Zo({factory:()=>{const M={red:gt(k.some(255)),green:gt(k.some(255)),blue:gt(k.some(255)),hex:gt(k.some("ffffff"))},P=(Et,Qt)=>{const ut=r2(Qt);C(Et,ut),Y(ut)},I=Et=>M[Et].get(),U=(Et,Qt)=>{M[Et].set(Qt)},ne=()=>I("red").bind(Et=>I("green").bind(Qt=>I("blue").map(ut=>Yl(Et,Qt,ut,1)))),Y=Et=>{const Qt=Et.red,ut=Et.green,Yt=Et.blue;U("red",k.some(Qt)),U("green",k.some(ut)),U("blue",k.some(Yt))},j=(Et,Qt)=>{const ut=Qt.event;ut.type!=="hex"?U(ut.type,k.none()):i(Et)},pe=(Et,Qt)=>{a(Et);const ut=rl(Qt);U("hex",k.some(ut.value));const Yt=r2(ut);C(Et,Yt),Y(Yt),at(Et,y2,{hex:ut}),E(Et,ut)},ce=(Et,Qt,ut)=>{const Yt=parseInt(ut,10);U(Qt,k.some(Yt)),ne().each($e=>{const et=p(Et,$e);at(Et,y2,{hex:et}),E(Et,et)})},Re=Et=>Et.type==="hex",ke=(Et,Qt)=>{const ut=Qt.event;Re(ut)?pe(Et,ut.value):ce(Et,ut.type,ut.value)},Ne=Et=>({label:t(T3+Et+".label"),description:t(T3+Et+".description")}),Ue=Ne("red"),Zt=Ne("green"),ot=Ne("blue"),At=Ne("hex");return Vn(Zb.sketch(Et=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Et.field("red",Cn.sketch(g(s2,"red",Ue.label,Ue.description,255))),Et.field("green",Cn.sketch(g(s2,"green",Zt.label,Zt.description,255))),Et.field("blue",Cn.sketch(g(s2,"blue",ot.label,ot.description,255))),Et.field("hex",Cn.sketch(g(LM,"hex",At.label,At.description,"ffffff"))),w.asSpec()],formBehaviours:De([nd.config({invalidClass:s("form-invalid")}),Pt("rgb-form-events",[ve(v5,ke),ve(y5,j),ve(C5,j)])])})),{apis:{updateHex:(Et,Qt)=>{Ve.setValue(Et,{hex:Qt.value}),P(Et,Qt),E(Et,Qt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(M,P,I)=>{M.updateHex(P,I)}},extraApis:{}})},SL=(t,s)=>{const a=Qc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Qc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(E,_)=>{const{width:D,height:M}=E,P=E.getContext("2d");if(P===null)return;P.fillStyle=_,P.fillRect(0,0,D,M);const I=P.createLinearGradient(0,0,D,0);I.addColorStop(0,"rgba(255,255,255,1)"),I.addColorStop(1,"rgba(255,255,255,0)"),P.fillStyle=I,P.fillRect(0,0,D,M);const U=P.createLinearGradient(0,0,0,M);U.addColorStop(0,"rgba(0,0,0,0)"),U.addColorStop(1,"rgba(0,0,0,1)"),P.fillStyle=U,P.fillRect(0,0,D,M)},g=(E,_)=>{const D=E.components()[0].element.dom,M=i2(_,100,100),P=UM(M);d(D,WM(P))},p=(E,_)=>{const D=_4(r2(_));Qc.setValue(E,{x:D.saturation,y:100-D.value})};return Zo({factory:E=>{const _=Q({x:0,y:0}),D=(I,U,ne)=>{at(I,h5,{value:ne})},M=(I,U,ne,Y)=>{d(ne.element.dom,WM(Cm))},P=De([Kt.config({find:k.some}),bt.config({})]);return Qc.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:_},rounded:!1,components:[a,i],onChange:D,onInit:M,sliderBehaviours:P})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(E,_,D)=>{g(_,D)},setThumb:(E,_,D)=>{p(_,D)}},extraApis:{}})},xL=(t,s)=>{const a=d=>{const g=w5(t,s,d.onValidHex,d.onInvalidHex),p=SL(t,s),C=ke=>(100-ke)/100*360,w=ke=>100-ke/360*100,E={paletteRgba:gt(Cm),paletteHue:gt(0)},_=yn(ei(t,s)),D=yn(p.sketch({})),M=yn(g.sketch({})),P=(ke,Ne,Ue)=>{D.getOpt(ke).each(Zt=>{p.setHue(Zt,Ue)})},I=(ke,Ne)=>{M.getOpt(ke).each(Ue=>{g.updateHex(Ue,Ne)})},U=(ke,Ne,Ue)=>{_.getOpt(ke).each(Zt=>{Qc.setValue(Zt,w(Ue))})},ne=(ke,Ne)=>{D.getOpt(ke).each(Ue=>{p.setThumb(Ue,Ne)})},Y=(ke,Ne)=>{const Ue=r2(ke);E.paletteRgba.set(Ue),E.paletteHue.set(Ne)},j=(ke,Ne,Ue,Zt)=>{Y(Ne,Ue),qe(Zt,ot=>{ot(ke,Ne,Ue)})},pe=()=>{const ke=[I];return(Ne,Ue)=>{const Zt=Ue.event.value,ot=E.paletteHue.get(),At=i2(ot,Zt.x,100-Zt.y),Et=KM(At);j(Ne,Et,ot,ke)}},ce=()=>{const ke=[P,I];return(Ne,Ue)=>{const Zt=C(Ue.event.value),ot=E.paletteRgba.get(),At=_4(ot),Et=i2(Zt,At.saturation,At.value),Qt=KM(Et);j(Ne,Qt,Zt,ke)}},Re=()=>{const ke=[P,U,ne];return(Ne,Ue)=>{const Zt=Ue.event.hex,ot=m8(Zt);j(Ne,Zt,ot.hue,ke)}};return{uid:d.uid,dom:d.dom,components:[D.asSpec(),_.asSpec(),M.asSpec()],behaviours:De([Pt("colour-picker-events",[ve(y2,Re()),ve(h5,pe()),ve(Bx,ce())]),Kt.config({find:ke=>M.getOpt(ke)}),ct.config({mode:"acyclic"})])}};return Zo({name:"ColourPicker",configFields:[me("dom"),oe("onValidHex",K),oe("onInvalidHex",K)],factory:a})},cl={self:()=>Kt.config({find:k.some}),memento:t=>Kt.config({find:t.getOpt}),childAt:t=>Kt.config({find:s=>yu(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},k3=lt([oe("preprocess",en),oe("postprocess",en)]),jb=(t,s)=>{const a=Xs("RepresentingConfigs.memento processors",k3,s);return Ve.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Ve.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),p=t.get(i);Ve.setValue(p,g)}}})},ag=(t,s,a)=>Ve.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),_3=(t,s,a)=>ag(t,i=>s(i.element),(i,d)=>a(i.element,d)),x5=t=>_3(t,Fd,Id),Nx=t=>Ve.config({store:{mode:"memory",initialValue:t}}),TL={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},Px=t=>s=>t.translate(TL[s]),kL=(t,s,a)=>{const i=w=>"tox-"+w,d=xL(Px(s),i),g=w=>{at(w,td,{name:"hex-valid",value:!0})},p=w=>{at(w,td,{name:"hex-valid",value:!1})},C=yn(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:De([ag(a,w=>{const E=C.get(w);return Kt.getCurrent(E).bind(M=>Ve.getValue(M).hex).map(M=>"#"+bv(M,"#")).getOr("")},(w,E)=>{const _=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,D=k.from(_.exec(E)).bind(I=>Ho(I,1)),M=C.get(w);Kt.getCurrent(M).fold(()=>{console.log("Can not find form")},I=>{Ve.setValue(I,{hex:D.getOr("")}),Zb.getField(I,"hex").each(U=>{hn(U,Bu())})})}),cl.self()])}};var _L=tinymce.util.Tools.resolve("tinymce.Resource");const E5=t=>wn(t,"init"),T5=t=>{const s=Kn(),a=yn({dom:{tag:t.tag}}),i=Kn();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:De([Pt("custom-editor-events",[Gn(d=>{a.getOpt(d).each(g=>{(E5(t)?t.init(g.element.dom):_L.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{i.on(C=>{p.setValue(C)}),i.clear(),s.set(p)})})})]),ag(k.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),p=>p.setValue(g))}),cl.self()]),components:[a.asSpec()]}};var eu=tinymce.util.Tools.resolve("tinymce.util.Tools");const k5=(t,s)=>{const a=eu.explode(s.getOption("images_file_types")),i=d=>Ba(a,g=>$i(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Yn(Pi(t),i)},Oa=(t,s,a)=>{const i=(M,P)=>{P.stop()},d=M=>(P,I)=>{qe(M,U=>{U(P,I)})},g=(M,P)=>{var I;if(!ht.isDisabled(M)){const U=P.event.raw;C(M,(I=U.dataTransfer)===null||I===void 0?void 0:I.files)}},p=(M,P)=>{const I=P.event.raw.target;C(M,I.files)},C=(M,P)=>{P&&(Ve.setValue(M,k5(P,s)),at(M,Ja,{name:t.name}))},w=yn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:De([Pt("input-file-events",[Gi(pc()),Gi(Lg())])])}),E=M=>({uid:M.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:De([Nx(a.getOr([])),cl.self(),ht.config({}),Lt.config({toggleClass:"dragenter",toggleOnExecute:!1}),Pt("dropzone-events",[ve("dragenter",d([i,Lt.toggle])),ve("dragleave",d([i,Lt.toggle])),ve("dragover",i),ve("drop",d([i,g])),ve(Qm(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[ko(s.translate("Drop an image here"))]},rr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[ko(s.translate("Browse for an image")),w.asSpec()],action:P=>{w.get(P).element.dom.click()},buttonBehaviours:De([So.config({}),sl.button(s.isDisabled),ps()])})]}]}),_=t.label.map(M=>Jf(M,s)),D=Cn.parts.field({factory:{sketch:E}});return m2(_,D,["tox-form__group--stretched"],[])},_5=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:we(t.items,s.interpreter)}),OL=(t,s)=>{let a=null,i=null;return{cancel:()=>{fu(a)||(clearTimeout(a),a=null,i=null)},throttle:(...p)=>{i=p,fu(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,t.apply(null,C)},s))}}},AL=(t,s)=>{let a=null;return{cancel:()=>{fu(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{fu(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},$x=(t,s)=>{let a=null;const i=()=>{fu(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},O3=je("alloy-fake-before-tabstop"),A3=je("alloy-fake-after-tabstop"),O5=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:De([bt.config({ignore:!0}),So.config({})])}),D3=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[O5([O3]),s,O5([A3])],behaviours:De([cl.childAt(1)])}),tu=(t,s)=>{at(t,Hc(),{raw:{which:9,shiftKey:s}})},R3=(t,s)=>{const a=s.element;Mr(a,O3)?tu(t,!0):Mr(a,A3)&&tu(t,!1)},Gb=t=>u2(t,["."+O3,"."+A3].join(","),An),qb=je("update-dialog"),Fx=je("update-title"),A5=je("update-body"),D5=je("update-footer"),R5=je("body-send-message"),Ix=je("dialog-focus-shifted"),M3=mr().browser,C2=M3.isSafari(),DL=M3.isFirefox(),B3=C2||DL,RL=M3.isChromium(),sd=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,w2=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),ML=(t,s)=>{const a=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!RL&&!C2||ir(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},M5=(t,s,a)=>{const i=t.dom;k.from(i.contentDocument).fold(a,d=>{let g=0;const p=ML(d,s).map(w=>(g=w.scrollTop,w)).forall(sd),C=()=>{const w=i.contentWindow;ir(w)&&(p?w2(w,"bottom"):!p&&B3&&g!==0&&w2(w,g))};C2&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),C2||C()})},B5=kt(B3,C2?500:200).map(t=>OL(M5,t)),N3=(t,s)=>{const a=gt(t.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,p=()=>Vt(g,"srcdoc",d);s?B5.fold(Q(M5),C=>C.throttle)(g,d,p):p()}a.set(d)}}},Lx=(t,s,a)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],p={...t.label.map(D=>({title:D})).getOr({}),...a.map(D=>({srcdoc:D})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=N3(a,t.streamContent),w=t.label.map(D=>Jf(D,s)),E=D=>D3(k.from(g),{uid:D.uid,dom:{tag:"iframe",attributes:p,classes:[i,...d]},behaviours:De([So.config({}),bt.config({}),ag(a,C.getValue,C.setValue),Pr.config({channels:{[Ix]:{onReceive:(M,P)=>{P.newFocus.each(I=>{ma(M.element).each(U=>{($n(M.element,I)?Wo:mn)(U,"tox-navobj-bordered-focus")})})}}}})])}),_=Cn.parts.field({factory:{sketch:E}});return m2(w,_,["tox-form__group--stretched"],[])},S2=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[Fr(t,"load",i),Fr(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>qe(d,p=>p.unbind());t.dom.complete&&i()}),x2=(t,s,a,i,d)=>{const g=a*d,p=i*d,C=Math.max(0,t/2-g/2),w=Math.max(0,s/2-p/2);return{left:C.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},N5=(t,s,a)=>{const i=Or(t),d=Go(t);return Math.min(i/s,d/a,1)},P5=(t,s)=>{const a=gt(s.getOr({url:""})),i=yn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=yn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(w,E)=>{const _={url:E.url};E.zoom.each(M=>_.zoom=M),E.cachedWidth.each(M=>_.cachedWidth=M),E.cachedHeight.each(M=>_.cachedHeight=M),a.set(_);const D=()=>{const{cachedWidth:M,cachedHeight:P,zoom:I}=_;if(!ca(M)&&!ca(P)){if(ca(I)){const ne=N5(w.element,M,P);_.zoom=ne}const U=x2(Or(w.element),Go(w.element),M,P,_.zoom);d.getOpt(w).each(ne=>{wu(ne.element,U)})}};i.getOpt(w).each(M=>{const P=M.element;E.url!==dr(P,"src")&&(Vt(P,"src",E.url),mn(w.element,"tox-imagepreview__loaded")),D(),S2(P).then(I=>{w.getSystem().isConnected()&&(Wo(w.element,"tox-imagepreview__loaded"),_.cachedWidth=I.dom.naturalWidth,_.cachedHeight=I.dom.naturalHeight,D())})})},p={};t.height.each(w=>p.height=w);const C=s.map(w=>({url:w.url,zoom:k.from(w.zoom),cachedWidth:k.from(w.cachedWidth),cachedHeight:k.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:De([cl.self(),ag(C,()=>a.get(),g)])}},NL=(t,s)=>{const a="tox-label",i=t.align==="center"?[`${a}--center`]:[],d=t.align==="end"?[`${a}--end`]:[],g={dom:{tag:"label",classes:[a,...i,...d]},components:[ko(s.providers.translate(t.label))]},p=we(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[g,...p],behaviours:De([cl.self(),xt.config({}),x5(k.none()),ct.config({mode:"acyclic"})])}},$5=je("toolbar.button.execute"),PL=t=>vi((s,a)=>{ox(t,s)(i=>{at(s,$5,{buttonApi:i}),t.onAction(i)})}),Qh=je("common-button-display-events"),F5={[Wa()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[na()]:["toolbar-button-events",Qh],[Ua()]:["focusing","alloy.base.behaviour",Qh]},P3=t=>Rt(t.element,"width",Te(t.element,"width")),I5=(t,s,a)=>Yc(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),Hx=(t,s)=>I5(t,s,[]),Tm=(t,s)=>I5(t,s,[xt.config({})]),L5=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[ko(a.translate(t))],behaviours:De([xt.config({})])}),ti=je("update-menu-text"),ep=je("update-menu-icon"),Vx=(t,s,a)=>{const i=gt(K),d=t.text.map(M=>yn(L5(M,s,a.providers))),g=t.icon.map(M=>yn(Tm(M,a.providers.icons))),p=(M,P)=>{const I=Ve.getValue(M);return bt.focus(I),at(I,"keydown",{raw:P.event.raw}),Jc.close(I),k.some(!0)},C=t.role.fold(()=>({}),M=>({role:M})),w=t.tooltip.fold(()=>({}),M=>{const P=a.providers.translate(M);return{title:P,"aria-label":P}}),E=Yc("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),_=je("common-button-display-events");return yn(Jc.sketch({...t.uid?{uid:t.uid}:{},...C,dom:{tag:"button",classes:[s,`${s}--select`].concat(we(t.classes,M=>`${s}--${M}`)),attributes:{...w}},components:Pb([g.map(M=>M.asSpec()),d.map(M=>M.asSpec()),k.some(E)]),matchWidth:!0,useMinWidth:!0,onOpen:(M,P,I)=>{t.searchable&&W8(I)},dropdownBehaviours:De([...t.dropdownBehaviours,sl.button(()=>t.disabled||a.providers.isDisabled()),ps(),g2.config({}),xt.config({}),Pt("dropdown-events",[Kf(t,i),ym(t,i)]),Pt(_,[Gn((M,P)=>P3(M))]),Pt("menubutton-update-display-text",[ve(ti,(M,P)=>{d.bind(I=>I.getOpt(M)).each(I=>{xt.set(I,[ko(a.providers.translate(P.event.text))])})}),ve(ep,(M,P)=>{g.bind(I=>I.getOpt(M)).each(I=>{xt.set(I,[Tm(P.event.icon,a.providers.icons)])})})])]),eventOrder:Vn(F5,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[na()]:["toolbar-button-events","dropdown-events",_]}),sandboxBehaviours:De([ct.config({mode:"special",onLeft:p,onRight:p}),Pt("dropdown-sandbox-events",[ve(UR,(M,P)=>{z8(M),P.stop()}),ve(WR,(M,P)=>{K4(M,P),P.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...jS(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:X4,onCollapseMenu:(M,P,I)=>{ln.getHighlighted(I).each(U=>{X4(M,I,U)})},onDehighlightItem:U8}},fetch:M=>Vs.nu(dn(t.fetch,M))})).asSpec()},E2=t=>xn(t),H5=t=>t.type==="separator",V5=t=>wn(t,"getSubmenuItems"),$L={type:"separator"},FL=(t,s)=>{const a=eo(t,(i,d)=>E2(d)?d===""?i:d==="|"?i.length>0&&!H5(i[i.length-1])?i.concat([$L]):i:wn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&H5(a[a.length-1])&&a.pop(),a},IL=(t,s)=>{const a=t.getSubmenuItems(),i=$3(a,s),d=Vn(i.menus,{[t.value]:i.items}),g=Vn(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},LL=t=>{const s=Ze(t,"value").getOrThunk(()=>je("generated-menu-item"));return Vn({value:s},t)},$3=(t,s)=>{const a=FL(xn(t)?t.split(" "):t,s);return rs(a,(i,d)=>{if(V5(d)){const g=LL(d),p=IL(g,s);return{menus:Vn(i.menus,p.menus),items:[p.item,...i.items],expansions:Vn(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},HL=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),z5=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),cg=(t,s,a,i)=>{const d=je("primary-menu"),g=$3(t,a.shared.providers.menuItems());if(g.items.length===0)return k.none();const p=HL(i),C=wB(d,g.items,s,a,i.isHorizontalMenu,p),w=z5(i),E=vo(g.menus,(D,M)=>wB(M,D,s,a,!1,w)),_=Vn(E,Ym(d,C));return k.from(Ph.tieredData(d,_,g.expansions))},nu=t=>!wn(t,"items"),zx="data-value",F3=(t,s,a,i)=>we(a,d=>nu(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{Ve.setValue(t,d.value),at(t,Ja,{name:s}),bt.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>F3(t,s,d.items,i)}),Ux=(t,s)=>Ws(t,a=>nu(a)?kt(a.value===s,a):Ux(a.items,s)),I3=(t,s,a)=>{const i=s.shared.providers,d=a.bind(w=>Ux(t.items,w)).orThunk(()=>ia(t.items).filter(nu)),g=t.label.map(w=>Jf(w,i)),p=Cn.parts.field({dom:{},factory:{sketch:w=>Vx({uid:w.uid,text:d.map(E=>E.text),icon:k.none(),tooltip:t.label,role:k.none(),fetch:(E,_)=>{const D=F3(E,t.name,t.items,Ve.getValue(E));_(cg(D,ql.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:Q(K),getApi:Q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[So.config({}),ag(d.map(E=>E.value),E=>dr(E.element,zx),(E,_)=>{Ux(t.items,_).each(D=>{Vt(E.element,zx,D.value),at(E,ti,{text:D.text})})})]},"tox-listbox",s.shared)}}),C={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Cn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ft([g.toArray(),[C]]),fieldBehaviours:De([ht.config({disabled:Q(!t.enabled),onDisabled:w=>{Cn.getField(w).each(ht.disable)},onEnabled:w=>{Cn.getField(w).each(ht.enable)}})])})},U5=(t,s)=>({dom:{tag:"div",classes:t.classes},components:we(t.items,s.shared.interpreter)}),Wx=(t,s)=>{const a=we(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Ym("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:_o(t.selectBehaviours,[bt.config({}),Ve.config({store:{mode:"manual",getValue:d=>Br(d.element),setValue:(d,g)=>{const p=ia(t.options);Bt(t.options,w=>w.value===g).isSome()?Za(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(w=>Za(d.element,w.value))},...i}})])}},W5=Zo({name:"HtmlSelect",configFields:[me("options"),ts("selectBehaviours",[bt,Ve]),oe("selectClasses",[]),oe("selectAttributes",{}),bn("data")],factory:Wx}),Z5=(t,s,a)=>{const i=we(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>Jf(w,s)),g=Cn.parts.field({dom:{},...a.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:i,factory:W5,selectBehaviours:De([ht.config({disabled:()=>!t.enabled||s.isDisabled()}),So.config({}),Pt("selectbox-change",[ve(Qm(),(w,E)=>{at(w,Ja,{name:t.name})})])])}),p=t.size>1?k.none():k.some(Yc("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Ft([[g],p.toArray()])};return Cn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ft([d.toArray(),[C]]),fieldBehaviours:De([ht.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{Cn.getField(w).each(ht.disable)},onEnabled:w=>{Cn.getField(w).each(ht.enable)}}),ps()])})},VL=Q([oe("field1Name","field1"),oe("field2Name","field2"),ie("onLockedChange"),Wd(["lockClass"]),oe("locked",!1),Cc.field("coupledFieldBehaviours",[Kt,Ve])]),zL=(t,s,a)=>Rn(t,s,a).bind(Kt.getCurrent),j5=(t,s)=>Es({factory:Cn,name:t,overrides:a=>({fieldBehaviours:De([Pt("coupled-input-behaviour",[ve(Bu(),i=>{zL(i,a,s).each(d=>{Rn(i,a,"lock").each(g=>{Lt.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),UL=Q([j5("field1","field2"),j5("field2","field1"),Es({factory:rr,schema:[me("dom")],name:"lock",overrides:t=>({buttonBehaviours:De([Lt.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),WL=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Cc.augment(t.coupledFieldBehaviours,[Kt.config({find:k.some}),Ve.config({store:{mode:"manual",getValue:d=>{const g=py(d,t,["field1","field2"]);return{[t.field1Name]:Ve.getValue(g.field1()),[t.field2Name]:Ve.getValue(g.field2())}},setValue:(d,g)=>{const p=py(d,t,["field1","field2"]);oc(g,t.field1Name)&&Ve.setValue(p.field1(),g[t.field1Name]),oc(g,t.field2Name)&&Ve.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Rn(d,t,"field1"),getField2:d=>Rn(d,t,"field2"),getLock:d=>Rn(d,t,"lock")}}),Oc=ns({name:"FormCoupledInputs",configFields:VL(),partFields:UL(),factory:WL,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),G5=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},L3=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Nt.value({value:i,unit:d})}else return Nt.error(t)},q5=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>wn(a,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?k.some(t.value):k.some(t.value/a[t.unit]*a[s]):k.none()},H3=t=>k.none(),Zx=(t,s)=>a=>q5(a,s).map(i=>({value:i*t,unit:s})),ZL=(t,s)=>{const a=L3(t).toOptional(),i=L3(s).toOptional();return gd(a,i,(d,g)=>q5(d,g.unit).map(p=>g.value/p).map(p=>Zx(p,g.unit)).getOr(H3)).getOr(H3)},jL=(t,s)=>{let a=H3;const i=je("ratio-event"),d=D=>Yc(D,{tag:"span",classes:["tox-icon","tox-lock-icon__"+D]},s.icons),g=Oc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:De([ht.config({disabled:()=>!t.enabled||s.isDisabled()}),ps(),So.config({})])}),p=D=>({dom:{tag:"div",classes:["tox-form__group"]},components:D}),C=D=>Cn.parts.field({factory:Vh,inputClasses:["tox-textfield"],inputBehaviours:De([ht.config({disabled:()=>!t.enabled||s.isDisabled()}),ps(),So.config({}),Pt("size-input-events",[ve(hi(),(M,P)=>{at(M,i,{isField1:D})}),ve(Qm(),(M,P)=>{at(M,Ja,{name:t.name})})])]),selectOnFocus:!1}),w=D=>({dom:{tag:"label",classes:["tox-label"]},components:[ko(s.translate(D))]}),E=Oc.parts.field1(p([Cn.parts.label(w("Width")),C(!0)])),_=Oc.parts.field2(p([Cn.parts.label(w("Height")),C(!1)]));return Oc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[E,_,p([w(ih),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(D,M,P)=>{L3(Ve.getValue(D)).each(I=>{a(I).each(U=>{Ve.setValue(M,G5(U))})})},coupledFieldBehaviours:De([ht.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:D=>{Oc.getField1(D).bind(Cn.getField).each(ht.disable),Oc.getField2(D).bind(Cn.getField).each(ht.disable),Oc.getLock(D).each(ht.disable)},onEnabled:D=>{Oc.getField1(D).bind(Cn.getField).each(ht.enable),Oc.getField2(D).bind(Cn.getField).each(ht.enable),Oc.getLock(D).each(ht.enable)}}),ps(),Pt("size-input-events2",[ve(i,(D,M)=>{const P=M.event.isField1,I=P?Oc.getField1(D):Oc.getField2(D),U=P?Oc.getField2(D):Oc.getField1(D),ne=I.map(Ve.getValue).getOr(""),Y=U.map(Ve.getValue).getOr("");a=ZL(ne,Y)})])])})},K5=(t,s,a)=>{const i=Qc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ko(s.translate(t.label))]}),d=Qc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Qc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Qc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:Q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:De([cl.self(),bt.config({})]),onChoose:(p,C,w)=>{at(p,Ja,{name:t.name,value:w})}})},Y5=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:we(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:we(C,d)}),p=C=>({dom:{tag:"tbody"},components:we(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:De([So.config({}),bt.config({})])}},X5=(t,s)=>{const a=t.label.map(P=>Jf(P,s)),i=[ht.config({disabled:()=>t.disabled||s.isDisabled()}),ps(),ct.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:P=>(hn(P,Ub),k.some(!0))}),Pt("textfield-change",[ve(Bu(),(P,I)=>{at(P,Ja,{name:t.name})}),ve(pi(),(P,I)=>{at(P,Ja,{name:t.name})})]),So.config({})],d=t.validation.map(P=>nd.config({getRoot:I=>ma(I.element),invalidClass:"tox-invalid",validator:{validate:I=>{const U=Ve.getValue(I),ne=P.validator(U);return Vs.pure(ne===!0?Nt.value(U):Nt.error(ne))},validateOnLoad:P.validateOnLoad}})).toArray(),g=t.placeholder.fold(Q({}),P=>({placeholder:s.translate(P)})),p=t.inputMode.fold(Q({}),P=>({inputmode:P})),C={...g,...p},w=Cn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(P=>({data:P})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:De(Ft([i,d])),selectOnFocus:!1,factory:Vh}),E=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),M=[ht.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:P=>{Cn.getField(P).each(ht.disable)},onEnabled:P=>{Cn.getField(P).each(ht.enable)}}),ps()];return m2(a,E,D,M)},GL=(t,s,a)=>X5({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:a},s),V3=(t,s,a)=>X5({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:a},s),T2=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),rd=t=>t.dimension.property,tp=(t,s)=>t.dimension.getDimension(s),jx=(t,s)=>{const a=T2(t,s);Ds(a,[s.shrinkingClass,s.growingClass])},z3=(t,s)=>{mn(t.element,s.openClass),Wo(t.element,s.closedClass),Rt(t.element,rd(s),"0px"),wd(t.element)},Gx=(t,s)=>{mn(t.element,s.closedClass),Wo(t.element,s.openClass),sn(t.element,rd(s))},U3=(t,s,a,i)=>{a.setCollapsed(),Rt(t.element,rd(s),tp(s,t.element)),jx(t,s),z3(t,s),s.onStartShrink(t),s.onShrunk(t)},qL=(t,s,a,i)=>{const d=i.getOrThunk(()=>tp(s,t.element));a.setCollapsed(),Rt(t.element,rd(s),d),wd(t.element);const g=T2(t,s);mn(g,s.growingClass),Wo(g,s.shrinkingClass),z3(t,s),s.onStartShrink(t)},J5=(t,s,a)=>{const i=tp(s,t.element);(i==="0px"?U3:qL)(t,s,a,k.some(i))},Q5=(t,s,a)=>{const i=T2(t,s),d=Mr(i,s.shrinkingClass),g=tp(s,t.element);Gx(t,s);const p=tp(s,t.element);(d?()=>{Rt(t.element,rd(s),g),wd(t.element)}:()=>{z3(t,s)})(),mn(i,s.shrinkingClass),Wo(i,s.growingClass),Gx(t,s),Rt(t.element,rd(s),p),a.setExpanded(),s.onStartGrow(t)},KL=(t,s,a)=>{if(a.isExpanded()){sn(t.element,rd(s));const i=tp(s,t.element);Rt(t.element,rd(s),i)}},eN=(t,s,a)=>{a.isExpanded()||Q5(t,s,a)},YL=(t,s,a)=>{a.isExpanded()&&J5(t,s,a)},tN=(t,s,a)=>{a.isExpanded()&&U3(t,s,a)},XL=(t,s,a)=>a.isExpanded(),JL=(t,s,a)=>a.isCollapsed(),nN=(t,s,a)=>{const i=T2(t,s);return Mr(i,s.growingClass)===!0},oN=(t,s,a)=>{const i=T2(t,s);return Mr(i,s.shrinkingClass)===!0};var QL=Object.freeze({__proto__:null,refresh:KL,grow:eN,shrink:YL,immediateShrink:tN,hasGrown:XL,hasShrunk:JL,isGrowing:nN,isShrinking:oN,isTransitioning:(t,s,a)=>nN(t,s)||oN(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?J5:Q5)(t,s,a)},disableTransitions:jx,immediateGrow:(t,s,a)=>{a.isExpanded()||(Gx(t,s),Rt(t.element,rd(s),tp(s,t.element)),jx(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),eH=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return zc(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Ym(s.dimension.property,"0px")})},events:(t,s)=>Fn([cf(Ig(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(jx(a,t),s.isExpanded()&&sn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),tH=[me("closedClass"),me("openClass"),me("shrinkingClass"),me("growingClass"),bn("getAnimationRoot"),zt("onShrunk"),zt("onStartShrink"),zt("onGrown"),zt("onStartGrow"),oe("expanded",!1),ta("dimension",Uo("property",{width:[qn("property","width"),qn("getDimension",t=>Or(t)+"px")],height:[qn("property","height"),qn("getDimension",t=>Go(t)+"px")]}))],k2=Object.freeze({__proto__:null,init:t=>{const s=gt(t.expanded),a=()=>"expanded: "+s.get();return wa({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:dn(s.set,!1),setExpanded:dn(s.set,!0),readState:a})}});const Aa=Rs({fields:tH,name:"sliding",active:eH,apis:QL,state:k2}),rN=t=>({isEnabled:()=>!ht.isDisabled(t),setEnabled:s=>ht.set(t,!s),setActive:s=>{const a=t.element;s?(Wo(a,"tox-tbtn--enabled"),Vt(a,"aria-pressed",!0)):(mn(a,"tox-tbtn--enabled"),zo(a,"aria-pressed"))},isActive:()=>Mr(t.element,"tox-tbtn--enabled"),setText:s=>{at(t,ti,{text:s})},setIcon:s=>at(t,ep,{icon:s})}),_2=(t,s,a,i,d=!0)=>Vx({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(g,p)=>{const C={pattern:t.search.isSome()?Z8(g):""};t.fetch(w=>{p(cg(w,ql.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},C,rN(g))},onSetup:t.onSetup,getApi:rN,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[So.config({})]:[]]},s,a.shared),W3=(t,s,a)=>{const i=g=>p=>{const C=!p.isActive();p.setActive(C),g.storage.set(C),a.shared.getSink().each(w=>{s().getOpt(w).each(E=>{wo(E.element),at(E,td,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(we(t,p=>{const C=p.text.fold(()=>({}),w=>({text:w}));return{type:p.type,active:!1,...C,onAction:i(p),onSetup:d(p)}}))}},aN=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[ko(t)]}),qx=je("leaf-label-event-id"),Kx=({leaf:t,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const p=t.menu.map(w=>_2(w,"tox-mbtn",g,k.none(),a)),C=[aN(t.title)];return p.each(w=>C.push(w)),rr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Hc()]:[qx,"keying"]},buttonBehaviours:De([...a?[So.config({})]:[],Lt.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Pr.config({channels:{[`update-active-item-${i}`]:{onReceive:(w,E)=>{(E.value===t.id?Lt.on:Lt.off)(w)}}}}),Pt(qx,[Gn((w,E)=>{d.each(_=>{(_===t.id?Lt.on:Lt.off)(w)})}),ve(Hc(),(w,E)=>{const _=E.event.raw.code==="ArrowLeft",D=E.event.raw.code==="ArrowRight";_?(Nl(w.element,".tox-tree--directory").each(M=>{w.getSystem().getByDom(M).each(P=>{C1(M,".tox-tree--directory__label").each(I=>{P.getSystem().getByDom(I).each(bt.focus)})})}),E.stop()):D&&E.stop()})])])})},nH=(t,s,a)=>Yc(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),oH=(t,s)=>nH(t,s,[]),Z3=je("directory-label-event-id"),cN=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(C=>_2(C,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[oH("chevron-right",i.shared.providers.icons)]},aN(t.title)];d.each(C=>{g.push(C)});const p=C=>{Nl(C.element,".tox-tree--directory").each(w=>{C.getSystem().getByDom(w).each(E=>{const _=!Lt.isOn(E);Lt.toggle(E),at(C,"expand-tree-node",{expanded:_,node:t.id})})})};return rr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Hc()]:[Z3,"keying"]},buttonBehaviours:De([...s?[So.config({})]:[],Pt(Z3,[ve(Hc(),(C,w)=>{const E=w.event.raw.code==="ArrowRight",_=w.event.raw.code==="ArrowLeft";E&&a&&w.stop(),(E||_)&&Nl(C.element,".tox-tree--directory").each(D=>{C.getSystem().getByDom(D).each(M=>{!Lt.isOn(M)&&E||Lt.isOn(M)&&_?(p(C),w.stop()):_&&!Lt.isOn(M)&&(Nl(M.element,".tox-tree--directory").each(P=>{C1(P,".tox-tree--directory__label").each(I=>{M.getSystem().getByDom(I).each(bt.focus)})}),w.stop())})})})])])})},sH=({children:t,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?Kx({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:p}):Yx({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:p})),behaviours:De([Aa.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),xt.config({})])}),iN=je("directory-event-id"),Yx=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:p})=>{const{children:C}=t,w=gt(g),E=D=>C.map(M=>M.type==="leaf"?Kx({leaf:M,selectedId:p,onLeafAction:s,visible:D,treeId:i,backstage:d}):Yx({directory:M,expandedIds:w.get(),selectedId:p,onLeafAction:s,labelTabstopping:D,treeId:i,backstage:d})),_=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[cN({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),sH({children:C,expandedIds:g,selectedId:p,onLeafAction:s,visible:_,treeId:i,backstage:d})],behaviours:De([Pt(iN,[Gn((D,M)=>{Lt.set(D,_)}),ve("expand-tree-node",(D,M)=>{const{expanded:P,node:I}=M.event;w.set(P?[...w.get(),I]:w.get().filter(U=>U!==I))})]),Lt.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(D,M)=>{const P=D.components()[1],I=E(M);M?Aa.grow(P):Aa.shrink(P),xt.set(P,I)}})])}},rH=je("tree-event-id"),lN=(t,s)=>{const a=t.onLeafAction.getOr(K),i=t.onToggleExpand.getOr(K),d=t.defaultExpandedIds,g=gt(d),p=gt(t.defaultSelectedId),C=je("tree-id"),w=(E,_)=>t.items.map(D=>D.type==="leaf"?Kx({leaf:D,selectedId:E,onLeafAction:a,visible:!0,treeId:C,backstage:s}):Yx({directory:D,selectedId:E,onLeafAction:a,expandedIds:_,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(p.get(),g.get()),behaviours:De([ct.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Pt(rH,[ve("expand-tree-node",(E,_)=>{const{expanded:D,node:M}=_.event;g.set(D?[...g.get(),M]:g.get().filter(P=>P!==M)),i(g.get(),{expanded:D,node:M})})]),Pr.config({channels:{[`update-active-item-${C}`]:{onReceive:(E,_)=>{p.set(k.some(_.value)),xt.set(E,w(k.some(_.value),g.get()))}}}}),xt.config({})])}};var uN=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Fn([ve(t.event,i),fr(()=>s.cancel())].concat(t.cancelEvent.map(d=>[ve(d,()=>s.cancel())]).getOr([])))}});const dN=t=>{const s=gt(null);return wa({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var cH=Object.freeze({__proto__:null,throttle:dN,init:t=>t.stream.streams.state(t)});const mN=(t,s)=>{const a=t.stream,i=$x(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var iH=[ta("stream",Uo("mode",{throttle:[me("delay"),oe("stopEvent",!0),qn("streams",{setup:mN,state:dN})]})),oe("event","input"),bn("cancelEvent"),ie("onStream")];const Xx=Rs({fields:iH,name:"streaming",active:uN,state:cH}),Jx=(t,s,a)=>{const i=Ve.getValue(a);Ve.setValue(s,i),Qx(s)},fN=(t,s)=>{const a=t.element,i=Br(a),d=a.dom;dr(a,"type")!=="number"&&s(d,i)},Qx=t=>{fN(t,(s,a)=>s.setSelectionRange(a.length,a.length))},lH=(t,s)=>{fN(t,(a,i)=>a.setSelectionRange(s,i.length))},uH=(t,s,a)=>{if(t.selectsOver){const i=Ve.getValue(s),d=t.getDisplayText(i),g=Ve.getValue(a);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{Jx(t,s,a),lH(s,d.length)}):k.none()}else return k.none()},j3=Q("alloy.typeahead.itemexecute"),gN=(t,s,a,i)=>{const d=(D,M,P)=>{t.previewing.set(!1);const I=lo.getCoupled(D,"sandbox");if(Xt.isOpen(I))Kt.getCurrent(I).each(U=>{ln.getHighlighted(U).fold(()=>{P(U)},()=>{MT(I,U.element,"keydown",M)})});else{const U=ne=>{Kt.getCurrent(ne).each(P)};fx(t,p(D),D,I,i,U,_a.HighlightMenuAndItem).get(K)}},g=VR(t),p=D=>M=>M.map(P=>{const I=pv(P.menus),U=be(I,Y=>Yn(Y.items,j=>j.type==="item"));return Ve.getState(D).update(we(U,Y=>Y.data)),P}),C=D=>Kt.getCurrent(D),w="typeaheadevents",E=[bt.config({}),Ve.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:D=>Br(D.element),getFallbackEntry:D=>({value:D,meta:{}}),setValue:(D,M)=>{Za(D.element,t.model.getDisplayText(M))},...t.initialData.map(D=>Ym("initialValue",D)).getOr({})}}),Xx.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(D,M)=>{const P=lo.getCoupled(D,"sandbox");if(bt.isFocused(D)&&Br(D.element).length>=t.minChars){const U=C(P).bind(Y=>ln.getHighlighted(Y).map(Ve.getValue));t.previewing.set(!0);const ne=Y=>{C(P).each(j=>{U.fold(()=>{t.model.selectsOver&&ln.highlightFirst(j)},pe=>{ln.highlightBy(j,ce=>Ve.getValue(ce).value===pe.value),ln.getHighlighted(j).orThunk(()=>(ln.highlightFirst(j),k.none()))})})};fx(t,p(D),D,P,i,ne,_a.HighlightJustMenu).get(K)}},cancelEvent:Xv()}),ct.config({mode:"special",onDown:(D,M)=>(d(D,M,ln.highlightFirst),k.some(!0)),onEscape:D=>{const M=lo.getCoupled(D,"sandbox");return Xt.isOpen(M)?(Xt.close(M),k.some(!0)):k.none()},onUp:(D,M)=>(d(D,M,ln.highlightLast),k.some(!0)),onEnter:D=>{const M=lo.getCoupled(D,"sandbox"),P=Xt.isOpen(M);if(P&&!t.previewing.get())return C(M).bind(I=>ln.getHighlighted(I)).map(I=>(at(D,j3(),{item:I}),!0));{const I=Ve.getValue(D);return hn(D,Xv()),t.onExecute(M,D,I),P&&Xt.close(M),k.some(!0)}}}),Lt.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),lo.config({others:{sandbox:D=>Z4(t,D,{onOpen:()=>Lt.on(D),onClose:()=>{t.lazyTypeaheadComp.get().each(M=>zo(M.element,"aria-activedescendant")),Lt.off(D)}})}}),Pt(w,[Gn(D=>{t.lazyTypeaheadComp.set(k.some(D))}),fr(D=>{t.lazyTypeaheadComp.set(k.none())}),vi(D=>{const M=K;W4(t,p(D),D,i,M,_a.HighlightMenuAndItem).get(K)}),ve(j3(),(D,M)=>{const P=lo.getCoupled(D,"sandbox");Jx(t.model,D,M.event.item),hn(D,Xv()),t.onItemExecute(D,P,M.event.item,Ve.getValue(D)),Xt.close(P),Qx(D)})].concat(t.dismissOnBlur?[ve(ef(),D=>{const M=lo.getCoupled(D,"sandbox");Uc(M.element).isNone()&&Xt.close(M)})]:[]))],_={[_l()]:[Ve.name(),Xx.name(),w],...t.eventOrder};return{uid:t.uid,dom:zR(Vn(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,..._o(t.typeaheadBehaviours,E)},eventOrder:_}},dH=Q([bn("lazySink"),me("fetch"),oe("minChars",5),oe("responseTime",1e3),zt("onOpen"),oe("getHotspot",k.some),oe("getAnchorOverrides",Q({})),oe("layouts",k.none()),oe("eventOrder",{}),Au("model",{},[oe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),oe("selectsOver",!0),oe("populateFromBrowse",!0)]),zt("onSetValue"),xa("onExecute"),zt("onItemExecute"),oe("inputClasses",[]),oe("inputAttributes",{}),oe("inputStyles",{}),oe("matchWidth",!0),oe("useMinWidth",!1),oe("dismissOnBlur",!0),Wd(["openClass"]),bn("initialData"),ts("typeaheadBehaviours",[bt,Ve,Xx,ct,Lt,lo]),Rr("lazyTypeaheadComp",()=>gt(k.none)),Rr("previewing",()=>gt(!0))].concat(HR()).concat(j4())),hN=Q([jc({schema:[Yi()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{uH(t.model,d,i).fold(()=>{t.model.selectsOver?(ln.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Jx(t.model,d,i),jo(i.element,"id").each(g=>Vt(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(at(i,j3(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&Jx(t.model,i,a)})}})})]),mH=ns({name:"Typeahead",configFields:dH(),partFields:hN(),factory:gN}),Mi=t=>({...t,toCached:()=>Mi(t.toCached()),bindFuture:w=>Mi(t.bind(E=>E.fold(_=>Vs.pure(Nt.error(_)),_=>w(_)))),bindResult:w=>Mi(t.map(E=>E.bind(w))),mapResult:w=>Mi(t.map(E=>E.map(w))),mapError:w=>Mi(t.map(E=>E.mapError(w))),foldResult:(w,E)=>t.map(_=>_.fold(w,E)),withTimeout:(w,E)=>Mi(Vs.nu(_=>{let D=!1;const M=setTimeout(()=>{D=!0,_(Nt.error(E()))},w);t.get(P=>{D||(clearTimeout(M),_(P))})}))}),pN=t=>Mi(Vs.nu(t)),bN=t=>Mi(Vs.pure(Nt.value(t))),gH={nu:pN,wrap:Mi,pure:bN,value:bN,error:t=>Mi(Vs.pure(Nt.error(t))),fromResult:t=>Mi(Vs.pure(t)),fromFuture:t=>Mi(t.map(Nt.value)),fromPromise:t=>pN(s=>{t.then(a=>{s(Nt.value(a))},a=>{s(Nt.error(a))})})},O2=(t,s,a=[],i,d,g)=>{const p=s.fold(()=>({}),E=>({action:E})),C={buttonBehaviours:De([sl.button(()=>!t.enabled||g.isDisabled()),ps(),So.config({}),Pt("button press",[zg("click"),zg("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},w=Vn(C,{dom:i});return Vn(w,{components:d})},hH=(t,s,a,i=[])=>{const d=t.tooltip.map(w=>({"aria-label":a.translate(w),title:a.translate(w)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(w=>Hx(w,a.icons)),C=Pb([p]);return O2(t,s,i,g,C,a)},G3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},vN=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(M=>Hx(M,a.icons)),C=[p.getOrThunk(()=>ko(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),D={tag:"button",classes:[...G3(w),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return O2(t,s,i,D,C,a)},q3=(t,s,a,i=[],d=[])=>{const g=vN(t,k.some(s),a,i,d);return rr.sketch(g)},yN=(t,s)=>a=>{s==="custom"?at(a,td,{name:t,value:{}}):s==="submit"?hn(a,Ub):s==="cancel"?hn(a,Sm):console.error("Unknown button type: ",s)},pH=(t,s)=>s==="menu",bH=(t,s)=>s==="custom"||s==="cancel"||s==="submit",CN=(t,s)=>s==="togglebutton",wN=(t,s)=>{var a,i;const d=t.icon.map(j=>Tm(j,s.icons)).map(yn),g=j=>{at(j,td,{name:t.name,value:{setIcon:pe=>{d.map(ce=>ce.getOpt(j).each(Re=>{xt.set(Re,[Tm(pe,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),C={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:p==="primary",tooltip:k.from(t.tooltip),enabled:(i=t.enabled)!==null&&i!==void 0?i:!1,borderless:!1},w=C.tooltip.map(j=>({"aria-label":s.translate(j),title:s.translate(j)})).getOr({}),E=G3(p??"secondary"),_=t.icon.isSome()&&t.text.isSome(),D={tag:"button",classes:[...E.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],..._?["tox-button--icon-and-text"]:[]],attributes:w},M=[],P=s.translate(t.text.getOr("")),I=ko(P),ne=[...Pb([d.map(j=>j.asSpec())]),...t.text.isSome()?[I]:[]],Y=O2(C,k.some(g),M,D,ne,s);return rr.sketch(Y)},A2=(t,s,a)=>{if(pH(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:k.none(),onSetup:C=>(C.setEnabled(t.enabled),K),fetch:W3(d.items,i,a)},p=yn(_2(g,"tox-tbtn",a,k.none()));return p.asSpec()}else if(bH(t,s)){const i=yN(t.name,s),d={...t,borderless:!1};return q3(d,i,a.shared.providers,[])}else{if(CN(t,s))return wN(t,a.shared.providers);throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},eE=(t,s)=>{const a=yN(t.name,"custom");return DB(k.none(),Cn.parts.field({factory:rr,...vN(t,k.some(a),s,[Nx(""),cl.self()])}))},vH={type:"separator"},yH=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:K}),K3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:K}),CH=t=>we(t,yH),SN=(t,s)=>Yn(s,a=>a.type===t),Y3=(t,s)=>CH(SN(t,s)),wH=t=>Y3("header",t.targets),SH=t=>Y3("anchor",t.targets),xN=t=>k.from(t.anchorTop).map(s=>K3("<top>",s)).toArray(),xH=t=>k.from(t.anchorBottom).map(s=>K3("<bottom>",s)).toArray(),EH=t=>we(t,s=>K3(s,s)),Ht=t=>eo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(vH,a),[]),np=(t,s)=>{const a=t.toLowerCase();return Yn(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return lr(g.toLowerCase(),a)||lr(p.toLowerCase(),a)})},EN=(t,s,a)=>{var i,d;const g=Ve.getValue(s),p=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],w=>{const E=np(p,EH(a.getHistory(t)));return t==="file"?Ht([E,np(p,wH(w)),np(p,Ft([xN(w),SH(w),xH(w)]))]):E})},X3=je("aria-invalid"),TN=(t,s,a,i)=>{const d=s.shared.providers,g=j=>{const pe=Ve.getValue(j);a.addToHistory(pe.value,t.filetype)},p={...i.map(j=>({initialData:j})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":X3,type:"url"},minChars:0,responseTime:0,fetch:j=>{const pe=EN(t.filetype,j,a),ce=cg(pe,ql.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return Vs.pure(ce)},getHotspot:j=>I.getOpt(j),onSetValue:(j,pe)=>{j.hasConfigured(nd)&&nd.run(j).get(K)},typeaheadBehaviours:De([...a.getValidationHandler().map(j=>nd.config({getRoot:pe=>ma(pe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(pe,ce)=>{_.getOpt(pe).each(Re=>{Vt(Re.element,"title",d.translate(ce))})}},validator:{validate:pe=>{const ce=Ve.getValue(pe);return gH.nu(Re=>{j({type:t.filetype,url:ce.value},ke=>{if(ke.status==="invalid"){const Ne=Nt.error(ke.message);Re(Ne)}else{const Ne=Nt.value(ke.message);Re(Ne)}})})},validateOnLoad:!1}})).toArray(),ht.config({disabled:()=>!t.enabled||d.isDisabled()}),So.config({}),Pt("urlinput-events",[ve(Bu(),j=>{const pe=Br(j.element),ce=pe.trim();ce!==pe&&Za(j.element,ce),t.filetype==="file"&&at(j,Ja,{name:t.name})}),ve(Qm(),j=>{at(j,Ja,{name:t.name}),g(j)}),ve(pi(),j=>{at(j,Ja,{name:t.name}),g(j)})])]),eventOrder:{[Bu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:j=>j.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:jS(!1,1,"normal")},onExecute:(j,pe,ce)=>{at(pe,Ub,{})},onItemExecute:(j,pe,ce,Re)=>{g(j),at(j,Ja,{name:t.name})}},C=Cn.parts.field({...p,factory:mH}),w=t.label.map(j=>Jf(j,d)),_=yn(((j,pe,ce=j,Re=j)=>Yc(ce,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+j],attributes:{title:d.translate(Re),"aria-live":"polite",...pe.fold(()=>({}),ke=>({id:ke}))}},d.icons))("invalid",k.some(X3),"warning")),D=yn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),M=a.getUrlPicker(t.filetype),P=je("browser.url.event"),I=yn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,D.asSpec()],behaviours:De([ht.config({disabled:()=>!t.enabled||d.isDisabled()})])}),U=yn(q3({name:t.name,icon:k.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},j=>hn(j,P),d,[],["tox-browse-url"])),ne=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ft([[I.asSpec()],M.map(()=>U.asSpec()).toArray()])}),Y=j=>{Kt.getCurrent(j).each(pe=>{const ce=Ve.getValue(pe),Re={fieldname:t.name,...ce};M.each(ke=>{ke(Re).get(Ne=>{Ve.setValue(pe,Ne),at(j,Ja,{name:t.name})})})})};return Cn.sketch({dom:v7(),components:w.toArray().concat([ne()]),fieldBehaviours:De([ht.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:j=>{Cn.getField(j).each(ht.disable),U.getOpt(j).each(ht.disable)},onEnabled:j=>{Cn.getField(j).each(ht.enable),U.getOpt(j).each(ht.enable)}}),ps(),Pt("url-input-events",[ve(P,Y)])])})},kN=(t,s)=>{const a=Kc(t.icon,s.icons);return Ql.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[rr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:i=>at(i,td,{name:"alert-banner",value:t.url}),buttonBehaviours:De([PS()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},_N=(t,s)=>{t.dom.checked=s},BZ=t=>t.dom.checked,D2=(t,s,a)=>{const i=w=>(w.element.dom.click(),k.some(!0)),d=Cn.parts.field({factory:{sketch:en},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:De([cl.self(),ht.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{ma(w.element).each(E=>Wo(E,"tox-checkbox--disabled"))},onEnabled:w=>{ma(w.element).each(E=>mn(E,"tox-checkbox--disabled"))}}),So.config({}),bt.config({}),_3(a,BZ,_N),ct.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Pt("checkbox-events",[ve(Qm(),(w,E)=>{at(w,Ja,{name:t.name})})])])}),g=Cn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[ko(s.translate(t.label))],behaviours:De([g2.config({})])}),p=w=>Yc(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),C=yn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Cn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:De([ht.config({disabled:()=>!t.enabled||s.isDisabled()}),ps()])})},TH=t=>t.presets==="presentation"?Ql.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Ql.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:De([So.config({}),bt.config({})])}),vs=t=>(s,a,i,d)=>Ze(a,"name").fold(()=>t(a,d,k.none()),g=>s.field(g,t(a,d,Ze(i,g)))),kH=t=>(s,a,i,d)=>{const g=Vn(a,{source:"dynamic"});return vs(t)(s,g,i,d)},_H={bar:vs((t,s)=>m7(t,s.shared)),collection:vs((t,s,a)=>y7(t,s.shared.providers,a)),alertbanner:vs((t,s)=>kN(t,s.shared.providers)),input:vs((t,s,a)=>GL(t,s.shared.providers,a)),textarea:vs((t,s,a)=>V3(t,s.shared.providers,a)),label:vs((t,s)=>NL(t,s.shared)),iframe:kH((t,s,a)=>Lx(t,s.shared.providers,a)),button:vs((t,s)=>eE(t,s.shared.providers)),checkbox:vs((t,s,a)=>D2(t,s.shared.providers,a)),colorinput:vs((t,s,a)=>T7(t,s.shared,s.colorinput,a)),colorpicker:vs((t,s,a)=>kL(t,s.shared.providers,a)),dropzone:vs((t,s,a)=>Oa(t,s.shared.providers,a)),grid:vs((t,s)=>_5(t,s.shared)),listbox:vs((t,s,a)=>I3(t,s,a)),selectbox:vs((t,s,a)=>Z5(t,s.shared.providers,a)),sizeinput:vs((t,s)=>jL(t,s.shared.providers)),slider:vs((t,s,a)=>K5(t,s.shared.providers,a)),urlinput:vs((t,s,a)=>TN(t,s,s.urlinput,a)),customeditor:vs(T5),htmlpanel:vs(TH),imagepreview:vs((t,s,a)=>P5(t,a)),table:vs((t,s)=>Y5(t,s.shared.providers)),tree:vs((t,s)=>lN(t,s)),panel:vs((t,s)=>U5(t,s))},OH={field:(t,s)=>s,record:Q([])},J3=(t,s,a,i)=>{const d=Vn(i,{shared:{interpreter:g=>R2(t,g,a,d)}});return R2(t,s,a,d)},R2=(t,s,a,i)=>Ze(_H,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),Q3=(t,s,a)=>R2(OH,t,s,a),ig="layout-inset",eO=t=>t.x,ON=(t,s)=>t.x+t.width/2-s.width/2,tO=(t,s)=>t.x+t.width-s.width,nO=t=>t.y,tE=(t,s)=>t.y+t.height-s.height,AN=(t,s)=>t.y+t.height/2-s.height/2,nE=(t,s,a)=>io(tO(t,s),tE(t,s),a.insetSouthwest(),Jg(),"southwest",In(t,{right:0,bottom:3}),ig),oE=(t,s,a)=>io(eO(t),tE(t,s),a.insetSoutheast(),Vu(),"southeast",In(t,{left:1,bottom:3}),ig),M2=(t,s,a)=>io(tO(t,s),nO(t),a.insetNorthwest(),O1(),"northwest",In(t,{right:0,top:2}),ig),B2=(t,s,a)=>io(eO(t),nO(t),a.insetNortheast(),_1(),"northeast",In(t,{left:1,top:2}),ig),il=(t,s,a)=>io(ON(t,s),nO(t),a.insetNorth(),w0(),"north",In(t,{top:2}),ig),N2=(t,s,a)=>io(ON(t,s),tE(t,s),a.insetSouth(),A1(),"south",In(t,{bottom:3}),ig),DN=(t,s,a)=>io(tO(t,s),AN(t,s),a.insetEast(),sw(),"east",In(t,{right:0}),ig),RN=(t,s,a)=>io(eO(t),AN(t,s),a.insetWest(),ow(),"west",In(t,{left:1}),ig),AH=t=>{switch(t){case"north":return il;case"northeast":return B2;case"northwest":return M2;case"south":return N2;case"southeast":return oE;case"southwest":return nE;case"east":return DN;case"west":return RN}},MN=(t,s,a,i,d)=>bw(i).map(AH).getOr(il)(t,s,a,i,d),BN=t=>{switch(t){case"north":return N2;case"northeast":return oE;case"northwest":return nE;case"south":return il;case"southeast":return B2;case"southwest":return M2;case"east":return RN;case"west":return DN}},DH=(t,s,a,i,d)=>bw(i).map(BN).getOr(il)(t,s,a,i,d),P2={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},RH=(t,s,a)=>{const d={maxHeightFunction:Gd()},g=()=>({type:"node",root:Gs(ur(t())),node:k.from(t()),bubble:$l(12,12,P2),layouts:{onRtl:()=>[B2],onLtr:()=>[M2]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:$l(-12,12,P2),layouts:{onRtl:()=>[Ss,ds,es],onLtr:()=>[ds,Ss,es]},overrides:d});return()=>a()?g():p()},MH=(t,s,a,i)=>{const g={maxHeightFunction:Gd()},p=()=>({type:"node",root:Gs(ur(s())),node:k.from(s()),bubble:$l(12,12,P2),layouts:{onRtl:()=>[il],onLtr:()=>[il]},overrides:g}),C=()=>t?{type:"node",root:Gs(ur(s())),node:k.from(s()),bubble:$l(0,-bl(s()),P2),layouts:{onRtl:()=>[zn],onLtr:()=>[zn]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:$l(0,0,P2),layouts:{onRtl:()=>[zn],onLtr:()=>[zn]},overrides:g};return()=>i()?p():C()},BH=(t,s,a)=>{const i=()=>({type:"node",root:Gs(ur(t())),node:k.from(t()),layouts:{onRtl:()=>[il],onLtr:()=>[il]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[es],onLtr:()=>[es]}});return()=>a()?i():d()},NH=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],p={firstCell:te.fromDom(d),lastCell:te.fromDom(g)};return k.some(p)}return k.some(mh.range(te.fromDom(a.startContainer),a.startOffset,te.fromDom(a.endContainer),a.endOffset))}}),NN=t=>s=>({type:"node",root:t(),node:s}),PH=(t,s,a,i)=>{const d=kb(t),g=()=>te.fromDom(t.getBody()),p=()=>te.fromDom(t.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:RH(p,s,C),inlineBottomDialog:MH(t.inline,p,a,C),banner:BH(p,s,C),cursor:NH(t,g),node:NN(g)}},PN=t=>(s,a)=>{iB(t)(s,a)},$H=t=>()=>QM(t),$N=t=>s=>Hb(t,s),FN=t=>s=>JM(t,s),IN=t=>({colorPicker:PN(t),hasCustomColors:$H(t),getColors:$N(t),getColorCols:FN(t)}),FH=t=>()=>kR(t),LN=t=>({isDraggableModal:FH(t)}),HN=t=>{const s=gt(Vy(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},VN=t=>oc(t,"items"),oO=t=>oc(t,"format"),zN=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],IH=t=>wn(t,"items"),ou=t=>wn(t,"block"),sE=t=>wn(t,"inline"),rE=t=>wn(t,"selector"),UN=t=>eo(t,(s,a)=>{if(IH(a)){const i=UN(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(sE(a)||ou(a)||rE(a)){const d=`custom-${xn(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),sO=(t,s)=>{const a=UN(s),i=d=>{qe(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},WN=t=>yR(t).map(s=>{const a=sO(t,s);return LS(t)?zN.concat(a):a}).getOr(zN),rO=t=>{const s=bo(t);return s.length===1&&Io(s,"title")},aO=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),aE=(t,s,a,i)=>{const d=w=>aO(w,a,i),g=w=>{const E=C(w.items);return{...w,type:"submenu",getStyleItems:Q(E)}},p=w=>{const E=xn(w.name)?w.name:je(w.title),_=`custom-${E}`,D={...w,type:"formatter",format:_,isSelected:a(_),getStylePreview:i(_)};return t.formatter.register(E,D),D},C=w=>we(w,E=>VN(E)?g(E):oO(E)?d(E):rO(E)?{...E,type:"separator"}:p(E));return C(s)},LH=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const w=t.formatter.get(C);return w!==void 0?k.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):k.none()},i=gt([]),d=gt([]),g=gt(!1);return t.on("PreInit",C=>{const w=WN(t),E=aE(t,w,s,a);i.set(E)}),t.on("addStyleModifications",C=>{const w=aE(t,C.items,s,a);d.set(w),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),w=d.get();return C.concat(w)}}},ZN=t=>ir(t)&&t.nodeType===1,jN=eu.trim,cE=t=>s=>!!(ZN(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),HH=cE("true"),VH=cE("false"),cO=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),zH=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return HH(s)}return!1},UH=(t,s)=>we(Ir(te.fromDom(s),t),a=>a.dom),iO=t=>t.innerText||t.textContent,GN=t=>t.id?t.id:je("h"),WH=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,ZH=t=>WH(t)&&KN(t),qN=t=>t&&/^(H[1-6])$/.test(t.nodeName),KN=t=>zH(t)&&!VH(t),YN=t=>qN(t)&&KN(t),su=t=>qN(t)?parseInt(t.nodeName.substr(1),10):0,lO=t=>{var s;const a=GN(t),i=()=>{t.id=a};return cO("header",(s=iO(t))!==null&&s!==void 0?s:"","#"+a,su(t),i)},jH=t=>{const s=t.id||t.name,a=iO(t);return cO("anchor",a||"#"+s,"#"+s,0,K)},GH=t=>we(Yn(t,YN),lO),qH=t=>we(Yn(t,ZH),jH),KH=t=>UH("h1,h2,h3,h4,h5,h6,a:not([href])",t),YH=t=>jN(t.title).length>0,XN={find:t=>{const s=KH(t);return Yn(GH(s).concat(qH(s)),YH)}},uO="tinymce-url-history",JH=5,ar=t=>xn(t)&&/^https?/.test(t),dO=t=>ml(t)&&t.length<=JH&&hu(t,ar),JN=t=>Bc(t)&&jr(t,s=>!dO(s)).isNone(),$2=()=>{const t=Xf.getItem(uO);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+uO+" was not valid JSON",a),{};throw a}return JN(s)?s:(console.log("Local storage "+uO+" was not valid format",s),{})},QH=t=>{if(!JN(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Xf.setItem(uO,JSON.stringify(t))},eV=t=>{const s=$2();return Ze(s,t).getOr([])},tV=(t,s)=>{if(!ar(t))return;const a=$2(),i=Ze(a,s).getOr([]),d=Yn(i,g=>g!==t);a[s]=[t].concat(d).slice(0,JH),QH(a)},QN=t=>!!t,nV=t=>vo(eu.makeMap(t,/[, ]/),QN),mO=t=>k.from(G_(t)),oV=t=>{const s=k.from(VS(t)).filter(QN).map(nV);return mO(t).fold(An,a=>s.fold(pt,i=>bo(i).length>0?i:!1))},sV=(t,s)=>{const a=oV(t);return fl(a)?a?mO(t):k.none():a[s]?mO(t):k.none()},eP=(t,s)=>sV(t,s).map(a=>i=>Vs.nu(d=>{const g=(C,w)=>{if(!xn(C))throw new Error("Expected value to be string");if(w!==void 0&&!Bc(w))throw new Error("Expected meta to be a object");d({value:C,meta:w})},p={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};a.call(t,g,i.value,p)})),F2=t=>k.from(t).filter(xn).getOrUndefined(),rV=t=>xR(t)?k.some({targets:XN.find(t.getBody()),anchorTop:F2(ER(t)),anchorBottom:F2(TR(t))}):k.none(),tP=t=>k.from(q_(t)),aV=t=>({getHistory:eV,addToHistory:tV,getLinkInformation:()=>rV(t),getValidationHandler:()=>tP(t),getUrlPicker:s=>eP(t,s)}),nP=(t,s,a,i)=>{const d=gt(!1),g=HN(s),p={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:zr.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},C=aV(s),w=LH(s),E=IN(s),_=LN(s),D=()=>d.get(),M=ne=>d.set(ne),P={shared:{providers:p,anchors:PH(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:w,colorinput:E,dialog:_,isContextMenuOpen:D,setContextMenuState:M},I={...P,shared:{...P.shared,interpreter:ne=>Q3(ne,{},I),getSink:t.popup}},U={...P,shared:{...P.shared,interpreter:ne=>Q3(ne,{},U),getSink:t.dialog}};return{popup:I,dialog:U}},cV=(t,s,a)=>{const i=(ke,Ne)=>{qe([s,...a],Ue=>{Ue.broadcastEvent(ke,Ne)})},d=(ke,Ne)=>{qe([s,...a],Ue=>{Ue.broadcastOn([ke],Ne)})},g=ke=>d(Vl(),{target:ke.target}),p=Rv(),C=Fr(p,"touchstart",g),w=Fr(p,"touchmove",ke=>i(nf(),ke)),E=Fr(p,"touchend",ke=>i(Jv(),ke)),_=Fr(p,"mousedown",g),D=Fr(p,"mouseup",ke=>{ke.raw.button===0&&d(X1(),{target:ke.target})}),M=ke=>d(Vl(),{target:te.fromDom(ke.target)}),P=ke=>{ke.button===0&&d(X1(),{target:te.fromDom(ke.target)})},I=()=>{qe(t.editorManager.get(),ke=>{t!==ke&&ke.dispatch("DismissPopups",{relatedTarget:t})})},U=ke=>i(Pd(),sh(ke)),ne=ke=>{d(nm(),{}),i(kl(),sh(ke))},Y=ur(te.fromDom(t.getElement())),j=jd(Y,"scroll",ke=>{requestAnimationFrame(()=>{const Ne=t.getContainer();if(Ne!=null){const Zt=Gh(t,s.element).map(ot=>[ot.element,...ot.others]).getOr([]);Ba(Zt,ot=>$n(ot,ke.target))&&(t.dispatch("ElementScroll",{target:ke.target.dom}),i(t1(),ke))}})}),pe=()=>d(nm(),{}),ce=ke=>{ke.state&&d(Vl(),{target:te.fromDom(t.getContainer())})},Re=ke=>{d(Vl(),{target:te.fromDom(ke.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",M),t.on("tap",M),t.on("mouseup",P),t.on("mousedown",I),t.on("ScrollWindow",U),t.on("ResizeWindow",ne),t.on("ResizeEditor",pe),t.on("AfterProgressState",ce),t.on("DismissPopups",Re)}),t.on("remove",()=>{t.off("click",M),t.off("tap",M),t.off("mouseup",P),t.off("mousedown",I),t.off("ScrollWindow",U),t.off("ResizeWindow",ne),t.off("ResizeEditor",pe),t.off("AfterProgressState",ce),t.off("DismissPopups",Re),_.unbind(),C.unbind(),w.unbind(),E.unbind(),D.unbind(),j.unbind()}),t.on("detach",()=>{qe([s,...a],Zw),qe([s,...a],ke=>ke.destroy())})},Bs=vy,ru=n_,NZ=Q([oe("shell",!1),me("makeItem"),oe("setupItem",K),Cc.field("listBehaviours",[xt])]),iV=wc({name:"items",overrides:()=>({behaviours:De([xt.config({})])})}),lV=Q([iV]),uV=Q("CustomList"),oP=(t,s,a,i)=>{const d=(C,w)=>{p(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const _=xt.contents(E),D=w.length,M=D-_.length,P=M>0?Lo(M,()=>t.makeItem()):[],I=_.slice(D);qe(I,ne=>xt.remove(E,ne)),qe(P,ne=>xt.append(E,ne));const U=xt.contents(E);qe(U,(ne,Y)=>{t.setupItem(C,ne,w[Y],Y)})})},g=t.shell?{behaviours:[xt.config({})],components:[]}:{behaviours:[],components:s},p=C=>t.shell?k.some(C):Rn(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:_o(t.listBehaviours,g.behaviours),apis:{setItems:d}}},iE=ns({name:uV(),configFields:NZ(),partFields:lV(),factory:oP,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Kb=Q([me("dom"),oe("shell",!0),ts("toolbarBehaviours",[xt])]),sP=Q([wc({name:"groups",overrides:()=>({behaviours:De([xt.config({})])})})]),dV=(t,s,a,i)=>{const d=(C,w)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{xt.set(E,w)})},g=C=>t.shell?k.some(C):Rn(C,t,"groups"),p=t.shell?{behaviours:[xt.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:_o(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},au=ns({name:"Toolbar",configFields:Kb(),partFields:sP(),factory:dV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),mV=K,fV=An,lE=Q([]);var rP=Object.freeze({__proto__:null,setup:mV,isDocked:fV,getBehaviours:lE});const fO=t=>(Na(Cs(t,"position"),"fixed")?k.none():wv(t)).orThunk(()=>{const i=te.fromTag("span");return ci(t).bind(d=>{Ia(d,i);const g=wv(i);return Ic(i),g})}),aP=t=>fO(t).map(Gr).getOrThunk(()=>ao(0,0)),gV=(t,s)=>{const a=t.element;Wo(a,s.transitionClass),mn(a,s.fadeOutClass),Wo(a,s.fadeInClass),s.onShow(t)},hV=(t,s)=>{const a=t.element;Wo(a,s.transitionClass),mn(a,s.fadeInClass),Wo(a,s.fadeOutClass),s.onHide(t)},cP=(t,s)=>t.y<s.bottom&&t.bottom>s.y,iP=(t,s)=>t.y>=s.y,I2=(t,s)=>t.bottom<=s.bottom,gO=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),Yb=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),hO=t=>t.box.x-t.win.x,pO=(t,s,a)=>{const i=s.win,d=s.box,g=hO(s);return Ws(t,p=>{switch(p){case"bottom":return I2(d,a.bounds)?k.none():k.some(Yb(i,g,a));case"top":return iP(d,a.bounds)?k.none():k.some(gO(i,g,a));default:return k.none()}}).getOr({location:"no-dock"})},L2=(t,s,a)=>hu(t,i=>{switch(i){case"bottom":return I2(s,a.bounds);case"top":return iP(s,a.bounds)}}),lP=(t,s)=>{const a=s.optScrollEnv.fold(Q(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return ao(t.bounds.x,a)},pV=(t,s)=>{const a=s.optScrollEnv.fold(Q(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return ao(t.x,a)},uE=(t,s,a)=>a.getInitialPos().map(i=>{const d=lP(i,s);return{box:cs(d.left,d.top,Or(t),Go(t)),location:i.location}}),bO=(t,s,a,i,d)=>{const g=pV(s,a),p=cs(g.left,g.top,s.width,s.height);i.setInitialPos({style:_r(t),position:Te(t,"position")||"static",bounds:p,location:d.location})},uP=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>bO(t,s,a,i,d),()=>K)},dP=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const g=fO(t).getOr(qs()),p=Xn(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return k.some({morph:"absolute",positionCss:Ea("absolute",Ze(i.style,"left").map(w=>s.x-p.x),Ze(i.style,"top").map(w=>s.y-p.y+C),Ze(i.style,"right").map(w=>p.right-s.right),Ze(i.style,"bottom").map(w=>p.bottom-s.bottom))});default:return k.none()}}),vO=(t,s,a)=>uE(t,s,a).filter(({box:i})=>L2(a.getModes(),i,s)).bind(({box:i})=>dP(t,i,a)),Xb=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:Ea("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:Ea("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},bV=(t,s,a)=>{const i=Xn(t),d=Dr(),g=pO(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(bO(t,i,s,a,g),Xb(g)):k.none()},vV=(t,s,a)=>vO(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>uE(t,s,a)).bind(({box:i,location:d})=>{const g=Dr(),p=hO({win:g,box:i}),C=d==="top"?gO(g,p,s):Yb(g,p,s);return Xb(C)})),Jb=(t,s,a)=>{const i=t.element;return Na(Cs(i,"position"),"fixed")?vV(i,s,a):bV(i,s,a)},mP=(t,s,a)=>{const i=t.element;return uE(i,s,a).bind(({box:d})=>dP(i,d,a))},yV=(t,s,a,i)=>{const d=Xn(t),g=Dr(),p=hO({win:g,box:d}),C=i(g,p,s);return C.location==="bottom"||C.location==="top"?(uP(t,d,s,a,C),Xb(C)):k.none()},yO=(t,s,a)=>{a.setDocked(!1),qe(["left","right","top","bottom","position"],i=>sn(t.element,i)),s.onUndocked(t)},H2=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),D0(t.element,i),(d?s.onDocked:s.onUndocked)(t)},dE=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const C=cP(p,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Ki(t.element,[g.fadeOutClass]),g.onHide(t)):(C?gV:hV)(t,g))})})},fP=(t,s,a,i,d)=>{dE(t,s,a,i,!0),H2(t,s,a,d.positionCss)},CV=(t,s,a,i,d)=>{switch(d.morph){case"static":return yO(t,s,a);case"absolute":return H2(t,s,a,d.positionCss);case"fixed":return fP(t,s,a,i,d)}},wV=(t,s,a)=>{const i=s.lazyViewport(t);dE(t,s,a,i),Jb(t,i,a).each(d=>{CV(t,s,a,i,d)})},CO=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);mP(t,d,a).each(g=>{switch(g.morph){case"static":{yO(t,s,a);break}case"absolute":{H2(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Ds(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),mE(t,s,a)},mE=(t,s,a)=>{t.getSystem().isConnected()&&wV(t,s,a)},gP=(t,s,a)=>{a.isDocked()&&CO(t,s,a)},hP=t=>(s,a,i)=>{const d=a.lazyViewport(s);yV(s.element,d,i,t).each(p=>{fP(s,a,i,d,p)})},SV=hP(gO),xV=hP(Yb);var TV=Object.freeze({__proto__:null,refresh:mE,reset:gP,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:SV,forceDockToBottom:xV}),kV=Object.freeze({__proto__:null,events:(t,s)=>Fn([cf(Ig(),(a,i)=>{t.contextual.each(d=>{Mr(a.element,d.transitionClass)&&(Ds(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),ve(Pd(),(a,i)=>{mE(a,t,s)}),ve(t1(),(a,i)=>{mE(a,t,s)}),ve(kl(),(a,i)=>{gP(a,t,s)})])}),_V=[Bo("contextual",[is("fadeInClass"),is("fadeOutClass"),is("transitionClass"),fc("lazyContext"),zt("onShow"),zt("onShown"),zt("onHide"),zt("onHidden")]),To("lazyViewport",()=>({bounds:Dr(),optScrollEnv:k.none()})),Km("modes",["top","bottom"],fo),zt("onDocked"),zt("onUndocked")],bP=Object.freeze({__proto__:null,init:t=>{const s=gt(!1),a=gt(!0),i=Kn(),d=gt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return wa({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Po=Rs({fields:_V,name:"docking",active:kV,apis:TV,state:bP}),wO=Q(je("toolbar-height-change")),ad={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},vP="tox-tinymce--toolbar-sticky-on",yP="tox-tinymce--toolbar-sticky-off",OV=(t,s)=>{const a=$a(s),d=yd(s).dom.innerHeight,g=pa(a),p=te.fromDom(t.elm),C=ic(p),w=Go(p),E=C.y,_=E+w,D=Gr(s),M=Go(s),P=D.top,I=P+M,U=Math.abs(P-g.top)<2,ne=Math.abs(I-(g.top+d))<2;if(U&&E<I)Dv(g.left,E-M,a);else if(ne&&_>P){const Y=E-d+w+M;Dv(g.left,Y,a)}},gE=(t,s)=>Io(Po.getModes(t),s),SO=t=>{const s=i=>bl(i)+(parseInt(Te(i,"margin-top"),10)||0)+(parseInt(Te(i,"margin-bottom"),10)||0),a=t.element;ma(a).each(i=>{const d="padding-"+Po.getModes(t)[0];if(Po.isDocked(t)){const g=Or(i);Rt(a,"width",g+"px"),Rt(i,d,s(a)+"px")}else sn(a,"width"),sn(i,d)})},CP=(t,s)=>{s?(mn(t,ad.fadeOutClass),Ki(t,[ad.transitionClass,ad.fadeInClass])):(mn(t,ad.fadeInClass),Ki(t,[ad.fadeOutClass,ad.transitionClass]))},xO=(t,s)=>{const a=te.fromDom(t.getContainer());s?(Wo(a,vP),mn(a,yP)):(Wo(a,yP),mn(a,vP))},hE=(t,s)=>{const a=$a(s);Ji(a).filter(i=>!$n(s,i)).filter(i=>$n(i,te.fromDom(a.dom.body))||ac(t,i)).each(()=>wo(s))},pE=(t,s)=>Uc(t).orThunk(()=>s().toOptional().bind(a=>Uc(a.element))),AV=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Po.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(SO)}),t.on("SkinLoaded",()=>{a().each(i=>{Po.isDocked(i)?Po.reset(i):Po.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(Po.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{Po.refresh(d);const g=d.element;Oo(g)&&OV(i,g)})}),t.on("PostRender",()=>{xO(t,!1)})},DV=t=>t().map(Po.isDocked).getOr(!1),RV=()=>[Pr.config({channels:{[wO()]:{onReceive:SO}}})],wP=(t,s)=>{const a=Kn(),i=s.getSink,d=C=>{i().each(w=>C(w.element))},g=C=>{t.inline||SO(C),xO(t,Po.isDocked(C)),C.getSystem().broadcastOn([nm()],{}),i().each(w=>w.getSystem().broadcastOn([nm()],{}))},p=t.inline?[]:RV();return[bt.config({}),Po.config({contextual:{lazyContext:C=>{const w=bl(C.element),E=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(E).map(_=>{const D=Xn(te.fromDom(_));return Gh(t,C.element).fold(()=>{const P=D.height-w,I=D.y+(gE(C,"top")?0:w);return cs(D.x,I,D.width,P)},P=>{const I=Mv(D,kc(P)),U=gE(C,"top")?I.y:I.y+w;return cs(I.x,U,I.width,I.height-w)})})},onShow:()=>{d(C=>CP(C,!0))},onShown:C=>{d(w=>Ds(w,[ad.transitionClass,ad.fadeInClass])),a.get().each(w=>{hE(C.element,w),a.clear()})},onHide:C=>{pE(C.element,i).fold(a.clear,a.set),d(w=>CP(w,!1))},onHidden:()=>{d(C=>Ds(C,[ad.transitionClass]))},...ad},lazyViewport:C=>Gh(t,C.element).fold(()=>{const E=Dr(),_=CR(t),D=E.y+(gE(C,"top")?_:0),M=E.height-(gE(C,"bottom")?_:0);return{bounds:cs(E.x,D,E.width,M),optScrollEnv:k.none()}},E=>({bounds:kc(E),optScrollEnv:k.some({currentScrollTop:E.element.dom.scrollTop,scrollElmTop:Gr(E.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var Qb=Object.freeze({__proto__:null,setup:AV,isDocked:DV,getBehaviours:wP});const bE=t=>{const s=t.editor,a=t.sticky?wP:lE;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:De(a(s,t.sharedBackstage))}},EO=lt([No,ta("items",Dd([jv([Ky,Va("items",fo)]),fo]))].concat(Mb)),MV=t=>kn("GroupToolbarButton",EO,t),BV=[Js("text"),Js("tooltip"),Js("icon"),Qs("search",!1,Dd([jm,lt([Js("placeholder")])],t=>fl(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),fc("fetch"),To("onSetup",()=>K)],SP=lt([No,...BV]),xP=t=>kn("menubutton",SP,t),NV=lt([No,Rb,Xc,vm,l4,NI,zh,va("presets","normal",["normal","color","listpreview"]),XR(1),Ab,Db]),PV=t=>kn("SplitButton",NV,t);var TO=Zo({factory:(t,s)=>{const a=(d,g)=>{const p=we(g,C=>{const w={type:"menubutton",text:C.text,fetch:_=>{_(C.getItems())}},E=xP(w).mapError(_=>qm(_)).getOrDie();return _2(E,"tox-mbtn",s.backstage,k.some("menuitem"))});xt.set(d,p)},i={focus:ct.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:De([xt.config({}),Pt("menubar-events",[Gn(d=>{t.onSetup(d)}),ve(Tl(),(d,g)=>{go(d.element,".tox-mbtn--active").each(p=>{nr(g.event.target,".tox-mbtn").each(C=>{$n(p,C)||d.getSystem().getByDom(p).each(w=>{d.getSystem().getByDom(C).each(E=>{Jc.expand(E),Jc.close(w),bt.focus(E)})})})})}),ve(e1(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Jc.isOpen(p)&&(Jc.expand(C),Jc.close(p))})})})]),ct.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),So.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[me("dom"),me("uid"),me("onEscape"),me("backstage"),oe("onSetup",K)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const EP="⚡️Upgrade",TP="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",$V=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:TP,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:EP}}]}),kP="container",vE=[ts("slotBehaviours",[])],V2=t=>"<alloy.field."+t+">",FV=t=>{const s=(()=>{const g=[];return{slot:(C,w)=>(g.push(C),cm(kP,V2(C),w)),record:Q(g)}})(),a=t(s),i=s.record(),d=we(i,g=>Es({name:g,pname:V2(g)}));return db(kP,vE,d,IV,a)},IV=(t,s)=>{const a=U=>aS(t),i=(U,ne)=>Rn(U,t,ne),d=(U,ne)=>(Y,j)=>Rn(Y,t,j).map(pe=>U(pe,j)).getOr(ne),g=U=>(ne,Y)=>{qe(Y,j=>U(ne,j))},p=(U,ne)=>dr(U.element,"aria-hidden")!=="true",C=(U,ne)=>{if(!p(U)){const Y=U.element;sn(Y,"display"),zo(Y,"aria-hidden"),at(U,Hg(),{name:ne,visible:!0})}},w=(U,ne)=>{if(p(U)){const Y=U.element;Rt(Y,"display","none"),Vt(Y,"aria-hidden","true"),at(U,Hg(),{name:ne,visible:!1})}},E=d(p,!1),_=d(w),D=g(_),M=U=>D(U,a()),P=d(C),I={getSlotNames:a,getSlot:i,isShowing:E,hideSlot:_,hideAllSlots:M,showSlot:P};return{uid:t.uid,dom:t.dom,components:s,behaviours:Pf(t.slotBehaviours),apis:I}},Ur={...vo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>lf(t)),sketch:FV},kO=lt([Xc,Rb,To("onShow",K),To("onHide",K),zh]),_O=t=>kn("sidebar",kO,t),OO=t=>{const{sidebars:s}=t.ui.registry.getAll();qe(bo(s),a=>{const i=s[a],d=()=>Na(k.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},LV=t=>({element:()=>t.element.dom}),AO=(t,s)=>{const a=we(bo(s),i=>{const d=s[i],g=vn(_O(d));return{name:i,getApi:LV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return we(a,i=>{const d=gt(K);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Jy.unnamedEvents([Kf(i,d),ym(i,d),ve(Hg(),(g,p)=>{const C=p.event;Bt(a,E=>E.name===C.name).each(E=>{(C.visible?E.onShow:E.onHide)(E.getApi(g))})})])})})},HV=t=>Ur.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:AO(s,t),slotBehaviours:Jy.unnamedEvents([Gn(a=>Ur.hideAllSlots(a))])})),VV=(t,s,a)=>{Kt.getCurrent(t).each(d=>{xt.set(d,[HV(s)]);const g=a==null?void 0:a.toLowerCase();xn(g)&&wn(s,g)&&Kt.getCurrent(d).each(p=>{Ur.showSlot(p,g),Aa.immediateGrow(d),sn(d.element,"width"),yE(t.element,"region")})})},yE=(t,s)=>{Vt(t,"role",s)},z2=(t,s)=>{Kt.getCurrent(t).each(i=>{Kt.getCurrent(i).each(g=>{Aa.hasGrown(i)?Ur.isShowing(g,s)?(Aa.shrink(i),yE(t.element,"presentation")):(Ur.hideAllSlots(g),Ur.showSlot(g,s),yE(t.element,"region")):(Ur.hideAllSlots(g),Ur.showSlot(g,s),Aa.grow(i),yE(t.element,"region"))})})},zV=t=>Kt.getCurrent(t).bind(a=>Aa.isGrowing(a)||Aa.hasGrown(a)?Kt.getCurrent(a).bind(g=>Bt(Ur.getSlotNames(g),p=>Ur.isShowing(g,p))):k.none()),DO=je("FixSizeEvent"),RO=je("AutoSizeEvent"),HZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:De([So.config({}),bt.config({}),Aa.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Kt.getCurrent(s).each(Ur.hideAllSlots),hn(s,RO)},onGrown:s=>{hn(s,RO)},onStartGrow:s=>{at(s,DO,{width:Cs(s.element,"width").getOr("")})},onStartShrink:s=>{at(s,DO,{width:Or(s.element)+"px"})}}),xt.config({}),Kt.config({find:s=>{const a=xt.contents(s);return ia(a)}})])}],behaviours:De([cl.childAt(0),Pt("sidebar-sliding-events",[ve(DO,(s,a)=>{Rt(s.element,"width",a.event.width)}),ve(RO,(s,a)=>{sn(s.element,"width")})])])});var _P=Object.freeze({__proto__:null,block:(t,s,a,i)=>{Vt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=De([ct.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),bt.config({})]),p=i(d,g),C=d.getSystem().build(p);xt.append(d,bc(C)),C.hasConfigured(ct)&&s.focus&&ct.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>xt.remove(d,C))},unblock:(t,s,a)=>{zo(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),WV=[To("getRoot",k.none),Fs("focus",!0),zt("onBlock"),zt("onUnblock")],ZV=Object.freeze({__proto__:null,init:()=>{const t=yw(),s=a=>{t.set({destroy:a})};return wa({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const cu=Rs({fields:WV,name:"blocking",apis:_P,state:ZV}),jV=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return eo(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},OP=t=>Array.prototype.slice.call(t.dom.classList,0),lg=t=>{const s=te.fromHtml(t),a=ii(s),i=jV(s),d=OP(s),g=a.length===0?{}:{innerHtml:Fd(s)};return{tag:Pc(s),classes:d,attributes:i,...g}},GV=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:lg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),AP=t=>Kt.getCurrent(t).each(s=>wo(s.element)),UZ=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;k.from(t.iframeElement).map(te.fromDom).each(d=>{s?(jo(d,a).each(g=>Vt(d,i,g)),Vt(d,a,-1)):(zo(d,a),jo(d,i).each(g=>{Vt(d,a,g),zo(d,i)}))})},WZ=(t,s,a,i)=>{const d=s.element;if(UZ(t,a),a)cu.block(s,GV(i)),sn(d,"display"),zo(d,"aria-hidden"),t.hasFocus()&&AP(s);else{const g=Kt.getCurrent(s).exists(p=>wf(p.element));cu.unblock(s),Rt(d,"display","none"),Vt(d,"aria-hidden","true"),g&&t.focus()}},DP=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:De([xt.config({}),cu.config({focus:!1}),Kt.config({find:s=>ia(s.components())})]),components:[]}),RP=t=>t.type==="focusin",qV=t=>RP(t)?(t.composed?ia(t.composedPath()):k.from(t.target)).map(te.fromDom).filter(Pn).exists(a=>Mr(a,"mce-pastebin")):!1,KV=(t,s,a)=>{const i=gt(!1),d=Kn(),g=C=>{i.get()&&!qV(C)&&(C.preventDefault(),AP(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const p=C=>{C!==i.get()&&(i.set(C),WZ(t,s(),C,a.providers),Nn(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),gl(C.time)){const w=NS.setEditorTimeout(t,()=>p(C.state),C.time);d.set(w)}else p(C.state),d.clear()})},ni=(t,s)=>eo(t,(d,g)=>s(g,d.len).fold(Q(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,MO=(t,s,a)=>({within:t,extra:s,withinWidth:a}),BO=(t,s,a)=>{const i=ni(t,(C,w)=>{const E=a(C);return k.some({element:C,start:w,finish:w+E,width:E})}),d=Yn(i,C=>C.finish<=s),g=rs(d,(C,w)=>C+w.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},U2=t=>we(t,s=>s.element),YV=(t,s,a)=>{const i=U2(t.concat(s));return MO(i,[],a)},W2=(t,s,a,i)=>{const d=U2(t).concat([a]);return MO(d,U2(s),i)},XV=(t,s,a)=>MO(U2(t),[],a),CE=(t,s,a)=>{const i=BO(s,t,a);return i.extra.length===0?k.some(i):k.none()},JV=(t,s,a,i)=>{const d=CE(t,s,a).getOrThunk(()=>BO(s,t-a(i),a)),g=d.within,p=d.extra,C=d.withinWidth;return p.length===1&&p[0].width<=a(i)?YV(g,p,C):p.length>=1?W2(g,p,i,C):XV(g,p,C)},Z2=(t,s)=>{const a=we(s,i=>bc(i));au.setGroups(t,a)},QV=t=>Ws(t,s=>Uc(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),MP=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Ku(t,s,"primary"),g=lo.getCoupled(t,"overflowGroup");Rt(d.element,"visibility","hidden");const p=i.concat([g]),C=QV(p);a([]),Z2(d,p);const w=Or(d.element),E=JV(w,s.builtGroups.get(),_=>Or(_.element),g);E.extra.length===0?(xt.remove(d,g),a([])):(Z2(d,E.within),a(E.extra)),sn(d.element,"visibility"),wd(d.element),C.each(bt.focus)},oi=Q([ts("splitToolbarBehaviours",[lo]),Rr("builtGroups",()=>gt([]))]),e9=Q([Wd(["overflowToggledClass"]),Ou("getOverflowBounds"),me("lazySink"),Rr("overflowGroups",()=>gt([])),zt("onOpened"),zt("onClosed")].concat(oi())),wE=Q([Es({factory:au,schema:Kb(),name:"primary"}),jc({schema:Kb(),name:"overflow"}),jc({name:"overflow-button"}),jc({name:"overflow-group"})]),SE=Q((t,s)=>{gC(t,Math.floor(s))}),BP=Q([Wd(["toggledClass"]),me("lazySink"),fc("fetch"),Ou("getBounds"),Bo("fireDismissalEventInstead",[oe("event",ji())]),Fl(),zt("onToggled")]),t9=Q([jc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:De([Lt.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),jc({factory:au,schema:Kb(),name:"toolbar",overrides:t=>({toolbarBehaviours:De([ct.config({mode:"cyclic",onEscape:s=>(Rn(s,t,"button").each(bt.focus),k.none())})])})})]),j2=Kn(),n9=(t,s)=>{j2.set(!0),NO(t,s),j2.clear()},NO=(t,s)=>{const a=lo.getCoupled(t,"toolbarSandbox");Xt.isOpen(a)?Xt.close(a):Xt.open(a,s.toolbar())},PO=(t,s,a,i)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();fs.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:SE()}}},d)},NP=(t,s,a,i,d)=>{au.setGroups(s,d),PO(t,s,a,i),Lt.on(t)},o9=(t,s,a)=>{const i=b0(),d=(p,C)=>{const w=j2.get().getOr(!1);a.fetch().get(E=>{NP(t,C,a,s.layouts,E),i.link(t.element),w||ct.focusIn(C)})},g=()=>{Lt.off(t),j2.get().getOr(!1)||bt.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:De([ct.config({mode:"special",onEscape:p=>(Xt.close(p),k.some(!0))}),Xt.config({onOpen:d,onClose:g,isPartOf:(p,C,w)=>zd(C,w)||zd(t,w),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Pr.config({channels:{...om({isExtraPart:An,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...oy({doReposition:()=>{Xt.getState(lo.getCoupled(t,"toolbarSandbox")).each(p=>{PO(t,p,a,s.layouts)})}})}})])}},ug=ns({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...rr.sketch({...i.button(),action:d=>{NO(d,i)},buttonBehaviours:Cc.augment({dump:i.button().buttonBehaviours},[lo.config({others:{toolbarSandbox:d=>o9(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Xt.getState(lo.getCoupled(d,"toolbarSandbox")).each(p=>{NP(d,p,t,a.layouts,g)})},reposition:d=>{Xt.getState(lo.getCoupled(d,"toolbarSandbox")).each(g=>{PO(d,g,t,a.layouts)})},toggle:d=>{NO(d,i)},toggleWithoutFocusing:d=>{n9(d,i)},getToolbar:d=>Xt.getState(lo.getCoupled(d,"toolbarSandbox")),isOpen:d=>Xt.isOpen(lo.getCoupled(d,"toolbarSandbox"))}}),configFields:BP(),partFields:t9(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),PP=Q([me("items"),Wd(["itemSelector"]),ts("tgroupBehaviours",[ct])]),$P=Q([lb({name:"items",unit:"item"})]),FP=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:_o(t.tgroupBehaviours,[ct.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),xE=ns({name:"ToolbarGroup",configFields:PP(),partFields:$P(),factory:FP}),$O=t=>we(t,s=>bc(s)),FO=(t,s,a)=>{MP(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{ug.setGroups(d,$O(i))})})},IP=(t,s,a,i)=>{const d=yn(ug.sketch({fetch:()=>Vs.nu(g=>{g($O(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ds,Ss],onRtl:()=>[Ss,ds],onBottomLtr:()=>[Nr,br],onBottomRtl:()=>[br,Nr]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:_o(t.splitToolbarBehaviours,[lo.config({others:{overflowGroup:()=>xE.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(we(p,g.getSystem().build)),FO(g,d,t)},refresh:g=>FO(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{ug.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(ug.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(ug.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{ug.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(ug.getToolbar)},domModification:{attributes:{role:"group"}}}},LP=ns({name:"SplitFloatingToolbar",configFields:e9(),partFields:wE(),factory:IP,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),s9=Q([Wd(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),zt("onOpened"),zt("onClosed")].concat(oi())),r9=Q([Es({factory:au,schema:Kb(),name:"primary"}),Es({factory:au,schema:Kb(),name:"overflow",overrides:t=>({toolbarBehaviours:De([Aa.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Rn(s,t,"overflow-button").each(a=>{Lt.off(a),bt.focus(a)}),t.onClosed(s)},onGrown:s=>{ct.focusIn(s),t.onOpened(s)},onStartGrow:s=>{Rn(s,t,"overflow-button").each(Lt.on)}}),ct.config({mode:"acyclic",onEscape:s=>(Rn(s,t,"overflow-button").each(bt.focus),k.some(!0))})])})}),jc({name:"overflow-button",overrides:t=>({buttonBehaviours:De([Lt.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),jc({name:"overflow-group"})]),HP=(t,s)=>Rn(t,s,"overflow").map(Aa.hasGrown).getOr(!1),VP=(t,s)=>{Rn(t,s,"overflow-button").bind(()=>Rn(t,s,"overflow")).each(a=>{IO(t,s),Aa.toggleGrow(a)})},IO=(t,s)=>{Rn(t,s,"overflow").each(a=>{MP(t,s,i=>{const d=we(i,g=>bc(g));au.setGroups(a,d)}),Rn(t,s,"overflow-button").each(i=>{Aa.hasGrown(a)&&Lt.on(i)}),Aa.refresh(a)})},a9=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(p,C)=>{const w=we(C,p.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:_o(t.splitToolbarBehaviours,[lo.config({others:{overflowGroup:p=>xE.sketch({...i["overflow-group"](),items:[rr.sketch({...i["overflow-button"](),action:C=>{hn(p,d)}})]})}}),Pt("toolbar-toggle-events",[ve(d,p=>{VP(p,t)})])]),apis:{setGroups:(p,C)=>{g(p,C),IO(p,t)},refresh:p=>IO(p,t),toggle:p=>VP(p,t),isOpen:p=>HP(p,t)},domModification:{attributes:{role:"group"}}}},LO=ns({name:"SplitSlidingToolbar",configFields:s9(),partFields:r9(),factory:a9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),zP=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[xE.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:De([So.config({}),bt.config({})])}},EE=t=>xE.sketch(zP(t)),UP=(t,s)=>{const a=Gn(i=>{const d=we(t.initGroups,EE);au.setGroups(i,d)});return De([sl.toolbarButton(t.providers.isDisabled),ps(),ct.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Pt("toolbar-events",[a])])},WP=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":zP({title:k.none(),items:[]}),"overflow-button":hH({name:"more",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("More..."),primary:!1,buttonType:k.none(),borderless:!1},k.none(),t.providers)},splitToolbarBehaviours:UP(t,s)}},c9=t=>{const s=WP(t),a=4,i=LP.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return LP.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=ic(d),p=kp(d),C=ic(p),w=Math.max(p.dom.scrollHeight,C.height);return cs(g.x+a,C.y,g.width-a*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},i9=t=>{const s=LO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=LO.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=WP(t);return LO.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([wO()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([wO()],{type:"closed"}),t.onToggled(d,!1)}})},G2=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return au.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Ai.scrolling?["tox-toolbar--scrolling"]:[])},components:[au.parts.groups({})],toolbarBehaviours:UP(t,s)})},ZP=[vm,Xc,Js("tooltip"),va("buttonType","secondary",["primary","secondary"]),Fs("borderless",!1),fc("onAction")],l9=[...ZP,Qu,Lc("type",["button"])],HO=[...ZP,Fs("active",!1),Lc("type",["togglebutton"])],jP={button:l9,togglebutton:HO},TE=[Lc("type",["group"]),Km("buttons",[],Uo("type",jP))],u9=Uo("type",{...jP,group:TE}),GP=lt([Km("buttons",[],u9),fc("onShow"),fc("onHide")]),d9=t=>kn("view",GP,t),m9=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(pe=>Tm(pe,s.icons)).map(yn),C=(()=>pe=>{const ce=Ne=>{g.map(Ue=>Ue.getOpt(pe).each(Zt=>{xt.set(Zt,[Tm(Ne,s.icons)])}))},Re=Ne=>{const Ue=pe.element;Ne?(Wo(Ue,"tox-button--enabled"),Vt(Ue,"aria-pressed",!0)):(mn(Ue,"tox-button--enabled"),zo(Ue,"aria-pressed"))},ke=()=>Mr(pe.element,"tox-button--enabled");if(d)return t.onAction({setIcon:ce,setActive:Re,isActive:ke});if(t.type==="button")return t.onAction({setIcon:ce})})(),w={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},E=G3((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),_=d?t.text.map(s.translate):k.some(s.translate(t.text)),D=_.map(ko),M=w.tooltip.or(_).map(pe=>({"aria-label":s.translate(pe),title:s.translate(pe)})).getOr({}),P=g.map(pe=>pe.asSpec()),I=Pb([P,D]),U=t.icon.isSome()&&D.isSome(),ne={tag:"button",classes:E.concat(...t.icon.isSome()&&!U?["tox-button--icon"]:[]).concat(...U?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:M},Y=[],j=O2(w,k.some(C),Y,ne,I,s);return rr.sketch(j)},f9=(t,s)=>m9(t,s),g9=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:we(t.buttons,a=>f9(a,s))}),qP=mr().deviceType,VO=qP.isPhone(),h9=qP.isTablet(),kE=t=>{let s=!1;const a=we(t.buttons,i=>i.type==="group"?(s=!0,g9(i,t.providers)):f9(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...VO||h9?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:De([bt.config({}),ct.config({mode:"flow",selector:"button, .tox-button",focusInside:dm.OnEnterOrSpaceMode})]),components:s?a:[Ql.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Ql.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},KP=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),YP=(t,s,a,i)=>{const d={getPane:g=>Bs.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var dg=ns({name:"silver.View",configFields:[me("viewConfig")],partFields:[wc({factory:{sketch:kE},schema:[me("buttons"),me("providers")],name:"header"}),wc({factory:{sketch:KP},schema:[],name:"pane"})],factory:YP,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const p9=(t,s,a)=>Sp(s,(i,d)=>{const g=vn(d9(i));return t.slot(d,dg.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[dg.parts.header({buttons:g.buttons,providers:a})]:[],dg.parts.pane({})]}))}),XP=(t,s)=>Ur.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:p9(a,t,s),slotBehaviours:Jy.unnamedEvents([Gn(i=>Ur.hideAllSlots(i))])})),op=t=>Bt(Ur.getSlotNames(t),s=>Ur.isShowing(t,s)),JP=t=>{const s=t.element;Rt(s,"display","none"),Vt(s,"aria-hidden","true")},b9=t=>{const s=t.element;sn(s,"display"),zo(s,"aria-hidden")},v9=t=>({getContainer:Q(t)}),QP=(t,s,a)=>{Ur.getSlot(t,s).each(i=>{dg.getPane(i).each(d=>{a(i)(v9(d.element.dom))})})},zO=(t,s)=>QP(t,s,dg.getOnShow),y9=(t,s)=>QP(t,s,dg.getOnHide);var q2=Zo({factory:(t,s)=>{const g={setViews:(p,C)=>{xt.set(p,[XP(C,s.backstage.shared.providers)])},whichView:p=>Kt.getCurrent(p).bind(op),toggleView:(p,C,w,E)=>Kt.getCurrent(p).exists(_=>{const D=op(_),M=D.exists(I=>E===I),P=Ur.getSlot(_,E).isSome();return P&&(Ur.hideAllSlots(_),M?(JP(p),C()):(w(),b9(p),Ur.showSlot(_,E),zO(_,E)),D.each(I=>y9(_,I))),P})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:De([xt.config({}),Kt.config({find:p=>{const C=xt.contents(p);return ia(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[me("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const e$=(t,s,a)=>{let i=!1;const d={getSocket:g=>Bs.getPart(g,t,"socket"),setSidebar:(g,p,C)=>{Bs.getPart(g,t,"sidebar").each(w=>VV(w,p,C))},toggleSidebar:(g,p)=>{Bs.getPart(g,t,"sidebar").each(C=>z2(C,p))},whichSidebar:g=>Bs.getPart(g,t,"sidebar").bind(zV).getOrNull(),getHeader:g=>Bs.getPart(g,t,"header"),getToolbar:g=>Bs.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{Bs.getPart(g,t,"toolbar").each(C=>{const w=we(p,EE);C.getApis().setGroups(C,w)})},setToolbars:(g,p)=>{Bs.getPart(g,t,"multiple-toolbar").each(C=>{const w=we(p,E=>we(E,EE));iE.setItems(C,w)})},refreshToolbar:g=>{Bs.getPart(g,t,"toolbar").each(C=>C.getApis().refresh(C))},toggleToolbarDrawer:g=>{Bs.getPart(g,t,"toolbar").each(p=>{to(p.getApis().toggle,C=>C(p))})},toggleToolbarDrawerWithoutFocusing:g=>{Bs.getPart(g,t,"toolbar").each(p=>{to(p.getApis().toggleWithoutFocusing,C=>C(p))})},isToolbarDrawerToggled:g=>Bs.getPart(g,t,"toolbar").bind(p=>k.from(p.getApis().isOpen).map(C=>C(p))).getOr(!1),getThrobber:g=>Bs.getPart(g,t,"throbber"),focusToolbar:g=>{Bs.getPart(g,t,"toolbar").orThunk(()=>Bs.getPart(g,t,"multiple-toolbar")).each(C=>{ct.focusIn(C)})},setMenubar:(g,p)=>{Bs.getPart(g,t,"menubar").each(C=>{TO.setMenus(C,p)})},focusMenubar:g=>{Bs.getPart(g,t,"menubar").each(p=>{TO.focus(p)})},setViews:(g,p)=>{Bs.getPart(g,t,"viewWrapper").each(C=>{q2.setViews(C,p)})},toggleView:(g,p)=>Bs.getPart(g,t,"viewWrapper").exists(C=>q2.toggleView(C,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>Bs.getPart(g,t,"viewWrapper").bind(q2.whichView).getOrNull(),hideMainView:g=>{i=d.isToolbarDrawerToggled(g),i&&d.toggleToolbarDrawer(g),Bs.getPart(g,t,"editorContainer").each(p=>{const C=p.element;Rt(C,"display","none"),Vt(C,"aria-hidden","true")})},showMainView:g=>{i&&d.toggleToolbarDrawer(g),Bs.getPart(g,t,"editorContainer").each(p=>{const C=p.element;sn(C,"display"),zo(C,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},_E=ru.optional({factory:TO,name:"menubar",schema:[me("backstage")]}),UO=t=>t.type===Ai.sliding?i9:t.type===Ai.floating?c9:G2,C9=ru.optional({factory:{sketch:t=>iE.sketch({uid:t.uid,dom:t.dom,listBehaviours:De([ct.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>G2({type:t.type,uid:je("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,a,i,d)=>{au.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[me("dom"),me("onEscape")]}),w9=ru.optional({factory:{sketch:t=>{const s=UO(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[me("dom"),me("onEscape"),me("getSink")]}),t$=ru.optional({factory:{sketch:bE},name:"header",schema:[me("dom")]}),S9=ru.optional({factory:{sketch:$V},name:"promotion",schema:[me("dom")]}),x9=ru.optional({name:"socket",schema:[me("dom")]}),E9=ru.optional({factory:{sketch:HZ},name:"sidebar",schema:[me("dom")]}),n$=ru.optional({factory:{sketch:DP},name:"throbber",schema:[me("dom")]}),T9=ru.optional({factory:q2,name:"viewWrapper",schema:[me("backstage")]}),k9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),WO=ru.optional({factory:{sketch:k9},name:"editorContainer",schema:[]});var Ln=ns({name:"OuterContainer",factory:e$,configFields:[me("dom"),me("behaviours")],partFields:[t$,_E,w9,C9,x9,E9,S9,n$,T9,WO],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const _9="file edit view insert format tools table help",ZO={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},O9=(t,s,a)=>{const i=HS(a).split(/[ ,]/);return{text:t.title,getItems:()=>be(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Ba(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},OE=t=>t.split(" "),o$=(t,s)=>{const a={...ZO,...s.menus},i=bo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?OE(_9):OE(s.menubar===!1?"":s.menubar),g=Yn(d,C=>{const w=wn(ZO,C);return i?w||Ze(s.menus,C).exists(E=>wn(E,"items")):w}),p=we(g,C=>{const w=a[C];return O9({title:w.title,items:OE(w.items)},s,t)});return Yn(p,C=>{const w=E=>xn(E)||E.type!=="separator";return C.getItems().length>0&&Ba(C.getItems(),w)})},jO=t=>{const s=()=>{t._skinLoaded=!0,l8(t)};return()=>{t.initialized?s():t.on("init",s)}},A9=(t,s)=>()=>u8(t,{message:s}),s$=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),D9=(t,s)=>{const a=s+"/skin.min.css";return s$(t,a,t.ui.styleSheetLoader)},r$=(t,s)=>{if(Cd(te.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return s$(t,i,wb.DOM.styleSheetLoader)}else return Promise.resolve()},a$=(t,s)=>{const a=RR(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!Y_(s)&&xn(a)?Promise.all([D9(s,a),r$(s,a)]).then(jO(s),A9(s,"Skin could not be loaded")):Promise.resolve(jO(s)())},R9=dn(a$,!1),M9=dn(a$,!0),GO=(t,s,a)=>{const i=(C,w,E,_)=>{const D=s.shared.providers.translate(C.title);if(C.type==="separator")return k.some({type:"separator",text:D});if(C.type==="submenu"){const M=be(C.getStyleItems(),P=>d(P,w,_));return w===0&&M.length<=0?k.none():k.some({type:"nestedmenuitem",text:D,enabled:M.length>0,getSubmenuItems:()=>be(C.getStyleItems(),P=>d(P,w,_))})}else return k.some({type:"togglemenuitem",text:D,icon:C.icon,active:C.isSelected(_),enabled:!E,onAction:a.onAction(C),...C.getStylePreview().fold(()=>({}),M=>({meta:{style:M}}))})},d=(C,w,E)=>{const _=C.type==="formatter"&&a.isInvalid(C);return w===0?_?[]:i(C,w,!1,E).toArray():i(C,w,_,E).toArray()},g=C=>{const w=a.getCurrentValue(),E=a.shouldHide?0:1;return be(C,_=>d(_,E,w))};return{validateItems:g,getFetch:(C,w)=>(E,_)=>{const D=w(),M=g(D),P=cg(M,ql.CLOSE_ON_EXECUTE,C,{isHorizontalMenu:!1,search:k.none()});_(P)}}},mg=(t,s,a)=>{const i=a.dataset,d=i.type==="basic"?()=>we(i.data,g=>aO(g,a.isSelectedFor,a.getPreviewFor)):i.getData;return{items:GO(t,s,a),getStyleItems:d}},K2=(t,s,a)=>{const{items:i,getStyleItems:d}=mg(t,s,a),g=C=>({getComponent:Q(C)}),p=wm(t,"NodeChange",C=>{const w=C.getComponent();a.updateText(w),ht.set(C.getComponent(),!t.selection.isEditable())});return Vx({text:a.icon.isSome()?k.none():a.text,icon:a.icon,tooltip:k.from(a.tooltip),role:k.none(),fetch:i.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},B9=t=>we(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),N9=t=>({type:"basic",data:t});var ev;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(ev||(ev={}));const P9=(t,s)=>s===ev.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),qO=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:B9(P9(i,a))}},KO=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],c$=t=>{const s=()=>Bt(KO,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),i=C=>k.none,d=C=>{const E=s().fold(Q("left"),_=>_.title.toLowerCase());at(C,ep,{icon:`align-${E}`})},g=N9(KO),p=C=>()=>Bt(KO,w=>w.format===C.format).each(w=>t.execCommand(w.command));return{tooltip:"Align",text:k.none(),icon:k.some("align-left"),isSelectedFor:a,getCurrentValue:k.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},$9=(t,s)=>K2(t,s,c$(t)),i$=(t,s)=>{const a=mg(t,s,c$(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),onSetup:Cr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},Y2=(t,s)=>{const a=s(),i=we(a,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>Bt(a,g=>g.format===d)).orThunk(()=>kt(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},AE=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),i=p=>()=>{const C=t.formatter.get(p);return C?k.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):k.none()},d=p=>{const w=Y2(t,()=>g.data).fold(Q(s),E=>E.title);at(p,ti,{text:w})},g=qO(t,"block_formats",ev.SemiColon);return{tooltip:"Blocks",text:k.some(s),icon:k.none(),isSelectedFor:a,getCurrentValue:k.none,getPreviewFor:i,onAction:jM(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},l$=(t,s)=>K2(t,s,AE(t)),fg=(t,s)=>{const a=mg(t,s,AE(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Cr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},u$=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],d$=t=>{const s=t.split(/\s*,\s*/);return we(s,a=>a.replace(/^['"]+|['"]+$/g,""))},F9=t=>{const s=()=>{const a=d$(t.toLowerCase());return hu(u$,i=>a.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},m$=t=>{const s="System Font",a=()=>{const E=I=>I?d$(I)[0]:"",_=t.queryCommandValue("FontName"),D=w.data,M=_?_.toLowerCase():"";return{matchOpt:Bt(D,I=>{const U=I.format;return U.toLowerCase()===M||E(U).toLowerCase()===E(M).toLowerCase()}).orThunk(()=>kt(F9(M),{title:s,format:M})),font:_}},i=E=>_=>_.exists(D=>D.format===E),d=()=>{const{matchOpt:E}=a();return E},g=E=>()=>k.some({tag:"div",styles:E.indexOf("dings")===-1?{"font-family":E}:{}}),p=E=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,E.format)})},C=E=>{const{matchOpt:_,font:D}=a(),M=_.fold(Q(D),P=>P.title);at(E,ti,{text:M})},w=qO(t,"font_family_formats",ev.SemiColon);return{tooltip:"Fonts",text:k.some(s),icon:k.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:C,dataset:w,shouldHide:!1,isInvalid:An}},I9=(t,s)=>K2(t,s,m$(t)),L9=(t,s)=>{const a=mg(t,s,m$(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),onSetup:Cr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},H9={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},V9=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),f$=(t,s)=>Ba(s,a=>Ba(H9[a],i=>t===i)),DE=(t,s)=>k.from(V9.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return f$(g,s)?k.some({value:d,unit:g}):k.none()}),z9=(t,s)=>DE(t,s).map(({value:a,unit:i})=>a+i),RE={tab:Q(9),escape:Q(27),enter:Q(13),backspace:Q(8),delete:Q(46),left:Q(37),up:Q(38),right:Q(39),down:Q(40),space:Q(32),home:Q(36),end:Q(35),pageUp:Q(33),pageDown:Q(34)},U9=(t,s,a)=>{let i=k.none();const d=j=>j.map(pe=>Ve.getValue(pe)).getOr(""),g=wm(t,"NodeChange",j=>{const pe=j.getComponent();i=k.some(pe),a.updateInputValue(pe),ht.set(pe,!t.selection.isEditable())}),p=j=>({getComponent:Q(j)}),C=gt(K),w=je("custom-number-input-events"),E=(j,pe,ce)=>{const Re=d(i),ke=a.getNewValue(Re,j),Ne=Re.length-`${ke}`.length,Ue=i.map(ot=>ot.element.dom.selectionStart-Ne),Zt=i.map(ot=>ot.element.dom.selectionEnd-Ne);a.onAction(ke,ce),i.each(ot=>{Ve.setValue(ot,ke),pe&&(Ue.each(At=>ot.element.dom.selectionStart=At),Zt.each(At=>ot.element.dom.selectionEnd=At))})},_=(j,pe)=>E((ce,Re)=>ce-Re,j,pe),D=(j,pe)=>E((ce,Re)=>ce+Re,j,pe),M=j=>ma(j.element).fold(k.none,pe=>(wo(pe),k.some(!0))),P=j=>wf(j.element)?(Sv(j.element).each(pe=>wo(pe)),k.some(!0)):k.none(),I=(j,pe,ce,Re)=>{const ke=s.shared.providers.translate(ce),Ne=je("altExecuting"),Ue=wm(t,"NodeChange",ot=>{ht.set(ot.getComponent(),!t.selection.isEditable())}),Zt=ot=>{ht.isDisabled(ot)||j(!0)};return rr.sketch({dom:{tag:"button",attributes:{title:ke,"aria-label":ke},classes:Re.concat(pe)},components:[Hx(pe,s.shared.providers.icons)],buttonBehaviours:De([ht.config({}),Pt(Ne,[Kf({onSetup:Ue,getApi:p},C),ym({getApi:p},C),ve(Hc(),(ot,At)=>{(At.event.raw.keyCode===RE.space()||At.event.raw.keyCode===RE.enter())&&(ht.isDisabled(ot)||j(!1))}),ve(pc(),Zt),ve(Md(),Zt)])]),eventOrder:{[Hc()]:[Ne,"keying"],[pc()]:[Ne,"alloy.base.behaviour"],[Md()]:[Ne,"alloy.base.behaviour"]}})},U=yn(I(j=>_(!1,j),"minus","Decrease font size",["highlight-on-focus"])),ne=yn(I(j=>D(!1,j),"plus","Increase font size",["highlight-on-focus"])),Y=yn({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[Vh.sketch({inputBehaviours:De([ht.config({}),Pt(w,[Kf({onSetup:g,getApi:p},C),ym({getApi:p},C)]),Pt("input-update-display-text",[ve(ti,(j,pe)=>{Ve.setValue(j,pe.event.text)}),ve(Mu(),j=>{a.onAction(Ve.getValue(j))}),ve(Qm(),j=>{a.onAction(Ve.getValue(j))})]),ct.config({mode:"special",onEnter:j=>(E(en,!0,!0),k.some(!0)),onEscape:M,onUp:j=>(D(!0,!1),k.some(!0)),onDown:j=>(_(!0,!1),k.some(!0)),onLeft:(j,pe)=>(pe.cut(),k.none()),onRight:(j,pe)=>(pe.cut(),k.none())})])})],behaviours:De([bt.config({}),ct.config({mode:"special",onEnter:P,onSpace:P,onEscape:M}),Pt("input-wrapper-events",[ve(Tl(),j=>{qe([U,ne],pe=>{const ce=te.fromDom(pe.get(j).element.dom);wf(ce)&&zu(ce)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[U.asSpec(),Y.asSpec(),ne.asSpec()],behaviours:De([bt.config({}),ct.config({mode:"flow",focusInside:dm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:j=>wf(j.element)?k.none():(wo(j.element),k.some(!0))})])}},W9={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},Z9={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},j9=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},G9=(t,s)=>/[0-9.]+px$/.test(t)?j9(parseInt(t,10)*72/96,s||0)+"pt":Ze(Z9,t).getOr(t),q9=t=>Ze(W9,t).getOr(""),YO=t=>{const s=()=>{let w=k.none();const E=C.data,_=t.queryCommandValue("FontSize");if(_)for(let D=3;w.isNone()&&D>=0;D--){const M=G9(_,D),P=q9(M);w=Bt(E,I=>I.format===_||I.format===M||I.format===P)}return{matchOpt:w,size:_}},a=w=>E=>E.exists(_=>_.format===w),i=()=>{const{matchOpt:w}=s();return w},d=Q(k.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},p=w=>{const{matchOpt:E,size:_}=s(),D=E.fold(Q(_),M=>M.title);at(w,ti,{text:D})},C=qO(t,"font_size_formats",ev.Space);return{tooltip:"Font sizes",text:k.some("12pt"),icon:k.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:An}},g$=(t,s)=>K2(t,s,YO(t)),h$=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},K9=16,p$=t=>t>=0,Y9=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>at(i,ti,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{DE(i,["unsupportedLength","empty"]);const g=DE(i,["unsupportedLength","empty"]).or(DE(s(),["unsupportedLength","empty"])),p=g.map(_=>_.value).getOr(K9),C=SR(t),w=g.map(_=>_.unit).filter(_=>_!=="").getOr(C),E=d(p,h$(w).step);return`${p$(E)?E:p}${w}`}}},X9=(t,s)=>U9(t,s,Y9(t)),J9=(t,s)=>{const a=mg(t,s,YO(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Cr(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},XO=(t,s)=>{const a="Paragraph",i=p=>()=>t.formatter.match(p),d=p=>()=>{const C=t.formatter.get(p);return C!==void 0?k.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):k.none()},g=p=>{const C=D=>VN(D)?be(D.items,C):oO(D)?[{title:D.title,format:D.format}]:[],w=be(WN(t),C),_=Y2(t,Q(w)).fold(Q(a),D=>D.title);at(p,ti,{text:_})};return{tooltip:"Formats",text:k.some(a),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:jM(t),updateText:g,shouldHide:z_(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},Q9=(t,s)=>{const a={type:"advanced",...s.styles};return K2(t,s,XO(t,a))},b$=(t,s)=>{const a={type:"advanced",...s.styles},i=mg(t,s,XO(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Cr(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},ez=Q([me("toggleClass"),me("fetch"),ie("onExecute"),oe("getHotspot",k.some),oe("getAnchorOverrides",Q({})),Fl(),ie("onItemExecute"),bn("lazySink"),me("dom"),zt("onOpen"),ts("splitDropdownBehaviours",[lo,ct,bt]),oe("matchWidth",!1),oe("useMinWidth",!1),oe("eventOrder",{}),bn("role")].concat(j4())),tz=Es({factory:rr,schema:[me("dom")],name:"arrow",defaults:()=>({buttonBehaviours:De([bt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each($d)},buttonBehaviours:De([Lt.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),nz=Es({factory:rr,schema:[me("dom")],name:"button",defaults:()=>({buttonBehaviours:De([bt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),oz=Q([tz,nz,wc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[me("text")],name:"aria-descriptor"}),jc({schema:[Yi()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),U4()]),sz=(t,s,a,i)=>{const d=_=>{Kt.getCurrent(_).each(D=>{ln.highlightFirst(D),ct.focusIn(D)})},g=_=>{W4(t,en,_,i,d,_a.HighlightMenuAndItem).get(K)},p=_=>(g(_),k.some(!0)),C=_=>{const D=Ku(_,t,"button");return $d(D),k.some(!0)},w={...Fn([Gn((_,D)=>{Rn(_,t,"aria-descriptor").each(P=>{const I=je("aria");Vt(P.element,"id",I),Vt(_.element,"aria-describedby",I)})})]),...Py(k.some(g))},E={repositionMenus:_=>{Lt.isOn(_)&&CB(_)}};return{uid:t.uid,dom:t.dom,components:s,apis:E,eventOrder:{...t.eventOrder,[Wa()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:_o(t.splitDropdownBehaviours,[lo.config({others:{sandbox:_=>{const D=Ku(_,t,"arrow");return Z4(t,_,{onOpen:()=>{Lt.on(D),Lt.on(_)},onClose:()=>{Lt.off(D),Lt.off(_)}})}}}),ct.config({mode:"special",onSpace:C,onEnter:C,onDown:p}),bt.config({}),Lt.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},ME=ns({name:"SplitDropdown",configFields:ez(),partFields:oz(),factory:sz,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),JO=t=>({isEnabled:()=>!ht.isDisabled(t),setEnabled:s=>ht.set(t,!s),setText:s=>at(t,ti,{text:s}),setIcon:s=>at(t,ep,{icon:s})}),rz=t=>({setActive:s=>{Lt.set(t,s)},isActive:()=>Lt.isOn(t),isEnabled:()=>!ht.isDisabled(t),setEnabled:s=>ht.set(t,!s),setText:s=>at(t,ti,{text:s}),setIcon:s=>at(t,ep,{icon:s})}),v$=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),y$=je("focus-button"),QO=(t,s,a,i,d)=>{const g=s.map(C=>yn(L5(C,"tox-tbtn",d))),p=t.map(C=>yn(Tm(C,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:v$(a,d)},components:Pb([p.map(C=>C.asSpec()),g.map(C=>C.asSpec())]),eventOrder:{[Ua()]:["focusing","alloy.base.behaviour",Qh],[na()]:[Qh,"toolbar-group-button-events"]},buttonBehaviours:De([sl.toolbarButton(d.isDisabled),ps(),Pt(Qh,[Gn((C,w)=>P3(C)),ve(ti,(C,w)=>{g.bind(E=>E.getOpt(C)).each(E=>{xt.set(E,[ko(d.translate(w.event.text))])})}),ve(ep,(C,w)=>{p.bind(E=>E.getOpt(C)).each(E=>{xt.set(E,[Tm(w.event.icon,d.icons)])})}),ve(Ua(),(C,w)=>{w.event.prevent(),hn(C,y$)})])].concat(i.getOr([])))}},az=(t,s,a,i)=>{const d=s.shared,g=gt(K),p={toolbarButtonBehaviours:[],getApi:JO,onSetup:t.onSetup},C=[Pt("toolbar-group-button-events",[Kf(p,g),ym(p,g)])];return ug.sketch({lazySink:d.getSink,fetch:()=>Vs.nu(w=>{w(we(a(t.items),EE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:QO(t.icon,t.text,t.tooltip,k.some(C),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},eA=(t,s,a)=>{var i;const d=gt(K),g=QO(t.icon,t.text,t.tooltip,k.none(),a);return rr.sketch({dom:g.dom,components:g.components,eventOrder:F5,buttonBehaviours:{...De([Pt("toolbar-button-events",[PL({onAction:t.onAction,getApi:s.getApi}),Kf(s,d),ym(s,d)]),sl.toolbarButton(()=>!t.enabled||a.isDisabled()),ps()].concat(s.toolbarButtonBehaviours)),[Qh]:(i=g.buttonBehaviours)===null||i===void 0?void 0:i[Qh]}})},C$=(t,s)=>tA(t,s,[]),tA=(t,s,a)=>eA(t,{toolbarButtonBehaviours:a.length>0?[Pt("toolbarButtonWith",a)]:[],getApi:JO,onSetup:t.onSetup},s),w$=(t,s)=>S$(t,s,[]),S$=(t,s,a)=>eA(t,{toolbarButtonBehaviours:[xt.config({}),Lt.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Pt("toolbarToggleButtonWith",a)]:[]),getApi:rz,onSetup:t.onSetup},s),x$=(t,s,a)=>i=>Vs.nu(d=>s.fetch(d)).map(d=>k.from(J4(Vn(I4(je("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,ql.CLOSE_ON_EXECUTE,s.select.getOr(An),a),{movement:l2(s.columns,s.presets),menuBehaviours:Jy.unnamedEvents(s.columns!=="auto"?[]:[Gn((g,p)=>{C4(g,4,ZS(s.presets)).each(({numRows:C,numColumns:w})=>{ct.setGridSize(g,C,w)})})])})))),cz=(t,s)=>{const a=g=>({isEnabled:()=>!ht.isDisabled(g),setEnabled:p=>ht.set(g,!p),setIconFill:(p,C)=>{go(g.element,`svg path[class="${p}"], rect[class="${p}"]`).each(w=>{Vt(w,"fill",C)})},setActive:p=>{Vt(g.element,"aria-pressed",p),go(g.element,"span").each(C=>{g.getSystem().getByDom(C).each(w=>Lt.set(w,p))})},isActive:()=>go(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists(Lt.isOn)),setText:p=>go(g.element,"span").each(C=>g.getSystem().getByDom(C).each(w=>at(w,ti,{text:p}))),setIcon:p=>go(g.element,"span").each(C=>g.getSystem().getByDom(C).each(w=>at(w,ep,{icon:p})))}),i=gt(K),d={getApi:a,onSetup:t.onSetup};return ME.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...v$(t.tooltip,s.providers)}},onExecute:g=>{const p=a(g);p.isEnabled()&&t.onAction(p)},onItemExecute:(g,p,C)=>{},splitDropdownBehaviours:De([sl.splitButton(s.providers.isDisabled),ps(),Pt("split-dropdown-events",[Gn((g,p)=>P3(g)),ve(y$,bt.focus),Kf(d,i),ym(d,i)]),g2.config({})]),eventOrder:{[na()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:x$(a,t,s.providers),parts:{menu:jS(!1,t.columns,t.presets)},components:[ME.parts.button(QO(t.icon,t.text,k.none(),k.some([Lt.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),ME.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Kc("chevron-down",s.providers.icons)},buttonBehaviours:De([sl.splitButton(s.providers.isDisabled),ps(),PS()])}),ME.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},E$=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],X2=(t,s)=>(a,i,d)=>{const g=t(a).mapError(p=>qm(p)).getOrDie();return s(g,i,d)},iz={button:X2(tM,(t,s)=>C$(t,s.shared.providers)),togglebutton:X2(nM,(t,s)=>w$(t,s.shared.providers)),menubutton:X2(xP,(t,s)=>_2(t,"tox-tbtn",s,k.none(),!1)),splitbutton:X2(PV,(t,s)=>cz(t,s.shared)),grouptoolbarbutton:X2(MV,(t,s,a)=>{const i=a.ui.registry.getAll().buttons,d=p=>J2(a,{buttons:i,toolbar:p,allowToolbarGroups:!1},s,k.none()),g={[V1]:s.shared.header.isPositionedAtTop()?vc.TopToBottom:vc.BottomToTop};switch(Eb(a)){case Ai.floating:return az(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},lz=(t,s,a)=>Ze(iz,t.type).fold(()=>(console.error("skipping button defined by",t),k.none()),i=>k.some(i(t,s,a))),T$={styles:Q9,fontsize:g$,fontsizeinput:X9,fontfamily:I9,blocks:l$,align:$9},uz=t=>{const s=we(E$,a=>{const i=Yn(a.items,d=>wn(t,d)||wn(T$,d));return{name:a.name,items:i}});return Yn(s,a=>a.items.length>0)},dz=t=>{const s=t.split("|");return we(s,a=>({items:a.trim().split(" ")}))},mz=t=>gu(t,s=>wn(s,"name")&&wn(s,"items")),fz=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?uz(a):xn(s)?dz(s):mz(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},nA=(t,s,a,i,d,g)=>Ze(s,a.toLowerCase()).orThunk(()=>g.bind(p=>Ws(p,C=>Ze(s,C+a.toLowerCase())))).fold(()=>Ze(T$,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none()):lz(p,d,t)),J2=(t,s,a,i)=>{const d=fz(s),g=we(d,p=>{const C=be(p.items,w=>w.trim().length===0?[]:nA(t,s.buttons,w,s.allowToolbarGroups,a,i).toArray());return{title:k.from(t.translate(p.name)),items:C}});return Yn(g,p=>p.items.length>0)},k$=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(gu(g,xn)){const C=g.map(w=>{const E={toolbar:w,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return J2(t,E,i,k.none())});Ln.setToolbars(d,C)}else Ln.setToolbar(d,J2(t,a,i,k.none()))},_$=mr(),gz=_$.os.isiOS()&&_$.os.version.major<=12,hz=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=gt(ao(d.innerWidth,d.innerHeight)),C=gt(ao(g.offsetWidth,g.offsetHeight)),w=()=>{const M=p.get();(M.left!==d.innerWidth||M.top!==d.innerHeight)&&(p.set(ao(d.innerWidth,d.innerHeight)),a2(t))},E=()=>{const M=t.getDoc().documentElement,P=C.get();(P.left!==M.offsetWidth||P.top!==M.offsetHeight)&&(C.set(ao(M.offsetWidth,M.offsetHeight)),a2(t))},_=M=>{Xl(t,M)};i.bind(d,"resize",w),i.bind(d,"scroll",_);const D=jd(te.fromDom(t.getBody()),"load",E);t.on("hide",()=>{qe(a,M=>{Rt(M.element,"display","none")})}),t.on("show",()=>{qe(a,M=>{sn(M.element,"display")})}),t.on("NodeChange",E),t.on("remove",()=>{D.unbind(),i.unbind(d,"resize",w),i.unbind(d,"scroll",_),d=null})},pz=(t,s,a)=>{pm(t)&&em(a.mainUi.mothership.element,a.popupUi.mothership),Y0(s,a.dialogUi.mothership)};var vz=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=s,C=gt(0),w=g.outerContainer;await R9(t);const E=te.fromDom(d.targetNode),_=Gs(ur(E));em(E,g.mothership),pz(t,_,s),t.on("PostRender",()=>{Ln.setSidebar(w,a.sidebar,AR(t)),k$(t,s,a,i),C.set(t.getWin().innerWidth),Ln.setMenubar(w,o$(t,a)),Ln.setViews(w,a.views),hz(t,s)});const D=Ln.getSocket(w).getOrDie("Could not find expected socket element");if(gz){wu(D.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const U=AL(()=>{t.dispatch("ScrollContent")},20),ne=Fr(D.element,"scroll",U.throttle);t.on("remove",ne.unbind)}kM(t,s),t.addCommand("ToggleSidebar",(U,ne)=>{Ln.toggleSidebar(w,ne),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var U;return(U=Ln.whichSidebar(w))!==null&&U!==void 0?U:""}),t.addCommand("ToggleView",(U,ne)=>{if(Ln.toggleView(w,ne)){const Y=w.element;g.mothership.broadcastOn([Vl()],{target:Y}),qe(p,j=>{j.broadcastOn([Vl()],{target:Y})}),fu(Ln.whichView(w))&&(t.focus(),t.nodeChanged(),Ln.refreshToolbar(w))}}),t.addQueryValueHandler("ToggleView",()=>{var U;return(U=Ln.whichView(w))!==null&&U!==void 0?U:""});const M=Eb(t),P=()=>{Ln.refreshToolbar(s.mainUi.outerContainer)};(M===Ai.sliding||M===Ai.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const U=t.getWin().innerWidth;U!==C.get()&&(P(),C.set(U))});const I={setEnabled:U=>{e2(s,!U)},isEnabled:()=>!ht.isDisabled(w)};return{iframeContainer:D.element.dom,editorContainer:w.element.dom,api:I}}});const oA=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),BE=t=>gl(t)?t+"px":t,NE=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},O$=t=>{const s=xb(t),a=H_(t),i=V_(t);return oA(s).map(d=>NE(d,a,i))},A$=t=>O$(t).getOr(xb(t)),D$=t=>{const s=$S(t),a=FS(t),i=IS(t);return oA(s).map(d=>NE(d,a,i))},yz=t=>D$(t).getOr($S(t)),{ToolbarLocation:sA,ToolbarMode:sp}=NR,Cz=40,wz=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=a,C=wb.DOM,w=kb(t),E=Uy(t),_=IS(t).or(D$(t)),D=i.shared.header,M=D.isPositionedAtTop,P=Eb(t),I=P===sp.sliding||P===sp.floating,U=gt(!1),ne=()=>U.get()&&!t.removed,Y=ut=>I?ut.fold(Q(0),Yt=>Yt.components().length>1?Go(Yt.components()[1].element):0):0,j=ut=>{switch(Z_(t)){case sA.auto:const Yt=Ln.getToolbar(g.outerContainer),$e=Y(Yt),et=Go(ut.element)-$e,St=Xn(s);if(St.y>et)return"top";{const dt=kp(s),Tt=Math.max(dt.dom.scrollHeight,Go(dt));return St.bottom<Tt-et||Dr().bottom<St.bottom-et?"bottom":"top"}case sA.bottom:return"bottom";case sA.top:default:return"top"}},pe=ut=>{d.on(Yt=>{Po.setModes(Yt,[ut]),D.setDockingMode(ut);const $e=M()?vc.TopToBottom:vc.BottomToTop;Vt(Yt.element,V1,$e)})},ce=()=>{d.on(ut=>{const Yt=_.getOrThunk(()=>{const $e=oA(Te(qs(),"margin-left")).getOr(0);return Or(qs())-Gr(s).left+$e});Rt(ut.element,"max-width",Yt+"px")})},Re=ut=>{d.on(Yt=>{const $e=Ln.getToolbar(g.outerContainer),et=Y($e),St=Xn(s),{top:jt,left:dt}=ke(t,g.outerContainer.element).fold(()=>({top:M()?Math.max(St.y-Go(Yt.element)+et,0):St.bottom,left:St.x}),pn=>{var Wr;const so=Xn(pn),nc=(Wr=pn.dom.scrollTop)!==null&&Wr!==void 0?Wr:0,ul=$n(pn,qs()),vg=ul?Math.max(St.y-Go(Yt.element)+et,0):St.y-so.y+nc-Go(Yt.element)+et;return{top:M()?vg:St.bottom,left:ul?St.x:St.x-so.x}}),Tt={position:"absolute",left:Math.round(dt)+"px",top:Math.round(jt)+"px"},Bn=ut.map(pn=>{const Wr=pa(),so=150,nc=window.innerWidth-(dt-Wr.left);return{width:Math.max(Math.min(pn,nc),so)+"px"}}).getOr({});wu(g.outerContainer.element,{...Tt,...Bn})})},ke=(ut,Yt)=>pm(ut)?fO(Yt):k.none(),Ne=()=>{qe(p,ut=>{ut.broadcastOn([nm()],{})})},Ue=()=>{if(w)return k.none();if(Gr(g.outerContainer.element).left+ha(g.outerContainer.element)>=window.innerWidth-Cz||Cs(g.outerContainer.element,"width").isSome()){Rt(g.outerContainer.element,"position","absolute"),Rt(g.outerContainer.element,"left","0px"),sn(g.outerContainer.element,"width");const Yt=ha(g.outerContainer.element);return k.some(Yt)}else return k.none()},Zt=ut=>{if(!ne())return;w||ce();const Yt=w?k.none():Ue();I&&Ln.refreshToolbar(g.outerContainer),w||Re(Yt),E&&d.on(ut),Ne()},ot=()=>w||!E||!ne()?!1:d.get().exists(ut=>{const Yt=D.getDockingMode(),$e=j(ut);return $e!==Yt?(pe($e),!0):!1});return{isVisible:ne,isPositionedAtTop:M,show:()=>{U.set(!0),Rt(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),qe(p,ut=>{sn(ut.element,"display")}),ot(),pm(t)?Zt(ut=>Po.isDocked(ut)?Po.reset(ut):Po.refresh(ut)):Zt(Po.refresh)},hide:()=>{U.set(!1),Rt(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),qe(p,ut=>{Rt(ut.element,"display","none")})},update:Zt,updateMode:()=>{ot()&&Zt(Po.reset)},repositionPopups:Ne}},R$=(t,s)=>{const a=Xn(t);return{pos:s?a.y:a.bottom,bounds:a}},Sz=(t,s,a,i)=>{const d=gt(R$(s,a.isPositionedAtTop())),g=E=>{const{pos:_,bounds:D}=R$(s,a.isPositionedAtTop()),{pos:M,bounds:P}=d.get(),I=D.height!==P.height||D.width!==P.width;d.set({pos:_,bounds:D}),I&&a2(t,E),a.isVisible()&&(M!==_?a.update(Po.reset):I&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Po.reset)),t.on("NodeChange keydown",E=>{requestAnimationFrame(()=>g(E))});let p=0;const C=$x(()=>a.update(Po.refresh),33);t.on("ScrollWindow",()=>{const E=pa().left;E!==p&&(p=E,C.throttle()),a.updateMode()}),pm(t)&&t.on("ElementScroll",E=>{a.update(Po.refresh)});const w=$r();w.set(jd(te.fromDom(t.getBody()),"load",E=>g(E.raw))),t.on("remove",()=>{w.clear()})};var xz=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:g}=s,p=Kn(),C=te.fromDom(d.targetNode),w=wz(t,C,s,i,p),E=j_(t);await M9(t);const _=()=>{if(p.isSet()){w.show();return}p.set(Ln.getHeader(g.outerContainer).getOrDie());const M=J_(t);pm(t)?(em(C,g.mothership),em(C,s.popupUi.mothership)):Y0(M,g.mothership),Y0(M,s.dialogUi.mothership),k$(t,s,a,i),Ln.setMenubar(g.outerContainer,o$(t,a)),w.show(),Sz(t,C,w,E),t.nodeChanged()};t.on("show",_),t.on("hide",w.hide),E||(t.on("focus",_),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||E)&&_()}),kM(t,s);const D={show:_,hide:w.hide,setEnabled:M=>{e2(s,!M)},isEnabled:()=>!ht.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:D}}});const Ez=()=>{const t=Kn(),s=Kn(),a=Kn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),p=s.get().map(C=>C.mothership);return g.fold(()=>p.toArray(),C=>p.fold(()=>[C],w=>$n(C.element,w.element)?[C]:[C,w]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(C=>p(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},Tz="contexttoolbar-show",PE="contexttoolbar-hide",kz=t=>({hide:()=>hn(t,Bd()),getValue:()=>Ve.getValue(t)}),M$=(t,s)=>ve($5,(a,i)=>{const d=t.get(a),g=kz(d);s.onAction(g,i.event.buttonApi)}),B$=(t,s,a)=>{const{primary:i,...d}=s.original,g=vn(tM({...d,type:"button",onAction:K}));return tA(g,a,[M$(t,s)])},N$=(t,s,a)=>{const{primary:i,...d}=s.original,g=vn(nM({...d,type:"togglebutton",onAction:K}));return S$(g,a,[M$(t,s)])},_z=t=>t.type==="contextformtogglebutton",Oz=(t,s,a)=>_z(s)?N$(t,s,a):B$(t,s,a),Az=(t,s,a)=>{const i=we(s,p=>yn(Oz(t,p,a)));return{asSpecs:()=>we(i,p=>p.asSpec()),findPrimary:p=>Ws(s,(C,w)=>C.primary?k.from(i[w]).bind(E=>E.getOpt(p)).filter(Ce(ht.isDisabled)):k.none())}},P$=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=yn(Vh.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:De([ct.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>($d(p),!0)),onLeft:(g,p)=>(p.cut(),k.none()),onRight:(g,p)=>(p.cut(),k.none())})])})),d=Az(i,t.commands,s);return[{title:k.none(),items:[i.asSpec()]},{title:k.none(),items:d.asSpecs()}]},Dz={renderContextForm:(t,s,a)=>G2({type:t,uid:je("context-toolbar"),initGroups:P$(s,a),onEscape:k.none,cyclicKeying:!0,providers:a}),buildInitGroups:P$},rA=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,Rz=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=_p(te.fromDom(t.startContainer),t.startOffset).element;return(Pa(a)?ci(a):k.some(a)).filter(Pn).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},aA=t=>{const s=t.selection.getRng(),a=Rz(s);if(t.inline){const i=pa();return cs(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=ic(te.fromDom(t.getBody()));return cs(i.x+a.left,i.y+a.top,a.width,a.height)}},Mz=(t,s)=>s.filter(a=>fa(a)&&Nm(a)).map(ic).getOrThunk(()=>aA(t)),Bz=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},$E=(t,s,a,i,d,g)=>{const p=te.fromDom(t.getContainer()),C=go(p,".tox-editor-header").getOr(p),w=Xn(C),E=w.y>=s.bottom,_=i&&!E;if(t.inline&&_)return{y:Math.max(w.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!_)return{y:a.y,bottom:Math.min(w.y-g,a.bottom)};const D=d==="line"?Xn(p):s;return _?{y:Math.max(w.bottom+g,a.y),bottom:Math.min(D.bottom-g,a.bottom)}:{y:Math.max(D.y+g,a.y),bottom:Math.min(w.y-g,a.bottom)}},$$=(t,s,a,i=0)=>{const d=Ip(window),g=Xn(te.fromDom(t.getContentAreaContainer())),p=US(t)||Ly(t)||Hy(t),{x:C,width:w}=Bz(g,d,i);if(t.inline&&!p)return cs(C,d.y,w,d.height);{const E=s.header.isPositionedAtTop(),{y:_,bottom:D}=$E(t,g,d,E,a,i);return cs(C,_,w,D-_)}},rp=12,Q2={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},cA={maxHeightFunction:Gd(),maxWidthFunction:SE()},Nz=(t,s)=>{const a=t.selection.getRng(),i=_p(te.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&$n(i.element,s)},Pz=(t,s,a)=>{const i=Cs(t,"position");Rt(t,"position",s);const d=a(t);return i.each(g=>Rt(t,"position",g)),d},F$=t=>t==="node",$z=(t,s,a,i,d)=>{const g=aA(t),p=i.lastElement().exists(C=>$n(a,C));if(Nz(t,a))return p?MN:il;if(p)return Pz(s,i.getMode(),()=>rA(g,Xn(s),-20)&&!i.isReposition()?DH:MN);{const C=i.getMode()==="fixed"?d.y+pa().top:d.y,w=Go(s)+rp;return C+w<=g.y?il:N2}},Fz=(t,s,a,i)=>{const d=w=>(E,_,D,M,P)=>{const I=$z(t,M,w,a,P),U={...E,y:P.y,height:P.height};return{...I(U,_,D,M,P),alwaysFit:!0}},g=w=>F$(i)?[d(w)]:[];return s?{onLtr:w=>[es,Ss,ds,br,Nr,zn].concat(g(w)),onRtl:w=>[es,ds,Ss,Nr,br,zn].concat(g(w))}:{onLtr:w=>[zn,es,br,Ss,Nr,ds].concat(g(w)),onRtl:w=>[zn,es,Nr,ds,br,Ss].concat(g(w))}},FE=(t,s,a,i)=>s==="line"?{bubble:$l(rp,0,Q2),layouts:{onLtr:()=>[vr],onRtl:()=>[aw]},overrides:cA}:{bubble:$l(0,rp,Q2,1/rp),layouts:Fz(t,a,i,s),overrides:cA},IE=(t,s)=>{const a=Yn(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Dm(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},I$=t=>{if(t.length<=1)return t;{const s=g=>Ba(t,p=>p.position===g),a=g=>Yn(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),p=we(a("selection"),C=>({...C,position:"node"}));return g.concat(p)}else return a(i?"selection":"node");else return a("line")}},L$=t=>{if(t.length<=1)return t;{const s=i=>Bt(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Yn(t,d=>d.position===i))}},H$=(t,s,a)=>{const i=IE(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=IE(t,a);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=I$(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},Iz=(t,s,a)=>t(s)?k.none():MC(s,i=>{if(Pn(i)){const{contextToolbars:d,contextForms:g}=IE(i,a.inNodeScope),p=g.length>0?g:L$(d);return p.length>0?k.some({elem:i,toolbars:p}):k.none()}else return k.none()},t),V$=(t,s)=>{const a=te.fromDom(s.getBody()),i=p=>$n(p,a),d=p=>!i(p)&&!ac(a,p),g=te.fromDom(s.selection.getNode());return d(g)?k.none():H$(g,t.inNodeScope,t.inEditorScope).orThunk(()=>Iz(i,g,t))},Lz=(t,s)=>{const a={},i=[],d=[],g={},p={},C=(_,D)=>{const M=vn(h4(D));a[_]=M,M.launch.map(P=>{g["form:"+_]={...D.launch,type:P.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(M)}}}),M.scope==="editor"?d.push(M):i.push(M),p[_]=M},w=(_,D)=>{cM(D).each(M=>{D.scope==="editor"?d.push(M):i.push(M),p[_]=M})},E=bo(t);return qe(E,_=>{const D=t[_];D.type==="contextform"?C(_,D):D.type==="contexttoolbar"&&w(_,D)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},z$=je("forward-slide"),U$=je("backward-slide"),iA=je("change-slide-event"),lA="tox-pop--resizing",eC=t=>{const s=gt([]);return ho.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),ho.getContent(a).each(i=>{sn(i.element,"visibility")}),mn(a.element,lA),sn(a.element,"width")},inlineBehaviours:De([Pt("context-toolbar-events",[cf(Ig(),(a,i)=>{i.event.raw.propertyName==="width"&&(mn(a.element,lA),sn(a.element,"width"))}),ve(iA,(a,i)=>{const d=a.element;sn(d,"width");const g=Or(d);ho.setContent(a,i.event.contents),Wo(d,lA);const p=Or(d);Rt(d,"width",g+"px"),ho.getContent(a).each(C=>{i.event.focus.bind(w=>(wo(w),Uc(d))).orThunk(()=>(ct.focusIn(C),Ji(ur(d))))}),setTimeout(()=>{Rt(a.element,"width",p+"px")},0)}),ve(z$,(a,i)=>{ho.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Ji(ur(a.element))}]))}),at(a,iA,{contents:i.event.forwardContents,focus:k.none()})}),ve(U$,(a,i)=>{Cp(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),at(a,iA,{contents:bc(d.bar),focus:d.focus})})})]),ct.config({mode:"special",onEscape:a=>Cp(s.get()).fold(()=>t.onEscape(),i=>(hn(a,U$),k.some(!0)))})]),lazySink:()=>Nt.value(t.sink)})},uA="tox-pop--transition",Hz=(t,s,a,i)=>{const d=i.backstage,g=d.shared,p=mr().deviceType.isTouch,C=Kn(),w=Kn(),E=Kn(),_=Is(eC({sink:a,onEscape:()=>(t.focus(),k.some(!0))})),D=()=>{const ot=E.get().getOr("node"),At=F$(ot)?1:0;return $$(t,g,ot,At)},M=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),P=ot=>Na(gd(ot,C.get(),$n),!0),I=()=>{if(M()){const ot=D(),At=Na(E.get(),"node")?Mz(t,C.get()):aA(t);return ot.height<=0||!rA(At,ot,.01)}else return!0},U=()=>{C.clear(),w.clear(),E.clear(),ho.hide(_)},ne=()=>{if(ho.isOpen(_)){const ot=_.element;sn(ot,"display"),I()?Rt(ot,"display","none"):(w.set(0),ho.reposition(_))}},Y=ot=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[ot],behaviours:De([ct.config({mode:"acyclic"}),Pt("pop-dialog-wrap-events",[Gn(At=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>ct.focusIn(At))}),fr(At=>{t.shortcuts.remove("ctrl+F9")})])])}),j=Li(()=>Lz(s,ot=>{const At=Re([ot]);at(_,z$,{forwardContents:Y(At)})})),pe=(ot,At)=>J2(t,{buttons:ot,toolbar:At.items,allowToolbarGroups:!1},i.backstage,k.some(["form:"])),ce=(ot,At)=>Dz.buildInitGroups(ot,At),Re=ot=>{const{buttons:At}=t.ui.registry.getAll(),Et=j(),Qt={...At,...Et.formNavigators},ut=Eb(t)===Ai.scrolling?Ai.scrolling:Ai.default,Yt=Ft(we(ot,$e=>$e.type==="contexttoolbar"?pe(Qt,$e):ce($e,g.providers)));return G2({type:ut,uid:je("context-toolbar"),initGroups:Yt,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},ke=(ot,At)=>{const Et=ot==="node"?g.anchors.node(At):g.anchors.cursor(),Qt=FE(t,ot,p(),{lastElement:C.get,isReposition:()=>Na(w.get(),0),getMode:()=>fs.getMode(a)});return Vn(Et,Qt)},Ne=(ot,At)=>{if(Zt.cancel(),!M())return;const Et=Re(ot),Qt=ot[0].position,ut=ke(Qt,At);E.set(Qt),w.set(1);const Yt=_.element;sn(Yt,"display"),P(At)||(mn(Yt,uA),fs.reset(a,_)),ho.showWithinBounds(_,Y(Et),{anchor:ut,transition:{classes:[uA],mode:"placement"}},()=>k.some(D())),At.fold(C.clear,C.set),I()&&Rt(Yt,"display","none")};let Ue=!1;const Zt=$x(()=>{if(!(!t.hasFocus()||t.removed||Ue))if(Mr(_.element,uA))Zt.throttle();else{const ot=j();V$(ot,t).fold(U,At=>{Ne(At.toolbars,k.some(At.elem))})}},17);t.on("init",()=>{t.on("remove",U),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ne),t.on("click keyup focus SetContent",Zt.throttle),t.on(PE,U),t.on(Tz,ot=>{const At=j();Ze(At.lookupTable,ot.toolbarKey).each(Et=>{Ne([Et],kt(ot.target!==t,ot.target)),ho.getContent(_).each(ct.focusIn)})}),t.on("focusout",ot=>{NS.setEditorTimeout(t,()=>{Uc(a.element).isNone()&&Uc(_.element).isNone()&&U()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&U()}),t.on("AfterProgressState",ot=>{ot.state?U():t.hasFocus()&&Zt.throttle()}),t.on("dragstart",()=>{Ue=!0}),t.on("dragend drop",()=>{Ue=!1}),t.on("NodeChange",ot=>{Uc(_.element).fold(Zt.throttle,K)})})},Vz=t=>{qe([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Xa(t,a.cmd),onSetup:ix(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Cr(t),onAction:Xa(t,"JustifyNone")})},dA=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Kn();return we(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:C=>{const w=_=>{_&&(g.on(D=>D.setActive(!1)),g.set(C)),C.setActive(_)};w(Na(d,s.hash(p)));const E=s.watcher(t,p,w);return()=>{g.clear(),E()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},zz=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:MR,hash:s=>z9(s,["fixed","relative","empty"]).getOr(s),display:en,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>k.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Cr(t),onMenuSetup:Cr(t)}),W$=t=>k.from(U_(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:Q(a),hash:i=>ca(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=te.fromDom(i.selection.getNode());return Xm(d,g=>k.some(g).filter(Pn).bind(p=>jo(p,"lang").map(w=>{const E=jo(p,"data-mce-lang").getOrUndefined();return{code:w,customCode:E,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=$r();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),cx(d.clear,Cr(t)(i))},onMenuSetup:Cr(t)})),Uz=t=>{dA(t,zz(t)),W$(t).each(s=>dA(t,s))},Wz=(t,s)=>{i$(t,s),L9(t,s),b$(t,s),fg(t,s),J9(t,s)},Zz=t=>wm(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),jz=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Zz(t),onAction:Xa(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Cr(t),onAction:Xa(t,"indent")})},Gz=t=>{jz(t)},tv=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),cx(()=>t.off("PastePlainTextToggle",i),Cr(t)(a))},Z$=t=>{const s=gt(Iy(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:tv(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:tv(t,s)})},mA=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},qz=t=>{eu.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ix(t,s.name),onAction:mA(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:ix(t,a),onAction:mA(t,a)})}},j$=t=>{eu.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Xa(t,s.action)})}),eu.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Cr(t),onAction:Xa(t,s.action)})})},fA=t=>{eu.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Xa(t,s.action),onSetup:ix(t,s.name)})})},G$=t=>{qz(t),j$(t),fA(t)},q$=t=>{eu.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Xa(t,s.action)})}),eu.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Cr(t),onAction:Xa(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Cr(t),onAction:mA(t,"code")})},Kz=t=>{G$(t),q$(t)},km=(t,s)=>wm(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),LE=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:km(t,"hasUndo"),onAction:Xa(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:km(t,"hasRedo"),onAction:Xa(t,"redo")})},gA=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:km(t,"hasUndo"),onAction:Xa(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:km(t,"hasRedo"),onAction:Xa(t,"redo")})},K$=t=>{LE(t),gA(t)},Y$=t=>wm(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),Yz=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Y$(t),onAction:Xa(t,"mceToggleVisualAid")})},X$=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Xa(t,"mceToggleVisualAid")})},Xz=t=>{X$(t),Yz(t)},Jz=(t,s)=>{Vz(t),Kz(t),Wz(t,s),K$(t),Vb(t),Xz(t),Gz(t),Uz(t),Z$(t)},Qz=t=>xn(t)?t.split(/[ ,]/):t,J$=t=>s=>s.options.get(t),eU=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:xn(a)||gu(a,xn)?{value:Qz(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},hA=J$("contextmenu_never_use_native"),HE=J$("contextmenu_avoid_overlap"),Q$=t=>pA(t).length===0,pA=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Yn(a,i=>wn(s,i))},ap=(t,s)=>({type:"makeshift",x:t,y:s}),tU=(t,s,a)=>ap(t.x+s,t.y+a),bA=t=>t.type==="longpress"||t.type.indexOf("touch")===0,nU=t=>{if(bA(t)){const s=t.touches[0];return ap(s.pageX,s.pageY)}else return ap(t.pageX,t.pageY)},oU=t=>{if(bA(t)){const s=t.touches[0];return ap(s.clientX,s.clientY)}else return ap(t.clientX,t.clientY)},VE=(t,s)=>{const a=wb.DOM.getPos(t);return tU(s,a.x,a.y)},e6=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?nU(s):VE(t.getContentAreaContainer(),oU(s)):t6(t),t6=t=>({type:"selection",root:te.fromDom(t.selection.getNode())}),sU=t=>({type:"node",node:k.some(te.fromDom(t.selection.getNode())),root:te.fromDom(t.getBody())}),n6=(t,s,a)=>{switch(a){case"node":return sU(t);case"point":return e6(t,s);case"selection":return t6(t)}},rU=(t,s,a,i,d,g)=>{const p=a(),C=n6(t,s,g);cg(p,ql.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(w=>{s.preventDefault(),ho.showMenuAt(d,{anchor:C},{menu:{markers:Hh("normal")},data:w})})},aU={onLtr:()=>[es,Ss,ds,br,Nr,zn,il,N2,B2,oE,M2,nE],onRtl:()=>[es,ds,Ss,Nr,br,zn,il,N2,M2,nE,B2,oE]},o6=12,s6={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},cU=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return xi(t.getWin(),mh.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},iU=t=>{const s=t.selection.getRng(),a=()=>{NS.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},r6=(t,s,a)=>{const i=n6(t,s,a);return{bubble:$l(0,a==="point"?o6:0,s6),layouts:aU,overrides:{maxWidthFunction:SE(),maxHeightFunction:Gd()},...i}},lU=(t,s,a,i,d,g,p)=>{const C=r6(t,s,g);cg(a,ql.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(w=>{s.preventDefault();const E=p?_a.HighlightMenuAndItem:_a.HighlightNone;ho.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Hh("normal"),highlightOnOpen:E},data:w,type:"horizontal"},()=>k.some($$(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(PE)})},uU=(t,s,a,i,d,g)=>{const p=mr(),C=p.os.isiOS(),w=p.os.isMacOS(),E=p.os.isAndroid(),_=p.deviceType.isTouch(),D=()=>!(E||C||w&&_),M=()=>{const P=a();lU(t,s,P,i,d,g,D())};if((w||C)&&g!=="node"){const P=()=>{iU(t),M()};cU(t,s)?P():(t.once("selectionchange",P),t.once("touchend",()=>t.off("selectionchange",P)))}else M()},a6=t=>xn(t)?t==="|":t.type==="separator",vA={type:"separator"},c6=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(xn(t))return t;switch(t.type){case"separator":return vA;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return xn(i)?i:we(i,c6)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Sn(a.onAction)}}},zE=(t,s)=>{if(s.length===0)return t;const i=Cp(t).filter(d=>!a6(d)).fold(()=>[],d=>[vA]);return t.concat(i).concat(s).concat([vA])},dU=(t,s,a)=>{const i=eo(s,(d,g)=>Ze(t,g.toLowerCase()).map(p=>{const C=p.update(a);if(xn(C))return zE(d,C.split(" "));if(C.length>0){const w=we(C,c6);return zE(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&a6(i[i.length-1])&&i.pop(),i},mU=(t,s)=>s.ctrlKey&&!hA(t),yA=t=>t.type==="longpress"||wn(t,"touches"),CA=(t,s)=>!yA(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),wA=(t,s)=>CA(t,s)?t.selection.getStart(!0):s.target,fU=(t,s)=>{const a=HE(t),i=CA(t,s)?"selection":"point";if(sc(a)){const d=wA(t,s);return u2(te.fromDom(d),a)?"node":i}else return i},gU=(t,s,a)=>{const d=mr().deviceType.isTouch,g=Is(ho.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:De([Pt("dismissContextMenu",[ve(ji(),(w,E)=>{Xt.close(w),t.focus()})])])})),p=()=>ho.hide(g),C=w=>{if(hA(t)&&w.preventDefault(),mU(t,w)||Q$(t))return;const E=fU(t,w),_=()=>{const M=wA(t,w),P=t.ui.registry.getAll(),I=pA(t);return dU(P.contextMenus,I,M)};(d()?uU:rU)(t,w,_,a,g,E)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,p),t.on("longpress contextmenu",C)})},SA=ya.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),UE=t=>s=>s.translate(-t.left,-t.top),WE=t=>s=>s.translate(t.left,t.top),cd=t=>(s,a)=>eo(t,(i,d)=>d(i),ao(s,a)),ZE=(t,s,a)=>t.fold(cd([WE(a),UE(s)]),cd([UE(s)]),cd([])),cp=(t,s,a)=>t.fold(cd([WE(a)]),cd([]),cd([WE(s)])),i6=(t,s,a)=>t.fold(cd([]),cd([UE(a)]),cd([WE(s),UE(a)])),hU=(t,s,a,i,d,g)=>{const p=cp(t,d,g),C=cp(s,d,g);return Math.abs(p.left-C.left)<=a&&Math.abs(p.top-C.top)<=i},xA=(t,s,a,i,d,g)=>{const p=cp(t,d,g),C=cp(s,d,g),w=Math.abs(p.left-C.left),E=Math.abs(p.top-C.top);return ao(w,E)},EA=(t,s,a)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-a.left+"px"),top:k.some(g-a.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},pU=(t,s,a)=>t.fold((i,d)=>nv(i+s,d+a),(i,d)=>gg(i+s,d+a),(i,d)=>ip(i+s,d+a)),TA=(t,s,a,i)=>{const d=(g,p)=>(C,w)=>{const E=g(s,a,i);return p(C.getOr(E.left),w.getOr(E.top))};return t.fold(d(i6,nv),d(cp,gg),d(ZE,ip))},nv=SA.offset,gg=SA.absolute,ip=SA.fixed,l6=(t,s)=>{const a=dr(t,s);return ca(a)?NaN:parseInt(a,10)},bU=(t,s)=>{const a=t.element,i=l6(a,s.leftAttr),d=l6(a,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(ao(i,d))},vU=(t,s,a)=>{const i=t.element;Vt(i,s.leftAttr,a.left+"px"),Vt(i,s.topAttr,a.top+"px")},u6=(t,s)=>{const a=t.element;zo(a,s.leftAttr),zo(a,s.topAttr)},yU=(t,s,a,i)=>bU(t,s).fold(()=>a,d=>ip(d.left+i.left,d.top+i.top)),CU=(t,s,a,i,d,g)=>{const p=yU(t,s,a,i),C=s.mustSnap?SU(t,s,p,d,g):xU(t,s,p,d,g),w=ZE(p,d,g);return vU(t,s,w),C.fold(()=>({coord:ip(w.left,w.top),extra:k.none()}),E=>({coord:E.output,extra:E.extra}))},wU=(t,s)=>{u6(t,s)},d6=(t,s,a,i)=>Ws(t,d=>{const g=d.sensor;return hU(s,g,d.range.left,d.range.top,a,i)?k.some({output:TA(d.output,s,a,i),extra:d.extra}):k.none()}),SU=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return d6(g,a,i,d).orThunk(()=>eo(g,(w,E)=>{const _=E.sensor,D=xA(a,_,E.range.left,E.range.top,i,d);return w.deltas.fold(()=>({deltas:k.some(D),snap:k.some(E)}),M=>{const P=(D.left+D.top)/2,I=(M.left+M.top)/2;return P<=I?{deltas:k.some(D),snap:k.some(E)}:w})},{deltas:k.none(),snap:k.none()}).snap.map(w=>({output:TA(w.output,a,i,d),extra:w.extra})))},xU=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return d6(g,a,i,d)},EU=(t,s,a)=>({coord:TA(t.output,t.output,s,a),extra:t.extra});var m6=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=$a(t.element),p=pa(g),C=aP(d),w=EU(i,p,C),E=EA(w.coord,p,C);$c(d,E)}}});const kA="data-initial-z-index",f6=t=>{ci(t.element).filter(Pn).each(s=>{jo(s,kA).fold(()=>sn(s,"z-index"),a=>Rt(s,"z-index",a)),zo(s,kA)})},TU=t=>{ci(t.element).filter(Pn).each(s=>{Cs(s,"z-index").each(a=>{Vt(s,kA,a)}),Rt(s,"z-index",Te(t.element,"z-index"))})},g6=(t,s)=>{t.getSystem().addToGui(s),TU(s)},kU=t=>{f6(t),t.getSystem().removeFromGui(t)},hg=(t,s,a)=>t.getSystem().build(Ql.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var h6=Bo("snaps",[me("getSnapPoints"),zt("onSensor"),me("leftAttr"),me("topAttr"),oe("lazyViewport",Dr),oe("mustSnap",!1)]);const _A=[oe("useFixed",An),me("blockerClass"),oe("getTarget",en),oe("onDrag",K),oe("repositionTarget",!0),oe("onDrop",K),To("getBounds",Dr),h6],_U=t=>Rm(Cs(t,"left"),Cs(t,"top"),Cs(t,"position"),(s,a,i)=>(i==="fixed"?ip:nv)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Gr(t);return gg(s.left,s.top)}),OU=(t,s,a,i,d)=>{const g=d.bounds,p=cp(s,a,i),C=pr(p.left,g.x,g.x+g.width-d.width),w=pr(p.top,g.y,g.y+g.height-d.height),E=gg(C,w);return s.fold(()=>{const _=i6(E,a,i);return nv(_.left,_.top)},Q(E),()=>{const _=ZE(E,a,i);return ip(_.left,_.top)})},AU=(t,s,a,i,d,g,p)=>{const C=s.fold(()=>{const w=pU(a,g.left,g.top),E=ZE(w,i,d);return ip(E.left,E.top)},w=>{const E=CU(t,w,a,g,i,d);return E.extra.each(_=>{w.onSensor(t,_)}),E.coord});return OU(t,C,i,d,p)},p6=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=$a(t.element),p=pa(g),C=aP(d),w=_U(d),E=AU(t,s.snaps,w,p,C,i,a),_=EA(E,p,C);$c(d,_)}s.onDrag(t,d,i)},b6=(t,s)=>({bounds:t.getBounds(),height:bl(s.element),width:ha(s.element)}),OA=(t,s,a,i,d)=>{const g=a.update(i,d),p=a.getStartData().getOrThunk(()=>b6(s,t));g.each(C=>{p6(t,s,p,C)})},v6=(t,s,a,i)=>{s.each(kU),a.snaps.each(g=>{wU(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},AA=t=>(s,a)=>{const i=d=>{a.setStartData(b6(s,d))};return Fn([ve(Pd(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},DU=t=>Fn([ve(Ua(),t.forceDrop),ve(Ca(),t.drop),ve(Qp(),(s,a)=>{t.move(a.event)}),ve(Fg(),t.delayDrop)]);var RU=Object.freeze({__proto__:null,getData:t=>k.from(ao(t.x,t.y)),getDelta:(t,s)=>ao(s.left-t.left,s.top-t.top)});const y6=(t,s,a)=>[ve(Ua(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>v6(i,k.some(E),t,s),C=SB(p,200),w={drop:p,delayDrop:C.schedule,forceDrop:p,move:D=>{C.cancel(),OA(i,t,s,RU,D)}},E=hg(i,t.blockerClass,DU(w));(()=>{a(i),g6(i,E)})()})],MU=[..._A,qn("dragger",{handlers:AA(y6)})],C6=t=>Fn([ve(Wi(),t.forceDrop),ve(Md(),t.drop),ve(NC(),t.drop),ve(Jm(),(s,a)=>{t.move(a.event)})]),w6=t=>{const s=t[0];return k.some(ao(s.clientX,s.clientY))};var S6=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?w6(a):k.none()},getDelta:(t,s)=>ao(s.left-t.left,s.top-t.top)});const x6=(t,s,a)=>{const i=Kn(),d=g=>{v6(g,i.get(),t,s),i.clear()};return[ve(Wi(),(g,p)=>{p.stop();const C=()=>d(g),w={drop:C,delayDrop:K,forceDrop:C,move:D=>{OA(g,t,s,S6,D)}},E=hg(g,t.blockerClass,C6(w));i.set(E),(()=>{a(g),g6(g,E)})()}),ve(Jm(),(g,p)=>{p.stop(),OA(g,t,s,S6,p.event)}),ve(Md(),(g,p)=>{p.stop(),d(g)}),ve(NC(),d)]},DA=[..._A,qn("dragger",{handlers:AA(x6)})],BU=(t,s,a)=>[...y6(t,s,a),...x6(t,s,a)],NU=[..._A,qn("dragger",{handlers:AA(BU)})];var PU=Object.freeze({__proto__:null,mouse:MU,touch:DA,mouseOrTouch:NU}),$U=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const a=()=>{t=k.none(),s=k.none()},i=(w,E)=>{const _=t.map(D=>w.getDelta(D,E));return t=k.some(E),_},d=(w,E)=>w.getData(E).bind(_=>i(w,_)),g=w=>{s=k.some(w)},p=()=>s,C=Q({});return wa({readState:C,reset:a,update:d,getStartData:p,setStartData:g})}});const lp=O0({branchKey:"mode",branches:PU,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)})},state:$U,apis:m6}),RA=40,GE=RA/2,E6=(t,s,a,i,d,g)=>t.fold(()=>lp.snap({sensor:gg(a-GE,i-GE),range:ao(d,g),output:gg(k.some(a),k.some(i)),extra:{td:s}}),p=>{const C=a-GE,w=i-GE,E=RA,_=RA,D=p.element.dom.getBoundingClientRect();return lp.snap({sensor:gg(C,w),range:ao(E,_),output:gg(k.some(a-D.width/2),k.some(i-D.height/2)),extra:{td:s}})}),T6=(t,s,a)=>{const i=(d,g)=>d.exists(p=>$n(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},k6=t=>yn(rr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:De([lp.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),g2.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),FU=(t,s)=>{const a=gt([]),i=gt([]),d=gt(!1),g=Kn(),p=Kn(),C=Ne=>{const Ue=ic(Ne);return E6(P.getOpt(s),Ne,Ue.x,Ue.y,Ue.width,Ue.height)},w=()=>we(a.get(),Ne=>C(Ne)),E=Ne=>{const Ue=ic(Ne);return E6(I.getOpt(s),Ne,Ue.right,Ue.bottom,Ue.width,Ue.height)},_=()=>we(i.get(),Ne=>E(Ne)),D=T6(w,g,Ne=>{p.get().each(Ue=>{t.dispatch("TableSelectorChange",{start:Ne,finish:Ue})})}),M=T6(_,p,Ne=>{g.get().each(Ue=>{t.dispatch("TableSelectorChange",{start:Ue,finish:Ne})})}),P=k6(D),I=k6(M),U=Is(P.asSpec()),ne=Is(I.asSpec()),Y=(Ne,Ue,Zt,ot)=>{const At=Ue.dom.getBoundingClientRect();sn(Ne.element,"display");const Et=yd(te.fromDom(t.getBody())).dom.innerHeight,Qt=Zt(At),ut=ot(At,Et);(Qt||ut)&&Rt(Ne.element,"display","none")},j=(Ne,Ue,Zt,ot)=>{const At=Zt(Ue);lp.snapTo(Ne,At),Y(Ne,Ue,ut=>ut[ot]<0,(ut,Yt)=>ut[ot]>Yt)},pe=Ne=>j(U,Ne,C,"top"),ce=()=>g.get().each(pe),Re=Ne=>j(ne,Ne,E,"bottom"),ke=()=>p.get().each(Re);mr().deviceType.isTouch()&&(t.on("TableSelectionChange",Ne=>{d.get()||(nl(s,U),nl(s,ne),d.set(!0)),g.set(Ne.start),p.set(Ne.finish),Ne.otherCells.each(Ue=>{a.set(Ue.upOrLeftCells),i.set(Ue.downOrRightCells),pe(Ne.start),Re(Ne.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ce(),ke()}),t.on("TableSelectionClear",()=>{d.get()&&(Zc(U),Zc(ne),d.set(!1)),g.clear(),p.clear()}))};var IU=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const LU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",qE=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(E,_,D)=>rr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":D,"aria-level":D+1}},components:[ko(E)],action:M=>{t.focus(),t.selection.select(_),t.nodeChanged()},buttonBehaviours:De([sl.button(a.isDisabled),ps()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[ko(` ${d} `)]}),C=E=>eo(E,(_,D,M)=>{const P=g(D.name,D.element,M);return M===0?_.concat([P]):_.concat([p(),P])},[]),w=E=>{const _=[];let D=E.length;for(;D-- >0;){const M=E[D];if(M.nodeType===1&&!LU(M)){const P=jh(t,M);if(P.isDefaultPrevented()||_.push({name:P.name,element:M}),P.isPropagationStopped())break}}return _};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:De([ct.config({mode:"flow",selector:"div[role=button]"}),ht.config({disabled:a.isDisabled}),ps(),So.config({}),xt.config({}),Pt("elementPathEvents",[Gn((E,_)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>ct.focusIn(E)),t.on("NodeChange",D=>{const M=w(D.parents),P=M.length>0?C(M):[];xt.set(E,P)})})])]),components:[]}};var pg;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(pg||(pg={}));const HU=(t,s,a,i,d)=>{const g={height:NE(i+s.top,H_(t),V_(t))};return a===pg.Both&&(g.width=NE(d+s.left,FS(t),IS(t))),g},_6=(t,s,a)=>{const i=te.fromDom(t.getContainer()),d=HU(t,s,a,Go(i),Or(i));ys(d,(g,p)=>{gl(g)&&Rt(i,p,BE(g))}),Tc(t)},VU=t=>{const s=OR(t);return s===!1?pg.None:s==="both"?pg.Both:pg.Vertical},KE=(t,s,a,i)=>{const g=ao(a*20,i*20);return _6(t,g,s),k.some(!0)},zU=(t,s)=>{const a=VU(t);if(a===pg.None)return k.none();const i=a===pg.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return k.some(Yc("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize"),"aria-label":s.translate(i)},behaviours:[lp.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,p)=>_6(t,p,a),blockerClass:"tox-blocker"}),ct.config({mode:"special",onLeft:()=>KE(t,a,-1,0),onRight:()=>KE(t,a,1,0),onUp:()=>KE(t,a,0,-1),onDown:()=>KE(t,a,0,1)}),So.config({}),bt.config({})]},s.icons))},O6=(t,s)=>{const a=(i,d,g)=>xt.set(i,[ko(s.translate(["{0} "+g,d[g]]))]);return rr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:De([sl.button(s.isDisabled),ps(),So.config({}),xt.config({}),Ve.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Pt("wordcount-events",[vi(i=>{const d=Ve.getValue(i),g=d.mode==="words"?"characters":"words";Ve.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Gn(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Ve.getValue(i);Ve.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[Wa()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},UU=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":zr.translate(["Powered by {0}","Tiny"])},innerHtml:IU.trim()},behaviours:De([bt.config({})])}]}),i=()=>{const g=[];return K_(t)&&g.push(qE(t,{},s)),t.hasPlugin("wordcount")&&g.push(O6(t,s)),zS(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=i(),p=zU(t,s);return g.concat(p.toArray())})()}},A6=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),WU=(t,s)=>{const a=t.inline,i=a?xz:vz,d=Uy(t)?Qb:rP,g=Ez(),p=Kn(),C=Kn(),w=Kn(),M=mr().deviceType.isTouch()?["tox-platform-touch"]:[],P=Vy(t),I=Eb(t),U=yn({dom:{tag:"div",classes:["tox-anchorbar"]}}),ne=yn({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Y=()=>g.mainUi.get().map(dt=>dt.outerContainer).bind(Ln.getHeader),j=()=>Nt.fromOption(g.dialogUi.get().map(dt=>dt.sink),"UI has not been rendered"),pe=()=>Nt.fromOption(g.popupUi.get().map(dt=>dt.sink),"(popup) UI has not been rendered"),ce=g.lazyGetInOuterOrDie("anchor bar",U.getOpt),Re=g.lazyGetInOuterOrDie("bottom anchor bar",ne.getOpt),ke=g.lazyGetInOuterOrDie("toolbar",Ln.getToolbar),Ne=g.lazyGetInOuterOrDie("throbber",Ln.getThrobber),Ue=nP({popup:pe,dialog:j},t,ce,Re),Zt=()=>{const dt={attributes:{[V1]:P?vc.BottomToTop:vc.TopToBottom}},Tt=Ln.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ue.popup,onEscape:()=>{t.focus()}}),Bn=Ln.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ue.popup.shared.getSink,providers:Ue.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Am=>{ax(t,Am)},type:I,lazyToolbar:ke,lazyHeader:()=>Y().getOrDie("Could not find header element"),...dt}),pn=Ln.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ue.popup.shared.providers,onEscape:()=>{t.focus()},type:I}),Wr=Hy(t),so=Ly(t),nc=US(t),ul=DR(t),vg=ot(),yg=Wr||so||nc,hp=()=>Wr?[pn]:so?[Bn]:[],Cg=ul?[vg,Tt]:[Tt];return Ln.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(yg?[]:["tox-editor-header--empty"]),...dt},components:Ft([nc?Cg:[],hp(),kb(t)?[]:[U.asSpec()]]),sticky:Uy(t),editor:t,sharedBackstage:Ue.popup.shared})},ot=()=>Ln.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),At=()=>{const dt=Ln.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Tt=Ln.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[dt,Tt]}},Et=()=>{const dt=J_(t),Tt=$n(qs(),dt)&&Te(dt,"display")==="grid",Bn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(M),attributes:{...zr.isRtl()?{dir:"rtl"}:{}}},behaviours:De([fs.config({useFixed:()=>d.isDocked(Y)})])},pn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Fn([ve(kl(),nc=>{Rt(nc.element,"width",document.body.clientWidth+"px")})])},Wr=Is(Vn(Bn,Tt?pn:{})),so=e3(Wr);return C.set(so),{sink:Wr,mothership:so}},Qt=()=>{const dt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(M),attributes:{...zr.isRtl()?{dir:"rtl"}:{}}},behaviours:De([fs.config({useFixed:()=>d.isDocked(Y),getBounds:()=>s.getPopupSinkBounds()})])},Tt=Is(dt),Bn=e3(Tt);return w.set(Bn),{sink:Tt,mothership:Bn}},ut=()=>{const dt=Zt(),Tt=At(),Bn=Ln.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ue.popup}),pn=Ln.parts.viewWrapper({backstage:Ue.popup}),Wr=_R(t)&&!a?k.some(UU(t,Ue.popup.shared.providers)):k.none(),so=Ft([P?[]:[dt],a?[]:[Tt],P?[dt]:[]]),nc=Ln.parts.editorContainer({components:Ft([so,a?[]:[ne.asSpec(),...Wr.toArray()]])}),ul=zy(t),vg={role:"application",...zr.isRtl()?{dir:"rtl"}:{},...ul?{"aria-hidden":"true"}:{}},yg=Is(Ln.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(P?["tox-tinymce--toolbar-bottom"]:[]).concat(M),styles:{visibility:"hidden",...ul?{opacity:"0",border:"0"}:{}},attributes:vg},components:[nc,...a?[]:[pn],Bn],behaviours:De([ps(),ht.config({disableClass:"tox-tinymce--disabled"}),ct.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),hp=e3(yg);return p.set(hp),{mothership:hp,outerContainer:yg}},Yt=dt=>{const Tt=BE(A$(t)),Bn=BE(yz(t));return t.inline||(fC("div","width",Bn)&&Rt(dt.element,"width",Bn),fC("div","height",Tt)?Rt(dt.element,"height",Tt):Rt(dt.element,"height","400px")),Tt},$e=dt=>{t.addShortcut("alt+F9","focus menubar",()=>{Ln.focusMenubar(dt)}),t.addShortcut("alt+F10","focus toolbar",()=>{Ln.focusToolbar(dt)}),t.addCommand("ToggleToolbarDrawer",(Tt,Bn)=>{Bn!=null&&Bn.skipFocus?Ln.toggleToolbarDrawerWithoutFocusing(dt):Ln.toggleToolbarDrawer(dt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Ln.isToolbarDrawerToggled(dt))},et=dt=>{const{mainUi:Tt,popupUi:Bn,uiMotherships:pn}=dt;vo(W_(t),(YA,fv)=>{t.ui.registry.addGroupToolbarButton(fv,YA)});const{buttons:Wr,menuItems:so,contextToolbars:nc,sidebars:ul,views:vg}=t.ui.registry.getAll(),yg=X_(t),hp={menuItems:so,menus:BR(t),menubar:wR(t),toolbar:yg.getOrThunk(()=>Tb(t)),allowToolbarGroups:I===Ai.floating,buttons:Wr,sidebar:ul,views:vg};$e(Tt.outerContainer),cV(t,Tt.mothership,pn),d.setup(t,Ue.popup.shared,Y),Jz(t,Ue.popup),gU(t,Ue.popup.shared.getSink,Ue.popup),OO(t),KV(t,Ne,Ue.popup.shared),Hz(t,nc,Bn.sink,{backstage:Ue.popup}),FU(t,Bn.sink);const Cg=t.getElement(),Am=Yt(Tt.outerContainer),KA={targetNode:Cg,height:Am};return i.render(t,dt,hp,Ue.popup,KA)},St=dt=>(w.set(dt.mothership),dt),jt=()=>{const dt=ut(),Tt=Et(),Bn=pm(t)?Qt():St(Tt);g.dialogUi.set(Tt),g.popupUi.set(Bn),g.mainUi.set(dt);const pn={popupUi:Bn,dialogUi:Tt,mainUi:dt,uiMotherships:g.getUiMotherships()};return et(pn)};return{popups:{backstage:Ue.popup,getMothership:()=>A6("popups",w)},dialogs:{backstage:Ue.dialog,getMothership:()=>A6("dialogs",C)},renderUI:jt}},ZU=(t,s)=>{const a=jo(t,"id").fold(()=>{const i=je("dialog-label");return Vt(s,"id",i),i},en);Vt(t,"aria-labelledby",a)},jU=Q([me("lazySink"),bn("dragBlockClass"),To("getBounds",Dr),oe("useTabstopAt",pt),oe("firstTabstop",0),oe("eventOrder",{}),ts("modalBehaviours",[ct]),xa("onExecute"),Cf("onEscape")]),tC={sketch:en},D6=Q([wc({name:"draghandle",overrides:(t,s)=>({behaviours:De([lp.config({mode:"mouse",getTarget:a=>Nl(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Es({schema:[me("dom")],name:"title"}),Es({factory:tC,schema:[me("dom")],name:"close"}),Es({factory:tC,schema:[me("dom")],name:"body"}),wc({factory:tC,schema:[me("dom")],name:"footer"}),jc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[oe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),oe("components",[])],name:"blocker"})]),GU=(t,s,a,i)=>{const d=Kn(),g=P=>{d.set(P);const I=t.lazySink(P).getOrDie(),U=i.blocker(),ne=I.getSystem().build({...U,components:U.components.concat([bc(P)]),behaviours:De([bt.config({}),Pt("dialog-blocker-events",[cf(hi(),()=>{cu.isBlocked(P)?K():ct.focusIn(P)})])])});nl(I,ne),ct.focusIn(P)},p=P=>{d.clear(),ci(P.element).each(I=>{P.getSystem().getByDom(I).each(U=>{Zc(U)})})},C=P=>Ku(P,t,"body"),w=P=>Rn(P,t,"footer"),E=(P,I)=>{cu.block(P,I)},_=P=>{cu.unblock(P)},D=je("modal-events"),M={...t.eventOrder,[na()]:[D].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:C,getFooter:w,setIdle:_,setBusy:E},eventOrder:M,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:_o(t.modalBehaviours,[xt.config({}),ct.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),cu.config({getRoot:d.get}),Pt(D,[Gn(P=>{ZU(P.element,Ku(P,t,"title").element)})])])}},Ts=ns({name:"ModalDialog",configFields:jU(),partFields:D6(),factory:GU,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),qU=lt([No,Ky].concat(Wh)),KU=jm,MA=[m4("button"),Xc,va("align","end",["start","end"]),QS,Di,Gp("buttonType",["primary","secondary"])],R6=[...MA,Qu],BA=[Lc("type",["submit","cancel","custom"]),...R6],YU=[Lc("type",["menu"]),vm,Rb,Xc,Va("items",qU),...MA],XU=[...MA,Lc("type",["togglebutton"]),is("tooltip"),Xc,vm,Fs("active",!1)],JU=Uo("type",{submit:BA,cancel:BA,custom:BA,menu:YU,togglebutton:XU}),QU=[No,Qu,Lc("level",["info","warn","error","success"]),XS,oe("url","")],eW=lt(QU),tW=t=>[No,t],nW=[No,Qu,Di,m4("button"),Xc,YR,Gp("buttonType",["primary","secondary","toolbar"]),QS],oW=lt(nW),ov=[No,Ky],iu=ov.concat([c4]),sW=ov.concat([Ob,Di]),rW=lt(sW),aW=jm,cW=iu.concat([XR("auto")]),M6=lt(cW),B6=jv([Yy,Qu,XS]),up=iu.concat([za("storageKey","default")]),iW=lt(up),NA=fo,lW=lt(iu),uW=fo,dW=ov.concat([za("tag","textarea"),is("scriptId"),is("scriptUrl"),Kp("settings",void 0)]),mW=ov.concat([za("tag","textarea"),fc("init")]),fW=ku(t=>kn("customeditor.old",$s(mW),t).orThunk(()=>kn("customeditor.new",$s(dW),t))),dp=fo,hW=lt(iu),pW=Gm(),bW=t=>[No,DC("columns"),t],vW=[No,is("html"),va("presets","presentation",["presentation","document"])],yW=lt(vW),CW=iu.concat([Fs("border",!1),Fs("sandboxed",!0),Fs("streamContent",!1),Fs("transparent",!0)]),wW=lt(CW),SW=fo,$A=lt(ov.concat([Js("height")])),nC=lt([is("url"),Pg("zoom"),Pg("cachedWidth"),Pg("cachedHeight")]),FA=iu.concat([Js("inputMode"),Js("placeholder"),Fs("maximized",!1),Di]),YE=lt(FA),mp=fo,XE=t=>[No,Ob,t,va("align","start",["start","center","end"])],xW=[Qu,Yy],N6=[Qu,Va("items",Rd("items",()=>IA))],IA=Dd([lt(xW),lt(N6)]),P6=iu.concat([Va("items",IA),Di]),EW=lt(P6),TW=fo,kW=iu.concat([RC("items",[Qu,Yy]),qp("size",1),Di]),$6=lt(kW),F6=fo,LA=iu.concat([Fs("constrain",!0),Di]),_W=lt(LA),I6=lt([is("width"),is("height")]),OW=ov.concat([Ob,qp("min",0),qp("max",0)]),L6=lt(OW),AW=Zp,DW=[No,Va("header",fo),Va("cells",We(fo))],RW=lt(DW),HA=iu.concat([Js("placeholder"),Fs("maximized",!1),Di]),VA=lt(HA),MW=fo,zA=[Lc("type",["directory","leaf"]),Kl,is("id"),Vi("menu",SP)],H6=lt(zA),V6=zA.concat([Va("children",Rd("children",()=>Ha("type",{directory:z6,leaf:H6})))]),z6=lt(V6),BW=Ha("type",{directory:z6,leaf:H6}),fp=[No,Va("items",BW),Ou("onLeafAction"),Ou("onToggleExpand"),Km("defaultExpandedIds",[],fo),Js("defaultSelectedId")],U6=lt(fp),NW=iu.concat([va("filetype","file",["image","media","file"]),Di]),JE=lt(NW),sv=lt([Yy,u4]),rv=t=>As("items","items",Tn(),We(ku(s=>kn(`Checking item of ${t}`,QE,s).fold(a=>Nt.error(qm(a)),a=>Nt.value(a))))),QE=Wp(()=>Ha("type",{alertbanner:eW,bar:lt(tW(rv("bar"))),button:oW,checkbox:rW,colorinput:iW,colorpicker:lW,dropzone:hW,grid:lt(bW(rv("grid"))),iframe:wW,input:YE,listbox:EW,selectbox:$6,sizeinput:_W,slider:L6,textarea:VA,urlinput:JE,customeditor:fW,htmlpanel:yW,imagepreview:$A,collection:M6,label:lt(XE(rv("label"))),table:RW,tree:U6,panel:Da})),eT=[No,oe("classes",[]),Va("items",QE)],Da=lt(eT),tT=[m4("tab"),Kl,Va("items",QE)],W6=[No,RC("tabs",tT)],Z6=lt(W6),PW=R6,$W=JU,bg=lt([is("title"),ta("body",Ha("type",{panel:Da,tabpanel:Z6})),za("size","normal"),Km("buttons",[],$W),oe("initialData",{}),To("onAction",K),To("onChange",K),To("onSubmit",K),To("onClose",K),To("onCancel",K),To("onTabChange",K)]),sj=t=>kn("dialog",bg,t),FW=lt([Lc("type",["cancel","custom"]),...PW]),j6=lt([is("title"),is("url"),Pg("height"),Pg("width"),Sl("buttons",FW),To("onAction",K),To("onCancel",K),To("onClose",K),To("onMessage",K)]),av=t=>kn("dialog",j6,t),cv=t=>Bc(t)?[t].concat(be(pv(t),cv)):ml(t)?be(t,cv):[],G6=t=>xn(t.type)&&xn(t.name),IW={checkbox:aW,colorinput:NA,colorpicker:uW,dropzone:pW,input:mp,iframe:SW,imagepreview:nC,selectbox:F6,sizeinput:I6,slider:AW,listbox:TW,size:I6,textarea:MW,urlinput:sv,customeditor:dp,collection:B6,togglemenuitem:KU},LW=t=>k.from(IW[t.type]),HW=t=>Yn(cv(t),G6),VW=t=>{const s=HW(t),a=be(s,i=>LW(i).fold(()=>[],d=>[ta(i.name,d)]));return lt(a)},gp=t=>{var s;const a=vn(sj(t)),i=VW(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},iv={open:(t,s)=>{const a=gp(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=vn(av(s));return t(a)},redial:t=>gp(t)};var zW=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?HD:LD)(i,p)})};return Fn([ve(bi(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;Io(g.channels,p)&&a(i,g.data)}}),Gn((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),UW=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),WW=[me("channel"),bn("renderComponents"),bn("updateState"),bn("initialData"),Fs("reuseDom",!0)],ZW=Object.freeze({__proto__:null,init:()=>{const t=gt(k.none()),s=()=>t.set(k.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const si=Rs({fields:WW,name:"reflecting",active:zW,apis:UW,state:ZW}),UA=t=>{const s=[],a={};return ys(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Nt.error(s):Nt.value(a)},jW=(t,s,a)=>{const i=yn(Zb.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:we(t.items,g=>J3(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:De([ct.config({mode:"acyclic",useTabstopAt:Ce(Gb)}),cl.memento(i),jb(i,{postprocess:d=>UA(d).fold(g=>(console.error(g),{}),en)}),Pt("dialog-body-panel",[ve(hi(),(d,g)=>{d.getSystem().broadcastOn([Ix],{newFocus:k.some(g.event.target)})})])])}},aj=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Py(t.action),behaviours:_o(t.tabButtonBehaviours,[bt.config({}),ct.config({mode:"execution",useSpace:!0,useEnter:!0}),Ve.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),e=Zo({name:"TabButton",configFields:[oe("uid",void 0),me("value"),As("dom","dom",Fv(()=>({attributes:{role:"tab",id:je("aria"),"aria-selected":"false"}})),dc()),bn("action"),oe("domModification",{}),ts("tabButtonBehaviours",[bt,ct,Ve]),me("view")],factory:aj}),n=Q([me("tabs"),me("dom"),oe("clickToDismiss",!1),ts("tabbarBehaviours",[ln,ct]),Wd(["tabClass","selectedClass"])]),o=lb({factory:e,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{ln.dehighlight(i,d),at(i,Nu(),{tabbar:i,button:d})},a=(i,d)=>{ln.highlight(i,d),at(i,of(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=ln.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?K:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),r=Q([o]),c=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:_o(t.tabbarBehaviours,[ln.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Vt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Vt(g.element,"aria-selected","false")}}),ct.config({mode:"flow",getInitial:d=>ln.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),u=ns({name:"Tabbar",configFields:n(),partFields:r(),factory:c}),f=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:_o(t.tabviewBehaviours,[xt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),b=Zo({name:"Tabview",configFields:[ts("tabviewBehaviours",[xt])],factory:f}),y=Q([oe("selectFirst",!0),zt("onChangeTab"),zt("onDismissTab"),oe("tabs",[]),ts("tabSectionBehaviours",[])]),x=Es({factory:u,schema:[me("dom"),_u("markers",[me("tabClass"),me("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),A=Es({factory:b,name:"tabview"}),O=Q([x,A]),B=(t,s,a,i)=>{const d=p=>{const C=Ve.getValue(p);Rn(p,t,"tabview").each(w=>{Bt(t.tabs,_=>_.value===C).each(_=>{const D=_.view();jo(p.element,"id").each(M=>{Vt(w.element,"aria-labelledby",M)}),xt.set(w,D),t.onChangeTab(w,p,D)})})},g=(p,C)=>{Rn(p,t,"tabbar").each(w=>{C(w).each($d)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Pf(t.tabSectionBehaviours),events:Fn(Ft([t.selectFirst?[Gn((p,C)=>{g(p,ln.getFirst)})]:[],[ve(of(),(p,C)=>{const w=C.event.button;d(w)}),ve(Nu(),(p,C)=>{const w=C.event.button;t.onDismissTab(p,w)})]])),apis:{getViewItems:p=>Rn(p,t,"tabview").map(C=>xt.contents(C)).getOr([]),showTab:(p,C)=>{g(p,E=>{const _=ln.getCandidates(E);return Bt(_,M=>Ve.getValue(M)===C).filter(M=>!ln.isHighlighted(E,M))})}}}},L=ns({name:"TabSection",configFields:y(),partFields:O(),factory:B,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),z=(t,s,a)=>we(t,(i,d)=>{xt.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return xt.set(a,[]),g.height}),F=t=>ia(yp(t,(s,a)=>s>a?-1:s<a?1:0)),V=(t,s,a)=>{const i=kp(t).dom,d=Nl(t,".tox-dialog-wrap").getOr(t),g=Te(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const C=Go(s),E=s.dom.offsetLeft>=a.dom.offsetLeft+Or(a)?Math.max(Go(a),C):C,_=parseInt(Te(t,"margin-top"),10)||0,D=parseInt(Te(t,"margin-bottom"),10)||0,P=Go(t)+_+D-E;return p-P},q=(t,s)=>{ia(t).each(a=>L.showTab(s,a.value))},X=(t,s)=>{Rt(t,"height",s+"px"),Rt(t,"flex-basis",s+"px")},J=(t,s,a)=>{Nl(t,'[role="dialog"]').each(i=>{go(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Rt(s,"height","0"),Rt(s,"flex-basis","0"),Math.min(g,V(i,s,d)))).each(g=>{X(s,g)})})})},se=t=>go(t,'[role="tabpanel"]'),ye=t=>{const s=Kn();return{extraEvents:[Gn(d=>{const g=d.element;se(g).each(p=>{Rt(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(C=>{const w=z(t,p,C);F(w).fold(s.clear,s.set)}),J(g,p,s),sn(p,"visibility"),q(t,d),requestAnimationFrame(()=>{J(g,p,s)})})}),ve(kl(),d=>{const g=d.element;se(g).each(p=>{J(g,p,s)})}),ve(BB,(d,g)=>{const p=d.element;se(p).each(C=>{const w=Ji(ur(C));Rt(C,"visibility","hidden");const E=Cs(C,"height").map(M=>parseInt(M,10));sn(C,"height"),sn(C,"flex-basis");const _=C.dom.getBoundingClientRect().height;E.forall(M=>_>M)?(s.set(_),J(p,C,s)):E.each(M=>{X(C,M)}),sn(C,"visibility"),w.each(wo)})})],selectFirst:!1}},tt="send-data-to-section",xe="send-data-to-view",le=(t,s,a)=>{const i=gt({}),d=E=>{const _=Ve.getValue(E),D=UA(_).getOr({}),M=i.get(),P=Vn(M,D);i.set(P)},g=E=>{const _=i.get();Ve.setValue(E,_)},p=gt(null),C=we(t.tabs,E=>({value:E.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[ko(a.shared.providers.translate(E.title))],view:()=>[Zb.sketch(_=>({dom:{tag:"div",classes:["tox-form"]},components:we(E.items,D=>J3(_,D,s,a)),formBehaviours:De([ct.config({mode:"acyclic",useTabstopAt:Ce(Gb)}),Pt("TabView.form.events",[Gn(g),fr(d)]),Pr.config({channels:gc([{key:tt,value:{onReceive:d}},{key:xe,value:{onReceive:g}}])})])}))]})),w=ye(C);return L.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(E,_,D)=>{const M=Ve.getValue(_);at(E,MB,{name:M,oldName:p.get()}),p.set(M)},tabs:C,components:[L.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[u.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:De([So.config({})])}),L.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:w.selectFirst,tabSectionBehaviours:De([Pt("tabpanel",w.extraEvents),ct.config({mode:"acyclic"}),Kt.config({find:E=>ia(L.getViewItems(E))}),ag(k.none(),E=>(E.getSystem().broadcastOn([tt],{}),i.get()),(E,_)=>{i.set(_),E.getSystem().broadcastOn([xe],{})})])})},fe=(t,s,a,i,d)=>{const g=w=>{const E=w.body;switch(E.type){case"tabpanel":return[le(E,w.initialData,i)];default:return[jW(E,w.initialData,i)]}},p=(w,E)=>k.some({isTabPanel:()=>E.body.type==="tabpanel"}),C={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(w=>({id:w})).getOr({}),...d?C:{}}},components:[],behaviours:De([cl.childAt(0),si.config({channel:`${A5}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},Pe=(t,s,a,i,d)=>fe(t,s,k.some(a),i,d),Ie=(t,s,a)=>{const i=fe(t,s,k.none(),a,!1);return Ts.parts.body(i)},Ye=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[D3(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:De([So.config({}),bt.config({})])})]}],behaviours:De([ct.config({mode:"acyclic",useTabstopAt:Ce(Gb)})])};return Ts.parts.body(s)};function vt(t){"@babel/helpers - typeof";return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},vt(t)}function yt(t,s){return yt=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},yt(t,s)}function rn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fn(t,s,a){return rn()?fn=Reflect.construct:fn=function(d,g,p){var C=[null];C.push.apply(C,g);var w=Function.bind.apply(d,C),E=new w;return p&&yt(E,p.prototype),E},fn.apply(null,arguments)}function Mn(t){return wr(t)||ks(t)||Me(t)||un()}function wr(t){if(Array.isArray(t))return Je(t)}function ks(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Me(t,s){if(t){if(typeof t=="string")return Je(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Je(t,s)}}function Je(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=t[a];return i}function un(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tn=Object.hasOwnProperty,nt=Object.setPrototypeOf,rt=Object.isFrozen,Ae=Object.getPrototypeOf,wt=Object.getOwnPropertyDescriptor,Mt=Object.freeze,an=Object.seal,Jn=Object.create,_t=typeof Reflect<"u"&&Reflect,nn=_t.apply,Ao=_t.construct;nn||(nn=function(s,a,i){return s.apply(a,i)}),Mt||(Mt=function(s){return s}),an||(an=function(s){return s}),Ao||(Ao=function(s,a){return fn(s,Mn(a))});var Hn=Ra(Array.prototype.forEach),xo=Ra(Array.prototype.pop),uo=Ra(Array.prototype.push),Zn=Ra(String.prototype.toLowerCase),os=Ra(String.prototype.match),Sr=Ra(String.prototype.replace),xr=Ra(String.prototype.indexOf),lu=Ra(String.prototype.trim),$o=Ra(RegExp.prototype.test),_m=uu(TypeError);function Ra(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return nn(t,s,i)}}function uu(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return Ao(t,a)}}function cn(t,s){nt&&nt(t,null);for(var a=s.length;a--;){var i=s[a];if(typeof i=="string"){var d=Zn(i);d!==i&&(rt(s)||(s[a]=d),i=d)}t[i]=!0}return t}function po(t){var s=Jn(null),a;for(a in t)nn(tn,t,[a])&&(s[a]=t[a]);return s}function ec(t,s){for(;t!==null;){var a=wt(t,s);if(a){if(a.get)return Ra(a.get);if(typeof a.value=="function")return Ra(a.value)}t=Ae(t)}function i(d){return console.warn("fallback value for",d),null}return i}var ll=Mt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ac=Mt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Dc=Mt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),id=Mt(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cr=Mt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Om=Mt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),du=Mt(["#text"]),Bi=Mt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ld=Mt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oC=Mt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lv=Mt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oT=an(/\{\{[\w\W]*|[\w\W]*\}\}/gm),WA=an(/<%[\w\W]*|[\w\W]*%>/gm),ZA=an(/^data-[\-\w.\u00B7-\uFFFF]/),q6=an(/^aria-[\-\w]+$/),mu=an(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uv=an(/^(?:\w+script|data):/i),re=an(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ae=an(/^html$/i),Be=function(){return typeof window>"u"?null:window},Oe=function(s,a){if(vt(s)!=="object"||typeof s.createPolicy!="function")return null;var i=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(i=a.currentScript.getAttribute(d));var g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML:function(C){return C}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function it(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Be(),s=function(de){return it(de)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,i=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,C=t.Element,w=t.NodeFilter,E=t.NamedNodeMap,_=E===void 0?t.NamedNodeMap||t.MozNamedAttrMap:E,D=t.HTMLFormElement,M=t.DOMParser,P=t.trustedTypes,I=C.prototype,U=ec(I,"cloneNode"),ne=ec(I,"nextSibling"),Y=ec(I,"childNodes"),j=ec(I,"parentNode");if(typeof g=="function"){var pe=i.createElement("template");pe.content&&pe.content.ownerDocument&&(i=pe.content.ownerDocument)}var ce=Oe(P,a),Re=ce?ce.createHTML(""):"",ke=i,Ne=ke.implementation,Ue=ke.createNodeIterator,Zt=ke.createDocumentFragment,ot=ke.getElementsByTagName,At=a.importNode,Et={};try{Et=po(i).documentMode?i.documentMode:{}}catch{}var Qt={};s.isSupported=typeof j=="function"&&Ne&&typeof Ne.createHTMLDocument<"u"&&Et!==9;var ut=oT,Yt=WA,$e=ZA,et=q6,St=uv,jt=re,dt=mu,Tt=null,Bn=cn({},[].concat(Mn(ll),Mn(Ac),Mn(Dc),Mn(cr),Mn(du))),pn=null,Wr=cn({},[].concat(Mn(Bi),Mn(ld),Mn(oC),Mn(lv))),so=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),nc=null,ul=null,vg=!0,yg=!0,hp=!1,Cg=!1,Am=!1,KA=!1,YA=!1,fv=!1,X6=!1,J6=!1,pj=!0,KW=!0,XA=!1,sT={},rT=null,bj=cn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),vj=null,yj=cn({},["audio","video","img","source","image","track"]),YW=null,Cj=cn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),XW="http://www.w3.org/1998/Math/MathML",JW="http://www.w3.org/2000/svg",gv="http://www.w3.org/1999/xhtml",Q6=gv,QW=!1,aT,eG=["application/xhtml+xml","text/html"],tG="text/html",rC,cT=null,nG=i.createElement("form"),wj=function(de){return de instanceof RegExp||de instanceof Function},eZ=function(de){cT&&cT===de||((!de||vt(de)!=="object")&&(de={}),de=po(de),Tt="ALLOWED_TAGS"in de?cn({},de.ALLOWED_TAGS):Bn,pn="ALLOWED_ATTR"in de?cn({},de.ALLOWED_ATTR):Wr,YW="ADD_URI_SAFE_ATTR"in de?cn(po(Cj),de.ADD_URI_SAFE_ATTR):Cj,vj="ADD_DATA_URI_TAGS"in de?cn(po(yj),de.ADD_DATA_URI_TAGS):yj,rT="FORBID_CONTENTS"in de?cn({},de.FORBID_CONTENTS):bj,nc="FORBID_TAGS"in de?cn({},de.FORBID_TAGS):{},ul="FORBID_ATTR"in de?cn({},de.FORBID_ATTR):{},sT="USE_PROFILES"in de?de.USE_PROFILES:!1,vg=de.ALLOW_ARIA_ATTR!==!1,yg=de.ALLOW_DATA_ATTR!==!1,hp=de.ALLOW_UNKNOWN_PROTOCOLS||!1,Cg=de.SAFE_FOR_TEMPLATES||!1,Am=de.WHOLE_DOCUMENT||!1,fv=de.RETURN_DOM||!1,X6=de.RETURN_DOM_FRAGMENT||!1,J6=de.RETURN_TRUSTED_TYPE||!1,YA=de.FORCE_BODY||!1,pj=de.SANITIZE_DOM!==!1,KW=de.KEEP_CONTENT!==!1,XA=de.IN_PLACE||!1,dt=de.ALLOWED_URI_REGEXP||dt,Q6=de.NAMESPACE||gv,de.CUSTOM_ELEMENT_HANDLING&&wj(de.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(so.tagNameCheck=de.CUSTOM_ELEMENT_HANDLING.tagNameCheck),de.CUSTOM_ELEMENT_HANDLING&&wj(de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(so.attributeNameCheck=de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),de.CUSTOM_ELEMENT_HANDLING&&typeof de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(so.allowCustomizedBuiltInElements=de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),aT=eG.indexOf(de.PARSER_MEDIA_TYPE)===-1?aT=tG:aT=de.PARSER_MEDIA_TYPE,rC=aT==="application/xhtml+xml"?function(st){return st}:Zn,Cg&&(yg=!1),X6&&(fv=!0),sT&&(Tt=cn({},Mn(du)),pn=[],sT.html===!0&&(cn(Tt,ll),cn(pn,Bi)),sT.svg===!0&&(cn(Tt,Ac),cn(pn,ld),cn(pn,lv)),sT.svgFilters===!0&&(cn(Tt,Dc),cn(pn,ld),cn(pn,lv)),sT.mathMl===!0&&(cn(Tt,cr),cn(pn,oC),cn(pn,lv))),de.ADD_TAGS&&(Tt===Bn&&(Tt=po(Tt)),cn(Tt,de.ADD_TAGS)),de.ADD_ATTR&&(pn===Wr&&(pn=po(pn)),cn(pn,de.ADD_ATTR)),de.ADD_URI_SAFE_ATTR&&cn(YW,de.ADD_URI_SAFE_ATTR),de.FORBID_CONTENTS&&(rT===bj&&(rT=po(rT)),cn(rT,de.FORBID_CONTENTS)),KW&&(Tt["#text"]=!0),Am&&cn(Tt,["html","head","body"]),Tt.table&&(cn(Tt,["tbody"]),delete nc.tbody),Mt&&Mt(de),cT=de)},Sj=cn({},["mi","mo","mn","ms","mtext"]),xj=cn({},["foreignobject","desc","title","annotation-xml"]),oG=cn({},["title","style","font","a","script"]),eF=cn({},Ac);cn(eF,Dc),cn(eF,id);var tZ=cn({},cr);cn(tZ,Om);var sG=function(de){var st=j(de);(!st||!st.tagName)&&(st={namespaceURI:gv,tagName:"template"});var $t=Zn(de.tagName),ss=Zn(st.tagName);return de.namespaceURI===JW?st.namespaceURI===gv?$t==="svg":st.namespaceURI===XW?$t==="svg"&&(ss==="annotation-xml"||Sj[ss]):!!eF[$t]:de.namespaceURI===XW?st.namespaceURI===gv?$t==="math":st.namespaceURI===JW?$t==="math"&&xj[ss]:!!tZ[$t]:de.namespaceURI===gv?st.namespaceURI===JW&&!xj[ss]||st.namespaceURI===XW&&!Sj[ss]?!1:!tZ[$t]&&(oG[$t]||!eF[$t]):!1},pp=function(de){uo(s.removed,{element:de});try{de.parentNode.removeChild(de)}catch{try{de.outerHTML=Re}catch{de.remove()}}},tF=function(de,st){try{uo(s.removed,{attribute:st.getAttributeNode(de),from:st})}catch{uo(s.removed,{attribute:null,from:st})}if(st.removeAttribute(de),de==="is"&&!pn[de])if(fv||X6)try{pp(st)}catch{}else try{st.setAttribute(de,"")}catch{}},Ej=function(de){var st,$t;if(YA)de="<remove></remove>"+de;else{var ss=os(de,/^[\r\n\t ]+/);$t=ss&&ss[0]}aT==="application/xhtml+xml"&&(de='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+de+"</body></html>");var dl=ce?ce.createHTML(de):de;if(Q6===gv)try{st=new M().parseFromString(dl,aT)}catch{}if(!st||!st.documentElement){st=Ne.createDocument(Q6,"template",null);try{st.documentElement.innerHTML=QW?"":dl}catch{}}var ai=st.body||st.documentElement;return de&&$t&&ai.insertBefore(i.createTextNode($t),ai.childNodes[0]||null),Q6===gv?ot.call(st,Am?"html":"body")[0]:Am?st.documentElement:ai},Tj=function(de){return Ue.call(de.ownerDocument||de,de,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT,null,!1)},rG=function(de){return de instanceof D&&(typeof de.nodeName!="string"||typeof de.textContent!="string"||typeof de.removeChild!="function"||!(de.attributes instanceof _)||typeof de.removeAttribute!="function"||typeof de.setAttribute!="function"||typeof de.namespaceURI!="string"||typeof de.insertBefore!="function")},JA=function(de){return vt(p)==="object"?de instanceof p:de&&vt(de)==="object"&&typeof de.nodeType=="number"&&typeof de.nodeName=="string"},bp=function(de,st,$t){Qt[de]&&Hn(Qt[de],function(ss){ss.call(s,st,$t,cT)})},kj=function(de){var st;if(bp("beforeSanitizeElements",de,null),rG(de)||$o(/[\u0080-\uFFFF]/,de.nodeName))return pp(de),!0;var $t=rC(de.nodeName);if(bp("uponSanitizeElement",de,{tagName:$t,allowedTags:Tt}),de.hasChildNodes()&&!JA(de.firstElementChild)&&(!JA(de.content)||!JA(de.content.firstElementChild))&&$o(/<[/\w]/g,de.innerHTML)&&$o(/<[/\w]/g,de.textContent)||$t==="select"&&$o(/<template/i,de.innerHTML))return pp(de),!0;if(!Tt[$t]||nc[$t]){if(!nc[$t]&&Oj($t)&&(so.tagNameCheck instanceof RegExp&&$o(so.tagNameCheck,$t)||so.tagNameCheck instanceof Function&&so.tagNameCheck($t)))return!1;if(KW&&!rT[$t]){var ss=j(de)||de.parentNode,dl=Y(de)||de.childNodes;if(dl&&ss)for(var ai=dl.length,Rc=ai-1;Rc>=0;--Rc)ss.insertBefore(U(dl[Rc],!0),ne(de))}return pp(de),!0}return de instanceof C&&!sG(de)||($t==="noscript"||$t==="noembed")&&$o(/<\/no(script|embed)/i,de.innerHTML)?(pp(de),!0):(Cg&&de.nodeType===3&&(st=de.textContent,st=Sr(st,ut," "),st=Sr(st,Yt," "),de.textContent!==st&&(uo(s.removed,{element:de.cloneNode()}),de.textContent=st)),bp("afterSanitizeElements",de,null),!1)},_j=function(de,st,$t){if(pj&&(st==="id"||st==="name")&&($t in i||$t in nG))return!1;if(!(yg&&!ul[st]&&$o($e,st))){if(!(vg&&$o(et,st))){if(!pn[st]||ul[st]){if(!(Oj(de)&&(so.tagNameCheck instanceof RegExp&&$o(so.tagNameCheck,de)||so.tagNameCheck instanceof Function&&so.tagNameCheck(de))&&(so.attributeNameCheck instanceof RegExp&&$o(so.attributeNameCheck,st)||so.attributeNameCheck instanceof Function&&so.attributeNameCheck(st))||st==="is"&&so.allowCustomizedBuiltInElements&&(so.tagNameCheck instanceof RegExp&&$o(so.tagNameCheck,$t)||so.tagNameCheck instanceof Function&&so.tagNameCheck($t))))return!1}else if(!YW[st]){if(!$o(dt,Sr($t,jt,""))){if(!((st==="src"||st==="xlink:href"||st==="href")&&de!=="script"&&xr($t,"data:")===0&&vj[de])){if(!(hp&&!$o(St,Sr($t,jt,"")))){if($t)return!1}}}}}}return!0},Oj=function(de){return de.indexOf("-")>0},Aj=function(de){var st,$t,ss,dl;bp("beforeSanitizeAttributes",de,null);var ai=de.attributes;if(ai){var Rc={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pn};for(dl=ai.length;dl--;){st=ai[dl];var nF=st,Mc=nF.name,Dj=nF.namespaceURI;$t=Mc==="value"?st.value:lu(st.value),ss=rC(Mc);var cG=$t;if(Rc.attrName=ss,Rc.attrValue=$t,Rc.keepAttr=!0,Rc.forceKeepAttr=void 0,bp("uponSanitizeAttribute",de,Rc),$t=Rc.attrValue,!Rc.forceKeepAttr){if(!Rc.keepAttr){tF(Mc,de);continue}if($o(/\/>/i,$t)){tF(Mc,de);continue}Cg&&($t=Sr($t,ut," "),$t=Sr($t,Yt," "));var iG=rC(de.nodeName);if(!_j(iG,ss,$t)){tF(Mc,de);continue}if($t!==cG)try{Dj?de.setAttributeNS(Dj,Mc,$t):de.setAttribute(Mc,$t)}catch{tF(Mc,de)}}}bp("afterSanitizeAttributes",de,null)}},aG=function qt(de){var st,$t=Tj(de);for(bp("beforeSanitizeShadowDOM",de,null);st=$t.nextNode();)bp("uponSanitizeShadowNode",st,null),!kj(st)&&(st.content instanceof d&&qt(st.content),Aj(st));bp("afterSanitizeShadowDOM",de,null)};return s.sanitize=function(qt,de){var st,$t,ss,dl,ai;if(QW=!qt,QW&&(qt="<!-->"),typeof qt!="string"&&!JA(qt)){if(typeof qt.toString!="function")throw _m("toString is not a function");if(qt=qt.toString(),typeof qt!="string")throw _m("dirty is not a string, aborting")}if(!s.isSupported){if(vt(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof qt=="string")return t.toStaticHTML(qt);if(JA(qt))return t.toStaticHTML(qt.outerHTML)}return qt}if(KA||eZ(de),s.removed=[],typeof qt=="string"&&(XA=!1),XA){if(qt.nodeName){var Rc=rC(qt.nodeName);if(!Tt[Rc]||nc[Rc])throw _m("root node is forbidden and cannot be sanitized in-place")}}else if(qt instanceof p)st=Ej("<!---->"),$t=st.ownerDocument.importNode(qt,!0),$t.nodeType===1&&$t.nodeName==="BODY"||$t.nodeName==="HTML"?st=$t:st.appendChild($t);else{if(!fv&&!Cg&&!Am&&qt.indexOf("<")===-1)return ce&&J6?ce.createHTML(qt):qt;if(st=Ej(qt),!st)return fv?null:J6?Re:""}st&&YA&&pp(st.firstChild);for(var nF=Tj(XA?qt:st);ss=nF.nextNode();)ss.nodeType===3&&ss===dl||kj(ss)||(ss.content instanceof d&&aG(ss.content),Aj(ss),dl=ss);if(dl=null,XA)return qt;if(fv){if(X6)for(ai=Zt.call(st.ownerDocument);st.firstChild;)ai.appendChild(st.firstChild);else ai=st;return pn.shadowroot&&(ai=At.call(a,ai,!0)),ai}var Mc=Am?st.outerHTML:st.innerHTML;return Am&&Tt["!doctype"]&&st.ownerDocument&&st.ownerDocument.doctype&&st.ownerDocument.doctype.name&&$o(ae,st.ownerDocument.doctype.name)&&(Mc="<!DOCTYPE "+st.ownerDocument.doctype.name+`>
`+Mc),Cg&&(Mc=Sr(Mc,ut," "),Mc=Sr(Mc,Yt," ")),ce&&J6?ce.createHTML(Mc):Mc},s.setConfig=function(qt){eZ(qt),KA=!0},s.clearConfig=function(){cT=null,KA=!1},s.isValidAttribute=function(qt,de,st){cT||eZ({});var $t=rC(qt),ss=rC(de);return _j($t,ss,st)},s.addHook=function(qt,de){typeof de=="function"&&(Qt[qt]=Qt[qt]||[],uo(Qt[qt],de))},s.removeHook=function(qt){if(Qt[qt])return xo(Qt[qt])},s.removeHooks=function(qt){Qt[qt]&&(Qt[qt]=[])},s.removeAllHooks=function(){Qt={}},s}var on=it();const Qn=t=>on().sanitize(t),zs=$h.deviceType.isTouch(),Us=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),dv=(t,s)=>Ts.parts.close(rr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:De([So.config({})])})),mv=()=>Ts.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),jA=(t,s)=>Ts.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:lg(`<p>${Qn(s.translate(t))}</p>`)}]}]}),K6=t=>Ts.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Ut=(t,s)=>[Ql.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Ql.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],ue=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return Ts.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!Gb(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:lg(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:zs?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:De([bt.config({}),Pt("dialog-events",t.dialogEvents.concat([cf(hi(),(g,p)=>{cu.isBlocked(g)?K():ct.focusIn(g)}),ve(e1(),(g,p)=>{g.getSystem().broadcastOn([Ix],{newFocus:p.event.newFocus})})])),Pt("scroll-lock",[Gn(()=>{Wo(qs(),d)}),fr(()=>{mn(qs(),d)})]),...t.extraBehaviours]),eventOrder:{[Wa()]:["dialog-events"],[na()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[_l()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Qe=t=>rr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:De([So.config({})]),components:[Yc("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{hn(s,Sm)}}),Ot=(t,s,a,i)=>{const d=g=>[ko(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:De([si.config({channel:`${Fx}-${s}`,initialData:t,renderComponents:d})])}},Do=()=>({dom:lg('<div class="tox-dialog__draghandle"></div>')}),ri=(t,s,a,i)=>Ql.sketch({dom:lg('<div class="tox-dialog__header"></div>'),components:[Ot(t,s,k.some(a),i),Do(),Qe(i)],containerBehaviours:De([lp.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>nr(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),tc=(t,s,a)=>{const i=Ts.parts.title(Ot(t,s,k.none(),a)),d=Ts.parts.draghandle(Do()),g=Ts.parts.close(Qe(a)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return Ql.sketch({dom:lg('<div class="tox-dialog__header"></div>'),components:p})},ra=(t,s,a)=>tc({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),sC=(t,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:lg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),aa=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=go(t().element,".tox-dialog__header").map(g=>Go(g));Ts.setBusy(t(),(g,p)=>sC(i.message,p,s,d))},onUnblock:()=>{Ts.setIdle(t())}}),GA=(t,s,a,i)=>{const d=(g,p)=>k.some(p);return Is(ue({...t,firstTabstop:1,lazySink:i.shared.getSink,extraBehaviours:[si.config({channel:`${qb}-${t.id}`,updateState:d,initialData:s}),Nx({}),...t.extraBehaviours],onEscape:g=>{hn(g,Sm)},dialogEvents:a,eventOrder:{[bi()]:[si.name(),Pr.name()],[na()]:["scroll-lock",si.name(),"messages","dialog-events","alloy.base.behaviour"],[_l()]:["alloy.base.behaviour","dialog-events","messages",si.name(),"scroll-lock"]}}))},qA=(t,s={})=>{const a=i=>{const d=we(i.items,g=>{const p=Ze(s,g.name).getOr(gt(!1));return{...g,storage:p}});return{...i,items:d}};return we(t,i=>i.type==="menu"?a(i):i)},Y6=t=>eo(t,(s,a)=>a.type==="menu"?eo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),GW=(t,s)=>[af(hi(),R3),t(f2,(a,i,d,g)=>{Ji(ur(g.element)).fold(K,zu),s.onClose(),i.onClose()}),t(Sm,(a,i,d,g)=>{i.onCancel(a),hn(g,f2)}),ve(n3,(a,i)=>s.onUnblock()),ve(t3,(a,i)=>s.onBlock(i.event))],Nj=(t,s)=>{const a=(d,g)=>ve(d,(p,C)=>{i(p,(w,E)=>{g(t(),w,C.event,p)})}),i=(d,g)=>{si.getState(d).get().each(p=>{g(p,d)})};return[...GW(a,s),a(td,(d,g,p)=>{g.onAction(d,{name:p.name})})]},cj=(t,s,a)=>{const i=(g,p)=>ve(g,(C,w)=>{d(C,(E,_)=>{p(t(),E,w.event,C)})}),d=(g,p)=>{si.getState(g).get().each(C=>{p(C.internalDialog,g)})};return[...GW(i,s),i(Ub,(g,p)=>p.onSubmit(g)),i(Ja,(g,p,C)=>{p.onChange(g,{name:C.name})}),i(td,(g,p,C,w)=>{const E=()=>w.getSystem().isConnected()?ct.focusIn(w):void 0,_=P=>mC(P,"disabled")||jo(P,"aria-disabled").exists(I=>I==="true"),D=ur(w.element),M=Ji(D);p.onAction(g,{name:C.name,value:C.value}),Ji(D).fold(E,P=>{_(P)||M.exists(I=>ac(P,I)&&_(I))?E():a().toOptional().filter(I=>!ac(I.element,P)).each(E)})}),i(MB,(g,p,C)=>{p.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),fr(g=>{const p=t();Ve.setValue(g,p.getData())})]},Pj=(t,s)=>A2(t,t.type,s),$j=(t,s,a)=>Bt(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),Fj=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=Dm(a,C=>C.align==="start"),d=(C,w)=>Ql.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:we(w,E=>E.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},ij=(t,s,a)=>{const i=(d,g)=>{const p=we(g.buttons,w=>{const E=yn(Pj(w,a));return{name:w.name,align:w.align,memento:E}}),C=w=>$j(d,p,w);return k.some({lookupByName:C,footerButtons:p})};return{dom:lg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:De([si.config({channel:`${D5}-${s}`,initialData:t,updateState:i,renderComponents:Fj})])}},Ij=(t,s,a)=>ij(t,s,a),lj=(t,s,a)=>Ts.parts.footer(ij(t,s,a)),uj=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Kt.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Zb.getField(i,s).orThunk(()=>t.getFooter().bind(p=>si.getState(p).get()).bind(p=>p.lookupByName(s)))}else return k.none()},Lj=(t,s)=>{const a=t.getRoot();return si.getState(a).get().map(i=>vn(kn("data",i.dataValidator,s))).getOr(s)},dj=(t,s,a)=>{const i=I=>{const U=t.getRoot();U.getSystem().isConnected()&&I(U)},P={getData:()=>{const I=t.getRoot(),U=I.getSystem().isConnected()?t.getFormWrapper():I,ne=Ve.getValue(U),Y=vo(a,j=>j.get());return{...ne,...Y}},setData:I=>{i(U=>{const ne=P.getData(),Y=Vn(ne,I),j=Lj(t,Y),pe=t.getFormWrapper();Ve.setValue(pe,j),ys(a,(ce,Re)=>{wn(Y,Re)&&ce.set(Y[Re])})})},setEnabled:(I,U)=>{uj(t,I).each(U?ht.enable:ht.disable)},focus:I=>{uj(t,I).each(bt.focus)},block:I=>{if(!xn(I))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(U=>{at(U,t3,{message:I})})},unblock:()=>{i(I=>{hn(I,n3)})},showTab:I=>{i(U=>{const ne=t.getBody();si.getState(ne).get().exists(j=>j.isTabPanel())&&Kt.getCurrent(ne).each(j=>{L.showTab(j,I)})})},redial:I=>{i(U=>{const ne=t.getId(),Y=s(I),j=qA(Y.internalDialog.buttons,a);U.getSystem().broadcastOn([`${qb}-${ne}`],Y),U.getSystem().broadcastOn([`${Fx}-${ne}`],Y.internalDialog),U.getSystem().broadcastOn([`${A5}-${ne}`],Y.internalDialog),U.getSystem().broadcastOn([`${D5}-${ne}`],{...Y.internalDialog,buttons:j}),P.setData(Y.initialData)})},close:()=>{i(I=>{hn(I,f2)})},toggleFullscreen:t.toggleFullscreen};return P},Hj=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},Vj=(t,s,a)=>{const i=je("dialog"),d=t.internalDialog,g=ra(d.title,i,a),p=Ie({body:d.body,initialData:d.initialData},i,a),C=qA(d.buttons),w=Y6(C),E=kt(C.length!==0,lj({buttons:C},i,a)),_=cj(()=>U,aa(()=>P,a.shared.providers,s),a.shared.getSink),D=Hj(d.size),P=GA({id:i,header:g,body:p,footer:E,extraClasses:D,extraBehaviours:[],extraStyles:{}},t,_,a),I=(()=>{const ne=()=>{const j=Ts.getBody(P);return Kt.getCurrent(j).getOr(j)},Y=()=>{const j="tox-dialog--fullscreen",pe=te.fromDom(P.element.dom);Mr(pe,j)?(mn(pe,j),Ki(pe,D)):(Ds(pe,D),Wo(pe,j))};return{getId:Q(i),getRoot:Q(P),getBody:()=>Ts.getBody(P),getFooter:()=>Ts.getFooter(P),getFormWrapper:ne,toggleFullscreen:Y}})(),U=dj(I,s.redial,w);return{dialog:P,instanceApi:U}},zj=t=>{switch(t){case"medium":return k.some("tox-dialog--width-md");default:return k.none()}},mj=(t,s,a,i=!1)=>{const d=je("dialog"),g=je("dialog-label"),p=je("dialog-content"),C=t.internalDialog,w=zj(C.size),E=(ce,Re)=>k.some(Re),_=yn(ri({title:C.title,draggable:!0},d,g,a.shared.providers)),D=yn(Pe({body:C.body,initialData:C.initialData},d,p,a,i)),M=qA(C.buttons),P=Y6(M),I=kt(M.length!==0,yn(Ij({buttons:M},d,a))),U=cj(()=>pe,{onBlock:ce=>{cu.block(Y,(Re,ke)=>{const Ne=_.getOpt(Y).map(Ue=>Go(Ue.element));return sC(ce.message,ke,a.shared.providers,Ne)})},onUnblock:()=>{cu.unblock(Y)},onClose:()=>s.closeWindow()},a.shared.getSink),ne="tox-dialog-inline",Y=Is({dom:{tag:"div",classes:["tox-dialog",ne,...w.toArray()],attributes:{role:"dialog","aria-labelledby":g}},eventOrder:{[bi()]:[si.name(),Pr.name()],[Wa()]:["execute-on-form"],[na()]:["reflecting","execute-on-form"]},behaviours:De([ct.config({mode:"cyclic",onEscape:ce=>(hn(ce,f2),k.some(!0)),useTabstopAt:ce=>!Gb(ce)&&(Pc(ce)!=="button"||dr(ce,"disabled")!=="disabled"),firstTabstop:1}),si.config({channel:`${qb}-${d}`,updateState:E,initialData:t}),bt.config({}),Pt("execute-on-form",U.concat([cf(hi(),(ce,Re)=>{ct.focusIn(ce)}),ve(e1(),(ce,Re)=>{ce.getSystem().broadcastOn([Ix],{newFocus:Re.event.newFocus})})])),cu.config({getRoot:()=>k.some(Y)}),xt.config({}),Nx({})]),components:[_.asSpec(),D.asSpec(),...I.map(ce=>ce.asSpec()).toArray()]}),j=()=>{const ce="tox-dialog--fullscreen",Re=te.fromDom(Y.element.dom);Rl(Re,[ce])?(Ds(Re,[ce]),Ki(Re,[ne])):(Ds(Re,[ne]),Ki(Re,[ce]))},pe=dj({getId:Q(d),getRoot:Q(Y),getFooter:()=>I.map(ce=>ce.get(Y)),getBody:()=>D.get(Y),getFormWrapper:()=>{const ce=D.get(Y);return Kt.getCurrent(ce).getOr(ce)},toggleFullscreen:j},s.redial,P);return{dialog:Y,instanceApi:pe}};var qW=tinymce.util.Tools.resolve("tinymce.util.URI");const Uj=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!xn(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{at(C,t3,{message:p})})},unblock:()=>{s(p=>{hn(p,n3)})},close:()=>{s(p=>{hn(p,f2)})},sendMessage:p=>{s(C=>{C.getSystem().broadcastOn([R5],p)})}}},Wj=["insertContent","setContent","execCommand","close","block","unblock"],fj=t=>Bc(t)&&Wj.indexOf(t.mceAction)!==-1,Zj=t=>!fj(t)&&Bc(t)&&wn(t,"mceAction"),jj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=fl(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Gj=(t,s,a,i)=>{const d=je("dialog"),g=ra(t.title,d,i),p=Ye(t),C=t.buttons.bind(j=>j.length===0?k.none():k.some(lj({buttons:j},d,i))),w=Nj(()=>Y,aa(()=>ne,i.shared.providers,s)),E={...t.height.fold(()=>({}),j=>({height:j+"px","max-height":j+"px"})),...t.width.fold(()=>({}),j=>({width:j+"px","max-width":j+"px"}))},_=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],D=new qW(t.url,{base_uri:new qW(window.location.href)}),M=`${D.protocol}://${D.host}${D.port?":"+D.port:""}`,P=$r(),I=[Pt("messages",[Gn(()=>{const j=Fr(te.fromDom(window),"message",pe=>{if(D.isSameOrigin(new qW(pe.raw.origin))){const ce=pe.raw.data;fj(ce)?jj(a,Y,ce):Zj(ce)&&t.onMessage(Y,ce)}});P.set(j)}),fr(P.clear)]),Pr.config({channels:{[R5]:{onReceive:(j,pe)=>{go(j.element,"iframe").each(ce=>{const Re=ce.dom.contentWindow;ir(Re)&&Re.postMessage(pe,M)})}}}})],ne=GA({id:d,header:g,body:p,footer:C,extraClasses:_,extraBehaviours:I,extraStyles:E},t,w,i),Y=Uj(ne);return{dialog:ne,instanceApi:Y}},qj=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Ts.hide(E),d()},p=yn(A2({name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),C=mv(),w=dv(g,s.providers),E=Is(ue({lazySink:()=>s.getSink(),header:Us(C,w),body:jA(i,s.providers),footer:k.some(K6(Ut([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ve(Sm,g)],eventOrder:{}}));Ts.show(E);const _=p.get(E);bt.focus(_)}}},Kj=t=>{const s=t.shared;return{open:(i,d)=>{const g=M=>{Ts.hide(_),d(M)},p=yn(A2({name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),C=A2({name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),w=mv(),E=dv(()=>g(!1),s.providers),_=Is(ue({lazySink:()=>s.getSink(),header:Us(w,E),body:jA(i,s.providers),footer:k.some(K6(Ut([],[C,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ve(Sm,()=>g(!1)),ve(Ub,()=>g(!0))],eventOrder:{}}));Ts.show(_);const D=p.get(_);bt.focus(D)}}},gj=(t,s)=>vn(kn("data",s,t)),hj=t=>u2(t,".tox-alert-dialog")||u2(t,".tox-confirm-dialog"),Yj=(t,s,a)=>s&&a?[]:[Po.config({contextual:{lazyContext:()=>k.some(Xn(te.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Gh(t,i.element).map(g=>({bounds:kc(g),optScrollEnv:k.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Gr(g.element).top})})).getOrThunk(()=>({bounds:Dr(),optScrollEnv:k.none()}))})],Xj=t=>{const s=t.editor,a=Uy(s),i=qj(t.backstages.dialog),d=Kj(t.backstages.dialog),g=(I,U,ne)=>{if(!ca(U)){if(U.inline==="toolbar")return E(I,t.backstages.popup.shared.anchors.inlineDialog(),ne,U);if(U.inline==="bottom")return _(I,t.backstages.popup.shared.anchors.inlineBottomDialog(),ne,U);if(U.inline==="cursor")return E(I,t.backstages.popup.shared.anchors.cursor(),ne,U)}return w(I,ne)},p=(I,U)=>C(I,U),C=(I,U)=>{const ne=Y=>{const j=Gj(Y,{closeWindow:()=>{Ts.hide(j.dialog),U(j.instanceApi)}},s,t.backstages.dialog);return Ts.show(j.dialog),j.instanceApi};return iv.openUrl(ne,I)},w=(I,U)=>{const ne=(Y,j,pe)=>{const ce=j,ke=Vj({dataValidator:pe,initialData:ce,internalDialog:Y},{redial:iv.redial,closeWindow:()=>{Ts.hide(ke.dialog),U(ke.instanceApi)}},t.backstages.dialog);return Ts.show(ke.dialog),ke.instanceApi.setData(ce),ke.instanceApi};return iv.open(ne,I)},E=(I,U,ne,Y)=>{const j=(pe,ce,Re)=>{const ke=gj(ce,Re),Ne=Kn(),Ue=t.backstages.popup.shared.header.isPositionedAtTop(),Zt={dataValidator:Re,initialData:ke,internalDialog:pe},ot=()=>Ne.on(ut=>{ho.reposition(ut),Po.refresh(ut)}),At=mj(Zt,{redial:iv.redial,closeWindow:()=>{Ne.on(ho.hide),s.off("ResizeEditor",ot),Ne.clear(),ne(At.instanceApi)}},t.backstages.popup,Y.ariaAttrs),Et=Is(ho.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Y.persistent?{event:"doNotDismissYet"}:{},...Ue?{}:{fireRepositionEventInstead:{}},inlineBehaviours:De([Pt("window-manager-inline-events",[ve(ji(),(ut,Yt)=>{hn(At.dialog,Sm)})]),...Yj(s,a,Ue)]),isExtraPart:(ut,Yt)=>hj(Yt)}));Ne.set(Et);const Qt=()=>{const ut=s.inline?qs():te.fromDom(s.getContainer()),Yt=Xn(ut);return k.some(Yt)};return ho.showWithinBounds(Et,bc(At.dialog),{anchor:U},Qt),(!a||!Ue)&&(Po.refresh(Et),s.on("ResizeEditor",ot)),At.instanceApi.setData(ke),ct.focusIn(At.dialog),At.instanceApi};return iv.open(j,I)},_=(I,U,ne,Y)=>{const j=(pe,ce,Re)=>{const ke=gj(ce,Re),Ne=Kn(),Ue=t.backstages.popup.shared.header.isPositionedAtTop(),Zt={dataValidator:Re,initialData:ke,internalDialog:pe},ot=()=>Ne.on(ut=>{ho.reposition(ut),Po.refresh(ut)}),At=mj(Zt,{redial:iv.redial,closeWindow:()=>{Ne.on(ho.hide),s.off("ResizeEditor ScrollWindow ElementScroll",ot),Ne.clear(),ne(At.instanceApi)}},t.backstages.popup,Y.ariaAttrs),Et=Is(ho.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Y.persistent?{event:"doNotDismissYet"}:{},...Ue?{}:{fireRepositionEventInstead:{}},inlineBehaviours:De([Pt("window-manager-inline-events",[ve(ji(),(ut,Yt)=>{hn(At.dialog,Sm)})]),Po.config({contextual:{lazyContext:()=>k.some(Xn(te.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:ut=>Gh(s,ut.element).map($e=>({bounds:kc($e),optScrollEnv:k.some({currentScrollTop:$e.element.dom.scrollTop,scrollElmTop:Gr($e.element).top})})).getOrThunk(()=>({bounds:Dr(),optScrollEnv:k.none()}))})]),isExtraPart:(ut,Yt)=>hj(Yt)}));Ne.set(Et);const Qt=()=>t.backstages.popup.shared.getSink().toOptional().bind(ut=>{const Yt=Gh(s,ut.element),$e=15,et=Yt.map(dt=>kc(dt)).getOr(Dr()),St=Xn(te.fromDom(s.getContentAreaContainer())),jt=Mv(St,et);return k.some(cs(jt.x,jt.y,jt.width,jt.height-$e))});return ho.showWithinBounds(Et,bc(At.dialog),{anchor:U},Qt),Po.refresh(Et),s.on("ResizeEditor ScrollWindow ElementScroll",ot),At.instanceApi.setData(ke),ct.focusIn(At.dialog),At.instanceApi};return iv.open(j,I)};return{open:g,openUrl:p,alert:(I,U)=>{i.open(I,U)},close:I=>{I.close()},confirm:(I,U)=>{d.open(I,U)}}},Jj=t=>{vR(t),g8(t),eU(t)};var Qj=()=>{Rg.add("silver",t=>{Jj(t);let s=()=>Dr();const{dialogs:a,popups:i,renderUI:d}=WU(t,{getPopupSinkBounds:()=>s()}),g=async()=>{const w=await d();return Gh(t,i.getMothership().element).each(_=>{s=()=>kc(_)}),w};Y8.register(t,i.backstage.shared);const p=Xj({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),C=()=>L_(t,{backstage:i.backstage},i.getMothership());return{renderUI:g,getWindowManagerImpl:Q(p),getNotificationManagerImpl:C}})};Qj()})();(function(){var iT=tinymce.util.Tools.resolve("tinymce.ModelManager");const hv=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},lT=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&hv(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},wg=l=>m=>lT(m)===l,Sg=l=>m=>typeof m===l,ud=l=>m=>l===m,xg=wg("string"),xn=wg("object"),Bc=wg("array"),aC=ud(null),ml=Sg("boolean"),fu=ud(void 0),fl=l=>l==null,ca=l=>!fl(l),Ni=Sg("function"),ir=Sg("number"),mt=()=>{},gl=(l,m)=>(...h)=>l(m.apply(null,h)),gu=(l,m)=>h=>l(m(h)),K=l=>()=>l,Sn=l=>l,vp=(l,m)=>l===m;function On(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const Q=l=>m=>!l(m),en=l=>()=>{throw new Error(l)},Ns=l=>l(),dn=K(!1),Ce=K(!0);class G{constructor(m,h){this.tag=m,this.value=h}static some(m){return new G(!0,m)}static none(){return G.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?G.some(m(this.value)):G.none()}bind(m){return this.tag?m(this.value):G.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:G.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return ca(m)?G.some(m):G.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}G.singletonNone=new G(!1);const Ma=Array.prototype.slice,An=Array.prototype.indexOf,pt=Array.prototype.push,k=(l,m)=>An.call(l,m),Fo=(l,m)=>k(l,m)>-1,Le=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return!0}return!1},Eo=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},Dt=(l,m)=>{const h=l.length,v=new Array(h);for(let S=0;S<h;S++){const T=l[S];v[S]=m(T,S)}return v},Ee=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];m(S,h)}},Io=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},Ba=(l,m)=>{const h=[],v=[];for(let S=0,T=l.length;S<T;S++){const R=l[S];(m(R,S)?h:v).push(R)}return{pass:h,fail:v}},Lo=(l,m)=>{const h=[];for(let v=0,S=l.length;v<S;v++){const T=l[v];m(T,v)&&h.push(T)}return h},Zr=(l,m,h)=>(Io(l,(v,S)=>{h=m(h,v,S)}),h),we=(l,m,h)=>(Ee(l,(v,S)=>{h=m(h,v,S)}),h),qe=(l,m,h)=>{for(let v=0,S=l.length;v<S;v++){const T=l[v];if(m(T,v))return G.some(T);if(h(T,v))break}return G.none()},N=(l,m)=>qe(l,m,dn),Dm=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return G.some(h)}return G.none()},Yn=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!Bc(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);pt.apply(m,l[h])}return m},rs=(l,m)=>Yn(Dt(l,m)),eo=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const S=l[h];if(m(S,h)!==!0)return!1}return!0},uT=l=>{const m=Ma.call(l,0);return m.reverse(),m},Bt=(l,m)=>{const h={};for(let v=0,S=l.length;v<S;v++){const T=l[v];h[String(T)]=m(T,v)}return h},mo=(l,m)=>{const h=Ma.call(l,0);return h.sort(m),h},Ft=(l,m)=>m>=0&&m<l.length?G.some(l[m]):G.none(),be=l=>Ft(l,0),hu=l=>Ft(l,l.length-1),Er=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return G.none()},ft=Object.keys,dd=Object.hasOwnProperty,Ro=(l,m)=>{const h=ft(l);for(let v=0,S=h.length;v<S;v++){const T=h[v],R=l[T];m(R,T)}},yp=(l,m)=>Ho(l,(h,v)=>({k:v,v:m(h,v)})),Ho=(l,m)=>{const h={};return Ro(l,(v,S)=>{const T=m(v,S);h[T.k]=T.v}),h},ia=l=>(m,h)=>{l[h]=m},Cp=(l,m,h,v)=>{Ro(l,(S,T)=>{(m(S,T)?h:v)(S,T)})},Pi=(l,m)=>{const h={};return Cp(l,m,ia(h),mt),h},Ws=(l,m)=>{const h=[];return Ro(l,(v,S)=>{h.push(m(v,S))}),h},bo=l=>Ws(l,Sn),wp=(l,m)=>ys(l,m)?G.from(l[m]):G.none(),ys=(l,m)=>dd.call(l,m),vo=(l,m)=>ys(l,m)&&l[m]!==void 0&&l[m]!==null,Eg=l=>{for(const m in l)if(dd.call(l,m))return!1;return!0},Tr=typeof window<"u"?window:Function("return this;")(),pu=(l,m)=>{let h=m??Tr;for(let v=0;v<l.length&&h!==void 0&&h!==null;++v)h=h[l[v]];return h},kr=(l,m)=>{const h=l.split(".");return pu(h,m)},md=(l,m)=>kr(l,m),Sp=(l,m)=>{const h=md(l,m);if(h==null)throw new Error(l+" not available on this browser");return h},jr=Object.getPrototypeOf,pv=l=>Sp("HTMLElement",l),Ze=l=>{const m=kr("ownerDocument.defaultView",l);return xn(l)&&(pv(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(jr(l).constructor.name))},wn=8,oc=9,Na=11,xp=1,fd=3,ro=l=>l.dom.nodeName.toLowerCase(),gd=l=>l.dom.nodeType,Rm=l=>m=>gd(m)===l,to=l=>gd(l)===wn||ro(l)==="#comment",kt=l=>la(l)&&Ze(l.dom),la=Rm(xp),hd=Rm(fd),Ep=Rm(oc),bv=Rm(Na),ua=l=>m=>la(m)&&ro(m)===l,lr=(l,m,h)=>{if(xg(h)||ml(h)||ir(h))l.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",l),new Error("Attribute value was not simple")},as=(l,m,h)=>{lr(l.dom,m,h)},$i=(l,m)=>{const h=l.dom;Ro(m,(v,S)=>{lr(h,S,v)})},Tp=(l,m)=>{Ro(m,(h,v)=>{h.fold(()=>{Vo(l,v)},S=>{lr(l.dom,v,S)})})},bu=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},sc=(l,m)=>G.from(bu(l,m)),Vo=(l,m)=>{l.dom.removeAttribute(m)},Nc=l=>we(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),pd=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,l),new Error(S)}return hl(v.childNodes[0])},dT=(l,m)=>{const v=(m||document).createElement(l);return hl(v)},mT=(l,m)=>{const v=(m||document).createTextNode(l);return hl(v)},hl=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},te={fromHtml:pd,fromTag:dT,fromText:mT,fromDom:hl,fromPoint:(l,m,h)=>G.from(l.dom.elementFromPoint(m,h)).map(hl)},da=(l,m)=>{const h=l.dom;if(h.nodeType!==xp)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Mm=l=>l.nodeType!==xp&&l.nodeType!==oc&&l.nodeType!==Na||l.childElementCount===0,cC=(l,m)=>{const h=m===void 0?document:m.dom;return Mm(h)?[]:Dt(h.querySelectorAll(l),te.fromDom)},vv=(l,m)=>{const h=m===void 0?document:m.dom;return Mm(h)?G.none():G.from(h.querySelector(l)).map(te.fromDom)},no=(l,m)=>l.dom===m.dom,yv=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},fT=da,Tg=l=>te.fromDom(l.dom.ownerDocument),Bm=l=>Ep(l)?l:Tg(l),Zs=l=>te.fromDom(Bm(l).dom.documentElement),_s=l=>te.fromDom(Bm(l).dom.defaultView),pl=l=>G.from(l.dom.parentNode).map(te.fromDom),Pc=l=>G.from(l.dom.parentElement).map(te.fromDom),bd=(l,m)=>{const h=Ni(m)?m:dn;let v=l.dom;const S=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const T=v.parentNode,R=te.fromDom(T);if(S.push(R),h(R)===!0)break;v=T}return S},kg=l=>G.from(l.dom.previousSibling).map(te.fromDom),Nm=l=>G.from(l.dom.nextSibling).map(te.fromDom),Pn=l=>Dt(l.dom.childNodes,te.fromDom),Pa=(l,m)=>{const h=l.dom.childNodes;return G.from(h[m]).map(te.fromDom)},gT=l=>Pa(l,0),vd=(l,m)=>{pl(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},vu=(l,m)=>{Nm(l).fold(()=>{pl(l).each(S=>{Mo(S,m)})},v=>{vd(v,m)})},rc=(l,m)=>{gT(l).fold(()=>{Mo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Mo=(l,m)=>{l.dom.appendChild(m.dom)},hT=(l,m,h)=>{Pa(l,h).fold(()=>{Mo(l,m)},v=>{vd(v,m)})},iC=(l,m)=>{vd(l,m),Mo(m,l)},$n=(l,m)=>{Ee(m,(h,v)=>{const S=v===0?l:m[v-1];vu(S,h)})},ac=(l,m)=>{Ee(m,h=>{Mo(l,h)})},$a=l=>{l.dom.textContent="",Ee(Pn(l),m=>{js(m)})},js=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},kp=l=>{const m=Pn(l);m.length>0&&$n(l,m),js(l)},yd=(l,m)=>te.fromDom(l.dom.cloneNode(m)),ci=l=>yd(l,!1),ma=l=>yd(l,!0),Cv=(l,m)=>{const h=te.fromTag(m),v=Nc(l);return $i(h,v),h},wv=(l,m)=>{const h=Cv(l,m),v=Pn(ma(l));return ac(h,v),h},lC=(l,m)=>{const h=Cv(l,m);vu(l,h);const v=Pn(l);return ac(h,v),js(l),h},ii=["tfoot","thead","tbody","colgroup"],yu=l=>Fo(ii,l),Sv=(l,m)=>({rows:l,columns:m}),xv=(l,m)=>({row:l,column:m}),_p=(l,m,h)=>({element:l,rowspan:m,colspan:h}),Op=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),uC=(l,m,h,v,S,T)=>({element:l,rowspan:m,colspan:h,row:v,column:S,isLocked:T}),Ap=(l,m,h)=>({element:l,cells:m,section:h}),ur=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),Gs=(l,m,h)=>({element:l,isNew:m,isLocked:h}),Cd=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),Ev=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),dC=(l,m,h)=>({element:l,colspan:m,column:h}),Fi=(l,m)=>({element:l,columns:m}),pT=l=>bv(l)&&ca(l.dom.host),fa=Ni(Element.prototype.attachShadow)&&Ni(Node.prototype.getRootNode),qs=K(fa),Ii=fa?l=>te.fromDom(l.dom.getRootNode()):Bm,Cu=l=>{const m=Ii(l);return pT(m)?G.some(m):G.none()},Vt=l=>te.fromDom(l.dom.host),gn=l=>{if(qs()&&ca(l.target)){const m=te.fromDom(l.target);if(la(m)&&dr(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return be(h)}}return G.from(l.target)},dr=l=>ca(l.dom.shadowRoot),jo=l=>{const m=hd(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return Cu(te.fromDom(m)).fold(()=>h.body.contains(m),gu(jo,Vt))},mC=()=>zo(te.fromDom(document)),zo=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return te.fromDom(m)},bT=(l,m,h)=>Lo(bd(l,h),m),Tv=(l,m)=>Lo(Pn(l),m),Dp=(l,m)=>{let h=[];return Ee(Pn(l),v=>{m(v)&&(h=h.concat([v])),h=h.concat(Dp(v,m))}),h},Rt=(l,m,h)=>bT(l,v=>da(v,m),h),wu=(l,m)=>Tv(l,h=>da(h,m)),$c=(l,m)=>cC(m,l);var Te=(l,m,h,v,S)=>l(h,v)?G.some(h):Ni(S)&&S(h)?G.none():m(h,v,S);const li=(l,m,h)=>{let v=l.dom;const S=Ni(h)?h:dn;for(;v.parentNode;){v=v.parentNode;const T=te.fromDom(v);if(m(T))return G.some(T);if(S(T))break}return G.none()},Cs=(l,m,h)=>Te((S,T)=>T(S),li,l,m,h),_r=(l,m)=>{const h=S=>m(te.fromDom(S));return N(l.dom.childNodes,h).map(te.fromDom)},fC=(l,m)=>{const h=v=>{for(let S=0;S<v.childNodes.length;S++){const T=te.fromDom(v.childNodes[S]);if(m(T))return G.some(T);const R=h(v.childNodes[S]);if(R.isSome())return R}return G.none()};return h(l.dom)},sn=(l,m,h)=>li(l,v=>da(v,m),h),wd=(l,m)=>_r(l,h=>da(h,m)),Pm=(l,m)=>vv(m,l),ws=(l,m,h)=>Te((S,T)=>da(S,T),sn,l,m,h),Go=(l,m,h=vp)=>l.exists(v=>h(v,m)),bl=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},vT=(l,m)=>l!=null?m(l):G.none(),Rp=(l,m)=>l?G.some(m):G.none(),ao=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,ga=(l,m,h=0,v)=>{const S=l.indexOf(m,h);return S!==-1?fu(v)?!0:S+m.length<=v:!1},$m=(l,m)=>ao(l,m,0),Gr=(l,m)=>ao(l,m,l.length-m.length),_g=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),oo=l=>l.length>0,Or=l=>{const m=parseFloat(l);return isNaN(m)?G.none():G.some(m)},ha=l=>l.style!==void 0&&Ni(l.style.getPropertyValue),gC=(l,m,h)=>{if(!xg(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",l),new Error("CSS value must be a string: "+h);ha(l)&&l.style.setProperty(m,h)},Li=(l,m)=>{ha(l)&&l.style.removeProperty(m)},jn=(l,m,h)=>{const v=l.dom;gC(v,m,h)},Ar=(l,m)=>{const h=l.dom;Ro(m,(v,S)=>{gC(h,S,v)})},Sd=(l,m)=>{const h=l.dom,S=window.getComputedStyle(h).getPropertyValue(m);return S===""&&!jo(l)?hC(h,m):S},hC=(l,m)=>ha(l)?l.style.getPropertyValue(m):"",Im=(l,m)=>{const h=l.dom,v=hC(h,m);return G.from(v).filter(S=>S.length>0)},ui=(l,m)=>{const h=l.dom;Li(h,m),Go(sc(l,"style").map(_g),"")&&Vo(l,"style")},qo=(l,m)=>{const h=l.dom,v=m.dom;ha(h)&&ha(v)&&(v.style.cssText=h.style.cssText)},qr=(l,m,h=0)=>sc(l,m).map(v=>parseInt(v,10)).getOr(h),Kr=(l,m)=>qr(l,m,1),di=l=>ua("col")(l)?qr(l,"span",1)>1:Kr(l,"colspan")>1,Og=l=>Kr(l,"rowspan")>1,Ko=(l,m)=>parseInt(Sd(l,m),10),cc=K(10),Mp=K(10),Lm=(l,m)=>Bp(l,m,Ce),Bp=(l,m,h)=>rs(Pn(l),v=>da(v,m)?h(v)?[v]:[]:Bp(v,m,h)),pC=(l,m,h=dn)=>{if(h(m))return G.none();if(Fo(l,ro(m)))return G.some(m);const v=S=>da(S,"table")||h(S);return sn(m,l.join(","),v)},xd=(l,m)=>pC(["td","th"],l,m),Su=l=>Lm(l,"th,td"),Ag=l=>da(l,"colgroup")?wu(l,"col"):rs(Ed(l),m=>wu(m,"col")),Yr=(l,m)=>ws(l,"table",m),kv=l=>Lm(l,"tr"),Ed=l=>Yr(l).fold(K([]),m=>wu(m,"colgroup")),Np=(l,m)=>Dt(l,h=>{if(ro(h)==="colgroup"){const v=Dt(Ag(h),S=>{const T=qr(S,"span",1);return _p(S,1,T)});return Ap(h,v,"colgroup")}else{const v=Dt(Su(h),S=>{const T=qr(S,"rowspan",1),R=qr(S,"colspan",1);return _p(S,T,R)});return Ap(h,v,m(h))}}),Td=l=>pl(l).map(m=>{const h=ro(m);return yu(h)?h:"tbody"}).getOr("tbody"),_v=l=>{const m=kv(l),v=[...Ed(l),...m];return Np(v,Td)},Pp=(l,m)=>Np(l,()=>m),Hm=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},bC=(l,m,h,v)=>{const S=l.isiOS()&&/ipad/i.test(h)===!0,T=l.isiOS()&&!S,R=l.isiOS()||l.isAndroid(),$=R||v("(pointer:coarse)"),H=S||!T&&R&&v("(min-device-width:768px)"),Z=T||R&&!H,ee=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,Se=!Z&&!H&&!ee;return{isiPad:K(S),isiPhone:K(T),isTablet:K(H),isPhone:K(Z),isTouch:K($),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:K(ee),isDesktop:K(Se)}},vC=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},Vm=(l,m)=>{const h=vC(l,m);if(!h)return{major:0,minor:0};const v=S=>Number(m.replace(h,"$"+S));return $p(v(1),v(2))},yT=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?W():Vm(l,h)},W=()=>$p(0,0),$p=(l,m)=>({major:l,minor:m}),Xr={nu:$p,detect:yT,unknown:W},Ov=(l,m)=>Er(m.brands,h=>{const v=h.brand.toLowerCase();return N(l,S=>{var T;return v===((T=S.brand)===null||T===void 0?void 0:T.toLowerCase())}).map(S=>({current:S.name,version:Xr.nu(parseInt(h.version,10),0)}))}),CT=(l,m)=>{const h=String(m).toLowerCase();return N(l,v=>v.search(h))},wT=(l,m)=>CT(l,m).map(h=>{const v=Xr.detect(h.versionRegexes,m);return{current:h.name,version:v}}),En=(l,m)=>CT(l,m).map(h=>{const v=Xr.detect(h.versionRegexes,m);return{current:h.name,version:v}}),mi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,mr=l=>m=>ga(m,l),vl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>ga(l,"edge/")&&ga(l,"chrome")&&ga(l,"safari")&&ga(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,mi],search:l=>ga(l,"chrome")&&!ga(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>ga(l,"msie")||ga(l,"trident")},{name:"Opera",versionRegexes:[mi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:mr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:mr("firefox")},{name:"Safari",versionRegexes:[mi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(ga(l,"safari")||ga(l,"mobile/"))&&ga(l,"applewebkit")}],yC=[{name:"Windows",search:mr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>ga(l,"iphone")||ga(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:mr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:mr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:mr("linux"),versionRegexes:[]},{name:"Solaris",search:mr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:mr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:mr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],zm={browsers:K(vl),oses:K(yC)},Fa="Edge",Fp="Chromium",Av="IE",CC="Opera",Fc="Firefox",Um="Safari",wC=()=>Ia({current:void 0,version:Xr.unknown()}),Ia=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isEdge:v(Fa),isChromium:v(Fp),isIE:v(Av),isOpera:v(CC),isFirefox:v(Fc),isSafari:v(Um)}},Ps={unknown:wC,nu:Ia,edge:K(Fa),chromium:K(Fp),ie:K(Av),opera:K(CC),firefox:K(Fc),safari:K(Um)},xu="Windows",Wm="iOS",Ic="Android",pa="Linux",Dv="macOS",SC="Solaris",Dg="FreeBSD",Ip="ChromeOS",Rv=()=>Hi({current:void 0,version:Xr.unknown()}),Hi=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isWindows:v(xu),isiOS:v(Wm),isAndroid:v(Ic),isMacOS:v(Dv),isLinux:v(pa),isSolaris:v(SC),isFreeBSD:v(Dg),isChromeOS:v(Ip)}},Lp={unknown:Rv,nu:Hi,windows:K(xu),ios:K(Wm),android:K(Ic),linux:K(pa),macos:K(Dv),solaris:K(SC),freebsd:K(Dg),chromeos:K(Ip)},QA={detect:(l,m,h)=>{const v=zm.browsers(),S=zm.oses(),T=m.bind(H=>Ov(v,H)).orThunk(()=>wT(v,l)).fold(Ps.unknown,Ps.nu),R=En(S,l).fold(Lp.unknown,Lp.nu),$=bC(R,T,l,h);return{browser:T,os:R,deviceType:$}}},ST=l=>window.matchMedia(l).matches;let Hp=Hm(()=>QA.detect(navigator.userAgent,G.from(navigator.userAgentData),ST));const xC=()=>Hp(),kd=(l,m)=>{const h=($,H)=>{if(!ir(H)&&!H.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+H);const Z=$.dom;ha(Z)&&(Z.style[l]=H+"px")},v=$=>{const H=m($);if(H<=0||H===null){const Z=Sd($,l);return parseFloat(Z)||0}return H},S=v,T=($,H)=>we(H,(Z,ee)=>{const Se=Sd($,ee),ze=Se===void 0?0:parseInt(Se,10);return isNaN(ze)?Z:Z+ze},0);return{set:h,get:v,getOuter:S,aggregate:T,max:($,H,Z)=>{const ee=T($,Z);return H>ee?H-ee:0}}},cs=(l,m)=>Or(l).getOr(m),Xn=(l,m,h)=>cs(Sd(l,m),h),ic=(l,m,h,v)=>{const S=Xn(l,`padding-${h}`,0),T=Xn(l,`padding-${v}`,0),R=Xn(l,`border-${h}-width`,0),$=Xn(l,`border-${v}-width`,0);return m-S-T-R-$},Mv=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:ic(l,v,"left","right")},xT=l=>Xn(l,"height",l.dom.offsetHeight),Dr=l=>Xn(l,"width",l.dom.offsetWidth),Rg=l=>Mv(l,"content-box"),_d=kd("width",l=>l.dom.offsetWidth),Jr=l=>_d.get(l),EC=l=>_d.getOuter(l),Nt=Rg,lc=Dr,yl=(l,m,h)=>{const v=l.cells,S=v.slice(0,m),T=v.slice(m),R=S.concat(h).concat(T);return Nv(l,R)},Bv=(l,m,h)=>yl(l,m,[h]),Mg=(l,m,h)=>{const v=l.cells;v[m]=h},Nv=(l,m)=>Cd(l.element,m,l.section,l.isNew),Vp=(l,m)=>{const h=l.cells,v=Dt(h,m);return Cd(l.element,v,l.section,l.isNew)},Os=(l,m)=>l.cells[m],Qr=(l,m)=>Os(l,m).element,ea=l=>l.cells.length,Ks=l=>{const m=Ba(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},TC=(l,m,h)=>{const v=Dt(l.cells,h);return Cd(m(l.element),v,l.section,!0)},yo="data-snooker-locked-cols",ba=l=>sc(l,yo).bind(m=>G.from(m.match(/\d+/g))).map(m=>Bt(m,Ce)),La=l=>{const m=we(Ks(l).rows,(v,S)=>(Ee(S.cells,(T,R)=>{T.isLocked&&(v[R]=!0)}),v),{}),h=Ws(m,(v,S)=>parseInt(S,10));return mo(h)},Zm=(l,m)=>l+","+m,Yo=(l,m,h)=>G.from(l.access[Zm(m,h)]),kC=(l,m,h)=>{const v=Pv(l,S=>h(m,S.element));return v.length>0?G.some(v[0]):G.none()},Pv=(l,m)=>{const h=rs(l.all,v=>v.cells);return Lo(h,m)},Vn=l=>{const m={};let h=0;return Ee(l.cells,v=>{const S=v.colspan;Eo(S,T=>{const R=h+T;m[R]=dC(v.element,S,R)}),h+=S}),m},Eu=l=>{const m={},h=[],S=be(l).map(Fe=>Fe.element).bind(Yr).bind(ba).getOr({});let T=0,R=0,$=0;const{pass:H,fail:Z}=Ba(l,Fe=>Fe.section==="colgroup");Ee(Z,Fe=>{const he=[];Ee(Fe.cells,He=>{let ge=0;for(;m[Zm($,ge)]!==void 0;)ge++;const Xe=vo(S,ge.toString()),Ct=uC(He.element,He.rowspan,He.colspan,$,ge,Xe);for(let It=0;It<He.colspan;It++)for(let Un=0;Un<He.rowspan;Un++){const Ms=$+Un,Oo=ge+It,ka=Zm(Ms,Oo);m[ka]=Ct,R=Math.max(R,Oo+1)}he.push(Ct)}),T++,h.push(Ap(Fe.element,he,Fe.section)),$++});const{columns:ee,colgroups:Se}=hu(H).map(Fe=>{const he=Vn(Fe);return{colgroups:[Fi(Fe.element,bo(he))],columns:he}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Sv(T,R),access:m,all:h,columns:ee,colgroups:Se}},Gt={fromTable:l=>{const m=_v(l);return Eu(m)},generate:Eu,getAt:Yo,findItem:kC,filterItems:Pv,justCells:l=>rs(l.all,m=>m.cells),justColumns:l=>bo(l.columns),hasColumns:l=>ft(l.columns).length>0,getColumnAt:(l,m)=>G.from(l.columns[m])},Iv=(l,m=Ce)=>{const h=l.grid,v=Eo(h.columns,Sn),S=Eo(h.rows,Sn);return Dt(v,T=>Lv(()=>rs(S,Z=>Gt.getAt(l,Z,T).filter(ee=>ee.column===T).toArray()),Z=>Z.colspan===1&&m(Z.element),()=>Gt.getAt(l,0,T)))},Lv=(l,m,h)=>{const v=l();return N(v,m).orThunk(()=>G.from(v[0]).orThunk(h)).map(R=>R.element)},ET=l=>{const m=l.grid,h=Eo(m.rows,Sn),v=Eo(m.columns,Sn);return Dt(h,S=>Lv(()=>rs(v,H=>Gt.getAt(l,S,H).filter(Z=>Z.row===S).fold(K([]),Z=>[Z])),H=>H.rowspan===1,()=>Gt.getAt(l,S,0)))},eD=(l,m)=>{if(m<0||m>=l.length-1)return G.none();const h=l[m].fold(()=>{const S=uT(l.slice(0,m));return Er(S,(T,R)=>T.map($=>({value:$,delta:R+1})))},S=>G.some({value:S,delta:0})),v=l[m+1].fold(()=>{const S=l.slice(m+1);return Er(S,(T,R)=>T.map($=>({value:$,delta:R+1})))},S=>G.some({value:S,delta:1}));return h.bind(S=>v.map(T=>{const R=T.delta+S.delta;return Math.abs(T.value-S.value)/R}))},Hv=(l,m)=>h=>Vv(h)==="rtl"?m:l,Vv=l=>Sd(l,"direction")==="rtl"?"rtl":"ltr",_C=kd("height",l=>{const m=l.dom;return jo(l)?m.getBoundingClientRect().height:m.offsetHeight}),Tu=l=>_C.get(l),Od=l=>_C.getOuter(l),TT=xT,Bg=(l,m)=>({left:l,top:m,translate:(v,S)=>Bg(l+v,m+S)}),Cl=Bg,zv=l=>{const m=l.getBoundingClientRect();return Cl(m.left,m.top)},gi=(l,m)=>l!==void 0?l:m!==void 0?m:0,Ad=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,S=m.documentElement;if(h===l.dom)return Cl(h.offsetLeft,h.offsetTop);const T=gi(v==null?void 0:v.pageYOffset,S.scrollTop),R=gi(v==null?void 0:v.pageXOffset,S.scrollLeft),$=gi(S.clientTop,h.clientTop),H=gi(S.clientLeft,h.clientLeft);return kT(l).translate(R-H,T-$)},kT=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?Cl(v.offsetLeft,v.offsetTop):jo(l)?zv(m):Cl(0,0)},Up=(l,m)=>({row:l,y:m}),Uv=(l,m)=>({col:l,x:m}),OC=l=>Ad(l).left+EC(l),Wv=l=>Ad(l).left,Ys=(l,m)=>Uv(l,Wv(m)),Wp=(l,m)=>Uv(l,OC(m)),Xo=l=>Ad(l).top,$s=(l,m)=>Up(l,Xo(m)),lt=(l,m)=>Up(l,Xo(m)+Od(m)),We=(l,m,h)=>{if(h.length===0)return[];const v=Dt(h.slice(1),(T,R)=>T.map($=>l(R,$))),S=h[h.length-1].map(T=>m(h.length-1,T));return v.concat([S])},Dd=l=>-l,uc={delta:Sn,positions:l=>We($s,lt,l),edge:Xo},dc=Hv({delta:Sn,edge:Wv,positions:l=>We(Ys,Wp,l)},{delta:Dd,edge:OC,positions:l=>We(Wp,Ys,l)}),mc={delta:(l,m)=>dc(m).delta(l,m),positions:(l,m)=>dc(m).positions(l,m),edge:l=>dc(l).edge(l)},Zp={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},fo=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",S=$=>`(?:${$})?`,R=`[+-]?(?:${["Infinity",l+v+S(l)+S(h),v+l+S(h),l+S(h)].join("|")})`;return new RegExp(`^(${R})(.*)$`)})(),jm=(l,m)=>Le(m,h=>Le(Zp[h],v=>l===v)),Ng=(l,m)=>G.from(fo.exec(l)).bind(v=>{const S=Number(v[1]),T=v[2];return jm(T,m)?G.some({value:S,unit:T}):G.none()}),_e=/(\d+(\.\d+)?)%/,_T=/(\d+(\.\d+)?)px|em/,OT=ua("col"),Ha=(l,m,h)=>{const v=Pc(l).getOrThunk(()=>zo(Tg(l)));return m(l)/h(v)*100},Gm=(l,m)=>{jn(l,"width",m+"px")},ku=(l,m)=>{jn(l,"width",m+"%")},co=(l,m)=>{jn(l,"height",m+"px")},AC=l=>TT(l)+"px",kn=(l,m,h,v)=>{const S=Yr(l).map(T=>{const R=h(T);return Math.floor(m/100*R)}).getOr(m);return v(l,S),S},vn=(l,m,h,v)=>{const S=parseFloat(l);return Gr(l,"%")&&ro(m)!=="table"?kn(m,S,h,v):S},Xs=l=>{const m=AC(l);return m?vn(m,l,Tu,co):Tu(l)},qm=(l,m,h)=>{const v=h(l),S=Kr(l,m);return v/S},Uo=(l,m)=>Im(l,m).orThunk(()=>sc(l,m).map(h=>h+"px")),Rd=l=>Uo(l,"width"),As=l=>Uo(l,"height"),Rr=l=>Ha(l,Jr,Nt),wl=l=>OT(l)?Jr(l):lc(l),me=l=>qm(l,"rowspan",Xs),ta=l=>Rd(l).bind(h=>Ng(h,["fixed","relative","empty"])),DC=(l,m,h)=>{jn(l,"width",m+h)},is=l=>Jr(l)+"px",Lc=l=>Ha(l,Jr,Nt)+"%",jp=l=>Rd(l).exists(m=>_e.test(m)),fc=l=>Rd(l).exists(m=>_T.test(m)),AT=l=>Rd(l).isNone(),_u=K(_e),RC=ua("col"),Va=l=>Rd(l).getOrThunk(()=>wl(l)+"px"),bn=l=>As(l).getOrThunk(()=>me(l)+"px"),Vi=l=>Dt(Gt.justColumns(l),m=>G.from(m.element)),Pg=l=>{const m=xC().browser,h=m.isChromium()||m.isFirefox();return RC(l)?h:!0},Js=(l,m,h,v,S,T)=>l.filter(v).fold(()=>T(eD(h,m)),R=>S(R)),Gp=(l,m,h,v)=>{const S=Iv(l),T=Gt.hasColumns(l)?Vi(l):S,R=[G.some(mc.edge(m))].concat(Dt(mc.positions(S,m),H=>H.map(Z=>Z.x))),$=Q(di);return Dt(T,(H,Z)=>Js(H,Z,R,$,ee=>{if(Pg(ee))return h(ee);{const Se=vT(S[Z],Sn);return Js(Se,Z,R,$,ze=>v(G.some(Jr(ze))),v)}},v))},Ou=l=>l.map(m=>m+"px").getOr(""),Sl=(l,m)=>Gp(l,m,Va,Ou),Bo=(l,m,h)=>Gp(l,m,Rr,v=>v.fold(()=>h.minCellWidth(),S=>S/h.pixelWidth()*100)),Gv=(l,m,h)=>Gp(l,m,wl,v=>v.getOrThunk(h.minCellWidth)),oe=(l,m,h,v,S)=>{const T=ET(l),R=[G.some(h.edge(m))].concat(Dt(h.positions(T,m),$=>$.map(H=>H.y)));return Dt(T,($,H)=>Js($,H,R,Q(Og),v,S))},Qs=(l,m,h)=>oe(l,m,h,me,v=>v.getOrThunk(Mp)),qp=(l,m,h)=>oe(l,m,h,bn,Ou),za=(l,m)=>()=>jo(l)?m(l):parseFloat(Im(l,"width").getOr("0")),va=l=>{const m=za(l,Jr),h=K(0);return{width:m,pixelWidth:m,getWidths:(S,T)=>Gv(S,l,T),getCellDelta:h,singleColumnWidth:K([0]),minCellWidth:h,setElementWidth:mt,adjustTableWidth:mt,isRelative:!0,label:"none"}},Fs=l=>{const m=za(l,H=>parseFloat(Lc(H))),h=za(l,Jr);return{width:m,pixelWidth:h,getWidths:(H,Z)=>Bo(H,l,Z),getCellDelta:H=>H/h()*100,singleColumnWidth:(H,Z)=>[100-H],minCellWidth:()=>cc()/h()*100,setElementWidth:ku,adjustTableWidth:H=>{const Z=m(),ee=H/100*Z,Se=Z+ee;ku(l,Se)},isRelative:!0,label:"percent"}},To=l=>{const m=za(l,Jr);return{width:m,pixelWidth:m,getWidths:(R,$)=>Gv(R,l,$),getCellDelta:Sn,singleColumnWidth:(R,$)=>[Math.max(cc(),R+$)-R],minCellWidth:cc,setElementWidth:Gm,adjustTableWidth:R=>{const $=m()+R;Gm(l,$)},isRelative:!1,label:"pixel"}},Kp=(l,m)=>_u().exec(m)!==null?Fs(l):To(l),Au={getTableSize:l=>Rd(l).fold(()=>va(l),h=>Kp(l,h)),pixelSize:To,percentageSize:Fs,noneSize:va},gt=(l,m,h,v,S,T)=>({minRow:l,minCol:m,maxRow:h,maxCol:v,allCells:S,selectedCells:T}),tD=(l,m)=>{const h=l.grid.columns;let S=l.grid.rows,T=h,R=0,$=0;const H=[],Z=[];return Ro(l.access,ee=>{if(H.push(ee),m(ee)){Z.push(ee);const Se=ee.row,ze=Se+ee.rowspan-1,Fe=ee.column,he=Fe+ee.colspan-1;Se<S?S=Se:ze>R&&(R=ze),Fe<T?T=Fe:he>$&&($=he)}}),gt(S,T,R,$,H,Z)},ya=(l,m,h)=>{const v=l[h].element,S=te.fromTag("td");Mo(S,te.fromTag("br")),(m?Mo:rc)(v,S)},Du=(l,m,h,v)=>{const S=Lo(l,$=>$.section!=="colgroup"),T=m.grid.columns,R=m.grid.rows;for(let $=0;$<R;$++){let H=!1;for(let Z=0;Z<T;Z++)$<h.minRow||$>h.maxRow||Z<h.minCol||Z>h.maxCol||(Gt.getAt(m,$,Z).filter(v).isNone()?ya(S,H,$):H=!0)}},DT=(l,m,h,v)=>{Ro(h.columns,R=>{(R.column<m.minCol||R.column>m.maxCol)&&js(R.element)});const S=Lo(Lm(l,"tr"),R=>R.dom.childElementCount===0);Ee(S,js),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ee(Lm(l,"th,td"),R=>{Vo(R,"rowspan"),Vo(R,"colspan")}),Vo(l,yo),Vo(l,"data-snooker-col-series"),Au.getTableSize(l).adjustTableWidth(v)},er=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const S=Gv(m,l,h),T=we(S,(Z,ee)=>Z+ee,0),H=we(S.slice(v.minCol,v.maxCol+1),(Z,ee)=>Z+ee,0)/T*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(H)},Yp=(l,m)=>{const h=ze=>da(ze.element,m),v=ma(l),S=_v(v),T=Au.getTableSize(l),R=Gt.generate(S),$=tD(R,h),H="th:not("+m+"),td:not("+m+")",Z=Bp(v,"th,td",ze=>da(ze,H));Ee(Z,js),Du(S,R,$,h);const ee=Gt.fromTable(l),Se=er(l,ee,T,$);return DT(v,$,R,Se),v},xl=" ",gc=((l,m)=>{const h=T=>{if(!l(T))throw new Error("Can only get "+m+" value of a "+m+" node");return v(T).getOr("")},v=T=>l(T)?G.from(T.dom.nodeValue):G.none();return{get:h,getOption:v,set:(T,R)=>{if(!l(T))throw new Error("Can only set raw "+m+" value of a "+m+" node");T.dom.nodeValue=R}}})(hd,"text"),Ru=l=>gc.get(l),El=l=>gc.getOption(l),hc=(l,m)=>gc.set(l,m),zi=l=>ro(l)==="img"?1:El(l).fold(()=>Pn(l).length,m=>m.length),MC=l=>El(l).filter(m=>m.trim().length!==0||m.indexOf(xl)>-1).isSome(),Xm=l=>kt(l)&&bu(l,"contenteditable")==="false",Xp=["img","br"],BC=l=>MC(l)||Fo(Xp,ro(l))||Xm(l),Ui=l=>fC(l,BC),$g=l=>RT(l,BC),RT=(l,m)=>{const h=v=>{const S=Pn(v);for(let T=S.length-1;T>=0;T--){const R=S[T];if(m(R))return G.some(R);const $=h(R);if($.isSome())return $}return G.none()};return h(l)},qv={scope:["row","col"]},Jp=l=>()=>{const m=te.fromTag("td",l.dom);return Mo(m,te.fromTag("br",l.dom)),m},ls=l=>()=>te.fromTag("col",l.dom),Wi=l=>()=>te.fromTag("colgroup",l.dom),Jm=l=>()=>te.fromTag("tr",l.dom),Md=(l,m,h)=>{const v=wv(l,m);return Ro(h,(S,T)=>{S===null?Vo(v,T):as(v,T,S)}),v},NC=l=>l,Ua=(l,m,h)=>Ui(l).map(S=>{const T=h.join(","),R=Rt(S,T,$=>no($,l));return Zr(R,($,H)=>{const Z=ci(H);return Mo($,Z),Z},m)}).getOr(m),Qp=(l,m)=>{Ro(qv,(h,v)=>sc(l,v).filter(S=>Fo(h,S)).each(S=>as(m,v,S)))},Fg=(l,m,h)=>{const v=(R,$)=>{qo(R.element,$),ui($,"height"),R.colspan!==1&&ui($,"width")},S=R=>{const $=te.fromTag(ro(R.element),m.dom),H=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Z=H.length>0?Ua(R.element,$,H):$;return Mo(Z,te.fromTag("br")),v(R,$),Qp(R.element,$),l(R.element,$),$};return{col:R=>{const $=te.fromTag(ro(R.element),m.dom);return v(R,$),l(R.element,$),$},colgroup:Wi(m),row:Jm(m),cell:S,replace:Md,colGap:ls(m),gap:Jp(m)}},Ca=l=>({col:ls(l),colgroup:Wi(l),row:Jm(l),cell:Jp(l),replace:NC,colGap:ls(l),gap:Jp(l)}),Tl=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,Pn(te.fromDom(v))},hi=l=>Dt(l,te.fromDom),Mu=l=>m=>m.options.get(l),Hc="100%",PC=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return Nt(te.fromDom(v))+"px"},Bu=(l,m)=>bi(l)||!tf(l)?m:pi(l)?{...m,width:PC(l)}:{...m,width:Hc},Qm=(l,m)=>bi(l)||tf(l)?m:pi(l)?{...m,width:PC(l)}:{...m,width:Hc},pc=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=Fo(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=Fo(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},$C=l=>G.from(l.options.get("table_clone_elements")),Ig=l=>{const m=l.options.get("object_resizing");return Fo(m.split(","),"table")},Kv=Mu("table_header_type"),Yv=Mu("table_column_resizing"),Co=l=>Yv(l)==="preservetable",FC=l=>Yv(l)==="resizetable",Zi=Mu("table_sizing_mode"),ef=l=>Zi(l)==="relative",pi=l=>Zi(l)==="fixed",bi=l=>Zi(l)==="responsive",Wa=Mu("table_resize_bars"),tf=Mu("table_style_by_css"),Lg=Mu("table_merge_content_on_paste"),Jo=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:Qm(l,h)},Bd=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:Bu(l,h)},Xv=Mu("table_use_colgroups"),Nd=l=>ws(l,"[contenteditable]"),nf=(l,m=!1)=>jo(l)?l.dom.isContentEditable:Nd(l).fold(K(m),h=>Jv(h)==="true"),Jv=l=>l.dom.contentEditable,Pd=l=>te.fromDom(l.getBody()),kl=l=>m=>no(m,Pd(l)),na=l=>{Vo(l,"data-mce-style");const m=h=>Vo(h,"data-mce-style");Ee(Su(l),m),Ee(Ag(l),m),Ee(kv(l),m)},_l=l=>te.fromDom(l.selection.getStart()),ji=l=>l.getBoundingClientRect().width,Qv=l=>l.getBoundingClientRect().height,e1=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return G.from(h).filter(oo)},Hg=l=>/^(\d+(\.\d+)?)%$/.test(l),t1=l=>/^(\d+(\.\d+)?)px$/.test(l),of=l=>Cs(l,ua("table")).exists(nf),Nu=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,S=m.row,T=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&S<=l.finishRow&&T>=l.startRow},IC=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Vg=(l,m)=>{let h=!0;const v=On(IC,m);for(let S=m.startRow;S<=m.finishRow;S++)for(let T=m.startCol;T<=m.finishCol;T++)h=h&&Gt.getAt(l,S,T).exists(v);return h?G.some(m):G.none()},hn=(l,m)=>Ev(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),at=(l,m,h)=>{const v=Gt.findItem(l,m,no),S=Gt.findItem(l,h,no);return v.bind(T=>S.map(R=>hn(T,R)))},$d=(l,m,h)=>at(l,m,h).bind(v=>Vg(l,v)),n1=(l,m,h,v)=>Gt.findItem(l,m,no).bind(S=>{const T=h>0?S.row+S.rowspan-1:S.row,R=v>0?S.column+S.colspan-1:S.column;return Gt.getAt(l,T+h,R+v).map(H=>H.element)}),o1=(l,m,h)=>at(l,m,h).map(v=>{const S=Gt.filterItems(l,On(Nu,v));return Dt(S,T=>T.element)}),e0=(l,m)=>{const h=(v,S)=>yv(S,v);return Gt.findItem(l,m,h).map(v=>v.element)},MT=(l,m,h)=>Yr(l).bind(v=>{const S=zg(v);return n1(S,l,m,h)}),Fn=(l,m,h)=>{const v=zg(l);return o1(v,m,h)},s1=(l,m,h,v,S)=>{const T=zg(l),R=no(l,h)?G.some(m):e0(T,m),$=no(l,S)?G.some(v):e0(T,v);return R.bind(H=>$.bind(Z=>o1(T,H,Z)))},LC=(l,m,h)=>{const v=zg(l);return $d(v,m,h)},zg=Gt.fromTable;var ve=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],sf=()=>{const l=Z=>te.fromDom(Z.dom.cloneNode(!1)),m=Z=>Bm(Z).dom,h=Z=>la(Z)?ro(Z)==="body"?!0:Fo(ve,ro(Z)):!1,v=Z=>la(Z)?Fo(["br","img","hr","input"],ro(Z)):!1,S=Z=>la(Z)&&bu(Z,"contenteditable")==="false",T=(Z,ee)=>Z.dom.compareDocumentPosition(ee.dom),R=(Z,ee)=>{const Se=Nc(Z);$i(ee,Se)},$=Z=>{const ee=ro(Z);return Fo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ee)},H=Z=>la(Z)?sc(Z,"lang"):G.none();return{up:K({selector:sn,closest:ws,predicate:li,all:bd}),down:K({selector:$c,predicate:Dp}),styles:K({get:Sd,getRaw:Im,set:jn,remove:ui}),attrs:K({get:bu,set:as,remove:Vo,copyTo:R}),insert:K({before:vd,after:vu,afterAll:$n,append:Mo,appendAll:ac,prepend:rc,wrap:iC}),remove:K({unwrap:kp,remove:js}),create:K({nu:te.fromTag,clone:l,text:te.fromText}),query:K({comparePosition:T,prevSibling:kg,nextSibling:Nm}),property:K({children:Pn,name:ro,parent:pl,document:m,isText:hd,isComment:to,isElement:la,isSpecial:$,getLanguage:H,getText:Ru,setText:hc,isBoundary:h,isEmptyTag:v,isNonEditable:S}),eq:no,is:fT}};const BT=(l,m,h,v)=>{const S=h[0],T=h.slice(1);return v(l,m,S,T)},r1=(l,m,h)=>h.length>0?BT(l,m,h,t0):G.none(),t0=(l,m,h,v)=>{const S=m(l,h);return Zr(v,(T,R)=>{const $=m(l,R);return rf(l,T,$)},S)},rf=(l,m,h)=>m.bind(v=>h.filter(On(l.eq,v))),af=(l,m)=>On(l.eq,m),Gi=(l,m,h,v=dn)=>{const S=[m].concat(l.up().all(m)),T=[h].concat(l.up().all(h)),R=ee=>Dm(ee,v).fold(()=>ee,ze=>ee.slice(0,ze+1)),$=R(S),H=R(T),Z=N($,ee=>Le(H,af(l,ee)));return{firstpath:$,secondpath:H,shared:Z}},NT=r1,cf=Gi,Gn=sf(),fr=(l,m)=>NT(Gn,(h,v)=>l(v),m),PT=(l,m,h)=>cf(Gn,l,m,h),vi=l=>sn(l,"table"),Ug=(l,m,h)=>{const v=S=>T=>h!==void 0&&h(T)||no(T,S);return no(l,m)?G.some({boxes:G.some([l]),start:l,finish:m}):vi(l).bind(S=>vi(m).bind(T=>{if(no(S,T))return G.some({boxes:Fn(S,l,m),start:l,finish:m});if(yv(S,T)){const R=Rt(m,"td,th",v(S)),$=R.length>0?R[R.length-1]:m;return G.some({boxes:s1(S,l,S,m,T),start:l,finish:$})}else if(yv(T,S)){const R=Rt(l,"td,th",v(T)),$=R.length>0?R[R.length-1]:l;return G.some({boxes:s1(T,l,S,m,T),start:l,finish:$})}else return PT(l,m).shared.bind(R=>ws(R,"table",h).bind($=>{const H=Rt(m,"td,th",v($)),Z=H.length>0?H[H.length-1]:m,ee=Rt(l,"td,th",v($)),Se=ee.length>0?ee[ee.length-1]:l;return G.some({boxes:s1($,l,S,m,T),start:Se,finish:Z})}))}))},Fd=(l,m)=>{const h=$c(l,m);return h.length>0?G.some(h):G.none()},Id=(l,m)=>N(l,h=>da(h,m)),HC=(l,m,h)=>Pm(l,m).bind(v=>Pm(l,h).bind(S=>fr(vi,[v,S]).map(T=>({first:v,last:S,table:T})))),VC=(l,m)=>sn(l,"table").bind(h=>Pm(h,m).bind(v=>Ug(v,l).bind(S=>S.boxes.map(T=>({boxes:T,start:S.start,finish:S.finish}))))),n0=(l,m,h,v,S)=>Id(l,S).bind(T=>MT(T,m,h).bind(R=>VC(R,v))),$T=(l,m)=>Fd(l,m),Ld=(l,m,h)=>HC(l,m,h).bind(v=>{const S=H=>no(l,H),T="thead,tfoot,tbody,table",R=sn(v.first,T,S),$=sn(v.last,T,S);return R.bind(H=>$.bind(Z=>no(H,Z)?LC(v.table,v.first,v.last):G.none()))}),Ol=Sn,a1=l=>{const m=(v,S)=>sc(v,S).exists(T=>parseInt(T,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&eo(l,h)?G.some(l):G.none()},c1=(l,m,h)=>m.length<=1?G.none():Ld(l,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Wg="data-mce-selected",je="td["+Wg+"],th["+Wg+"]",gr="["+Wg+"]",Zg="data-mce-first-selected",zC="td["+Zg+"],th["+Zg+"]",i1="data-mce-last-selected",tr="td["+i1+"],th["+i1+"]",l1=gr,Vc={selected:Wg,selectedSelector:je,firstSelected:Zg,firstSelectedSelector:zC,lastSelected:i1,lastSelectedSelector:tr},Al=(l,m,h)=>({element:h,mergable:c1(m,l,Vc),unmergable:a1(l),selection:Ol(l)}),o0=(l,m,h)=>({element:l,clipboard:m,generators:h}),yi=(l,m,h,v)=>({selection:Ol(l),clipboard:h,generators:v}),s0=l=>Yr(l).bind(m=>$T(m,Vc.firstSelectedSelector)).fold(K(l),m=>m[0]),UC=l=>(m,h)=>{const v=ro(m),S=v==="col"||v==="colgroup"?s0(m):m;return ws(S,l,h)},r0=UC("th,td,caption"),jg=UC("th,td"),qi=l=>hi(l.model.table.getSelectedCells()),Gg=l=>Lo(qi(l),m=>da(m,Vc.selectedSelector)),u1=l=>Yr(l[0]).map(m=>{const h=Yp(m,l1);return na(h),[h]}),FT=(l,m)=>Dt(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),WC=l=>Dt(l,m=>m.dom.innerText).join(""),lf=(l,m)=>{l.on("BeforeGetContent",h=>{const v=S=>{h.preventDefault(),u1(S).each(T=>{h.content=h.format==="text"?WC(T):FT(l,T)})};if(h.selection===!0){const S=Gg(l);S.length>=1&&v(S)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=qi(l);be(v).each(S=>{Yr(S).each(T=>{const R=Lo(Tl(h.content),H=>ro(H)!=="meta"),$=ua("table");if(Lg(l)&&R.length===1&&$(R[0])){h.preventDefault();const H=te.fromDom(l.getDoc()),Z=Ca(H),ee=o0(S,R[0],Z);m.pasteCells(T,ee).each(()=>{l.focus()})}})})}})},hr=(l,m)=>({element:l,offset:m}),wa=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>wa(l,v,h).orThunk(()=>G.some(v))):G.none(),uf=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,ZC=(l,m)=>{const h=wa(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return hr(h,uf(l,h));const v=l.property().children(h);return v.length>0?ZC(l,v[v.length-1]):hr(h,uf(l,h))},Hd=ZC,d1=sf(),zc=l=>Hd(d1,l),a0=(l,m)=>{di(l)||ta(l).each(v=>{const S=v.value/2;DC(l,S,v.unit),DC(m,S,v.unit)})},m1=l=>Dt(l,K(0)),df=(l,m,h,v,S)=>S(l.slice(0,m)).concat(v).concat(S(l.slice(h))),c0=l=>(m,h,v,S)=>{if(l(v)){const T=Math.max(S,m[h]-Math.abs(v)),R=Math.abs(T-m[h]);return v>=0?R:-R}else return v},Dl=c0(l=>l<0),jC=c0(Ce),f1=()=>{const l=($,H,Z,ee,Se)=>{const ze=Dl($,H,ee,Se);return df($,H,Z+1,[ze,0],m1)},m=($,H,Z,ee)=>{const Se=(100+Z)/100,ze=Math.max(ee,($[H]+Z)/Se);return Dt($,(Fe,he)=>(he===H?ze:Fe/Se)-Fe)},h=($,H,Z,ee,Se,ze)=>ze?m($,H,ee,Se):l($,H,Z,ee,Se);return{resizeTable:($,H)=>$(H),clampTableDelta:Dl,calcLeftEdgeDeltas:h,calcMiddleDeltas:($,H,Z,ee,Se,ze,Fe)=>h($,Z,ee,Se,ze,Fe),calcRightEdgeDeltas:($,H,Z,ee,Se,ze)=>{if(ze)return m($,Z,ee,Se);{const Fe=Dl($,Z,ee,Se);return m1($.slice(0,Z)).concat([Fe])}},calcRedestributedWidths:($,H,Z,ee)=>{if(ee){const ze=(H+Z)/H,Fe=Dt($,he=>he/ze);return{delta:ze*100-100,newSizes:Fe}}else return{delta:Z,newSizes:$}}}},g1=()=>{const l=(R,$,H,Z,ee)=>{const Se=Z>=0?H:$,ze=jC(R,Se,Z,ee);return df(R,$,H+1,[ze,-ze],m1)};return{resizeTable:(R,$,H)=>{H&&R($)},clampTableDelta:(R,$,H,Z,ee)=>{if(ee){if(H>=0)return H;{const Se=we(R,(ze,Fe)=>ze+Fe-Z,0);return Math.max(-Se,H)}}else return Dl(R,$,H,Z)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(R,$,H,Z,ee,Se)=>l(R,H,Z,ee,Se),calcRightEdgeDeltas:(R,$,H,Z,ee,Se)=>{if(Se)return m1(R);{const ze=Z/R.length;return Dt(R,K(ze))}},calcRedestributedWidths:(R,$,H,Z)=>({delta:0,newSizes:R})}},i0=l=>Gt.fromTable(l).grid,Dn=ua("th"),h1=l=>eo(l,m=>Dn(m.element)),IT=(l,m)=>l&&m?"sectionCells":l?"section":"cells",GC=l=>{const m=l.section==="thead",h=Go(mf(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:IT(m,h)}:{type:"body"}},mf=l=>{const m=Lo(l,h=>Dn(h.element));return m.length===0?G.some("td"):m.length===l.length?G.some("th"):G.none()},qC=l=>{const m=Dt(l,S=>GC(S).type),h=Fo(m,"header"),v=Fo(m,"footer");if(!h&&!v)return G.some("body");{const S=Fo(m,"body");return h&&!S&&!v?G.some("header"):!h&&!S&&v?G.some("footer"):G.none()}},Sa=l=>Er(l.all,m=>{const h=GC(m);return h.type==="header"?G.from(h.subType):G.none()}),us=(l,m,h)=>Gs(h(l.element,m),!0,l.isLocked),l0=(l,m)=>l.section!==m?Cd(l.element,l.cells,m,l.isNew):l,KC=()=>({transformRow:l0,transformCell:(l,m,h)=>{const v=h(l.element,m),S=ro(v)!=="td"?lC(v,"td"):v;return Gs(S,l.isNew,l.isLocked)}}),ff=()=>({transformRow:l0,transformCell:us}),p1=()=>({transformRow:(l,m)=>l0(l,m==="thead"?"tbody":m),transformCell:us}),b1={getTableSectionType:(l,m)=>{const h=Gt.fromTable(l);switch(Sa(h).getOr(m)){case"section":return KC();case"sectionCells":return ff();case"cells":return p1()}},section:KC,sectionCells:ff,cells:p1,fallback:()=>({transformRow:Sn,transformCell:us})},Pu=(l,m,h,v)=>{h===v?Vo(l,m):as(l,m,h)},YC=(l,m,h)=>{hu(wu(l,m)).fold(()=>rc(l,h),v=>vu(v,h))},nD=(l,m)=>{const h=wd(l,m).getOrThunk(()=>{const v=te.fromTag(m,Tg(l).dom);return m==="thead"?YC(l,"caption,colgroup",v):m==="colgroup"?YC(l,"caption",v):Mo(l,v),v});return $a(h),h},oD=(l,m)=>{const h=[],v=[],S=Fe=>Dt(Fe,he=>{he.isNew&&h.push(he.element);const He=he.element;return $a(He),Ee(he.cells,ge=>{ge.isNew&&v.push(ge.element),Pu(ge.element,"colspan",ge.colspan,1),Pu(ge.element,"rowspan",ge.rowspan,1),Mo(He,ge.element)}),He}),T=Fe=>rs(Fe,he=>Dt(he.cells,He=>(Pu(He.element,"span",He.colspan,1),He.element))),R=(Fe,he)=>{const He=nD(l,he),Xe=(he==="colgroup"?T:S)(Fe);ac(He,Xe)},$=Fe=>{wd(l,Fe).each(js)},H=(Fe,he)=>{Fe.length>0?R(Fe,he):$(he)},Z=[],ee=[],Se=[],ze=[];return Ee(m,Fe=>{switch(Fe.section){case"thead":Z.push(Fe);break;case"tbody":ee.push(Fe);break;case"tfoot":Se.push(Fe);break;case"colgroup":ze.push(Fe);break}}),H(ze,"colgroup"),H(Z,"thead"),H(ee,"tbody"),H(Se,"tfoot"),{newRows:h,newCells:v}},Wo=l=>Dt(l,m=>{const h=ci(m.element);return Ee(m.cells,v=>{const S=ma(v.element);Pu(S,"colspan",v.colspan,1),Pu(S,"rowspan",v.rowspan,1),Mo(h,S)}),h}),Ci=(l,m)=>Dt(l,h=>Os(h,m)),mn=(l,m)=>l[m],Mr=(l,m)=>{if(l.length===0)return 0;const h=l[0];return Dm(l,S=>!m(h.element,S.element)).getOr(l.length)},Ki=(l,m,h,v)=>{const S=mn(l,m),T=S.section==="colgroup",R=Mr(S.cells.slice(h),v),$=T?1:Mr(Ci(l.slice(m),h),v);return{colspan:R,rowspan:$}},Ds=(l,m)=>{const h=Dt(l,S=>Dt(S.cells,dn)),v=(S,T,R,$)=>{for(let H=S;H<S+R;H++)for(let Z=T;Z<T+$;Z++)h[H][Z]=!0};return Dt(l,(S,T)=>{const R=rs(S.cells,($,H)=>{if(h[T][H]===!1){const Z=Ki(l,T,H,m);return v(T,H,Z.rowspan,Z.colspan),[Op($.element,Z.rowspan,Z.colspan,$.isNew)]}else return[]});return ur(S.element,R,S.section,S.isNew)})},Rl=(l,m,h)=>{const v=[];Ee(l.colgroups,S=>{const T=[];for(let R=0;R<l.grid.columns;R++){const $=Gt.getColumnAt(l,R).map(H=>Gs(H.element,h,!1)).getOrThunk(()=>Gs(m.colGap(),!0,!1));T.push($)}v.push(Cd(S.element,T,"colgroup",h))});for(let S=0;S<l.grid.rows;S++){const T=[];for(let H=0;H<l.grid.columns;H++){const Z=Gt.getAt(l,S,H).map(ee=>Gs(ee.element,h,ee.isLocked)).getOrThunk(()=>Gs(m.gap(),!0,!1));T.push(Z)}const R=l.all[S],$=Cd(R.element,T,R.section,h);v.push($)}return v},d0=(l,m)=>Rl(l,m,!1),$u=l=>Ds(l,no),Br=(l,m)=>Er(l.all,h=>N(h.cells,v=>no(m,v.element))),Za=(l,m,h)=>{const v=Dt(m.selection,T=>xd(T).bind(R=>Br(l,R)).filter(h)),S=bl(v);return Rp(S.length>0,S)},Qo=(l,m,h,v,S)=>(T,R,$,H)=>{const Z=Gt.fromTable(T),ee=G.from(H==null?void 0:H.section).getOrThunk(b1.fallback);return m(Z,R).map(ze=>{const Fe=d0(Z,$),he=l(Fe,ze,no,S($),ee),He=La(he.grid),ge=$u(he.grid);return{info:ze,grid:ge,cursor:he.cursor,lockedColumns:He}}).bind(ze=>{const Fe=oD(T,ze.grid),he=G.from(H==null?void 0:H.sizing).getOrThunk(()=>Au.getTableSize(T)),He=G.from(H==null?void 0:H.resize).getOrThunk(g1);return h(T,ze.grid,ze.info,{sizing:he,resize:He,section:ee}),v(T),Vo(T,yo),ze.lockedColumns.length>0&&as(T,yo,ze.lockedColumns.join(",")),G.some({cursor:ze.cursor,newRows:Fe.newRows,newCells:Fe.newCells})})},gf=(l,m)=>xd(m.element).bind(h=>Br(l,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Fu=(l,m)=>Za(l,m,Ce).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),m0=(l,m)=>m.mergable,XC=(l,m)=>m.unmergable,Ml=(l,m)=>Za(l,m,Ce),wi=(l,m)=>Za(l,m,h=>!h.isLocked),JC=(l,m)=>Br(l,m).exists(h=>!h.isLocked),f0=(l,m)=>eo(m,h=>JC(l,h)),LT=(l,m)=>m0(l,m).filter(h=>f0(l,h.cells)),HT=(l,m)=>XC(l,m).filter(h=>f0(l,h)),VT=(l,m,h,v)=>{const S=Ks(l).rows;if(S.length===0)return l;for(let T=m.startRow;T<=m.finishRow;T++)for(let R=m.startCol;R<=m.finishCol;R++){const $=S[T],H=Os($,R).isLocked;Mg($,R,Gs(v(),!1,H))}return l},g0=(l,m,h,v)=>{const S=Ks(l).rows;let T=!0;for(let R=0;R<S.length;R++)for(let $=0;$<ea(S[0]);$++){const H=S[R],Z=Os(H,$),ee=Z.element,Se=h(ee,m);Se&&!T?Mg(H,$,Gs(v(),!0,Z.isLocked)):Se&&(T=!1)}return l},qg=(l,m)=>we(l,(h,v)=>Le(h,S=>m(S.element,v.element))?h:h.concat([v]),[]),zT=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&Ee(l,S=>{const T=S.cells[m-1];let R=0;const $=v();for(;S.cells.length>m+R&&h(T.element,S.cells[m+R].element);)Mg(S,m+R,Gs($,!0,S.cells[m+R].isLocked)),R++}),l),UT=(l,m,h,v)=>{const S=Ks(l).rows;if(m>0&&m<S.length){const T=S[m-1].cells,R=qg(T,h);Ee(R,$=>{let H=G.none();for(let Z=m;Z<S.length;Z++)for(let ee=0;ee<ea(S[0]);ee++){const Se=S[Z],ze=Os(Se,ee);h(ze.element,$.element)&&(H.isNone()&&(H=G.some(v())),H.each(he=>{Mg(Se,ee,Gs(he,!0,ze.isLocked))}))}})}return l},h0=l=>{const m=T=>T(l),h=K(l),v=()=>S,S={tag:!0,inner:l,fold:(T,R)=>R(l),isValue:Ce,isError:dn,map:T=>v1.value(T(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:T=>{T(l)},toOptional:()=>G.some(l)};return S},Iu=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,S)=>v(l),isValue:dn,isError:Ce,map:m,mapError:v=>v1.error(v(l)),bind:m,exists:dn,forall:Ce,getOr:Sn,or:Sn,getOrThunk:Ns,orThunk:Ns,getOrDie:en(String(l)),each:mt,toOptional:G.none};return h},v1={value:h0,error:Iu,fromOption:(l,m)=>l.fold(()=>Iu(m),h0)},ko=(l,m,h)=>{if(l.row>=m.length||l.column>ea(m[0]))return v1.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),S=v[0].cells.slice(l.column),T=ea(h[0]),R=h.length;return v1.value({rowDelta:v.length-R,colDelta:S.length-T})},y1=(l,m)=>{const h=ea(l[0]),v=ea(m[0]);return{rowDelta:0,colDelta:h-v}},Lu=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},Hu=(l,m,h,v)=>{const S=m.section==="colgroup"?h.col:h.cell;return Eo(l,T=>Gs(S(),!0,v(T)))},Bl=(l,m,h,v)=>{const S=l[l.length-1];return l.concat(Eo(m,()=>{const T=S.section==="colgroup"?h.colgroup:h.row,R=TC(S,T,Sn),$=Hu(R.cells.length,R,h,H=>ys(v,H.toString()));return Nv(R,$)}))},Is=(l,m,h,v)=>Dt(l,S=>{const T=Hu(m,S,h,dn);return yl(S,v,T)}),bc=(l,m,h)=>Dt(l,v=>we(h,(S,T)=>{const R=Hu(1,v,m,Ce)[0];return Bv(S,T,R)},v)),Vd=(l,m,h)=>{const v=m.colDelta<0?Is:Sn,S=m.rowDelta<0?Bl:Sn,T=La(l),R=ea(l[0]),$=Le(T,ee=>ee===R-1),H=v(l,Math.abs(m.colDelta),h,$?R-1:R),Z=La(H);return S(H,Math.abs(m.rowDelta),h,Bt(Z,Ce))},hf=(l,m,h,v)=>{const S=Os(l[m],h),T=On(v,S.element),R=l[m];return l.length>1&&ea(R)>1&&(h>0&&T(Qr(R,h-1))||h<R.cells.length-1&&T(Qr(R,h+1))||m>0&&T(Qr(l[m-1],h))||m<l.length-1&&T(Qr(l[m+1],h)))},pf=(l,m,h,v,S,T)=>{const R=l.row,$=l.column,H=h.length,Z=ea(h[0]),ee=R+H,Se=$+Z+T.length,ze=Bt(T,Ce);for(let Fe=R;Fe<ee;Fe++){let he=0;for(let He=$;He<Se;He++){if(ze[He]){he++;continue}hf(m,Fe,He,S)&&g0(m,Qr(m[Fe],He),S,v.cell);const ge=He-$-he,Xe=Os(h[Fe-R],ge),Ct=Xe.element,It=v.replace(Ct);Mg(m[Fe],He,Gs(It,!0,Xe.isLocked))}}return m},ZT=(l,m,h)=>{const v=ea(m[0]),S=Ks(m).cols.length+l.row,T=Eo(v-l.column,$=>$+l.column),R=N(T,$=>eo(h,H=>H!==$)).getOr(v-1);return{row:S,column:R}},QC=(l,m,h)=>Lo(h,v=>v>=l.column&&v<=ea(m[0])+l.column),p0=(l,m,h,v,S)=>{const T=La(m),R=ZT(l,m,T),$=Ks(h).rows,H=QC(R,$,T);return ko(R,m,$).map(ee=>{const Se={...ee,colDelta:ee.colDelta-H.length},ze=Vd(m,Se,v),Fe=La(ze),he=QC(R,$,Fe);return pf(R,ze,$,v,S,he)})},Nl=(l,m,h,v,S)=>{zT(m,l,S,v.cell);const T=Lu(h,m),R=Vd(h,T,v),$=Lu(m,R),H=Vd(m,$,v);return Dt(H,(Z,ee)=>yl(Z,l,R[ee].cells))},C1=(l,m,h,v,S)=>{UT(m,l,S,v.cell);const T=La(m),R=y1(m,h),$={...R,colDelta:R.colDelta-T.length},H=Vd(m,$,v),{cols:Z,rows:ee}=Ks(H),Se=La(H),ze=y1(h,m),Fe={...ze,colDelta:ze.colDelta+Se.length},he=bc(h,v,Se),He=Vd(he,Fe,v);return[...Z,...ee.slice(0,l),...He,...ee.slice(l,ee.length)]},go=(l,m,h,v)=>TC(l,S=>v(S,h),m),nr=(l,m,h,v,S)=>{const{rows:T,cols:R}=Ks(l),$=T.slice(0,m),H=T.slice(m),Z=go(T[h],(ee,Se)=>m>0&&m<T.length&&v(Qr(T[m-1],Se),Qr(T[m],Se))?Os(T[m],Se):Gs(S(ee.element,v),!0,ee.isLocked),v,S);return[...R,...$,Z,...H]},Kg=(l,m,h,v,S,T,R)=>{if(h==="colgroup"||!v){const $=Os(l,S);return Gs(R($.element,T),!0,!1)}else return Os(l,m)},ew=(l,m,h,v,S)=>Dt(l,T=>{const R=m>0&&m<ea(T)&&v(Qr(T,m-1),Qr(T,m)),$=Kg(T,m,T.section,R,h,v,S);return Bv(T,m,$)}),b0=(l,m)=>rs(l,h=>{const v=h.cells,S=Zr(m,(T,R)=>R>=0&&R<T.length?T.slice(0,R).concat(T.slice(R+1)):T,v);return S.length>0?[Cd(h.element,S,h.section,h.isNew)]:[]}),jT=(l,m,h)=>{const{rows:v,cols:S}=Ks(l);return[...S,...v.slice(0,m),...v.slice(h+1)]},zd=(l,m,h,v)=>Qr(l[m],h)!==void 0&&m>0&&v(Qr(l[m-1],h),Qr(l[m],h)),v0=(l,m,h)=>m>0&&h(Qr(l,m-1),Qr(l,m)),Ud=(l,m,h,v)=>zd(l,m,h,v)||v0(l[m],h,v),w1=(l,m)=>eo(m,Sn)&&h1(l.cells)?Ce:(v,S,T)=>!(ro(v.element)==="th"&&m[T]),GT=(l,m)=>eo(m,Sn)&&h1(l)?Ce:(v,S,T)=>!(ro(v.element)==="th"&&m[S]),bf=(l,m,h,v)=>{const S=R=>R==="row"?Og(m):di(m),T=R=>S(R)?`${R}group`:R;return l?Dn(m)?T(h):null:v&&Dn(m)?T(h==="row"?"col":"row"):null},qT=(l,m)=>(h,v,S)=>G.some(bf(l,h.element,"col",m[S])),Yg=(l,m)=>(h,v)=>G.some(bf(l,h.element,"row",m[v])),S1=(l,m,h)=>Gs(h(l.element,m),!0,l.isLocked),vf=(l,m,h,v,S,T,R)=>{const $=H=>Le(m,Z=>h(H.element,Z.element));return Dt(l,(H,Z)=>Vp(H,(ee,Se)=>{if($(ee)){const ze=R(ee,Z,Se)?S(ee,h,v):ee;return T(ze,Z,Se).each(Fe=>{Tp(ze.element,{scope:G.from(Fe)})}),ze}else return ee}))},Xg=(l,m,h)=>rs(l,(v,S)=>Ud(l,S,m,h)?[]:[Os(v,m)]),x1=(l,m,h)=>{const v=l[m];return rs(v.cells,(S,T)=>Ud(l,m,T,h)?[]:[S])},yf=(l,m,h,v,S)=>{const T=Ks(l).rows,R=rs(m,ee=>Xg(T,ee,v)),$=Dt(T,ee=>h1(ee.cells)),H=GT(R,$),Z=Yg(h,$);return vf(l,R,v,S,S1,Z,H)},tw=(l,m,h,v,S,T,R)=>{const{cols:$,rows:H}=Ks(l),Z=H[m[0]],ee=rs(m,ge=>x1(H,ge,S)),Se=Dt(Z.cells,(ge,Xe)=>h1(Xg(H,Xe,S))),ze=[...H];Ee(m,ge=>{ze[ge]=R.transformRow(H[ge],h)});const Fe=[...$,...ze],he=w1(Z,Se),He=qT(v,Se);return vf(Fe,ee,S,T,R.transformCell,He,he)},E1=(l,m,h,v)=>{const S=Ks(l).rows,T=Dt(m,R=>Os(S[R.row],R.column));return vf(l,T,h,v,S1,G.none,Ce)},Yi={generate:l=>{if(!Bc(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return Ee(l,(v,S)=>{const T=ft(v);if(T.length!==1)throw new Error("one and only one name per case");const R=T[0],$=v[R];if(h[R]!==void 0)throw new Error("duplicate key detected:"+R);if(R==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Bc($))throw new Error("case arguments must be an array");m.push(R),h[R]=(...H)=>{const Z=H.length;if(Z!==$.length)throw new Error("Wrong number of arguments to case "+R+". Expected "+$.length+" ("+$+"), got "+Z);return{fold:(...Se)=>{if(Se.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Se.length);return Se[S].apply(null,H)},match:Se=>{const ze=ft(Se);if(m.length!==ze.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+ze.join(","));if(!eo(m,he=>Fo(ze,he)))throw new Error("Not all branches were specified when using match. Specified: "+ze.join(", ")+`
Required: `+m.join(", "));return Se[R].apply(null,H)},log:Se=>{console.log(Se,{constructors:m,constructor:R,params:H})}}}}),h}},oa={...Yi.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},zt=(l,m)=>l.length===0?oa.none():l.length===1?oa.only(0):m===0?oa.left(0,1):m===l.length-1?oa.right(m-1,m):m>0&&m<l.length-1?oa.middle(m-1,m,m+1):oa.none(),xa=(l,m,h,v,S)=>{const T=l.slice(0),R=zt(l,m),$=K(Dt(T,K(0))),H=ze=>v.singleColumnWidth(T[ze],h),Z=(ze,Fe)=>S.calcLeftEdgeDeltas(T,ze,Fe,h,v.minCellWidth(),v.isRelative),ee=(ze,Fe,he)=>S.calcMiddleDeltas(T,ze,Fe,he,h,v.minCellWidth(),v.isRelative),Se=(ze,Fe)=>S.calcRightEdgeDeltas(T,ze,Fe,h,v.minCellWidth(),v.isRelative);return R.fold($,H,Z,ee,Se)},ie=(l,m,h)=>{let v=0;for(let S=l;S<m;S++)v+=h[S]!==void 0?h[S]:0;return v},Cf=(l,m)=>{const h=Gt.justCells(l);return Dt(h,v=>{const S=ie(v.column,v.column+v.colspan,m);return{element:v.element,width:S,colspan:v.colspan}})},qn=(l,m)=>{const h=Gt.justColumns(l);return Dt(h,(v,S)=>({element:v.element,width:m[S],colspan:v.colspan}))},nw=(l,m)=>{const h=Gt.justCells(l);return Dt(h,v=>{const S=ie(v.row,v.row+v.rowspan,m);return{element:v.element,height:S,rowspan:v.rowspan}})},T1=(l,m)=>Dt(l.all,(h,v)=>({element:h.element,height:m[v]})),io=l=>Zr(l,(m,h)=>m+h,0),Pl=(l,m)=>Gt.hasColumns(l)?qn(l,m):Cf(l,m),k1=(l,m,h)=>{const v=Pl(l,m);Ee(v,S=>{h.setElementWidth(S.element,S.width)})},y0=(l,m,h,v,S)=>{const T=Gt.fromTable(l),R=S.getCellDelta(m),$=S.getWidths(T,S),H=h===T.grid.columns-1,Z=v.clampTableDelta($,h,R,S.minCellWidth(),H),ee=xa($,h,Z,S,v),Se=Dt(ee,(ze,Fe)=>ze+$[Fe]);k1(T,Se,S),v.resizeTable(S.adjustTableWidth,Z,H)},C0=(l,m,h,v)=>{const S=Gt.fromTable(l),T=Qs(S,l,v),R=Dt(T,(ee,Se)=>h===Se?Math.max(m+ee,Mp()):ee),$=nw(S,R),H=T1(S,R);Ee(H,ee=>{co(ee.element,ee.height)}),Ee($,ee=>{co(ee.element,ee.height)});const Z=io(R);co(l,Z)},_1=(l,m,h,v,S)=>{const T=Gt.generate(m),R=v.getWidths(T,v),$=v.pixelWidth(),{newSizes:H,delta:Z}=S.calcRedestributedWidths(R,$,h.pixelDelta,v.isRelative);k1(T,H,v),v.adjustTableWidth(Z)},O1=(l,m,h,v)=>{const S=Gt.generate(m),T=v.getWidths(S,v);k1(S,T,v)},Vu=l=>we(l,(h,v)=>Le(h,T=>T.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),Jg=ua("col"),w0=ua("colgroup"),A1=l=>ro(l)==="tr"||w0(l),ow=l=>{const m=qr(l,"colspan",1),h=qr(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},sw=(l,m=ow)=>{const h=$=>Jg($.element)?l.col($):l.cell($),v=$=>w0($.element)?l.colgroup($):l.row($),S=$=>{if(A1($))return v({element:$});{const H=$,Z=h(m(H));return T=G.some({item:H,replacement:Z}),Z}};let T=G.none();return{getOrInit:($,H)=>T.fold(()=>S($),Z=>H($,Z.item)?Z.replacement:S($))}},Zd=l=>m=>{const h=[],v=(R,$)=>N(h,H=>$(H.item,R)),S=R=>{const $=l==="td"?{scope:null}:{},H=m.replace(R,l,$);return h.push({item:R,sub:H}),H};return{replaceOrInit:(R,$)=>{if(A1(R)||Jg(R))return R;{const H=R;return v(H,$).fold(()=>S(H),Z=>$(R,Z.item)?Z.sub:S(H))}}}},pr=l=>sc(l,"scope").map(m=>m.substr(0,3)),In={modification:sw,transform:Zd,merging:l=>({unmerge:v=>{const S=pr(v);return S.each(T=>as(v,"scope",T)),()=>{const T=l.cell({element:v,colspan:1,rowspan:1});return ui(T,"width"),ui(v,"width"),S.each(R=>as(T,"scope",R)),T}},merge:v=>{const S=()=>{const T=bl(Dt(v,pr));if(T.length===0)return G.none();{const R=T[0],$=["row","col"];return Le(T,Z=>Z!==R&&Fo($,Z))?G.none():G.from(R)}};return ui(v[0],"width"),S().fold(()=>Vo(v[0],"scope"),T=>as(v[0],"scope",T+"group")),K(v[0])}})},KT=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Xi=(l,m)=>{const h=l.property().name(m);return Fo(["ol","ul"],h)},S0=(l,m)=>{const h=l.property().name(m);return Fo(KT,h)},x0=(l,m)=>Fo(["br","img","hr","input"],l.property().name(m)),Qg=sf(),eh=l=>S0(Qg,l),D1=l=>Xi(Qg,l),rw=l=>x0(Qg,l),YT=l=>{const m=ua("br"),h=H=>eo(H,Z=>m(Z)||hd(Z)&&Ru(Z).trim().length===0),v=H=>ro(H)==="li"||li(H,D1).isSome(),S=H=>Nm(H).map(Z=>eh(Z)?!0:rw(Z)?ro(Z)!=="img":!1).getOr(!1),T=H=>$g(H).bind(Z=>{const ee=S(Z);return pl(Z).map(Se=>ee===!0||v(Se)||m(Z)||eh(Se)&&!no(H,Se)?[]:[te.fromTag("br")])}).getOr([]),$=(()=>{const H=rs(l,Z=>{const ee=Pn(Z);return h(ee)?[]:ee.concat(T(Z))});return H.length===0?[te.fromTag("br")]:H})();$a(l[0]),ac(l[0],$)},E0=l=>nf(l,!0),Ss=l=>{Su(l).length===0&&js(l)},ds=(l,m)=>({grid:l,cursor:m}),br=l=>Er(l,m=>Er(m.cells,h=>{const v=h.element;return Rp(E0(v),v)})),Nr=(l,m,h)=>{var v,S;const T=Ks(l).rows;return G.from((S=(v=T[m])===null||v===void 0?void 0:v.cells[h])===null||S===void 0?void 0:S.element).filter(E0).orThunk(()=>br(T))},zn=(l,m,h)=>{const v=Nr(l,m,h);return ds(l,v)},es=l=>we(l,(h,v)=>Le(h,T=>T.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),vr=(l,m,h,v)=>{const S=m[0].row,T=es(m),R=Zr(T,($,H)=>({grid:nr($.grid,S,H.row+$.delta,h,v.getOrInit),delta:$.delta+1}),{grid:l,delta:0}).grid;return zn(R,S,m[0].column)},aw=(l,m,h,v)=>{const S=es(m),T=S[S.length-1],R=T.row+T.rowspan,$=Zr(S,(H,Z)=>nr(H,R,Z.row,h,v.getOrInit),l);return zn($,R,m[0].column)},Si=(l,m,h,v)=>{const S=m.details,T=Vu(S),R=T[0].column,$=Zr(T,(H,Z)=>({grid:ew(H.grid,R,Z.column+H.delta,h,v.getOrInit),delta:H.delta+1}),{grid:l,delta:0}).grid;return zn($,S[0].row,R)},cw=(l,m,h,v)=>{const S=m.details,T=S[S.length-1],R=T.column+T.colspan,$=Vu(S),H=Zr($,(Z,ee)=>ew(Z,R,ee.column,h,v.getOrInit),l);return zn(H,S[0].row,R)},iw=(l,m,h,v)=>{const S=Vu(m),T=Dt(S,$=>$.column),R=yf(l,T,!0,h,v.replaceOrInit);return zn(R,m[0].row,m[0].column)},lw=(l,m,h,v)=>{const S=E1(l,m,h,v.replaceOrInit);return zn(S,m[0].row,m[0].column)},T0=(l,m,h,v)=>{const S=Vu(m),T=Dt(S,$=>$.column),R=yf(l,T,!1,h,v.replaceOrInit);return zn(R,m[0].row,m[0].column)},R1=(l,m,h,v)=>{const S=E1(l,m,h,v.replaceOrInit);return zn(S,m[0].row,m[0].column)},M1=(l,m)=>(h,v,S,T,R)=>{const $=es(v),H=Dt($,ee=>ee.row),Z=tw(h,H,l,m,S,T.replaceOrInit,R);return zn(Z,v[0].row,v[0].column)},aD=M1("thead",!0),uw=M1("tbody",!1),XT=M1("tfoot",!1),k0=(l,m,h,v)=>{const S=Vu(m.details),T=b0(l,Dt(S,$=>$.column)),R=T.length>0?T[0].cells.length-1:0;return zn(T,S[0].row,Math.min(S[0].column,R))},_0=(l,m,h,v)=>{const S=es(m),T=jT(l,S[0].row,S[S.length-1].row),R=T.length>0?T.length-1:0;return zn(T,Math.min(m[0].row,R),m[0].column)},JT=(l,m,h,v)=>{const S=m.cells;YT(S);const T=VT(l,m.bounds,h,v.merge(S));return ds(T,G.from(S[0]))},QT=(l,m,h,v)=>{const T=Zr(m,(R,$)=>g0(R,$,h,v.unmerge($)),l);return ds(T,G.from(m[0]))},dw=(l,m,h,v)=>{const T=((H,Z)=>{const ee=Gt.fromTable(H);return Rl(ee,Z,!0)})(m.clipboard,m.generators),R=xv(m.row,m.column);return p0(R,l,T,m.generators,h).fold(()=>ds(l,G.some(m.element)),H=>zn(H,m.row,m.column))},Ge=(l,m,h)=>{const v=Pp(l,h.section),S=Gt.generate(v);return Rl(S,m,!0)},B1=(l,m,h,v)=>{const S=Ks(l).rows,T=m.cells[0].column,R=S[m.cells[0].row],$=Ge(m.clipboard,m.generators,R),H=Nl(T,l,$,m.generators,h);return zn(H,m.cells[0].row,m.cells[0].column)},De=(l,m,h,v)=>{const S=Ks(l).rows,T=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,R=S[m.cells[0].row],$=Ge(m.clipboard,m.generators,R),H=Nl(T,l,$,m.generators,h);return zn(H,m.cells[0].row,m.cells[0].column)},ek=(l,m,h,v)=>{const S=Ks(l).rows,T=m.cells[0].row,R=S[T],$=Ge(m.clipboard,m.generators,R),H=C1(T,l,$,m.generators,h);return zn(H,m.cells[0].row,m.cells[0].column)},Rs=(l,m,h,v)=>{const S=Ks(l).rows,T=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,R=S[m.cells[0].row],$=Ge(m.clipboard,m.generators,R),H=C1(T,l,$,m.generators,h);return zn(H,m.cells[0].row,m.cells[0].column)},tk=(l,m)=>{const h=Gt.fromTable(l);return Ml(h,m).bind(S=>{const T=S[S.length-1],R=S[0].column,$=T.column+T.colspan,H=Yn(Dt(h.all,Z=>Lo(Z.cells,ee=>ee.column>=R&&ee.column<$)));return mf(H)}).getOr("")},O0=(l,m)=>{const h=Gt.fromTable(l);return Ml(h,m).bind(mf).getOr("")},nk=(l,m)=>{const h=Gt.fromTable(l);return Ml(h,m).bind(S=>{const T=S[S.length-1],R=S[0].row,$=T.row+T.rowspan,H=h.all.slice(R,$);return qC(H)}).getOr("")},Pr=(l,m,h,v)=>O1(l,m,h,v.sizing),A0=(l,m,h,v)=>_1(l,m,h,v.sizing,v.resize),mw=(l,m)=>Le(m,h=>h.column===0&&h.isLocked),wo=(l,m)=>Le(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),zu=(l,m)=>{const h=Iv(l),v=Vu(m);return we(v,(S,T)=>{const $=h[T.column].map(EC).getOr(0);return S+$},0)},wf=l=>(m,h)=>Ml(m,h).filter(v=>!(l?mw:wo)(m,v)).map(v=>({details:v,pixelDelta:zu(m,v)})),Ji=(l,m)=>wi(l,m).map(h=>({details:h,pixelDelta:-zu(l,h)})),Uc=l=>(m,h)=>Fu(m,h).filter(v=>!(l?mw:wo)(m,v.cells)),th=In.transform("th"),Ea=In.transform("td"),fw=Qo(vr,Ml,mt,mt,In.modification),D0=Qo(aw,Ml,mt,mt,In.modification),R0=Qo(Si,wf(!0),A0,mt,In.modification),M0=Qo(cw,wf(!1),A0,mt,In.modification),gw=Qo(k0,Ji,A0,Ss,In.modification),B0=Qo(_0,Ml,mt,Ss,In.modification),ok=Qo(iw,wi,mt,mt,th),hw=Qo(T0,wi,mt,mt,Ea),sk=Qo(aD,wi,mt,mt,th),rk=Qo(uw,wi,mt,mt,Ea),N0=Qo(XT,wi,mt,mt,Ea),pw=Qo(lw,wi,mt,mt,th),ak=Qo(R1,wi,mt,mt,Ea),N1=Qo(JT,LT,Pr,mt,In.merging),ck=Qo(QT,HT,Pr,mt,In.merging),bw=Qo(dw,gf,Pr,mt,In.modification),ik=Qo(B1,Uc(!0),mt,mt,In.modification),nh=Qo(De,Uc(!1),mt,mt,In.modification),lk=Qo(ek,Fu,mt,mt,In.modification),uk=Qo(Rs,Fu,mt,mt,In.modification),vw=tk,dk=O0,mk=nk,oh=(l,m)=>l.dispatch("NewRow",{node:m}),yw=(l,m)=>l.dispatch("NewCell",{node:m}),$r=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},Kn=(l,m,h,v,S)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:S})},P1=l=>{l.dispatch("TableSelectionClear")},Fr=(l,m,h,v,S)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:S})},jd=(l,m,h,v,S)=>{l.dispatch("ObjectResized",{target:m,width:h,height:v,origin:S})},sh={structure:!1,style:!0},xs={structure:!0,style:!1},$1={structure:!0,style:!0},Cw=(l,m)=>ef(l)?Au.percentageSize(m):pi(l)?Au.pixelSize(m):Au.getTableSize(m),fk=(l,m,h)=>{const v=Hr=>ro(Pd(Hr))==="table",S=Hr=>!v(l)||i0(Hr).rows>1,T=Hr=>!v(l)||i0(Hr).columns>1,R=$C(l),$=FC(l)?mt:a0,H=Hr=>{switch(Kv(l)){case"section":return b1.section();case"sectionCells":return b1.sectionCells();case"cells":return b1.cells();default:return b1.getTableSectionType(Hr,"section")}},Z=(Hr,Oy)=>Oy.cursor.fold(()=>{const Mh=Su(Hr);return be(Mh).filter(jo).map(Ec=>{h.clearSelectedCells(Hr.dom);const Hs=l.dom.createRng();return Hs.selectNode(Ec.dom),l.selection.setRng(Hs),as(Ec,"data-mce-selected","1"),Hs})},Mh=>{const Ec=zc(Mh),Hs=l.dom.createRng();return Hs.setStart(Ec.element.dom,Ec.offset),Hs.setEnd(Ec.element.dom,Ec.offset),l.selection.setRng(Hs),h.clearSelectedCells(Hr.dom),G.some(Hs)}),ee=(Hr,Oy,Mh,Ec)=>(Hs,Ay,vb=!1)=>{na(Hs);const CS=te.fromDom(l.getDoc()),yD=Fg(Mh,CS,R),wS={sizing:Cw(l,Hs),resize:FC(l)?f1():g1(),section:H(Hs)};return Oy(Hs)?Hr(Hs,Ay,yD,wS).bind(Dy=>{m.refresh(Hs.dom),Ee(Dy.newRows,Vr=>{oh(l,Vr.dom)}),Ee(Dy.newCells,Vr=>{yw(l,Vr.dom)});const y_=Z(Hs,Dy);return jo(Hs)&&(na(Hs),vb||$r(l,Hs.dom,Ec)),y_.map(Vr=>({rng:Vr,effect:Ec}))}):G.none()},Se=ee(B0,S,mt,xs),ze=ee(gw,T,mt,xs),Fe=ee(fw,Ce,mt,xs),he=ee(D0,Ce,mt,xs),He=ee(R0,Ce,$,xs),ge=ee(M0,Ce,$,xs),Xe=ee(N1,Ce,mt,xs),Ct=ee(ck,Ce,mt,xs),It=ee(ik,Ce,mt,xs),Un=ee(nh,Ce,mt,xs),Ms=ee(lk,Ce,mt,xs),Oo=ee(uk,Ce,mt,xs),ka=ee(bw,Ce,mt,$1),Oi=ee(pw,Ce,mt,xs),Rh=ee(ak,Ce,mt,xs),bb=ee(ok,Ce,mt,xs),zf=ee(hw,Ce,mt,xs),_n=ee(sk,Ce,mt,xs),yr=ee(rk,Ce,mt,xs),Lr=ee(N0,Ce,mt,xs);return{deleteRow:Se,deleteColumn:ze,insertRowsBefore:Fe,insertRowsAfter:he,insertColumnsBefore:He,insertColumnsAfter:ge,mergeCells:Xe,unmergeCells:Ct,pasteColsBefore:It,pasteColsAfter:Un,pasteRowsBefore:Ms,pasteRowsAfter:Oo,pasteCells:ka,makeCellsHeader:Oi,unmakeCellsHeader:Rh,makeColumnsHeader:bb,unmakeColumnsHeader:zf,makeRowsHeader:_n,makeRowsBody:yr,makeRowsFooter:Lr,getTableRowType:mk,getTableCellType:dk,getTableColType:vw}},F1=(l,m,h)=>{const v=qr(l,m,1);h===1||v<=1?Vo(l,m):as(l,m,Math.min(h,v))},ww=(l,m)=>h=>{const v=h.column+h.colspan-1,S=h.column;return v>=l&&S<m},gk=(l,m,h)=>{if(Gt.hasColumns(l)){const v=Lo(Gt.justColumns(l),ww(m,h)),S=Dt(v,R=>{const $=ma(R.element);return F1($,"span",h-m),$}),T=te.fromTag("colgroup");return ac(T,S),[T]}else return[]},hk=(l,m,h)=>Dt(l.all,v=>{const S=Lo(v.cells,ww(m,h)),T=Dt(S,$=>{const H=ma($.element);return F1(H,"colspan",h-m),H}),R=te.fromTag("tr");return ac(R,T),R}),pk=(l,m)=>{const h=Gt.fromTable(l);return wi(h,m).map(S=>{const T=S[S.length-1],R=S[0].column,$=T.column+T.colspan,H=gk(h,R,$),Z=hk(h,R,$);return[...H,...Z]})},bk=(l,m,h)=>{const v=Gt.fromTable(l);return Ml(v,m).bind(T=>{const R=Rl(v,h,!1),H=Ks(R).rows.slice(T[0].row,T[T.length-1].row+T[T.length-1].rowspan),Z=rs(H,Se=>{const ze=Lo(Se.cells,Fe=>!Fe.isLocked);return ze.length>0?[{...Se,cells:ze}]:[]}),ee=$u(Z);return Rp(ee.length>0,ee)}).map(T=>Wo(T))},rh=Yi.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),P0=(l,m,h)=>{const v=h.substring(0,h.length-l.length),S=parseFloat(v);return v===S.toString()?m(S):rh.invalid(h)},Uu={...rh,from:l=>Gr(l,"%")?P0("%",rh.percent,l):Gr(l,"px")?P0("px",rh.pixels,l):rh.invalid(l)},I1=(l,m)=>Dt(l,h=>Uu.from(h).fold(()=>h,S=>S/m*100+"%",S=>S+"%")),vk=(l,m,h)=>{const v=h/m;return Dt(l,S=>Uu.from(S).fold(()=>S,R=>R*v+"px",R=>R/100*h+"px"))},Sw=(l,m)=>{const h=l.fold(()=>K(""),v=>{const S=v/m;return K(S+"px")},()=>{const v=100/m;return K(v+"%")});return Eo(m,h)},yk=(l,m,h)=>l.fold(()=>m,v=>vk(m,h,v),v=>I1(m,h)),Gd=(l,m,h)=>{const v=Uu.from(h),S=eo(l,T=>T==="0px")?Sw(v,l.length):yk(v,l,m);return Sk(S)},ah=(l,m)=>l.length===0?m:Zr(l,(h,v)=>Uu.from(v).fold(K(0),Sn,Sn)+h,0),Ck=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},wk=(l,m)=>Uu.from(l).fold(K(l),h=>h+m+"px",h=>h+m+"%"),Sk=l=>{if(l.length===0)return l;const m=Zr(l,(v,S)=>{const T=Uu.from(S).fold(()=>({value:S,remainder:0}),R=>Ck(R,"px"),R=>({value:R+"%",remainder:0}));return{output:[T.value].concat(v.output),remainder:v.remainder+T.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([wk(h[h.length-1],Math.round(m.remainder))])},$l=Uu.from,L1=(l,m,h)=>{Ee(m,v=>{const S=l.slice(v.column,v.colspan+v.column),T=ah(S,cc());jn(v.element,"width",T+h)})},H1=(l,m,h)=>{Ee(m,(v,S)=>{const T=ah([l[S]],cc());jn(v.element,"width",T+h)})},$0=(l,m,h,v)=>{Ee(h,S=>{const T=l.slice(S.row,S.rowspan+S.row),R=ah(T,Mp());jn(S.element,"height",R+v)}),Ee(m,(S,T)=>{jn(S.element,"height",l[T])})},xw=l=>$l(l).fold(K("px"),K("px"),K("%")),vc=(l,m,h)=>{const v=Gt.fromTable(l),S=v.all,T=Gt.justCells(v),R=Gt.justColumns(v);m.each($=>{const H=xw($),Z=Jr(l),ee=Sl(v,l),Se=Gd(ee,Z,$);Gt.hasColumns(v)?H1(Se,R,H):L1(Se,T,H),jn(l,"width",$)}),h.each($=>{const H=xw($),Z=Tu(l),ee=qp(v,l,uc),Se=Gd(ee,Z,$);$0(Se,S,T,H),jn(l,"height",$)})},V1=jp,Ew=fc,Fl=AT,qd=l=>{Vo(l,"width")},ch=l=>{const m=Lc(l);vc(l,G.some(m),G.none()),qd(l)},F0=l=>{const m=is(l);vc(l,G.some(m),G.none()),qd(l)},Tw=l=>{ui(l,"width");const m=Ag(l),h=m.length>0?m:Su(l);Ee(h,v=>{ui(v,"width"),qd(v)}),qd(l)},xk={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},kw=()=>te.fromTag("th"),Ek=()=>te.fromTag("td"),Tk=()=>te.fromTag("col"),_w=(l,m,h,v)=>{const S=te.fromTag("tr");for(let T=0;T<l;T++){const R=v<m||T<h?kw():Ek();T<h&&as(R,"scope","row"),v<m&&as(R,"scope","col"),Mo(R,te.fromTag("br")),Mo(S,R)}return S},Ow=l=>{const m=te.fromTag("colgroup");return Eo(l,()=>Mo(m,Tk())),m},I0=(l,m,h,v)=>Eo(l,S=>_w(m,h,v,S)),kk=(l,m,h,v,S,T=xk)=>{const R=te.fromTag("table"),$=S!=="cells";Ar(R,T.styles),$i(R,T.attributes),T.colGroups&&Mo(R,Ow(m));const H=Math.min(l,h);if($&&h>0){const Fe=te.fromTag("thead");Mo(R,Fe);const He=I0(h,m,S==="sectionCells"?H:0,v);ac(Fe,He)}const Z=te.fromTag("tbody");Mo(R,Z);const ee=$?l-H:l,ze=I0(ee,m,$?0:h,v);return ac(Z,ze),R},_k=l=>l.dom.innerHTML,Ok=l=>{const m=te.fromTag("div"),h=te.fromDom(l.dom.cloneNode(!0));return Mo(m,h),_k(m)},z1=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},L0=(l,m)=>{Pm(m,"td,th").each(On(z1,l))},Aw=(l,m)=>{Ee($c(m,"tr"),h=>{oh(l,h.dom),Ee($c(h,"th,td"),v=>{yw(l,v.dom)})})},Ak=l=>xg(l)&&l.indexOf("%")!==-1,Dk=(l,m,h,v,S)=>{const T=Bd(l),R={styles:T,attributes:Jo(l),colGroups:Xv(l)};return l.undoManager.ignore(()=>{const $=kk(h,m,S,v,Kv(l),R);as($,"data-mce-id","__mce");const H=Ok($);l.insertContent(H),l.addVisual()}),Pm(Pd(l),'table[data-mce-id="__mce"]').map($=>(pi(l)?F0($):bi(l)?Tw($):(ef(l)||Ak(T.width))&&ch($),na($),Vo($,"data-mce-id"),Aw(l,$),L0(l,$),$.dom)).getOrNull()},Rk=(l,m,h,v={})=>{const S=T=>ir(T)&&T>0;if(S(m)&&S(h)){const T=v.headerRows||0,R=v.headerColumns||0;return Dk(l,h,m,R,T)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var ih=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Mk="x-tinymce/dom-table-",lh=Mk+"rows",uh=Mk+"columns",Dw=l=>{const m=ih.FakeClipboardItem(l);ih.write([m])},U1=l=>{var m;const h=(m=ih.read())!==null&&m!==void 0?m:[];return Er(h,v=>G.from(v.getType(l)))},H0=l=>{U1(l).isSome()&&ih.clear()},V0=l=>{l.fold(Rw,m=>Dw({[lh]:m}))},z0=()=>U1(lh),Rw=()=>H0(lh),dh=l=>{l.fold(Bk,m=>Dw({[uh]:m}))},Mw=()=>U1(uh),Bk=()=>H0(uh),U0=l=>r0(_l(l),kl(l)).filter(of),Nk=l=>jg(_l(l),kl(l)).filter(of),Kd=(l,m)=>{const h=kl(l),v=()=>U0(l).each(ge=>{Yr(ge,h).filter(Q(h)).each(Xe=>{const Ct=te.fromText("");if(vu(Xe,Ct),js(Xe),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const It=l.dom.createRng();It.setStart(Ct.dom,0),It.setEnd(Ct.dom,0),l.selection.setRng(It),l.nodeChanged()}})}),S=ge=>U0(l).each(Xe=>{bi(l)||pi(l)||ef(l)||Yr(Xe,h).each(It=>{ge==="relative"&&!V1(It)?ch(It):ge==="fixed"&&!Ew(It)?F0(It):ge==="responsive"&&!Fl(It)&&Tw(It),na(It),$r(l,It.dom,xs)})}),T=ge=>Yr(ge,h),R=ge=>Nk(l).bind(Xe=>T(Xe).map(Ct=>ge(Ct,Xe))),$=(ge,Xe)=>{R(Ct=>{l.formatter.toggle("tableclass",{value:Xe},Ct.dom),$r(l,Ct.dom,sh)})},H=(ge,Xe)=>{R(Ct=>{const It=qi(l),Ms=eo(It,Oo=>l.formatter.match("tablecellclass",{value:Xe},Oo.dom))?l.formatter.remove:l.formatter.apply;Ee(It,Oo=>Ms("tablecellclass",{value:Xe},Oo.dom)),$r(l,Ct.dom,sh)})},Z=()=>{U0(l).each(ge=>{Yr(ge,h).each(Xe=>{wd(Xe,"caption").fold(()=>{const Ct=te.fromTag("caption");Mo(Ct,te.fromText("Caption")),hT(Xe,Ct,0),l.selection.setCursorLocation(Ct.dom,0)},Ct=>{ua("caption")(ge)&&vv("td",Xe).each(It=>l.selection.setCursorLocation(It.dom,0)),js(Ct)}),$r(l,Xe.dom,xs)})})},ee=ge=>{l.focus()},Se=(ge,Xe=!1)=>R((Ct,It)=>{const Un=Al(qi(l),Ct,It);ge(Ct,Un,Xe).each(ee)}),ze=()=>R((ge,Xe)=>{const Ct=Al(qi(l),ge,Xe),It=Fg(mt,te.fromDom(l.getDoc()),G.none());return bk(ge,Ct,It)}),Fe=()=>R((ge,Xe)=>{const Ct=Al(qi(l),ge,Xe);return pk(ge,Ct)}),he=(ge,Xe)=>Xe().each(Ct=>{const It=Dt(Ct,Un=>ma(Un));R((Un,Ms)=>{const Oo=Ca(te.fromDom(l.getDoc())),ka=yi(qi(l),Ms,It,Oo);ge(Un,ka).each(ee)})}),He=ge=>(Xe,Ct)=>wp(Ct,"type").each(It=>{Se(ge(It),Ct.no_events)});Ro({mceTableSplitCells:()=>Se(m.unmergeCells),mceTableMergeCells:()=>Se(m.mergeCells),mceTableInsertRowBefore:()=>Se(m.insertRowsBefore),mceTableInsertRowAfter:()=>Se(m.insertRowsAfter),mceTableInsertColBefore:()=>Se(m.insertColumnsBefore),mceTableInsertColAfter:()=>Se(m.insertColumnsAfter),mceTableDeleteCol:()=>Se(m.deleteColumn),mceTableDeleteRow:()=>Se(m.deleteRow),mceTableCutCol:()=>Fe().each(ge=>{dh(ge),Se(m.deleteColumn)}),mceTableCutRow:()=>ze().each(ge=>{V0(ge),Se(m.deleteRow)}),mceTableCopyCol:()=>Fe().each(ge=>dh(ge)),mceTableCopyRow:()=>ze().each(ge=>V0(ge)),mceTablePasteColBefore:()=>he(m.pasteColsBefore,Mw),mceTablePasteColAfter:()=>he(m.pasteColsAfter,Mw),mceTablePasteRowBefore:()=>he(m.pasteRowsBefore,z0),mceTablePasteRowAfter:()=>he(m.pasteRowsAfter,z0),mceTableDelete:v,mceTableCellToggleClass:H,mceTableToggleClass:$,mceTableToggleCaption:Z,mceTableSizingMode:(ge,Xe)=>S(Xe),mceTableCellType:He(ge=>ge==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:He(ge=>ge==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:He(ge=>{switch(ge){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(ge,Xe)=>l.addCommand(Xe,ge)),l.addCommand("mceInsertTable",(ge,Xe)=>{Rk(l,Xe.rows,Xe.columns,Xe.options)}),l.addCommand("mceTableApplyCellStyle",(ge,Xe)=>{const Ct=Ms=>"tablecell"+Ms.toLowerCase().replace("-","");if(!xn(Xe))return;const It=Lo(qi(l),of);if(It.length===0)return;const Un=Pi(Xe,(Ms,Oo)=>l.formatter.has(Ct(Oo))&&xg(Ms));Eg(Un)||(Ro(Un,(Ms,Oo)=>{const ka=Ct(Oo);Ee(It,Oi=>{Ms===""?l.formatter.remove(ka,{value:null},Oi.dom,!0):l.formatter.apply(ka,{value:Ms},Oi.dom)})}),T(It[0]).each(Ms=>$r(l,Ms.dom,sh)))})},Pk=(l,m)=>{const h=kl(l),v=S=>jg(_l(l)).bind(T=>Yr(T,h).map(R=>{const $=Al(qi(l),R,T);return S(R,$)})).getOr("");Ro({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(S,T)=>l.addQueryValueHandler(T,S))},W0=Yi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),mh=(l,m,h,v)=>l.fold(m,h,v),$k=l=>l.fold(Sn,Sn,Sn),Bw=W0.before,Nw=W0.on,Pw=W0.after,or={before:Bw,on:Nw,after:Pw,cata:mh,getStart:$k},Qi={create:(l,m)=>({selection:l,kill:m})},fh=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},Z1=(l,m)=>{const h=l.document.createRange();return Fk(h,m),h},Fk=(l,m)=>l.selectNodeContents(m.dom),$w=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},Fw=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},j1=(l,m,h)=>{const v=l.document.createRange();return $w(v,m),Fw(v,h),v},G1=(l,m,h,v,S)=>{const T=l.document.createRange();return T.setStart(m.dom,h),T.setEnd(v.dom,S),T},Ir=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),Ik=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?G.some(h).map(Ir):G.none()},el=Yi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Wu=(l,m,h)=>m(te.fromDom(h.startContainer),h.startOffset,te.fromDom(h.endContainer),h.endOffset),gh=(l,m)=>m.match({domRange:h=>({ltr:K(h),rtl:G.none}),relative:(h,v)=>({ltr:Hm(()=>j1(l,h,v)),rtl:Hm(()=>G.some(j1(l,v,h)))}),exact:(h,v,S,T)=>({ltr:Hm(()=>G1(l,h,v,S,T)),rtl:Hm(()=>G.some(G1(l,S,T,h,v)))})}),hh=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(S=>S.collapsed===!1).map(S=>el.rtl(te.fromDom(S.endContainer),S.endOffset,te.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>Wu(l,el.ltr,h)):Wu(l,el.ltr,h)},Iw=(l,m)=>{const h=gh(l,m);return hh(l,h)},xi=(l,m)=>Iw(l,m).match({ltr:(v,S,T,R)=>{const $=l.document.createRange();return $.setStart(v.dom,S),$.setEnd(T.dom,R),$},rtl:(v,S,T,R)=>{const $=l.document.createRange();return $.setStart(T.dom,R),$.setEnd(v.dom,S),$}});el.ltr,el.rtl;const Sf={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},Lw={create:(l,m,h,v)=>({start:or.on(l,m),finish:or.on(h,v)})},xf=(l,m)=>{const h=xi(l,m);return Sf.create(te.fromDom(h.startContainer),h.startOffset,te.fromDom(h.endContainer),h.endOffset)},Zu=Lw.create,Ef=(l,m,h,v,S,T,R)=>no(h,S)&&v===T?G.none():ws(h,"td,th",m).bind($=>ws(S,"td,th",m).bind(H=>Tf(l,m,$,H,R))),Tf=(l,m,h,v,S)=>no(h,v)?G.none():Ug(h,v,m).bind(T=>{const R=T.boxes.getOr([]);return R.length>1?(S(l,R,T.start,T.finish),G.some(Qi.create(G.some(Zu(h,0,h,zi(h))),!0))):G.none()}),Z0=(l,m,h,v,S)=>{const T=R=>(S.clearBeforeUpdate(h),S.selectRange(h,R.boxes,R.start,R.finish),R.boxes);return n0(v,l,m,S.firstSelectedSelector,S.lastSelectedSelector).map(T)},Yd=(l,m)=>({item:l,mode:m}),ph=(l,m,h,v=Ll)=>l.property().parent(m).map(S=>Yd(S,v)),Ll=(l,m,h,v=ju)=>h.sibling(l,m).map(S=>Yd(S,v)),ju=(l,m,h,v=ju)=>{const S=l.property().children(m);return h.first(S).map(R=>Yd(R,v))},bh=[{current:ph,next:Ll,fallback:G.none()},{current:Ll,next:ju,fallback:G.some(ph)},{current:ju,next:ju,fallback:G.some(Ll)}],ms=(l,m,h,v,S=bh)=>N(S,R=>R.current===h).bind(R=>R.current(l,m,v,R.next).orThunk(()=>R.fallback.bind($=>ms(l,m,$,v)))),q1={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?G.some(h[h.length-1]):G.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?G.some(h[0]):G.none()})},kf=(l,m,h,v,S,T)=>ms(l,m,v,S).bind($=>T($.item)?G.none():h($.item)?G.some($.item):kf(l,$.item,h,$.mode,S,T)),Xd=(l,m,h,v)=>kf(l,m,h,Ll,q1.left(),v),j0=(l,m,h,v)=>kf(l,m,h,Ll,q1.right(),v),_f=l=>m=>l.property().children(m).length===0,Vk=(l,m,h)=>G0(l,m,_f(l),h),Hw=(l,m,h)=>Vw(l,m,_f(l),h),G0=Xd,Vw=j0,Of=sf(),Ei=(l,m)=>Vk(Of,l,m),zw=(l,m)=>Hw(Of,l,m),zk=(l,m,h)=>G0(Of,l,m,h),Uw=(l,m,h)=>Vw(Of,l,m,h),Ww=(l,m,h)=>li(l,m,h).isSome(),Af=Yi.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),iD=(l,m,h)=>{const v=l.getRect(m),S=l.getRect(h);return S.right>v.left&&S.left<v.right},lD=l=>ws(l,"tr"),Jd={...Af,verify:(l,m,h,v,S,T,R)=>ws(v,"td,th",R).bind($=>ws(m,"td,th",R).map(H=>no($,H)?no(v,$)&&zi($)===S?T(H):Af.none("in same cell"):fr(lD,[$,H]).fold(()=>iD(l,H,$)?Af.success():T(H),Z=>T(H)))).getOr(Af.none("default")),cata:(l,m,h,v,S)=>l.fold(m,h,v,S)},fs=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),sr=l=>pl(l).bind(m=>{const h=Pn(m);return Ls(h,l).map(v=>fs(m,h,l,v))}),Ls=(l,m)=>Dm(l,On(no,m)),gs=ua("br"),Ta=(l,m,h)=>m(l,h).bind(v=>hd(v)&&Ru(v).trim().length===0?Ta(v,m,h):G.some(v)),vh=(l,m,h)=>h.traverse(m).orThunk(()=>Ta(m,h.gather,l)).map(h.relative),yc=(l,m)=>Pa(l,m).filter(gs).orThunk(()=>Pa(l,m-1).filter(gs)),Qd=(l,m,h,v)=>yc(m,h).bind(S=>v.traverse(S).fold(()=>Ta(S,v.gather,l).map(v.relative),T=>sr(T).map(R=>or.on(R.parent,R.index)))),Uk=(l,m,h,v)=>(gs(m)?vh(l,m,v):Qd(l,m,h,v)).map(T=>({start:T,finish:T})),Wk=l=>Jd.cata(l,m=>G.none(),()=>G.none(),m=>G.some(hr(m,0)),m=>G.some(hr(m,zi(m)))),nl=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),Df=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),K1=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),Zc=l=>l.top,K0=l=>l.bottom,Y0=(l,m,h)=>h>=0&&h<zi(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):G.none(),em=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),X0=(l,m)=>G.some(l.getRect(m)),Zw=(l,m,h)=>la(m)?X0(l,m).map(em):hd(m)?Y0(l,m,h).map(em):G.none(),Y1=(l,m)=>la(m)?X0(l,m).map(em):hd(m)?l.getRangedRect(m,0,m,zi(m)).map(em):G.none(),Hl=5,J0=100,Ti=Yi.generate([{none:[]},{retry:["caret"]}]),jw=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Q0=(l,m,h)=>Cs(m,eh).fold(dn,v=>Y1(l,v).exists(S=>jw(h,S))),Zk=(l,m,h,v,S)=>{const T=nl(S,Hl);return Math.abs(h.bottom-v.bottom)<1||h.top>S.bottom?Ti.retry(T):h.top===S.bottom?Ti.retry(nl(S,1)):Q0(l,m,S)?Ti.retry(K1(T,Hl,0)):Ti.none()},jk={point:Zc,adjuster:(l,m,h,v,S)=>{const T=Df(S,Hl);return Math.abs(h.top-v.top)<1||h.bottom<S.top?Ti.retry(T):h.bottom===S.top?Ti.retry(Df(S,1)):Q0(l,m,S)?Ti.retry(K1(T,Hl,0)):Ti.none()},move:Df,gather:Ei},Gk={point:K0,adjuster:Zk,move:nl,gather:zw},ja=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>ro(v)==="table").isSome(),dD=(l,m,h,v,S)=>tm(l,m,h,m.move(v,Hl),S),tm=(l,m,h,v,S)=>S===0?G.some(v):ja(l,v.left,m.point(v))?dD(l,m,h,v,S-1):l.situsFromPoint(v.left,m.point(v)).bind(T=>T.start.fold(G.none,R=>Y1(l,R).bind($=>m.adjuster(l,R,$,h,v).fold(G.none,H=>tm(l,m,h,H,S-1))).orThunk(()=>G.some(v)),G.none)),Rf=(l,m,h)=>l.point(m)>h.getInnerHeight()?G.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?G.some(-l.point(m)):G.none(),ey=(l,m,h)=>{const v=l.move(h,Hl),S=tm(m,l,h,v,J0).getOr(v);return Rf(l,S,m).fold(()=>m.situsFromPoint(S.left,l.point(S)),T=>(m.scrollBy(0,T),m.situsFromPoint(S.left,l.point(S)-T)))},ty={tryUp:On(ey,jk),tryDown:On(ey,Gk),getJumpSize:K(Hl)},qk=20,Gw=(l,m,h)=>l.getSelection().bind(v=>Uk(m,v.finish,v.foffset,h).fold(()=>G.some(hr(v.finish,v.foffset)),S=>{const T=l.fromSitus(S),R=Jd.verify(l,v.finish,v.foffset,T.finish,T.foffset,h.failure,m);return Wk(R)})),ny=(l,m,h,v,S,T)=>T===0?G.none():nm(l,m,h,v,S).bind(R=>{const $=l.fromSitus(R),H=Jd.verify(l,h,v,$.finish,$.foffset,S.failure,m);return Jd.cata(H,()=>G.none(),()=>G.some(R),Z=>no(h,Z)&&v===0?Xt(l,h,v,Df,S):ny(l,m,Z,0,S,T-1),Z=>no(h,Z)&&v===zi(Z)?Xt(l,h,v,nl,S):ny(l,m,Z,zi(Z),S,T-1))}),Xt=(l,m,h,v,S)=>Zw(l,m,h).bind(T=>Vl(l,S,v(T,ty.getJumpSize()))),Vl=(l,m,h)=>{const v=xC().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):G.none()},nm=(l,m,h,v,S)=>Zw(l,h,v).bind(T=>Vl(l,S,T)),X1=(l,m,h)=>Gw(l,m,h).bind(v=>ny(l,m,v.element,v.offset,h,qk).map(l.fromSitus)),Kk=(l,m)=>Ww(l,h=>pl(h).exists(v=>no(v,m))),om=(l,m,h,v,S)=>ws(v,"td,th",m).bind(T=>ws(T,"table",m).bind(R=>Kk(S,R)?X1(l,m,h).bind($=>ws($.finish,"td,th",m).map(H=>({start:T,finish:H,range:$}))):G.none())),J1=(l,m,h,v,S,T)=>T(v,m).orThunk(()=>om(l,m,h,v,S).map(R=>{const $=R.range;return Qi.create(G.some(Zu($.start,$.soffset,$.finish,$.foffset)),!0)})),oy=(l,m)=>ws(l,"tr",m).bind(h=>ws(h,"table",m).bind(v=>{const S=$c(v,"tr");return no(h,S[0])?zk(v,T=>$g(T).isSome(),m).map(T=>{const R=zi(T);return Qi.create(G.some(Zu(T,R,T,R)),!0)}):G.none()})),sy=(l,m)=>ws(l,"tr",m).bind(h=>ws(h,"table",m).bind(v=>{const S=$c(v,"tr");return no(h,S[S.length-1])?Uw(v,T=>Ui(T).isSome(),m).map(T=>Qi.create(G.some(Zu(T,0,T,0)),!0)):G.none()})),ry=(l,m,h,v,S,T,R)=>om(l,h,v,S,T).bind($=>Tf(m,h,$.start,$.finish,R)),qw=l=>{let m=l;return{get:()=>m,set:S=>{m=S}}},Yk=l=>{const m=qw(G.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(G.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:$=>{h(),m.set(G.some($))}}},Gu=()=>{const l=Yk(mt);return{...l,on:h=>l.get().each(h)}},Mf=(l,m)=>ws(l,"td,th",m),mD=l=>Pc(l).exists(nf),Xk=(l,m,h,v)=>{const S=Gu(),T=S.clear,R=ee=>{S.on(Se=>{v.clearBeforeUpdate(m),Mf(ee.target,h).each(ze=>{Ug(Se,ze,h).each(Fe=>{const he=Fe.boxes.getOr([]);if(he.length===1){const He=he[0],ge=Jv(He)==="false",Xe=Go(Nd(ee.target),He,no);ge&&Xe&&(v.selectRange(m,he,He,He),l.selectContents(He))}else he.length>1&&(v.selectRange(m,he,Fe.start,Fe.finish),l.selectContents(ze))})})})};return{clearstate:T,mousedown:ee=>{v.clear(m),Mf(ee.target,h).filter(mD).each(S.set)},mouseover:ee=>{R(ee)},mouseup:ee=>{R(ee),T()}}},Q1={traverse:Nm,gather:zw,relative:or.before,retry:ty.tryDown,failure:Jd.failedDown},eb={traverse:kg,gather:Ei,relative:or.before,retry:ty.tryUp,failure:Jd.failedUp},zl=l=>m=>m===l,tb=zl(38),sm=zl(40),Ul=l=>l>=37&&l<=40,Kw={isBackward:zl(37),isForward:zl(39)},yh={isBackward:zl(39),isForward:zl(37)},ay=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Cl(h,v)},Jk=(l,m,h)=>{const S=(h!==void 0?h.dom:document).defaultView;S&&S.scrollBy(l,m)},ol=Yi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Yw=l=>ol.exact(l.start,l.soffset,l.finish,l.foffset),Qk=l=>l.match({domRange:m=>te.fromDom(m.startContainer),relative:(m,h)=>or.getStart(m),exact:(m,h,v,S)=>m}),Xw=ol.domRange,cy=ol.relative,Bf=ol.exact,iy=l=>{const m=Qk(l);return _s(m)},e_=Sf.create,Nf={domRange:Xw,relative:cy,exact:Bf,exactFromRange:Yw,getWin:iy,range:e_},Jw=(l,m,h)=>{var v,S;return G.from((S=(v=l.dom).caretPositionFromPoint)===null||S===void 0?void 0:S.call(v,m,h)).bind(T=>{if(T.offsetNode===null)return G.none();const R=l.dom.createRange();return R.setStart(T.offsetNode,T.offset),R.collapse(),G.some(R)})},Ve=(l,m,h)=>{var v,S;return G.from((S=(v=l.dom).caretRangeFromPoint)===null||S===void 0?void 0:S.call(v,m,h))},ts=(()=>document.caretPositionFromPoint?Jw:document.caretRangeFromPoint?Ve:G.none)(),Pf=(l,m,h)=>{const v=te.fromDom(l.document);return ts(v,m,h).map(S=>Sf.create(te.fromDom(S.startContainer),S.startOffset,te.fromDom(S.endContainer),S.endOffset))},_o=(l,m)=>{const h=ro(l);return h==="input"?or.after(l):Fo(["br","img"],h)?m===0?or.before(l):or.after(l):or.on(l,m)},Cc=(l,m)=>{const h=l.fold(or.before,_o,or.after),v=m.fold(or.before,_o,or.after);return Nf.relative(h,v)},Ch=(l,m,h,v)=>{const S=_o(l,m),T=_o(h,v);return Nf.relative(S,T)},$f=(l,m,h,v)=>{const T=Tg(l).dom.createRange();return T.setStart(l.dom,m),T.setEnd(h.dom,v),T},ly=(l,m,h,v)=>{const S=$f(l,m,h,v),T=no(l,h)&&m===v;return S.collapsed&&!T},nb=l=>G.from(l.getSelection()),ki=(l,m)=>{nb(l).each(h=>{h.removeAllRanges(),h.addRange(m)})},ob=(l,m,h,v,S)=>{const T=G1(l,m,h,v,S);ki(l,T)},t_=(l,m,h,v,S,T)=>{m.collapse(h.dom,v),m.extend(S.dom,T)},Ga=(l,m)=>Iw(l,m).match({ltr:(h,v,S,T)=>{ob(l,h,v,S,T)},rtl:(h,v,S,T)=>{nb(l).each(R=>{if(R.setBaseAndExtent)R.setBaseAndExtent(h.dom,v,S.dom,T);else if(R.extend)try{t_(l,R,h,v,S,T)}catch{ob(l,S,T,h,v)}else ob(l,S,T,h,v)})}}),hs=(l,m,h,v,S)=>{const T=Ch(m,h,v,S);Ga(l,T)},uy=(l,m,h)=>{const v=Cc(m,h);Ga(l,v)},sb=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return G.some(Sf.create(te.fromDom(m.startContainer),m.startOffset,te.fromDom(h.endContainer),h.endOffset))}else return G.none()},rm=l=>{if(l.anchorNode===null||l.focusNode===null)return sb(l);{const m=te.fromDom(l.anchorNode),h=te.fromDom(l.focusNode);return ly(m,l.anchorOffset,h,l.focusOffset)?G.some(Sf.create(m,l.anchorOffset,h,l.focusOffset)):sb(l)}},Ff=(l,m,h=!0)=>{const S=(h?Z1:fh)(l,m);ki(l,S)},wh=l=>nb(l).filter(m=>m.rangeCount>0).bind(rm),rb=l=>wh(l).map(m=>Nf.exact(m.start,m.soffset,m.finish,m.foffset)),ab=(l,m)=>{const h=xi(l,m);return Ik(h)},cb=(l,m,h)=>Pf(l,m,h),Qw=l=>{nb(l).each(m=>m.removeAllRanges())},If=l=>({elementFromPoint:(ge,Xe)=>te.fromPoint(te.fromDom(l.document),ge,Xe),getRect:ge=>ge.dom.getBoundingClientRect(),getRangedRect:(ge,Xe,Ct,It)=>{const Un=Nf.exact(ge,Xe,Ct,It);return ab(l,Un)},getSelection:()=>rb(l).map(ge=>xf(l,ge)),fromSitus:ge=>{const Xe=Nf.relative(ge.start,ge.finish);return xf(l,Xe)},situsFromPoint:(ge,Xe)=>cb(l,ge,Xe).map(Ct=>Lw.create(Ct.start,Ct.soffset,Ct.finish,Ct.foffset)),clearSelection:()=>{Qw(l)},collapseSelection:(ge=!1)=>{rb(l).each(Xe=>Xe.fold(Ct=>Ct.collapse(ge),(Ct,It)=>{const Un=ge?Ct:It;uy(l,Un,Un)},(Ct,It,Un,Ms)=>{const Oo=ge?Ct:Un,ka=ge?It:Ms;hs(l,Oo,ka,Oo,ka)}))},setSelection:ge=>{hs(l,ge.start,ge.soffset,ge.finish,ge.foffset)},setRelativeSelection:(ge,Xe)=>{uy(l,ge,Xe)},selectNode:ge=>{Ff(l,ge,!1)},selectContents:ge=>{Ff(l,ge)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>ay(te.fromDom(l.document)).top,scrollBy:(ge,Xe)=>{Jk(ge,Xe,te.fromDom(l.document))}}),Wl=(l,m)=>({rows:l,cols:m}),eS=(l,m,h,v)=>{const S=If(l),T=Xk(S,m,h,v);return{clearstate:T.clearstate,mousedown:T.mousedown,mouseover:T.mouseover,mouseup:T.mouseup}},dy=l=>Cs(l,kt).exists(nf),ib=(l,m)=>dy(l)||dy(m),tS=(l,m,h,v)=>{const S=If(l),T=()=>(v.clear(m),G.none());return{keydown:(H,Z,ee,Se,ze,Fe)=>{const he=H.raw,He=he.which,ge=he.shiftKey===!0;return Fd(m,v.selectedSelector).fold(()=>(Ul(He)&&!ge&&v.clearBeforeUpdate(m),Ul(He)&&ge&&!ib(Z,Se)?G.none:sm(He)&&ge?On(ry,S,m,h,Q1,Se,Z,v.selectRange):tb(He)&&ge?On(ry,S,m,h,eb,Se,Z,v.selectRange):sm(He)?On(J1,S,h,Q1,Se,Z,sy):tb(He)?On(J1,S,h,eb,Se,Z,oy):G.none),Ct=>{const It=Un=>()=>Er(Un,Oo=>Z0(Oo.rows,Oo.cols,m,Ct,v)).fold(()=>HC(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Oo=>{const ka=sm(He)||Fe.isForward(He)?or.after:or.before;return S.setRelativeSelection(or.on(Oo.first,0),ka(Oo.table)),v.clear(m),Qi.create(G.none(),!0)}),Oo=>G.some(Qi.create(G.none(),!0)));return Ul(He)&&ge&&!ib(Z,Se)?G.none:sm(He)&&ge?It([Wl(1,0)]):tb(He)&&ge?It([Wl(-1,0)]):Fe.isBackward(He)&&ge?It([Wl(0,-1),Wl(-1,0)]):Fe.isForward(He)&&ge?It([Wl(0,1),Wl(1,0)]):Ul(He)&&!ge?T:G.none})()},keyup:(H,Z,ee,Se,ze)=>Fd(m,v.selectedSelector).fold(()=>{const Fe=H.raw,he=Fe.which;return Fe.shiftKey===!0&&Ul(he)&&ib(Z,Se)?Ef(m,h,Z,ee,Se,ze,v.selectRange):G.none()},G.none)}},Sh=(l,m,h,v)=>{const S=If(l);return(T,R)=>{v.clearBeforeUpdate(m),Ug(T,R,h).each($=>{const H=$.boxes.getOr([]);v.selectRange(m,H,$.start,$.finish),S.selectContents(R),S.collapseSelection()})}},xh=(l,m)=>{const h=bu(l,m);return h===void 0||h===""?[]:h.split(" ")},am=(l,m,h)=>{const S=xh(l,m).concat([h]);return as(l,m,S.join(" ")),!0},qu=(l,m,h)=>{const v=Lo(xh(l,m),S=>S!==h);return v.length>0?as(l,m,v.join(" ")):Vo(l,m),!1},Es=l=>l.dom.classList!==void 0,jc=l=>xh(l,"class"),wc=(l,m)=>am(l,"class",m),lb=(l,m)=>qu(l,"class",m),Gc=(l,m)=>{Es(l)?l.dom.classList.add(m):wc(l,m)},n_=l=>{(Es(l)?l.dom.classList:jc(l)).length===0&&Vo(l,"class")},ub=(l,m)=>{Es(l)?l.dom.classList.remove(m):lb(l,m),n_(l)},my=(l,m)=>Es(l)&&l.dom.classList.contains(m),fy=(l,m)=>{Ee(m,h=>{ub(l,h)})},nS=l=>m=>{Gc(m,l)},cm=l=>m=>{fy(m,l)},gy={byClass:l=>{const m=nS(l.selected),h=cm([l.selected,l.lastSelected,l.firstSelected]),v=T=>{const R=$c(T,l.selectedSelector);Ee(R,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(T,R,$,H)=>{v(T),Ee(R,m),Gc($,l.firstSelected),Gc(H,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=H=>{Vo(H,l.selected),Vo(H,l.firstSelected),Vo(H,l.lastSelected)},S=H=>{as(H,l.selected,"1")},T=H=>{R(H),h()},R=H=>{const Z=$c(H,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ee(Z,v)};return{clearBeforeUpdate:R,clear:T,selectRange:(H,Z,ee,Se)=>{T(H),Ee(Z,S),as(ee,l.firstSelected,"1"),as(Se,l.lastSelected,"1"),m(Z,ee,Se)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},hy=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},Rn=()=>({tag:"none"}),Ku=l=>({tag:"multiple",elements:l}),sS=l=>({tag:"single",element:l}),rS=(l,m,h)=>({get:()=>$T(l(),h).fold(()=>m().fold(Rn,sS),Ku)}),aS=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=$u(h);return rs(v,S=>{const T=S.cells.slice(0,m[m.length-1].column+1);return Dt(T,R=>R.element)})},py=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=$u(h);return rs(v,S=>{const T=S.cells.slice(m[0].column+m[0].colspan-1,S.cells.length);return Dt(T,R=>R.element)})},cS=(l,m,h)=>{const v=Gt.fromTable(l);return Ml(v,m).map(T=>{const R=Rl(v,h,!1),{rows:$}=Ks(R),H=aS($,T),Z=py($,T);return{upOrLeftCells:H,downOrRightCells:Z}})},by=(l,m,h,v,S,T,R)=>({target:l,x:m,y:h,stop:v,prevent:S,kill:T,raw:R}),vy=l=>{const m=te.fromDom(gn(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),S=gl(v,h);return by(m,l.clientX,l.clientY,h,v,S,l)},iS=(l,m)=>h=>{l(h)&&m(vy(h))},yy=(l,m,h,v,S)=>{const T=iS(h,v);return l.dom.addEventListener(m,T,S),{unbind:On(db,l,m,T,S)}},s_=(l,m,h,v)=>yy(l,m,h,v,!1),db=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},r_=Ce,Yu=(l,m,h)=>s_(l,m,r_,h),Eh=vy,Cy=l=>!my(te.fromDom(l.target),"ephox-snooker-resizer-bar"),a_=(l,m)=>{const h=rS(()=>te.fromDom(l.getBody()),()=>jg(_l(l),kl(l)),Vc.selectedSelector),v=(H,Z,ee)=>{Yr(Z).each(ze=>{const Fe=$C(l),he=Fg(mt,te.fromDom(l.getDoc()),Fe),He=qi(l),ge=cS(ze,{selection:He},he);Kn(l,H,Z,ee,ge)})},S=()=>P1(l),T=gy.byAttr(Vc,v,S);return l.on("init",H=>{const Z=l.getWin(),ee=Pd(l),Se=kl(l),ze=()=>{const _n=l.selection,yr=te.fromDom(_n.getStart()),Lr=te.fromDom(_n.getEnd());fr(Yr,[yr,Lr]).fold(()=>T.clear(ee),mt)},Fe=eS(Z,ee,Se,T),he=tS(Z,ee,Se,T),He=Sh(Z,ee,Se,T),ge=_n=>_n.raw.shiftKey===!0;l.on("TableSelectorChange",_n=>He(_n.start,_n.finish));const Xe=(_n,yr)=>{ge(_n)&&(yr.kill&&_n.kill(),yr.selection.each(Lr=>{const xc=Nf.relative(Lr.start,Lr.finish),qa=xi(Z,xc);l.selection.setRng(qa)}))},Ct=_n=>{const yr=Eh(_n);if(yr.raw.shiftKey&&Ul(yr.raw.which)){const Lr=l.selection.getRng(),xc=te.fromDom(Lr.startContainer),qa=te.fromDom(Lr.endContainer);he.keyup(yr,xc,Lr.startOffset,qa,Lr.endOffset).each(Uf=>{Xe(yr,Uf)})}},It=_n=>{const yr=Eh(_n);m.hide();const Lr=l.selection.getRng(),xc=te.fromDom(Lr.startContainer),qa=te.fromDom(Lr.endContainer),Uf=Hv(Kw,yh)(te.fromDom(l.selection.getStart()));he.keydown(yr,xc,Lr.startOffset,qa,Lr.endOffset,Uf).each(Hr=>{Xe(yr,Hr)}),m.show()},Un=_n=>_n.button===0,Ms=_n=>_n.buttons===void 0?!0:(_n.buttons&1)!==0,Oo=_n=>{Fe.clearstate()},ka=_n=>{Un(_n)&&Cy(_n)&&Fe.mousedown(Eh(_n))},Oi=_n=>{Ms(_n)&&Cy(_n)&&Fe.mouseover(Eh(_n))},Rh=_n=>{Un(_n)&&Cy(_n)&&Fe.mouseup(Eh(_n))},zf=(()=>{const _n=qw(te.fromDom(ee)),yr=qw(0);return{touchEnd:xc=>{const qa=te.fromDom(xc.target);if(ua("td")(qa)||ua("th")(qa)){const Uf=_n.get(),Hr=yr.get();no(Uf,qa)&&xc.timeStamp-Hr<300&&(xc.preventDefault(),He(qa,qa))}_n.set(qa),yr.set(xc.timeStamp)}}})();l.on("dragstart",Oo),l.on("mousedown",ka),l.on("mouseover",Oi),l.on("mouseup",Rh),l.on("touchend",zf.touchEnd),l.on("keyup",Ct),l.on("keydown",It),l.on("NodeChange",ze)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Vc.firstSelected),l.serializer.addTempAttr(Vc.lastSelected)}),{getSelectedCells:()=>hy(h.get(),K([]),H=>Dt(H,Z=>Z.dom),H=>[H.dom]),clearSelectedCells:H=>T.clear(te.fromDom(H))}},Zo=l=>{let m=[];return{bind:T=>{if(T===void 0)throw new Error("Event bind error: undefined handler");m.push(T)},unbind:T=>{m=Lo(m,R=>R!==T)},trigger:(...T)=>{const R={};Ee(l,($,H)=>{R[$]=T[H]}),Ee(m,$=>{$(R)})}}},ns=l=>{const m=yp(l,v=>({bind:v.bind,unbind:v.unbind})),h=yp(l,v=>v.trigger);return{registry:m,trigger:h}},im=(l,m)=>{let h=null;const v=()=>{aC(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...T)=>{v(),h=setTimeout(()=>{h=null,l.apply(null,T)},m)}}},mb=l=>l.slice(0).sort(),Ke=(l,m)=>{throw new Error("All required keys ("+mb(l).join(", ")+") were not specified. Specified keys were: "+mb(m).join(", ")+".")},lm=l=>{throw new Error("Unsupported keys for object: "+mb(l).join(", "))},Kt=(l,m)=>{if(!Bc(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ee(m,h=>{if(!xg(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},lS=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+mb(l).join(", ")+") were not.")},Th=l=>{const m=mb(l);N(m,(v,S)=>S<m.length-1&&v===m[S+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},kh=(l,m)=>c_(l,m,{validate:Ni,label:"function"}),c_=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Kt("required",m),Th(m),v=>{const S=ft(v);eo(m,$=>Fo(S,$))||Ke(m,S),l(m,S);const R=Lo(m,$=>!h.validate(v[$],$));return R.length>0&&lS(R,h.label),v}},uS=(l,m)=>{const h=Lo(m,v=>!Fo(l,v));h.length>0&&lm(h)},wy=l=>kh(uS,l),i_=wy(["compare","extract","mutate","sink"]),dS=wy(["element","start","stop","destroy"]),Sy=wy(["forceDrop","drop","move","delayDrop"]),um=()=>{let l=G.none();const m=()=>{l=G.none()},h=(T,R)=>{const $=l.map(H=>T.compare(H,R));return l=G.some(R),$},v=(T,R)=>{R.extract(T).each(H=>{h(R,H).each(ee=>{S.trigger.move(ee)})})},S=ns({move:Zo(["info"])});return{onEvent:v,reset:m,events:S.registry}},fb=()=>{const l=ns({move:Zo(["info"])});return{onEvent:mt,reset:mt,events:l.registry}},mS=()=>{const l=fb(),m=um();let h=l;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=l},isOn:()=>h===m,onEvent:($,H)=>{h.onEvent($,H)},events:m.events}},fD=(l,m,h)=>{let v=!1;const S=ns({start:Zo([]),stop:Zo([])}),T=mS(),R=()=>{he.stop(),T.isOn()&&(T.off(),S.trigger.stop())},$=im(R,200),H=ge=>{he.start(ge),T.on(),S.trigger.start()},Z=ge=>{$.cancel(),T.onEvent(ge,m)};T.events.move.bind(ge=>{m.mutate(l,ge.info)});const ee=()=>{v=!0},Se=()=>{v=!1},ze=()=>v,Fe=ge=>(...Xe)=>{v&&ge.apply(null,Xe)},he=m.sink(Sy({forceDrop:R,drop:Fe(R),move:Fe(Z),delayDrop:Fe($.throttle)}),h),He=()=>{he.destroy()};return{element:he.element,go:H,on:ee,off:Se,isActive:ze,destroy:He,events:S.registry}},fS=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},gS=fS("ephox-dragster").resolve,l_=l=>{const m={layerClass:gS("blocker"),...l},h=te.fromTag("div");return as(h,"role","presentation"),Ar(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Gc(h,gS("blocker")),Gc(h,m.layerClass),{element:K(h),destroy:()=>{js(h)}}};var d_=i_({compare:(l,m)=>Cl(m.left-l.left,m.top-l.top),extract:l=>G.some(Cl(l.x,l.y)),sink:(l,m)=>{const h=l_(m),v=Yu(h.element(),"mousedown",l.forceDrop),S=Yu(h.element(),"mouseup",l.drop),T=Yu(h.element(),"mousemove",l.move),R=Yu(h.element(),"mouseout",l.delayDrop),$=()=>{h.destroy(),S.unbind(),T.unbind(),R.unbind(),v.unbind()},H=ee=>{Mo(ee,h.element())},Z=()=>{js(h.element())};return dS({element:h.element,start:H,stop:Z,destroy:$})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const _h=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:d_;return fD(l,v,m)},gb=fS("ephox-snooker").resolve,m_=()=>{const l=ns({drag:Zo(["xDelta","yDelta"])});return{mutate:(h,v)=>{l.trigger.drag(h,v)},events:l.registry}},Zl=()=>{const l=ns({drag:Zo(["xDelta","yDelta","target"])});let m=G.none();const h=m_();return h.events.drag.bind(T=>{m.each(R=>{l.trigger.drag(T.xDelta,T.yDelta,R)})}),{assign:T=>{m=G.some(T)},get:()=>m,mutate:h.mutate,events:l.registry}},Lf=(l,m,h,v,S)=>{const T=te.fromTag("div");return Ar(T,{position:"absolute",left:m-v/2+"px",top:h+"px",height:S+"px",width:v+"px"}),$i(T,{"data-column":l,role:"presentation"}),T},f_=(l,m,h,v,S)=>{const T=te.fromTag("div");return Ar(T,{position:"absolute",left:m+"px",top:h-S/2+"px",height:S+"px",width:v+"px"}),$i(T,{"data-row":l,role:"presentation"}),T},xy=gb("resizer-bar"),Ey=gb("resizer-rows"),Ty=gb("resizer-cols"),ky=7,g_=(l,m)=>rs(l.all,(h,v)=>m(h.element)?[v]:[]),h_=(l,m)=>{const h=[];return Eo(l.grid.columns,v=>{Gt.getColumnAt(l,v).map(T=>T.element).forall(m)&&h.push(v)}),Lo(h,v=>{const S=Gt.filterItems(l,T=>T.column===v);return eo(S,T=>m(T.element))})},jl=l=>{const m=$c(l.parent(),"."+xy);Ee(m,js)},Oh=(l,m,h)=>{const v=l.origin();Ee(m,S=>{S.each(T=>{const R=h(v,T);Gc(R,xy),Mo(l.parent(),R)})})},p_=(l,m,h,v)=>{Oh(l,m,(S,T)=>{const R=Lf(T.col,T.x-S.left,h.top-S.top,ky,v);return Gc(R,Ty),R})},ln=(l,m,h,v)=>{Oh(l,m,(S,T)=>{const R=f_(T.row,h.left-S.left,T.y-S.top,v,ky);return Gc(R,Ey),R})},b_=(l,m,h,v,S)=>{const T=Ad(h),R=m.isResizable,$=v.length>0?uc.positions(v,h):[],H=$.length>0?g_(l,R):[],Z=Lo($,(Fe,he)=>Le(H,He=>he===He));ln(m,Z,T,EC(h));const ee=S.length>0?mc.positions(S,h):[],Se=ee.length>0?h_(l,R):[],ze=Lo(ee,(Fe,he)=>Le(Se,He=>he===He));p_(m,ze,T,Od(h))},qc=(l,m)=>{if(jl(l),l.isResizable(m)){const h=Gt.fromTable(m),v=ET(h),S=Iv(h);b_(h,l,m,v,S)}},_i=(l,m)=>{const h=$c(l.parent(),"."+xy);Ee(h,m)},hb=l=>{_i(l,m=>{jn(m,"display","none")})},sa=l=>{_i(l,m=>{jn(m,"display","block")})},Hf=l=>my(l,Ey),Ah=l=>my(l,Ty),Dh=gb("resizer-bar-dragging"),Vf=l=>{const m=Zl(),h=_h(m,{});let v=G.none();const S=(he,He)=>G.from(bu(he,He));m.events.drag.bind(he=>{S(he.target,"data-row").each(He=>{const ge=Ko(he.target,"top");jn(he.target,"top",ge+he.yDelta+"px")}),S(he.target,"data-column").each(He=>{const ge=Ko(he.target,"left");jn(he.target,"left",ge+he.xDelta+"px")})});const T=(he,He)=>{const ge=Ko(he,He),Xe=qr(he,"data-initial-"+He,0);return ge-Xe};h.events.stop.bind(()=>{m.get().each(he=>{v.each(He=>{S(he,"data-row").each(ge=>{const Xe=T(he,"top");Vo(he,"data-initial-top"),Fe.trigger.adjustHeight(He,Xe,parseInt(ge,10))}),S(he,"data-column").each(ge=>{const Xe=T(he,"left");Vo(he,"data-initial-left"),Fe.trigger.adjustWidth(He,Xe,parseInt(ge,10))}),qc(l,He)})})});const R=(he,He)=>{Fe.trigger.startAdjust(),m.assign(he),as(he,"data-initial-"+He,Ko(he,He)),Gc(he,Dh),jn(he,"opacity","0.2"),h.go(l.parent())},$=Yu(l.parent(),"mousedown",he=>{Hf(he.target)&&R(he.target,"top"),Ah(he.target)&&R(he.target,"left")}),H=he=>no(he,l.view()),Z=he=>ws(he,"table",H).filter(nf),ee=Yu(l.view(),"mouseover",he=>{Z(he.target).fold(()=>{jo(he.target)&&jl(l)},He=>{h.isActive()&&(v=G.some(He),qc(l,He))})}),Se=()=>{$.unbind(),ee.unbind(),h.destroy(),jl(l)},ze=he=>{qc(l,he)},Fe=ns({adjustHeight:Zo(["table","delta","row"]),adjustWidth:Zo(["table","delta","column"]),startAdjust:Zo([])});return{destroy:Se,refresh:ze,on:h.on,off:h.off,hideBars:On(hb,l),showBars:On(sa,l),events:Fe.registry}},pS={create:(l,m,h)=>{const v=uc,S=mc,T=Vf(l),R=ns({beforeResize:Zo(["table","type"]),afterResize:Zo(["table","type"]),startDrag:Zo([])});return T.events.adjustHeight.bind($=>{const H=$.table;R.trigger.beforeResize(H,"row");const Z=v.delta($.delta,H);C0(H,Z,$.row,v),R.trigger.afterResize(H,"row")}),T.events.startAdjust.bind($=>{R.trigger.startDrag()}),T.events.adjustWidth.bind($=>{const H=$.table;R.trigger.beforeResize(H,"col");const Z=S.delta($.delta,H),ee=h(H);y0(H,Z,$.column,m,ee),R.trigger.afterResize(H,"col")}),{on:T.on,off:T.off,refreshBars:T.refresh,hideBars:T.hideBars,showBars:T.showBars,destroy:T.destroy,events:R.registry}}},Sc={only:(l,m)=>{const h=Ep(l)?Zs(l):l;return{parent:K(h),view:K(l),origin:K(Cl(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>Ad(m);return{parent:K(m),view:K(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:K(m),view:K(l),origin:K(Cl(0,0)),isResizable:h})},Gl=()=>{const l=te.fromTag("div");return Ar(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Mo(mC(),l),l},pb=(l,m)=>l.inline?Sc.body(te.fromDom(l.getBody()),Gl(),m):Sc.only(te.fromDom(l.getDoc()),m),Xu=(l,m)=>{l.inline&&js(m.parent())},Wt=l=>ca(l)&&l.nodeName==="TABLE",bS="bar-",vS=l=>bu(l,"data-mce-resize")!=="false",_y=l=>{const m=Gt.fromTable(l);Gt.hasColumns(m)||Ee(Su(l),h=>{const v=Sd(h,"width");jn(h,"width",v),Vo(h,"width")})},yS=l=>{const m=Gu(),h=Gu(),v=Gu();let S,T;const R=he=>Cw(l,he),$=()=>Co(l)?g1():f1(),H=he=>i0(he).columns,Z=(he,He,ge)=>{const Xe=Gr(He,"e");if(T===""&&ch(he),ge!==S&&T!==""){jn(he,"width",T);const Ct=$(),It=R(he),Un=Co(l)||Xe?H(he)-1:0;y0(he,ge-S,Un,Ct,It)}else if(Hg(T)){const Ct=parseFloat(T.replace("%","")),It=ge*Ct/S;jn(he,"width",It+"%")}t1(T)&&_y(he)},ee=()=>{h.on(he=>{he.destroy()}),v.on(he=>{Xu(l,he)})};return l.on("init",()=>{const he=pb(l,vS);if(v.set(he),Ig(l)&&Wa(l)){const He=$(),ge=pS.create(he,He,R);ge.on(),ge.events.startDrag.bind(Xe=>{m.set(l.selection.getRng())}),ge.events.beforeResize.bind(Xe=>{const Ct=Xe.table.dom;Fr(l,Ct,ji(Ct),Qv(Ct),bS+Xe.type)}),ge.events.afterResize.bind(Xe=>{const Ct=Xe.table,It=Ct.dom;na(Ct),m.on(Un=>{l.selection.setRng(Un),l.focus()}),jd(l,It,ji(It),Qv(It),bS+Xe.type),l.undoManager.add()}),h.set(ge)}}),l.on("ObjectResizeStart",he=>{const He=he.target;if(Wt(He)){const ge=te.fromDom(He);Ee(l.dom.select(".mce-clonedresizable"),Xe=>{l.dom.addClass(Xe,"mce-"+Yv(l)+"-columns")}),!Ew(ge)&&pi(l)?F0(ge):!V1(ge)&&ef(l)&&ch(ge),Fl(ge)&&$m(he.origin,bS)&&ch(ge),S=he.width,T=bi(l)?"":e1(l,He).getOr("")}}),l.on("ObjectResized",he=>{const He=he.target;if(Wt(He)){const ge=te.fromDom(He),Xe=he.origin;$m(Xe,"corner-")&&Z(ge,Xe,he.width),na(ge),$r(l,ge.dom,sh)}}),l.on("SwitchMode",()=>{h.on(he=>{l.mode.isReadOnly()?he.hideBars():he.showBars()})}),l.on("dragstart dragend",he=>{h.on(He=>{he.type==="dragstart"?(He.hideBars(),He.off()):(He.on(),He.showBars())})}),l.on("remove",()=>{ee()}),{refresh:he=>{h.on(He=>He.refreshBars(te.fromDom(he)))},hide:()=>{h.on(he=>he.hideBars())},show:()=>{h.on(he=>he.showBars())}}},dm=l=>{pc(l);const m=yS(l),h=a_(l,m),v=fk(l,m,h);return Kd(l,v),Pk(l,v),lf(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},mm=l=>({table:dm(l)});var v_=()=>{iT.add("dom",mm)};v_()})();
